
<!doctype html>
<html lang="zh-TW" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="三個月的筆記">
      
      
        <meta name="author" content="Three Month">
      
      
        <link rel="canonical" href="https://note.threemonth03.com/Coding-Exercise/2023-06-15-HDLBits/">
      
      
        <link rel="prev" href="../../Subject/CA/2023-09-21-CA/">
      
      
        <link rel="next" href="../2023-07-30-nowcoder/">
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.5.1, mkdocs-material-9.1.21">
    
    
      
        <title>HDLBits Tutorial - ThreeMonth's Note</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.eebd395e.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.ecc896b0.min.css">
      
      
  
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
  
  <style>:root{--md-admonition-icon--note:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M1 7.775V2.75C1 1.784 1.784 1 2.75 1h5.025c.464 0 .91.184 1.238.513l6.25 6.25a1.75 1.75 0 0 1 0 2.474l-5.026 5.026a1.75 1.75 0 0 1-2.474 0l-6.25-6.25A1.752 1.752 0 0 1 1 7.775Zm1.5 0c0 .066.026.13.073.177l6.25 6.25a.25.25 0 0 0 .354 0l5.025-5.025a.25.25 0 0 0 0-.354l-6.25-6.25a.25.25 0 0 0-.177-.073H2.75a.25.25 0 0 0-.25.25ZM6 5a1 1 0 1 1 0 2 1 1 0 0 1 0-2Z"/></svg>');--md-admonition-icon--abstract:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M2.5 1.75v11.5c0 .138.112.25.25.25h3.17a.75.75 0 0 1 0 1.5H2.75A1.75 1.75 0 0 1 1 13.25V1.75C1 .784 1.784 0 2.75 0h8.5C12.216 0 13 .784 13 1.75v7.736a.75.75 0 0 1-1.5 0V1.75a.25.25 0 0 0-.25-.25h-8.5a.25.25 0 0 0-.25.25Zm13.274 9.537v-.001l-4.557 4.45a.75.75 0 0 1-1.055-.008l-1.943-1.95a.75.75 0 0 1 1.062-1.058l1.419 1.425 4.026-3.932a.75.75 0 1 1 1.048 1.074ZM4.75 4h4.5a.75.75 0 0 1 0 1.5h-4.5a.75.75 0 0 1 0-1.5ZM4 7.75A.75.75 0 0 1 4.75 7h2a.75.75 0 0 1 0 1.5h-2A.75.75 0 0 1 4 7.75Z"/></svg>');--md-admonition-icon--info:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8Zm8-6.5a6.5 6.5 0 1 0 0 13 6.5 6.5 0 0 0 0-13ZM6.5 7.75A.75.75 0 0 1 7.25 7h1a.75.75 0 0 1 .75.75v2.75h.25a.75.75 0 0 1 0 1.5h-2a.75.75 0 0 1 0-1.5h.25v-2h-.25a.75.75 0 0 1-.75-.75ZM8 6a1 1 0 1 1 0-2 1 1 0 0 1 0 2Z"/></svg>');--md-admonition-icon--tip:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M3.499.75a.75.75 0 0 1 1.5 0v.996C5.9 2.903 6.793 3.65 7.662 4.376l.24.202c-.036-.694.055-1.422.426-2.163C9.1.873 10.794-.045 12.622.26 14.408.558 16 1.94 16 4.25c0 1.278-.954 2.575-2.44 2.734l.146.508.065.22c.203.701.412 1.455.476 2.226.142 1.707-.4 3.03-1.487 3.898C11.714 14.671 10.27 15 8.75 15h-6a.75.75 0 0 1 0-1.5h1.376a4.484 4.484 0 0 1-.563-1.191 3.835 3.835 0 0 1-.05-2.063 4.647 4.647 0 0 1-2.025-.293.75.75 0 0 1 .525-1.406c1.357.507 2.376-.006 2.698-.318l.009-.01a.747.747 0 0 1 1.06 0 .748.748 0 0 1-.012 1.074c-.912.92-.992 1.835-.768 2.586.221.74.745 1.337 1.196 1.621H8.75c1.343 0 2.398-.296 3.074-.836.635-.507 1.036-1.31.928-2.602-.05-.603-.216-1.224-.422-1.93l-.064-.221c-.12-.407-.246-.84-.353-1.29a2.425 2.425 0 0 1-.507-.441 3.075 3.075 0 0 1-.633-1.248.75.75 0 0 1 1.455-.364c.046.185.144.436.31.627.146.168.353.305.712.305.738 0 1.25-.615 1.25-1.25 0-1.47-.95-2.315-2.123-2.51-1.172-.196-2.227.387-2.706 1.345-.46.92-.27 1.774.019 3.062l.042.19a.884.884 0 0 1 .01.05c.348.443.666.949.94 1.553a.75.75 0 1 1-1.365.62c-.553-1.217-1.32-1.94-2.3-2.768L6.7 5.527c-.814-.68-1.75-1.462-2.692-2.619a3.737 3.737 0 0 0-1.023.88c-.406.495-.663 1.036-.722 1.508.116.122.306.21.591.239.388.038.797-.06 1.032-.19a.75.75 0 0 1 .728 1.31c-.515.287-1.23.439-1.906.373-.682-.067-1.473-.38-1.879-1.193L.75 5.677V5.5c0-.984.48-1.94 1.077-2.664.46-.559 1.05-1.055 1.673-1.353V.75Z"/></svg>');--md-admonition-icon--success:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M13.78 4.22a.75.75 0 0 1 0 1.06l-7.25 7.25a.75.75 0 0 1-1.06 0L2.22 9.28a.751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018L6 10.94l6.72-6.72a.75.75 0 0 1 1.06 0Z"/></svg>');--md-admonition-icon--question:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8Zm8-6.5a6.5 6.5 0 1 0 0 13 6.5 6.5 0 0 0 0-13ZM6.92 6.085h.001a.749.749 0 1 1-1.342-.67c.169-.339.436-.701.849-.977C6.845 4.16 7.369 4 8 4a2.756 2.756 0 0 1 1.637.525c.503.377.863.965.863 1.725 0 .448-.115.83-.329 1.15-.205.307-.47.513-.692.662-.109.072-.22.138-.313.195l-.006.004a6.24 6.24 0 0 0-.26.16.952.952 0 0 0-.276.245.75.75 0 0 1-1.248-.832c.184-.264.42-.489.692-.661.103-.067.207-.132.313-.195l.007-.004c.1-.061.182-.11.258-.161a.969.969 0 0 0 .277-.245C8.96 6.514 9 6.427 9 6.25a.612.612 0 0 0-.262-.525A1.27 1.27 0 0 0 8 5.5c-.369 0-.595.09-.74.187a1.01 1.01 0 0 0-.34.398ZM9 11a1 1 0 1 1-2 0 1 1 0 0 1 2 0Z"/></svg>');--md-admonition-icon--warning:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M6.457 1.047c.659-1.234 2.427-1.234 3.086 0l6.082 11.378A1.75 1.75 0 0 1 14.082 15H1.918a1.75 1.75 0 0 1-1.543-2.575Zm1.763.707a.25.25 0 0 0-.44 0L1.698 13.132a.25.25 0 0 0 .22.368h12.164a.25.25 0 0 0 .22-.368Zm.53 3.996v2.5a.75.75 0 0 1-1.5 0v-2.5a.75.75 0 0 1 1.5 0ZM9 11a1 1 0 1 1-2 0 1 1 0 0 1 2 0Z"/></svg>');--md-admonition-icon--failure:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M2.344 2.343h-.001a8 8 0 0 1 11.314 11.314A8.002 8.002 0 0 1 .234 10.089a8 8 0 0 1 2.11-7.746Zm1.06 10.253a6.5 6.5 0 1 0 9.108-9.275 6.5 6.5 0 0 0-9.108 9.275ZM6.03 4.97 8 6.94l1.97-1.97a.749.749 0 0 1 1.275.326.749.749 0 0 1-.215.734L9.06 8l1.97 1.97a.749.749 0 0 1-.326 1.275.749.749 0 0 1-.734-.215L8 9.06l-1.97 1.97a.749.749 0 0 1-1.275-.326.749.749 0 0 1 .215-.734L6.94 8 4.97 6.03a.751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018Z"/></svg>');--md-admonition-icon--danger:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M9.504.43a1.516 1.516 0 0 1 2.437 1.713L10.415 5.5h2.123c1.57 0 2.346 1.909 1.22 3.004l-7.34 7.142a1.249 1.249 0 0 1-.871.354h-.302a1.25 1.25 0 0 1-1.157-1.723L5.633 10.5H3.462c-1.57 0-2.346-1.909-1.22-3.004L9.503.429Zm1.047 1.074L3.286 8.571A.25.25 0 0 0 3.462 9H6.75a.75.75 0 0 1 .694 1.034l-1.713 4.188 6.982-6.793A.25.25 0 0 0 12.538 7H9.25a.75.75 0 0 1-.683-1.06l2.008-4.418.003-.006a.036.036 0 0 0-.004-.009l-.006-.006-.008-.001c-.003 0-.006.002-.009.004Z"/></svg>');--md-admonition-icon--bug:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M4.72.22a.75.75 0 0 1 1.06 0l1 .999a3.488 3.488 0 0 1 2.441 0l.999-1a.748.748 0 0 1 1.265.332.75.75 0 0 1-.205.729l-.775.776c.616.63.995 1.493.995 2.444v.327c0 .1-.009.197-.025.292.408.14.764.392 1.029.722l1.968-.787a.75.75 0 0 1 .556 1.392L13 7.258V9h2.25a.75.75 0 0 1 0 1.5H13v.5c0 .409-.049.806-.141 1.186l2.17.868a.75.75 0 0 1-.557 1.392l-2.184-.873A4.997 4.997 0 0 1 8 16a4.997 4.997 0 0 1-4.288-2.427l-2.183.873a.75.75 0 0 1-.558-1.392l2.17-.868A5.036 5.036 0 0 1 3 11v-.5H.75a.75.75 0 0 1 0-1.5H3V7.258L.971 6.446a.75.75 0 0 1 .558-1.392l1.967.787c.265-.33.62-.583 1.03-.722a1.677 1.677 0 0 1-.026-.292V4.5c0-.951.38-1.814.995-2.444L4.72 1.28a.75.75 0 0 1 0-1.06Zm.53 6.28a.75.75 0 0 0-.75.75V11a3.5 3.5 0 1 0 7 0V7.25a.75.75 0 0 0-.75-.75ZM6.173 5h3.654A.172.172 0 0 0 10 4.827V4.5a2 2 0 1 0-4 0v.327c0 .096.077.173.173.173Z"/></svg>');--md-admonition-icon--example:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M5 5.782V2.5h-.25a.75.75 0 0 1 0-1.5h6.5a.75.75 0 0 1 0 1.5H11v3.282l3.666 5.76C15.619 13.04 14.543 15 12.767 15H3.233c-1.776 0-2.852-1.96-1.899-3.458Zm-2.4 6.565a.75.75 0 0 0 .633 1.153h9.534a.75.75 0 0 0 .633-1.153L12.225 10.5h-8.45ZM9.5 2.5h-3V6c0 .143-.04.283-.117.403L4.73 9h6.54L9.617 6.403A.746.746 0 0 1 9.5 6Z"/></svg>');--md-admonition-icon--quote:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M1.75 2.5h10.5a.75.75 0 0 1 0 1.5H1.75a.75.75 0 0 1 0-1.5Zm4 5h8.5a.75.75 0 0 1 0 1.5h-8.5a.75.75 0 0 1 0-1.5Zm0 5h8.5a.75.75 0 0 1 0 1.5h-8.5a.75.75 0 0 1 0-1.5ZM2.5 7.75v6a.75.75 0 0 1-1.5 0v-6a.75.75 0 0 1 1.5 0Z"/></svg>');}</style>


    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="blue" data-md-color-accent="deep-purple">
  
    
    
      <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#getting-started" class="md-skip">
          跳轉到
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="頁首">
    <a href="../.." title="ThreeMonth&#39;s Note" class="md-header__button md-logo" aria-label="ThreeMonth's Note" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            ThreeMonth's Note
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              HDLBits Tutorial
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
          
            
            
            
            <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="blue" data-md-color-accent="deep-purple"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
            
              <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_2" hidden>
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3Z"/></svg>
              </label>
            
          
            
            
            
            <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="blue" data-md-color-accent="deep-purple"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_2">
            
              <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 6H7c-3.31 0-6 2.69-6 6s2.69 6 6 6h10c3.31 0 6-2.69 6-6s-2.69-6-6-6zm0 10H7c-2.21 0-4-1.79-4-4s1.79-4 4-4h10c2.21 0 4 1.79 4 4s-1.79 4-4 4zM7 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"/></svg>
              </label>
            
          
        </form>
      
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="搜尋" placeholder="搜尋" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="搜尋">
        
          <a href="javascript:void(0)" class="md-search__icon md-icon" title="分享" aria-label="分享" data-clipboard data-clipboard-text="" data-md-component="search-share" tabindex="-1">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7 0-.24-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91 1.61 0 2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08Z"/></svg>
          </a>
        
        <button type="reset" class="md-search__icon md-icon" title="清除" aria-label="清除" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            正在初始化搜尋引擎
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/ThreeMonth03/note_mkdocs" title="前往倉庫" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    note_mkdocs
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="導覽列" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="ThreeMonth&#39;s Note" class="md-nav__button md-logo" aria-label="ThreeMonth's Note" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    ThreeMonth's Note
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/ThreeMonth03/note_mkdocs" title="前往倉庫" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    note_mkdocs
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        About
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
      
      
        
          
        
          
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
          Subject
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          Subject
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Subject/2023-02-14-fl/" class="md-nav__link">
        Formal Language
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Subject/2023-02-06-c%2B%2B/" class="md-nav__link">
        C++
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Subject/2023-02-05-It/" class="md-nav__link">
        Information Theory and Data Compression
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Subject/2023-09-18-nsd/" class="md-nav__link">
        Numerical Software Development
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Subject/CA/2023-09-21-CA/" class="md-nav__link">
        Computer Architecture
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" checked>
      
      
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
          Coding Exercise
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="true">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          Coding Exercise
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          HDLBits Tutorial
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        HDLBits Tutorial
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="目錄">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      目錄
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#getting-started" class="md-nav__link">
    Getting Started
  </a>
  
    <nav class="md-nav" aria-label="Getting Started">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#getting-started_1" class="md-nav__link">
    Getting Started
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#output-zero" class="md-nav__link">
    Output Zero
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#verilog-language" class="md-nav__link">
    Verilog Language
  </a>
  
    <nav class="md-nav" aria-label="Verilog Language">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#basics" class="md-nav__link">
    Basics
  </a>
  
    <nav class="md-nav" aria-label="Basics">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#simple-wire" class="md-nav__link">
    Simple wire
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#four-wires" class="md-nav__link">
    Four wires
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#inverter" class="md-nav__link">
    Inverter
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#and-gate" class="md-nav__link">
    AND gate
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nor-gate" class="md-nav__link">
    NOR gate
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xnor-gate" class="md-nav__link">
    XNOR gate
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#declaring-wires" class="md-nav__link">
    Declaring wires
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#7458-chip" class="md-nav__link">
    7458 chip
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#vectors" class="md-nav__link">
    Vectors
  </a>
  
    <nav class="md-nav" aria-label="Vectors">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#vectors_1" class="md-nav__link">
    Vectors
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#vectors-in-more-detail" class="md-nav__link">
    Vectors in more detail
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#vector-part-select" class="md-nav__link">
    Vector part select
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#bitwise-operators" class="md-nav__link">
    Bitwise operators
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#four-input-gates" class="md-nav__link">
    Four-input gates
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#vector-concatenation-operator" class="md-nav__link">
    Vector concatenation operator
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#vector-reversal-1" class="md-nav__link">
    Vector reversal 1
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#replication-operator" class="md-nav__link">
    Replication operator
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#more-replication" class="md-nav__link">
    More replication
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#modules-hierarchy" class="md-nav__link">
    Modules: Hierarchy
  </a>
  
    <nav class="md-nav" aria-label="Modules: Hierarchy">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#modules" class="md-nav__link">
    Modules
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#connecting-ports-by-position" class="md-nav__link">
    Connecting ports by position
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#connecting-ports-by-name" class="md-nav__link">
    Connecting ports by name
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#three-modules" class="md-nav__link">
    Three modules
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#modules-and-vectors" class="md-nav__link">
    Modules and vectors
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adder-1" class="md-nav__link">
    Adder 1
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adder-2" class="md-nav__link">
    Adder 2
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#carry-select-adder" class="md-nav__link">
    Carry-select adder
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adder-subtractor" class="md-nav__link">
    Adder-subtractor
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#procedures" class="md-nav__link">
    Procedures
  </a>
  
    <nav class="md-nav" aria-label="Procedures">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#always-blocks-combinational" class="md-nav__link">
    Always blocks (combinational)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#always-blocks-clocked" class="md-nav__link">
    Always blocks (clocked)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#if-statement" class="md-nav__link">
    If statement
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#if-statement-latches" class="md-nav__link">
    If statement latches
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#case-statement" class="md-nav__link">
    Case statement
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#priority-encoder" class="md-nav__link">
    Priority encoder
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#priority-encoder-with-casez" class="md-nav__link">
    Priority encoder with casez
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#avoiding-latches" class="md-nav__link">
    Avoiding latches
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#more-verilog-features" class="md-nav__link">
    More Verilog Features
  </a>
  
    <nav class="md-nav" aria-label="More Verilog Features">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#conditional-ternary-operator" class="md-nav__link">
    Conditional ternary operator
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#reduction-operators" class="md-nav__link">
    Reduction operators
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#reduction-even-wider-gates" class="md-nav__link">
    Reduction: Even wider gates
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#combinational-for-loop-vector-reversal-2" class="md-nav__link">
    Combinational for-loop: Vector reversal 2
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#combinational-for-loop-255-bit-population-count" class="md-nav__link">
    Combinational for-loop: 255-bit population count
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#generate-for-loop-100-bit-binary-adder-2" class="md-nav__link">
    Generate for-loop: 100-bit binary adder 2
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#generate-for-loop-100-digit-bcd-adder" class="md-nav__link">
    Generate for-loop: 100-digit BCD adder
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#circuits" class="md-nav__link">
    Circuits
  </a>
  
    <nav class="md-nav" aria-label="Circuits">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#combinational-logic" class="md-nav__link">
    Combinational Logic
  </a>
  
    <nav class="md-nav" aria-label="Combinational Logic">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#basic-gates" class="md-nav__link">
    Basic Gates
  </a>
  
    <nav class="md-nav" aria-label="Basic Gates">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#wire" class="md-nav__link">
    Wire
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gnd" class="md-nav__link">
    GND
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nor" class="md-nav__link">
    NOR
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#another-gate" class="md-nav__link">
    Another gate
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#two-gates" class="md-nav__link">
    Two gates
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#more-logic-gates" class="md-nav__link">
    More logic gates
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#7420-chip" class="md-nav__link">
    7420 chip
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#truth-tables" class="md-nav__link">
    Truth tables
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#two-bit-equality" class="md-nav__link">
    Two-bit equality
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#simple-circuit-a" class="md-nav__link">
    Simple circuit A
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#simple-circuit-b" class="md-nav__link">
    Simple circuit B
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#combine-circuits-a-and-b" class="md-nav__link">
    Combine circuits A and B
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ring-or-vibrate" class="md-nav__link">
    Ring or vibrate?
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#thermostat" class="md-nav__link">
    Thermostat
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-bit-population-count" class="md-nav__link">
    3-bit population count
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gates-and-vectors" class="md-nav__link">
    Gates and vectors
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#even-longer-vectors" class="md-nav__link">
    Even longer vectors
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#multiplexers" class="md-nav__link">
    Multiplexers
  </a>
  
    <nav class="md-nav" aria-label="Multiplexers">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#2-to-1-multiplexer" class="md-nav__link">
    2-to-1 multiplexer
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-to-1-bus-multiplexer" class="md-nav__link">
    2-to-1 bus multiplexer
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#9-to-1-multiplexer" class="md-nav__link">
    9-to-1 multiplexer
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#256-to-1-multiplexer" class="md-nav__link">
    256-to-1 multiplexer
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#256-to-1-4-bit-multiplexer" class="md-nav__link">
    256-to-1 4-bit multiplexer
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#arithmetic-circuits" class="md-nav__link">
    Arithmetic Circuits
  </a>
  
    <nav class="md-nav" aria-label="Arithmetic Circuits">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#half-adder" class="md-nav__link">
    Half adder
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#full-adder" class="md-nav__link">
    Full adder
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-bit-binary-adder" class="md-nav__link">
    3-bit binary adder
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adder" class="md-nav__link">
    Adder
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#signed-addition-overflow" class="md-nav__link">
    Signed addition overflow
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#100-bit-binary-adder" class="md-nav__link">
    100-bit binary adder
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4-digit-bcd-adder" class="md-nav__link">
    4-digit BCD adder
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#karnaugh-map-to-circuit" class="md-nav__link">
    Karnaugh Map to Circuit
  </a>
  
    <nav class="md-nav" aria-label="Karnaugh Map to Circuit">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#3-variable" class="md-nav__link">
    3-variable
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4-variable1" class="md-nav__link">
    4-variable(1)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4-variable2" class="md-nav__link">
    4-variable(2)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4-variable3" class="md-nav__link">
    4-variable(3)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#minimum-sop-and-pos" class="md-nav__link">
    Minimum SOP and POS
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#karnaugh-map1" class="md-nav__link">
    Karnaugh map(1)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#karnaugh-map2" class="md-nav__link">
    Karnaugh map(2)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#k-map-implemented-with-a-multiplexer" class="md-nav__link">
    K-map implemented with a multiplexer
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sequential-logic" class="md-nav__link">
    Sequential Logic
  </a>
  
    <nav class="md-nav" aria-label="Sequential Logic">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#latches-and-flip-flops" class="md-nav__link">
    Latches and Flip-Flops
  </a>
  
    <nav class="md-nav" aria-label="Latches and Flip-Flops">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#d-flip-flop" class="md-nav__link">
    D flip-flop
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#d-flip-flops" class="md-nav__link">
    D flip-flops
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dff-with-reset" class="md-nav__link">
    DFF with reset
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dff-with-reset-value" class="md-nav__link">
    DFF with reset value
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dff-with-asynchronous-reset" class="md-nav__link">
    DFF with asynchronous reset
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dff-with-byte-enable" class="md-nav__link">
    DFF with byte enable
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#d-latch" class="md-nav__link">
    D Latch
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dff1" class="md-nav__link">
    DFF(1)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dff2" class="md-nav__link">
    DFF(2)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dffgate" class="md-nav__link">
    DFF+gate
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mux-and-dff1" class="md-nav__link">
    Mux and DFF(1)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mux-and-dff2" class="md-nav__link">
    Mux and DFF(2)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dffs-and-gates" class="md-nav__link">
    DFFs and gates
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#create-circuit-from-truth-table" class="md-nav__link">
    Create circuit from truth table
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#detect-an-edge" class="md-nav__link">
    Detect an edge
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#detect-both-edges" class="md-nav__link">
    Detect both edges
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#edge-capture-register" class="md-nav__link">
    Edge capture register
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dual-edge-triggered-flip-flop" class="md-nav__link">
    Dual-edge triggered flip-flop
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#counters" class="md-nav__link">
    Counters
  </a>
  
    <nav class="md-nav" aria-label="Counters">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#four-bit-binary-counter" class="md-nav__link">
    Four-bit binary counter
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#decade-counter" class="md-nav__link">
    Decade counter
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#decade-counter-again" class="md-nav__link">
    Decade counter again
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#slow-decade-counter" class="md-nav__link">
    Slow decade counter
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#counter-1-12" class="md-nav__link">
    Counter 1-12
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#counter-1000" class="md-nav__link">
    Counter 1000
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4-digit-decimal-counter" class="md-nav__link">
    4-digit decimal counter
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#12-hour-clock" class="md-nav__link">
    12-hour clock
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#shift-registers" class="md-nav__link">
    Shift Registers
  </a>
  
    <nav class="md-nav" aria-label="Shift Registers">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#4-bit-shift-register" class="md-nav__link">
    4-bit shift register
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leftright-rotator" class="md-nav__link">
    Left/right rotator
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leftright-arithmetic-shift-by-1-or-8" class="md-nav__link">
    Left/right arithmetic shift by 1 or 8
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#5-bit-lfsr" class="md-nav__link">
    5-bit LFSR
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-bit-lfsr" class="md-nav__link">
    3-bit LFSR
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#32-bit-lfsr" class="md-nav__link">
    32-bit LFSR
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#shift-register1" class="md-nav__link">
    Shift register(1)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#shift-register2" class="md-nav__link">
    Shift register(2)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-input-lut" class="md-nav__link">
    3-input LUT
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#more-circuits" class="md-nav__link">
    More Circuits
  </a>
  
    <nav class="md-nav" aria-label="More Circuits">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#rule-90" class="md-nav__link">
    Rule 90
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#rule-110" class="md-nav__link">
    Rule 110
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#conways-game-of-life-16x16" class="md-nav__link">
    Conway's Game of Life 16x16
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#finite-state-machines" class="md-nav__link">
    Finite State Machines
  </a>
  
    <nav class="md-nav" aria-label="Finite State Machines">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#simple-fsm-1-asynchronous-reset" class="md-nav__link">
    Simple FSM 1 (asynchronous reset)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#simple-fsm-1-synchronous-reset" class="md-nav__link">
    Simple FSM 1 (synchronous reset)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#simple-fsm-2-asynchronous-reset" class="md-nav__link">
    Simple FSM 2 (asynchronous reset)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#simple-fsm-2-synchronous-reset" class="md-nav__link">
    Simple FSM 2 (synchronous reset)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#simple-state-transitions-3" class="md-nav__link">
    Simple state transitions 3
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#simple-one-hot-state-transitions-3" class="md-nav__link">
    Simple one-hot state transitions 3
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#simple-fsm-3-asynchronous-reset" class="md-nav__link">
    Simple FSM 3 (asynchronous reset)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#simple-fsm-3-synchronous-reset" class="md-nav__link">
    Simple FSM 3 (synchronous reset)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#design-a-moore-fsm" class="md-nav__link">
    Design a Moore FSM
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lemmings-1" class="md-nav__link">
    Lemmings 1
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lemmings-2" class="md-nav__link">
    Lemmings 2
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lemmings-3" class="md-nav__link">
    Lemmings 3
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lemmings-4" class="md-nav__link">
    Lemmings 4
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#one-hot-fsm" class="md-nav__link">
    One-hot FSM
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ps2-packet-parser" class="md-nav__link">
    PS/2 packet parser
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ps2-packet-parser-and-datapath" class="md-nav__link">
    PS/2 packet parser and datapath
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#serial-receiver" class="md-nav__link">
    Serial receiver
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#serial-receiver-and-datapath" class="md-nav__link">
    Serial receiver and datapath
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#serial-receiver-with-parity-checking" class="md-nav__link">
    Serial receiver with parity checking
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sequence-recognition" class="md-nav__link">
    Sequence recognition
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#q8-design-a-mealy-fsm" class="md-nav__link">
    Q8: Design a Mealy FSM
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#q5a-serial-twos-complementer-moore-fsm" class="md-nav__link">
    Q5a: Serial two's complementer (Moore FSM)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#q5b-serial-twos-complementer-mealy-fsm" class="md-nav__link">
    Q5b: Serial two's complementer (Mealy FSM)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#q3a-fsm" class="md-nav__link">
    Q3a: FSM
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#q3b-fsm" class="md-nav__link">
    Q3b: FSM
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#q3c-fsm-logic" class="md-nav__link">
    Q3c: FSM logic
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#q6b-fsm-next-state-logic" class="md-nav__link">
    Q6b: FSM next-state logic
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#q6c-fsm-one-hot-next-state-logic" class="md-nav__link">
    Q6c: FSM one-hot next-state logic
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#q6-fsm" class="md-nav__link">
    Q6: FSM
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#q2a-fsm" class="md-nav__link">
    Q2a: FSM
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#q2b-one-hot-fsm-equations" class="md-nav__link">
    Q2b: One-hot FSM equations
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#q2a-fsm_1" class="md-nav__link">
    Q2a: FSM
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#q2b-another-fsm" class="md-nav__link">
    Q2b: Another FSM
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#building-larger-circuits" class="md-nav__link">
    Building Larger Circuits
  </a>
  
    <nav class="md-nav" aria-label="Building Larger Circuits">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#counter-with-period-1000" class="md-nav__link">
    Counter with period 1000
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4-bit-shift-register-and-down-counter" class="md-nav__link">
    4-bit shift register and down counter
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#fsm-sequence-1101-recognizer" class="md-nav__link">
    FSM: Sequence 1101 recognizer
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#fsm-enable-shift-register" class="md-nav__link">
    FSM: Enable shift register
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#fsm-the-complete-fsm" class="md-nav__link">
    FSM: The complete FSM
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#the-complete-timer" class="md-nav__link">
    The complete timer
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#fsm-one-hot-logic-equations" class="md-nav__link">
    FSM: One-hot logic equations
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#verification-reading-simulations" class="md-nav__link">
    Verification: Reading Simulations
  </a>
  
    <nav class="md-nav" aria-label="Verification: Reading Simulations">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#finding-bugs-in-code" class="md-nav__link">
    Finding bugs in code
  </a>
  
    <nav class="md-nav" aria-label="Finding bugs in code">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#mux" class="md-nav__link">
    Mux
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nand" class="md-nav__link">
    NAND
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mux2" class="md-nav__link">
    Mux(2)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#addsub" class="md-nav__link">
    Add/sub
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#case-statement_1" class="md-nav__link">
    Case statement
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#build-a-circuit-from-a-simulation-waveform" class="md-nav__link">
    Build a circuit from a simulation waveform
  </a>
  
    <nav class="md-nav" aria-label="Build a circuit from a simulation waveform">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#combinational-circuit-1" class="md-nav__link">
    Combinational circuit 1
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#combinational-circuit-2" class="md-nav__link">
    Combinational circuit 2
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#combinational-circuit-3" class="md-nav__link">
    Combinational circuit 3
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#combinational-circuit-4" class="md-nav__link">
    Combinational circuit 4
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#combinational-circuit-5" class="md-nav__link">
    Combinational circuit 5
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#combinational-circuit-6" class="md-nav__link">
    Combinational circuit 6
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sequential-circuit-7" class="md-nav__link">
    Sequential circuit 7
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sequential-circuit-8" class="md-nav__link">
    Sequential circuit 8
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sequential-circuit-9" class="md-nav__link">
    Sequential circuit 9
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sequential-circuit-10" class="md-nav__link">
    Sequential circuit 10
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#verification-writing-testbenches" class="md-nav__link">
    Verification: Writing Testbenches
  </a>
  
    <nav class="md-nav" aria-label="Verification: Writing Testbenches">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#clock" class="md-nav__link">
    Clock
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#testbench1" class="md-nav__link">
    Testbench1
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#and-gate_1" class="md-nav__link">
    AND gate
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#testbench2" class="md-nav__link">
    Testbench2
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#t-flip-flop" class="md-nav__link">
    T flip-flop
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cs450" class="md-nav__link">
    CS450
  </a>
  
    <nav class="md-nav" aria-label="CS450">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#cs450timer" class="md-nav__link">
    Cs450/timer
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cs450counter-2bc" class="md-nav__link">
    Cs450/counter 2bc
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cs450history-shift" class="md-nav__link">
    Cs450/history shift
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cs450gshare" class="md-nav__link">
    Cs450/gshare
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../2023-07-30-nowcoder/" class="md-nav__link">
        NowCoder Tutorial
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
      
      
        
          
        
      
      
        <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
          Useful Tools
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          Useful Tools
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Tools/2023-09-22-PVE/" class="md-nav__link">
        Proxmox VE Tutorial
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="目錄">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      目錄
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#getting-started" class="md-nav__link">
    Getting Started
  </a>
  
    <nav class="md-nav" aria-label="Getting Started">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#getting-started_1" class="md-nav__link">
    Getting Started
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#output-zero" class="md-nav__link">
    Output Zero
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#verilog-language" class="md-nav__link">
    Verilog Language
  </a>
  
    <nav class="md-nav" aria-label="Verilog Language">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#basics" class="md-nav__link">
    Basics
  </a>
  
    <nav class="md-nav" aria-label="Basics">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#simple-wire" class="md-nav__link">
    Simple wire
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#four-wires" class="md-nav__link">
    Four wires
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#inverter" class="md-nav__link">
    Inverter
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#and-gate" class="md-nav__link">
    AND gate
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nor-gate" class="md-nav__link">
    NOR gate
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xnor-gate" class="md-nav__link">
    XNOR gate
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#declaring-wires" class="md-nav__link">
    Declaring wires
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#7458-chip" class="md-nav__link">
    7458 chip
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#vectors" class="md-nav__link">
    Vectors
  </a>
  
    <nav class="md-nav" aria-label="Vectors">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#vectors_1" class="md-nav__link">
    Vectors
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#vectors-in-more-detail" class="md-nav__link">
    Vectors in more detail
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#vector-part-select" class="md-nav__link">
    Vector part select
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#bitwise-operators" class="md-nav__link">
    Bitwise operators
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#four-input-gates" class="md-nav__link">
    Four-input gates
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#vector-concatenation-operator" class="md-nav__link">
    Vector concatenation operator
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#vector-reversal-1" class="md-nav__link">
    Vector reversal 1
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#replication-operator" class="md-nav__link">
    Replication operator
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#more-replication" class="md-nav__link">
    More replication
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#modules-hierarchy" class="md-nav__link">
    Modules: Hierarchy
  </a>
  
    <nav class="md-nav" aria-label="Modules: Hierarchy">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#modules" class="md-nav__link">
    Modules
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#connecting-ports-by-position" class="md-nav__link">
    Connecting ports by position
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#connecting-ports-by-name" class="md-nav__link">
    Connecting ports by name
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#three-modules" class="md-nav__link">
    Three modules
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#modules-and-vectors" class="md-nav__link">
    Modules and vectors
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adder-1" class="md-nav__link">
    Adder 1
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adder-2" class="md-nav__link">
    Adder 2
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#carry-select-adder" class="md-nav__link">
    Carry-select adder
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adder-subtractor" class="md-nav__link">
    Adder-subtractor
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#procedures" class="md-nav__link">
    Procedures
  </a>
  
    <nav class="md-nav" aria-label="Procedures">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#always-blocks-combinational" class="md-nav__link">
    Always blocks (combinational)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#always-blocks-clocked" class="md-nav__link">
    Always blocks (clocked)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#if-statement" class="md-nav__link">
    If statement
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#if-statement-latches" class="md-nav__link">
    If statement latches
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#case-statement" class="md-nav__link">
    Case statement
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#priority-encoder" class="md-nav__link">
    Priority encoder
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#priority-encoder-with-casez" class="md-nav__link">
    Priority encoder with casez
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#avoiding-latches" class="md-nav__link">
    Avoiding latches
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#more-verilog-features" class="md-nav__link">
    More Verilog Features
  </a>
  
    <nav class="md-nav" aria-label="More Verilog Features">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#conditional-ternary-operator" class="md-nav__link">
    Conditional ternary operator
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#reduction-operators" class="md-nav__link">
    Reduction operators
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#reduction-even-wider-gates" class="md-nav__link">
    Reduction: Even wider gates
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#combinational-for-loop-vector-reversal-2" class="md-nav__link">
    Combinational for-loop: Vector reversal 2
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#combinational-for-loop-255-bit-population-count" class="md-nav__link">
    Combinational for-loop: 255-bit population count
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#generate-for-loop-100-bit-binary-adder-2" class="md-nav__link">
    Generate for-loop: 100-bit binary adder 2
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#generate-for-loop-100-digit-bcd-adder" class="md-nav__link">
    Generate for-loop: 100-digit BCD adder
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#circuits" class="md-nav__link">
    Circuits
  </a>
  
    <nav class="md-nav" aria-label="Circuits">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#combinational-logic" class="md-nav__link">
    Combinational Logic
  </a>
  
    <nav class="md-nav" aria-label="Combinational Logic">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#basic-gates" class="md-nav__link">
    Basic Gates
  </a>
  
    <nav class="md-nav" aria-label="Basic Gates">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#wire" class="md-nav__link">
    Wire
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gnd" class="md-nav__link">
    GND
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nor" class="md-nav__link">
    NOR
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#another-gate" class="md-nav__link">
    Another gate
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#two-gates" class="md-nav__link">
    Two gates
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#more-logic-gates" class="md-nav__link">
    More logic gates
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#7420-chip" class="md-nav__link">
    7420 chip
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#truth-tables" class="md-nav__link">
    Truth tables
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#two-bit-equality" class="md-nav__link">
    Two-bit equality
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#simple-circuit-a" class="md-nav__link">
    Simple circuit A
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#simple-circuit-b" class="md-nav__link">
    Simple circuit B
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#combine-circuits-a-and-b" class="md-nav__link">
    Combine circuits A and B
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ring-or-vibrate" class="md-nav__link">
    Ring or vibrate?
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#thermostat" class="md-nav__link">
    Thermostat
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-bit-population-count" class="md-nav__link">
    3-bit population count
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gates-and-vectors" class="md-nav__link">
    Gates and vectors
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#even-longer-vectors" class="md-nav__link">
    Even longer vectors
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#multiplexers" class="md-nav__link">
    Multiplexers
  </a>
  
    <nav class="md-nav" aria-label="Multiplexers">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#2-to-1-multiplexer" class="md-nav__link">
    2-to-1 multiplexer
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-to-1-bus-multiplexer" class="md-nav__link">
    2-to-1 bus multiplexer
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#9-to-1-multiplexer" class="md-nav__link">
    9-to-1 multiplexer
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#256-to-1-multiplexer" class="md-nav__link">
    256-to-1 multiplexer
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#256-to-1-4-bit-multiplexer" class="md-nav__link">
    256-to-1 4-bit multiplexer
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#arithmetic-circuits" class="md-nav__link">
    Arithmetic Circuits
  </a>
  
    <nav class="md-nav" aria-label="Arithmetic Circuits">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#half-adder" class="md-nav__link">
    Half adder
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#full-adder" class="md-nav__link">
    Full adder
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-bit-binary-adder" class="md-nav__link">
    3-bit binary adder
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adder" class="md-nav__link">
    Adder
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#signed-addition-overflow" class="md-nav__link">
    Signed addition overflow
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#100-bit-binary-adder" class="md-nav__link">
    100-bit binary adder
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4-digit-bcd-adder" class="md-nav__link">
    4-digit BCD adder
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#karnaugh-map-to-circuit" class="md-nav__link">
    Karnaugh Map to Circuit
  </a>
  
    <nav class="md-nav" aria-label="Karnaugh Map to Circuit">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#3-variable" class="md-nav__link">
    3-variable
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4-variable1" class="md-nav__link">
    4-variable(1)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4-variable2" class="md-nav__link">
    4-variable(2)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4-variable3" class="md-nav__link">
    4-variable(3)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#minimum-sop-and-pos" class="md-nav__link">
    Minimum SOP and POS
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#karnaugh-map1" class="md-nav__link">
    Karnaugh map(1)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#karnaugh-map2" class="md-nav__link">
    Karnaugh map(2)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#k-map-implemented-with-a-multiplexer" class="md-nav__link">
    K-map implemented with a multiplexer
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sequential-logic" class="md-nav__link">
    Sequential Logic
  </a>
  
    <nav class="md-nav" aria-label="Sequential Logic">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#latches-and-flip-flops" class="md-nav__link">
    Latches and Flip-Flops
  </a>
  
    <nav class="md-nav" aria-label="Latches and Flip-Flops">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#d-flip-flop" class="md-nav__link">
    D flip-flop
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#d-flip-flops" class="md-nav__link">
    D flip-flops
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dff-with-reset" class="md-nav__link">
    DFF with reset
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dff-with-reset-value" class="md-nav__link">
    DFF with reset value
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dff-with-asynchronous-reset" class="md-nav__link">
    DFF with asynchronous reset
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dff-with-byte-enable" class="md-nav__link">
    DFF with byte enable
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#d-latch" class="md-nav__link">
    D Latch
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dff1" class="md-nav__link">
    DFF(1)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dff2" class="md-nav__link">
    DFF(2)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dffgate" class="md-nav__link">
    DFF+gate
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mux-and-dff1" class="md-nav__link">
    Mux and DFF(1)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mux-and-dff2" class="md-nav__link">
    Mux and DFF(2)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dffs-and-gates" class="md-nav__link">
    DFFs and gates
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#create-circuit-from-truth-table" class="md-nav__link">
    Create circuit from truth table
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#detect-an-edge" class="md-nav__link">
    Detect an edge
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#detect-both-edges" class="md-nav__link">
    Detect both edges
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#edge-capture-register" class="md-nav__link">
    Edge capture register
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dual-edge-triggered-flip-flop" class="md-nav__link">
    Dual-edge triggered flip-flop
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#counters" class="md-nav__link">
    Counters
  </a>
  
    <nav class="md-nav" aria-label="Counters">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#four-bit-binary-counter" class="md-nav__link">
    Four-bit binary counter
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#decade-counter" class="md-nav__link">
    Decade counter
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#decade-counter-again" class="md-nav__link">
    Decade counter again
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#slow-decade-counter" class="md-nav__link">
    Slow decade counter
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#counter-1-12" class="md-nav__link">
    Counter 1-12
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#counter-1000" class="md-nav__link">
    Counter 1000
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4-digit-decimal-counter" class="md-nav__link">
    4-digit decimal counter
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#12-hour-clock" class="md-nav__link">
    12-hour clock
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#shift-registers" class="md-nav__link">
    Shift Registers
  </a>
  
    <nav class="md-nav" aria-label="Shift Registers">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#4-bit-shift-register" class="md-nav__link">
    4-bit shift register
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leftright-rotator" class="md-nav__link">
    Left/right rotator
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leftright-arithmetic-shift-by-1-or-8" class="md-nav__link">
    Left/right arithmetic shift by 1 or 8
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#5-bit-lfsr" class="md-nav__link">
    5-bit LFSR
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-bit-lfsr" class="md-nav__link">
    3-bit LFSR
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#32-bit-lfsr" class="md-nav__link">
    32-bit LFSR
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#shift-register1" class="md-nav__link">
    Shift register(1)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#shift-register2" class="md-nav__link">
    Shift register(2)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-input-lut" class="md-nav__link">
    3-input LUT
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#more-circuits" class="md-nav__link">
    More Circuits
  </a>
  
    <nav class="md-nav" aria-label="More Circuits">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#rule-90" class="md-nav__link">
    Rule 90
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#rule-110" class="md-nav__link">
    Rule 110
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#conways-game-of-life-16x16" class="md-nav__link">
    Conway's Game of Life 16x16
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#finite-state-machines" class="md-nav__link">
    Finite State Machines
  </a>
  
    <nav class="md-nav" aria-label="Finite State Machines">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#simple-fsm-1-asynchronous-reset" class="md-nav__link">
    Simple FSM 1 (asynchronous reset)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#simple-fsm-1-synchronous-reset" class="md-nav__link">
    Simple FSM 1 (synchronous reset)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#simple-fsm-2-asynchronous-reset" class="md-nav__link">
    Simple FSM 2 (asynchronous reset)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#simple-fsm-2-synchronous-reset" class="md-nav__link">
    Simple FSM 2 (synchronous reset)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#simple-state-transitions-3" class="md-nav__link">
    Simple state transitions 3
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#simple-one-hot-state-transitions-3" class="md-nav__link">
    Simple one-hot state transitions 3
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#simple-fsm-3-asynchronous-reset" class="md-nav__link">
    Simple FSM 3 (asynchronous reset)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#simple-fsm-3-synchronous-reset" class="md-nav__link">
    Simple FSM 3 (synchronous reset)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#design-a-moore-fsm" class="md-nav__link">
    Design a Moore FSM
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lemmings-1" class="md-nav__link">
    Lemmings 1
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lemmings-2" class="md-nav__link">
    Lemmings 2
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lemmings-3" class="md-nav__link">
    Lemmings 3
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lemmings-4" class="md-nav__link">
    Lemmings 4
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#one-hot-fsm" class="md-nav__link">
    One-hot FSM
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ps2-packet-parser" class="md-nav__link">
    PS/2 packet parser
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ps2-packet-parser-and-datapath" class="md-nav__link">
    PS/2 packet parser and datapath
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#serial-receiver" class="md-nav__link">
    Serial receiver
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#serial-receiver-and-datapath" class="md-nav__link">
    Serial receiver and datapath
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#serial-receiver-with-parity-checking" class="md-nav__link">
    Serial receiver with parity checking
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sequence-recognition" class="md-nav__link">
    Sequence recognition
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#q8-design-a-mealy-fsm" class="md-nav__link">
    Q8: Design a Mealy FSM
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#q5a-serial-twos-complementer-moore-fsm" class="md-nav__link">
    Q5a: Serial two's complementer (Moore FSM)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#q5b-serial-twos-complementer-mealy-fsm" class="md-nav__link">
    Q5b: Serial two's complementer (Mealy FSM)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#q3a-fsm" class="md-nav__link">
    Q3a: FSM
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#q3b-fsm" class="md-nav__link">
    Q3b: FSM
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#q3c-fsm-logic" class="md-nav__link">
    Q3c: FSM logic
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#q6b-fsm-next-state-logic" class="md-nav__link">
    Q6b: FSM next-state logic
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#q6c-fsm-one-hot-next-state-logic" class="md-nav__link">
    Q6c: FSM one-hot next-state logic
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#q6-fsm" class="md-nav__link">
    Q6: FSM
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#q2a-fsm" class="md-nav__link">
    Q2a: FSM
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#q2b-one-hot-fsm-equations" class="md-nav__link">
    Q2b: One-hot FSM equations
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#q2a-fsm_1" class="md-nav__link">
    Q2a: FSM
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#q2b-another-fsm" class="md-nav__link">
    Q2b: Another FSM
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#building-larger-circuits" class="md-nav__link">
    Building Larger Circuits
  </a>
  
    <nav class="md-nav" aria-label="Building Larger Circuits">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#counter-with-period-1000" class="md-nav__link">
    Counter with period 1000
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4-bit-shift-register-and-down-counter" class="md-nav__link">
    4-bit shift register and down counter
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#fsm-sequence-1101-recognizer" class="md-nav__link">
    FSM: Sequence 1101 recognizer
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#fsm-enable-shift-register" class="md-nav__link">
    FSM: Enable shift register
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#fsm-the-complete-fsm" class="md-nav__link">
    FSM: The complete FSM
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#the-complete-timer" class="md-nav__link">
    The complete timer
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#fsm-one-hot-logic-equations" class="md-nav__link">
    FSM: One-hot logic equations
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#verification-reading-simulations" class="md-nav__link">
    Verification: Reading Simulations
  </a>
  
    <nav class="md-nav" aria-label="Verification: Reading Simulations">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#finding-bugs-in-code" class="md-nav__link">
    Finding bugs in code
  </a>
  
    <nav class="md-nav" aria-label="Finding bugs in code">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#mux" class="md-nav__link">
    Mux
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nand" class="md-nav__link">
    NAND
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mux2" class="md-nav__link">
    Mux(2)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#addsub" class="md-nav__link">
    Add/sub
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#case-statement_1" class="md-nav__link">
    Case statement
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#build-a-circuit-from-a-simulation-waveform" class="md-nav__link">
    Build a circuit from a simulation waveform
  </a>
  
    <nav class="md-nav" aria-label="Build a circuit from a simulation waveform">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#combinational-circuit-1" class="md-nav__link">
    Combinational circuit 1
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#combinational-circuit-2" class="md-nav__link">
    Combinational circuit 2
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#combinational-circuit-3" class="md-nav__link">
    Combinational circuit 3
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#combinational-circuit-4" class="md-nav__link">
    Combinational circuit 4
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#combinational-circuit-5" class="md-nav__link">
    Combinational circuit 5
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#combinational-circuit-6" class="md-nav__link">
    Combinational circuit 6
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sequential-circuit-7" class="md-nav__link">
    Sequential circuit 7
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sequential-circuit-8" class="md-nav__link">
    Sequential circuit 8
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sequential-circuit-9" class="md-nav__link">
    Sequential circuit 9
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sequential-circuit-10" class="md-nav__link">
    Sequential circuit 10
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#verification-writing-testbenches" class="md-nav__link">
    Verification: Writing Testbenches
  </a>
  
    <nav class="md-nav" aria-label="Verification: Writing Testbenches">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#clock" class="md-nav__link">
    Clock
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#testbench1" class="md-nav__link">
    Testbench1
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#and-gate_1" class="md-nav__link">
    AND gate
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#testbench2" class="md-nav__link">
    Testbench2
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#t-flip-flop" class="md-nav__link">
    T flip-flop
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cs450" class="md-nav__link">
    CS450
  </a>
  
    <nav class="md-nav" aria-label="CS450">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#cs450timer" class="md-nav__link">
    Cs450/timer
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cs450counter-2bc" class="md-nav__link">
    Cs450/counter 2bc
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cs450history-shift" class="md-nav__link">
    Cs450/history shift
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cs450gshare" class="md-nav__link">
    Cs450/gshare
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  
  



  
  


  <h1>HDLBits Tutorial</h1>

<h2 id="getting-started">Getting Started<a class="headerlink" href="#getting-started" title="Anchor link to this section for reference">⚓︎</a></h2>
<h3 id="getting-started_1">Getting Started<a class="headerlink" href="#getting-started_1" title="Anchor link to this section for reference">⚓︎</a></h3>
<p>Website: <a href="https://hdlbits.01xz.net/wiki/Step_one" target="_blank">https://hdlbits.01xz.net/wiki/Step_one</a></p>
<p>這題是教你怎麼操作平台的，然後要對one輸出1。這裡有個細節是給值時盡量寫的清楚一點，像這裡1bit，就可以不是只給1，而是給1'b1。
<div class="language-verilog highlight"><span class="filename">Verilog</span><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1"></a><a href="#__codelineno-0-1"><span class="linenos" data-linenos="1 "></span></a><span class="k">module</span><span class="w"> </span><span class="n">top_module</span><span class="p">(</span><span class="w"> </span><span class="k">output</span><span class="w"> </span><span class="n">one</span><span class="w"> </span><span class="p">);</span>
</span><span id="__span-0-2"><a id="__codelineno-0-2" name="__codelineno-0-2"></a><a href="#__codelineno-0-2"><span class="linenos" data-linenos="2 "></span></a><span class="w">    </span><span class="k">assign</span><span class="w"> </span><span class="n">one</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">1</span><span class="mb">&#39;b1</span><span class="p">;</span>
</span><span id="__span-0-3"><a id="__codelineno-0-3" name="__codelineno-0-3"></a><a href="#__codelineno-0-3"><span class="linenos" data-linenos="3 "></span></a><span class="k">endmodule</span>
</span></code></pre></div></p>
<hr />
<h3 id="output-zero">Output Zero<a class="headerlink" href="#output-zero" title="Anchor link to this section for reference">⚓︎</a></h3>
<p>Website: <a href="https://hdlbits.01xz.net/wiki/Zero" target="_blank">https://hdlbits.01xz.net/wiki/Zero</a></p>
<p>這題跟上題大同小異，只是換成輸出0。
<div class="language-verilog highlight"><span class="filename">Verilog</span><pre><span></span><code><span id="__span-1-1"><a id="__codelineno-1-1" name="__codelineno-1-1"></a><a href="#__codelineno-1-1"><span class="linenos" data-linenos="1 "></span></a><span class="k">module</span><span class="w"> </span><span class="n">top_module</span><span class="p">(</span>
</span><span id="__span-1-2"><a id="__codelineno-1-2" name="__codelineno-1-2"></a><a href="#__codelineno-1-2"><span class="linenos" data-linenos="2 "></span></a><span class="w">    </span><span class="k">output</span><span class="w"> </span><span class="n">zero</span>
</span><span id="__span-1-3"><a id="__codelineno-1-3" name="__codelineno-1-3"></a><a href="#__codelineno-1-3"><span class="linenos" data-linenos="3 "></span></a><span class="p">);</span><span class="c1">// Module body starts after semicolon</span>
</span><span id="__span-1-4"><a id="__codelineno-1-4" name="__codelineno-1-4"></a><a href="#__codelineno-1-4"><span class="linenos" data-linenos="4 "></span></a><span class="w">    </span><span class="k">assign</span><span class="w"> </span><span class="n">zero</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">1</span><span class="mb">&#39;b0</span><span class="p">;</span>
</span><span id="__span-1-5"><a id="__codelineno-1-5" name="__codelineno-1-5"></a><a href="#__codelineno-1-5"><span class="linenos" data-linenos="5 "></span></a><span class="k">endmodule</span>
</span></code></pre></div></p>
<hr />
<h2 id="verilog-language">Verilog Language<a class="headerlink" href="#verilog-language" title="Anchor link to this section for reference">⚓︎</a></h2>
<h3 id="basics">Basics<a class="headerlink" href="#basics" title="Anchor link to this section for reference">⚓︎</a></h3>
<h4 id="simple-wire">Simple wire<a class="headerlink" href="#simple-wire" title="Anchor link to this section for reference">⚓︎</a></h4>
<p>Website: <a href="https://hdlbits.01xz.net/wiki/Wire" target="_blank">https://hdlbits.01xz.net/wiki/Wire</a></p>
<p>這題就是簡單的把out和in接在一起。
<div class="language-verilog highlight"><span class="filename">Verilog</span><pre><span></span><code><span id="__span-2-1"><a id="__codelineno-2-1" name="__codelineno-2-1"></a><a href="#__codelineno-2-1"><span class="linenos" data-linenos="1 "></span></a><span class="k">module</span><span class="w"> </span><span class="n">top_module</span><span class="p">(</span><span class="w"> </span><span class="k">input</span><span class="w"> </span><span class="n">in</span><span class="p">,</span><span class="w"> </span><span class="k">output</span><span class="w"> </span><span class="n">out</span><span class="w"> </span><span class="p">);</span>
</span><span id="__span-2-2"><a id="__codelineno-2-2" name="__codelineno-2-2"></a><a href="#__codelineno-2-2"><span class="linenos" data-linenos="2 "></span></a><span class="w">    </span><span class="k">assign</span><span class="w"> </span><span class="n">out</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">in</span><span class="p">;</span>
</span><span id="__span-2-3"><a id="__codelineno-2-3" name="__codelineno-2-3"></a><a href="#__codelineno-2-3"><span class="linenos" data-linenos="3 "></span></a><span class="k">endmodule</span>
</span></code></pre></div></p>
<hr />
<h4 id="four-wires">Four wires<a class="headerlink" href="#four-wires" title="Anchor link to this section for reference">⚓︎</a></h4>
<p>Website: <a href="https://hdlbits.01xz.net/wiki/Wire4" target="_blank">https://hdlbits.01xz.net/wiki/Wire4</a></p>
<p>這題就照著圖接線，w和a相接，xy和b相接，z和c相接。
<div class="language-verilog highlight"><span class="filename">Verilog</span><pre><span></span><code><span id="__span-3-1"><a id="__codelineno-3-1" name="__codelineno-3-1"></a><a href="#__codelineno-3-1"><span class="linenos" data-linenos="1 "></span></a><span class="k">module</span><span class="w"> </span><span class="n">top_module</span><span class="p">(</span><span class="w"> </span>
</span><span id="__span-3-2"><a id="__codelineno-3-2" name="__codelineno-3-2"></a><a href="#__codelineno-3-2"><span class="linenos" data-linenos="2 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">,</span><span class="n">c</span><span class="p">,</span>
</span><span id="__span-3-3"><a id="__codelineno-3-3" name="__codelineno-3-3"></a><a href="#__codelineno-3-3"><span class="linenos" data-linenos="3 "></span></a><span class="w">    </span><span class="k">output</span><span class="w"> </span><span class="n">w</span><span class="p">,</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">,</span><span class="n">z</span><span class="w"> </span><span class="p">);</span>
</span><span id="__span-3-4"><a id="__codelineno-3-4" name="__codelineno-3-4"></a><a href="#__codelineno-3-4"><span class="linenos" data-linenos="4 "></span></a><span class="w">    </span><span class="k">assign</span><span class="w"> </span><span class="n">w</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">a</span><span class="p">;</span>
</span><span id="__span-3-5"><a id="__codelineno-3-5" name="__codelineno-3-5"></a><a href="#__codelineno-3-5"><span class="linenos" data-linenos="5 "></span></a><span class="w">    </span><span class="k">assign</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">b</span><span class="p">;</span>
</span><span id="__span-3-6"><a id="__codelineno-3-6" name="__codelineno-3-6"></a><a href="#__codelineno-3-6"><span class="linenos" data-linenos="6 "></span></a><span class="w">    </span><span class="k">assign</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">b</span><span class="p">;</span>
</span><span id="__span-3-7"><a id="__codelineno-3-7" name="__codelineno-3-7"></a><a href="#__codelineno-3-7"><span class="linenos" data-linenos="7 "></span></a><span class="w">    </span><span class="k">assign</span><span class="w"> </span><span class="n">z</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">c</span><span class="p">;</span>
</span><span id="__span-3-8"><a id="__codelineno-3-8" name="__codelineno-3-8"></a><a href="#__codelineno-3-8"><span class="linenos" data-linenos="8 "></span></a><span class="k">endmodule</span>
</span></code></pre></div></p>
<hr />
<h4 id="inverter">Inverter<a class="headerlink" href="#inverter" title="Anchor link to this section for reference">⚓︎</a></h4>
<p>Website: <a href="https://hdlbits.01xz.net/wiki/Notgate" target="_blank">https://hdlbits.01xz.net/wiki/Notgate</a></p>
<p>這題要寫一個not gate。<br />
值得注意的是，verilog中有分bitwise operator和logical operator，bitwise operator就是對input的每個bit都做相對的運算，所以最後輸出的bit數會跟input一樣。而logical operator只會邏輯上做運算，最後只會輸出1 bit。 <br />
所以說bitwise not符號是<code>~</code>，而logical not符號是<code>!</code>，雖然這題input只有1 bit沒差，不過細節可能要注意。
<div class="language-verilog highlight"><span class="filename">Verilog</span><pre><span></span><code><span id="__span-4-1"><a id="__codelineno-4-1" name="__codelineno-4-1"></a><a href="#__codelineno-4-1"><span class="linenos" data-linenos="1 "></span></a><span class="k">module</span><span class="w"> </span><span class="n">top_module</span><span class="p">(</span><span class="w"> </span><span class="k">input</span><span class="w"> </span><span class="n">in</span><span class="p">,</span><span class="w"> </span><span class="k">output</span><span class="w"> </span><span class="n">out</span><span class="w"> </span><span class="p">);</span>
</span><span id="__span-4-2"><a id="__codelineno-4-2" name="__codelineno-4-2"></a><a href="#__codelineno-4-2"><span class="linenos" data-linenos="2 "></span></a><span class="w">    </span><span class="k">assign</span><span class="w"> </span><span class="n">out</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">~</span><span class="n">in</span><span class="p">;</span>
</span><span id="__span-4-3"><a id="__codelineno-4-3" name="__codelineno-4-3"></a><a href="#__codelineno-4-3"><span class="linenos" data-linenos="3 "></span></a><span class="k">endmodule</span>
</span></code></pre></div></p>
<hr />
<h4 id="and-gate">AND gate<a class="headerlink" href="#and-gate" title="Anchor link to this section for reference">⚓︎</a></h4>
<p>Website: <a href="https://hdlbits.01xz.net/wiki/Andgate" target="_blank">https://hdlbits.01xz.net/wiki/Andgate</a></p>
<p>這題就刻一個and gate，跟上題差不多，要注意的是bitwise and符號是<code>&amp;</code>，而logical and符號是<code>&amp;&amp;</code>，
<div class="language-verilog highlight"><span class="filename">Verilog</span><pre><span></span><code><span id="__span-5-1"><a id="__codelineno-5-1" name="__codelineno-5-1"></a><a href="#__codelineno-5-1"><span class="linenos" data-linenos="1 "></span></a><span class="k">module</span><span class="w"> </span><span class="n">top_module</span><span class="p">(</span><span class="w"> </span>
</span><span id="__span-5-2"><a id="__codelineno-5-2" name="__codelineno-5-2"></a><a href="#__codelineno-5-2"><span class="linenos" data-linenos="2 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">a</span><span class="p">,</span><span class="w"> </span>
</span><span id="__span-5-3"><a id="__codelineno-5-3" name="__codelineno-5-3"></a><a href="#__codelineno-5-3"><span class="linenos" data-linenos="3 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">b</span><span class="p">,</span><span class="w"> </span>
</span><span id="__span-5-4"><a id="__codelineno-5-4" name="__codelineno-5-4"></a><a href="#__codelineno-5-4"><span class="linenos" data-linenos="4 "></span></a><span class="w">    </span><span class="k">output</span><span class="w"> </span><span class="n">out</span><span class="w"> </span><span class="p">);</span>
</span><span id="__span-5-5"><a id="__codelineno-5-5" name="__codelineno-5-5"></a><a href="#__codelineno-5-5"><span class="linenos" data-linenos="5 "></span></a><span class="w">    </span><span class="k">assign</span><span class="w"> </span><span class="n">out</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="n">b</span><span class="p">;</span>
</span><span id="__span-5-6"><a id="__codelineno-5-6" name="__codelineno-5-6"></a><a href="#__codelineno-5-6"><span class="linenos" data-linenos="6 "></span></a><span class="k">endmodule</span>
</span></code></pre></div></p>
<hr />
<h4 id="nor-gate">NOR gate<a class="headerlink" href="#nor-gate" title="Anchor link to this section for reference">⚓︎</a></h4>
<p>Website: <a href="https://hdlbits.01xz.net/wiki/Norgate" target="_blank">https://hdlbits.01xz.net/wiki/Norgate</a></p>
<p>這題就刻一個nor gate，跟上題差不多，要注意的是bitwise or符號是<code>~</code>，而logical and符號是<code>~~</code>，
<div class="language-verilog highlight"><span class="filename">Verilog</span><pre><span></span><code><span id="__span-6-1"><a id="__codelineno-6-1" name="__codelineno-6-1"></a><a href="#__codelineno-6-1"><span class="linenos" data-linenos="1 "></span></a><span class="k">module</span><span class="w"> </span><span class="n">top_module</span><span class="p">(</span><span class="w"> </span>
</span><span id="__span-6-2"><a id="__codelineno-6-2" name="__codelineno-6-2"></a><a href="#__codelineno-6-2"><span class="linenos" data-linenos="2 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">a</span><span class="p">,</span><span class="w"> </span>
</span><span id="__span-6-3"><a id="__codelineno-6-3" name="__codelineno-6-3"></a><a href="#__codelineno-6-3"><span class="linenos" data-linenos="3 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">b</span><span class="p">,</span><span class="w"> </span>
</span><span id="__span-6-4"><a id="__codelineno-6-4" name="__codelineno-6-4"></a><a href="#__codelineno-6-4"><span class="linenos" data-linenos="4 "></span></a><span class="w">    </span><span class="k">output</span><span class="w"> </span><span class="n">out</span><span class="w"> </span><span class="p">);</span>
</span><span id="__span-6-5"><a id="__codelineno-6-5" name="__codelineno-6-5"></a><a href="#__codelineno-6-5"><span class="linenos" data-linenos="5 "></span></a><span class="w">    </span><span class="k">assign</span><span class="w"> </span><span class="n">out</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">~</span><span class="p">(</span><span class="n">a</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">b</span><span class="p">);</span>
</span><span id="__span-6-6"><a id="__codelineno-6-6" name="__codelineno-6-6"></a><a href="#__codelineno-6-6"><span class="linenos" data-linenos="6 "></span></a><span class="k">endmodule</span>
</span></code></pre></div></p>
<hr />
<h4 id="xnor-gate">XNOR gate<a class="headerlink" href="#xnor-gate" title="Anchor link to this section for reference">⚓︎</a></h4>
<p>Website: <a href="https://hdlbits.01xz.net/wiki/Xnorgate" target="_blank">https://hdlbits.01xz.net/wiki/Xnorgate</a></p>
<p>這題就刻一個xnor gate，跟上題差不多，要注意的是bitwise xor符號是<code>^</code>，而verilog中沒有logical xor運算。
<div class="language-verilog highlight"><span class="filename">Verilog</span><pre><span></span><code><span id="__span-7-1"><a id="__codelineno-7-1" name="__codelineno-7-1"></a><a href="#__codelineno-7-1"><span class="linenos" data-linenos="1 "></span></a><span class="k">module</span><span class="w"> </span><span class="n">top_module</span><span class="p">(</span><span class="w"> </span>
</span><span id="__span-7-2"><a id="__codelineno-7-2" name="__codelineno-7-2"></a><a href="#__codelineno-7-2"><span class="linenos" data-linenos="2 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">a</span><span class="p">,</span><span class="w"> </span>
</span><span id="__span-7-3"><a id="__codelineno-7-3" name="__codelineno-7-3"></a><a href="#__codelineno-7-3"><span class="linenos" data-linenos="3 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">b</span><span class="p">,</span><span class="w"> </span>
</span><span id="__span-7-4"><a id="__codelineno-7-4" name="__codelineno-7-4"></a><a href="#__codelineno-7-4"><span class="linenos" data-linenos="4 "></span></a><span class="w">    </span><span class="k">output</span><span class="w"> </span><span class="n">out</span><span class="w"> </span><span class="p">);</span>
</span><span id="__span-7-5"><a id="__codelineno-7-5" name="__codelineno-7-5"></a><a href="#__codelineno-7-5"><span class="linenos" data-linenos="5 "></span></a><span class="w">    </span><span class="k">assign</span><span class="w"> </span><span class="n">out</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">~</span><span class="p">(</span><span class="n">a</span><span class="w"> </span><span class="o">^</span><span class="w"> </span><span class="n">b</span><span class="p">);</span>
</span><span id="__span-7-6"><a id="__codelineno-7-6" name="__codelineno-7-6"></a><a href="#__codelineno-7-6"><span class="linenos" data-linenos="6 "></span></a><span class="k">endmodule</span>
</span></code></pre></div></p>
<hr />
<h4 id="declaring-wires">Declaring wires<a class="headerlink" href="#declaring-wires" title="Anchor link to this section for reference">⚓︎</a></h4>
<p>Website: <a href="https://hdlbits.01xz.net/wiki/Wire_decl" target="_blank">https://hdlbits.01xz.net/wiki/Wire_decl</a></p>
<p>這題引入了wire的概念，wire就是在線路複雜時，提供節點來幫助閱讀。補充一下，input和output本身就是wire。
<div class="language-verilog highlight"><span class="filename">Verilog</span><pre><span></span><code><span id="__span-8-1"><a id="__codelineno-8-1" name="__codelineno-8-1"></a><a href="#__codelineno-8-1"><span class="linenos" data-linenos=" 1 "></span></a><span class="no">`default_nettype</span><span class="w"> </span><span class="n">none</span>
</span><span id="__span-8-2"><a id="__codelineno-8-2" name="__codelineno-8-2"></a><a href="#__codelineno-8-2"><span class="linenos" data-linenos=" 2 "></span></a><span class="k">module</span><span class="w"> </span><span class="n">top_module</span><span class="p">(</span>
</span><span id="__span-8-3"><a id="__codelineno-8-3" name="__codelineno-8-3"></a><a href="#__codelineno-8-3"><span class="linenos" data-linenos=" 3 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">a</span><span class="p">,</span>
</span><span id="__span-8-4"><a id="__codelineno-8-4" name="__codelineno-8-4"></a><a href="#__codelineno-8-4"><span class="linenos" data-linenos=" 4 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">b</span><span class="p">,</span>
</span><span id="__span-8-5"><a id="__codelineno-8-5" name="__codelineno-8-5"></a><a href="#__codelineno-8-5"><span class="linenos" data-linenos=" 5 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">c</span><span class="p">,</span>
</span><span id="__span-8-6"><a id="__codelineno-8-6" name="__codelineno-8-6"></a><a href="#__codelineno-8-6"><span class="linenos" data-linenos=" 6 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">d</span><span class="p">,</span>
</span><span id="__span-8-7"><a id="__codelineno-8-7" name="__codelineno-8-7"></a><a href="#__codelineno-8-7"><span class="linenos" data-linenos=" 7 "></span></a><span class="w">    </span><span class="k">output</span><span class="w"> </span><span class="n">out</span><span class="p">,</span>
</span><span id="__span-8-8"><a id="__codelineno-8-8" name="__codelineno-8-8"></a><a href="#__codelineno-8-8"><span class="linenos" data-linenos=" 8 "></span></a><span class="w">    </span><span class="k">output</span><span class="w"> </span><span class="n">out_n</span><span class="w">   </span><span class="p">);</span><span class="w"> </span>
</span><span id="__span-8-9"><a id="__codelineno-8-9" name="__codelineno-8-9"></a><a href="#__codelineno-8-9"><span class="linenos" data-linenos=" 9 "></span></a><span class="w">    </span><span class="kt">wire</span><span class="w"> </span><span class="n">a_and_b</span><span class="p">,</span><span class="w"> </span><span class="n">c_and_d</span><span class="p">;</span>
</span><span id="__span-8-10"><a id="__codelineno-8-10" name="__codelineno-8-10"></a><a href="#__codelineno-8-10"><span class="linenos" data-linenos="10 "></span></a><span class="w">    </span><span class="k">assign</span><span class="w"> </span><span class="n">a_and_b</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="n">b</span><span class="p">;</span>
</span><span id="__span-8-11"><a id="__codelineno-8-11" name="__codelineno-8-11"></a><a href="#__codelineno-8-11"><span class="linenos" data-linenos="11 "></span></a><span class="w">    </span><span class="k">assign</span><span class="w"> </span><span class="n">c_and_d</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">c</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="n">d</span><span class="p">;</span>
</span><span id="__span-8-12"><a id="__codelineno-8-12" name="__codelineno-8-12"></a><a href="#__codelineno-8-12"><span class="linenos" data-linenos="12 "></span></a><span class="w">    </span><span class="k">assign</span><span class="w"> </span><span class="n">out</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">a_and_b</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">c_and_d</span><span class="p">;</span>
</span><span id="__span-8-13"><a id="__codelineno-8-13" name="__codelineno-8-13"></a><a href="#__codelineno-8-13"><span class="linenos" data-linenos="13 "></span></a><span class="w">    </span><span class="k">assign</span><span class="w"> </span><span class="n">out_n</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">~</span><span class="n">out</span><span class="p">;</span>
</span><span id="__span-8-14"><a id="__codelineno-8-14" name="__codelineno-8-14"></a><a href="#__codelineno-8-14"><span class="linenos" data-linenos="14 "></span></a><span class="k">endmodule</span>
</span></code></pre></div></p>
<hr />
<h4 id="7458-chip">7458 chip<a class="headerlink" href="#7458-chip" title="Anchor link to this section for reference">⚓︎</a></h4>
<p>Website: <a href="https://hdlbits.01xz.net/wiki/7458" target="_blank">https://hdlbits.01xz.net/wiki/7458</a></p>
<p>這題跟上題類似，就是線路稍微複雜，可以直接寫，也可以使用wire幫助閱讀。
<div class="language-verilog highlight"><span class="filename">Verilog</span><pre><span></span><code><span id="__span-9-1"><a id="__codelineno-9-1" name="__codelineno-9-1"></a><a href="#__codelineno-9-1"><span class="linenos" data-linenos="1 "></span></a><span class="k">module</span><span class="w"> </span><span class="n">top_module</span><span class="w"> </span><span class="p">(</span><span class="w"> </span>
</span><span id="__span-9-2"><a id="__codelineno-9-2" name="__codelineno-9-2"></a><a href="#__codelineno-9-2"><span class="linenos" data-linenos="2 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">p1a</span><span class="p">,</span><span class="w"> </span><span class="n">p1b</span><span class="p">,</span><span class="w"> </span><span class="n">p1c</span><span class="p">,</span><span class="w"> </span><span class="n">p1d</span><span class="p">,</span><span class="w"> </span><span class="n">p1e</span><span class="p">,</span><span class="w"> </span><span class="n">p1f</span><span class="p">,</span>
</span><span id="__span-9-3"><a id="__codelineno-9-3" name="__codelineno-9-3"></a><a href="#__codelineno-9-3"><span class="linenos" data-linenos="3 "></span></a><span class="w">    </span><span class="k">output</span><span class="w"> </span><span class="n">p1y</span><span class="p">,</span>
</span><span id="__span-9-4"><a id="__codelineno-9-4" name="__codelineno-9-4"></a><a href="#__codelineno-9-4"><span class="linenos" data-linenos="4 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">p2a</span><span class="p">,</span><span class="w"> </span><span class="n">p2b</span><span class="p">,</span><span class="w"> </span><span class="n">p2c</span><span class="p">,</span><span class="w"> </span><span class="n">p2d</span><span class="p">,</span>
</span><span id="__span-9-5"><a id="__codelineno-9-5" name="__codelineno-9-5"></a><a href="#__codelineno-9-5"><span class="linenos" data-linenos="5 "></span></a><span class="w">    </span><span class="k">output</span><span class="w"> </span><span class="n">p2y</span><span class="w"> </span><span class="p">);</span>
</span><span id="__span-9-6"><a id="__codelineno-9-6" name="__codelineno-9-6"></a><a href="#__codelineno-9-6"><span class="linenos" data-linenos="6 "></span></a><span class="w">    </span><span class="k">assign</span><span class="w"> </span><span class="n">p1y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">p1a</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="n">p1b</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="n">p1c</span><span class="p">)</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="p">(</span><span class="n">p1d</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="n">p1e</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="n">p1f</span><span class="p">);</span>
</span><span id="__span-9-7"><a id="__codelineno-9-7" name="__codelineno-9-7"></a><a href="#__codelineno-9-7"><span class="linenos" data-linenos="7 "></span></a><span class="w">    </span><span class="k">assign</span><span class="w"> </span><span class="n">p2y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">p2a</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="n">p2b</span><span class="p">)</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="p">(</span><span class="n">p2c</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="n">p2d</span><span class="p">);</span>
</span><span id="__span-9-8"><a id="__codelineno-9-8" name="__codelineno-9-8"></a><a href="#__codelineno-9-8"><span class="linenos" data-linenos="8 "></span></a><span class="k">endmodule</span>
</span></code></pre></div></p>
<hr />
<h3 id="vectors">Vectors<a class="headerlink" href="#vectors" title="Anchor link to this section for reference">⚓︎</a></h3>
<h4 id="vectors_1">Vectors<a class="headerlink" href="#vectors_1" title="Anchor link to this section for reference">⚓︎</a></h4>
<p>Website: <a href="https://hdlbits.01xz.net/wiki/Vector0" target="_blank">https://hdlbits.01xz.net/wiki/Vector0</a></p>
<p>這題是將[2:0] vec分別賦值給[2:0] outv和{o2,o1,o0}，補充說明，<code>assign {o2,o1,o0} = vec;</code>等價於<code>assign o2 = vec[2]; assign o1 = vec[1]; assign o0 = vec[0];</code>。
<div class="language-verilog highlight"><span class="filename">Verilog</span><pre><span></span><code><span id="__span-10-1"><a id="__codelineno-10-1" name="__codelineno-10-1"></a><a href="#__codelineno-10-1"><span class="linenos" data-linenos="1 "></span></a><span class="k">module</span><span class="w"> </span><span class="n">top_module</span><span class="w"> </span><span class="p">(</span><span class="w"> </span>
</span><span id="__span-10-2"><a id="__codelineno-10-2" name="__codelineno-10-2"></a><a href="#__codelineno-10-2"><span class="linenos" data-linenos="2 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="kt">wire</span><span class="w"> </span><span class="p">[</span><span class="mh">2</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">vec</span><span class="p">,</span>
</span><span id="__span-10-3"><a id="__codelineno-10-3" name="__codelineno-10-3"></a><a href="#__codelineno-10-3"><span class="linenos" data-linenos="3 "></span></a><span class="w">    </span><span class="k">output</span><span class="w"> </span><span class="kt">wire</span><span class="w"> </span><span class="p">[</span><span class="mh">2</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">outv</span><span class="p">,</span>
</span><span id="__span-10-4"><a id="__codelineno-10-4" name="__codelineno-10-4"></a><a href="#__codelineno-10-4"><span class="linenos" data-linenos="4 "></span></a><span class="w">    </span><span class="k">output</span><span class="w"> </span><span class="kt">wire</span><span class="w"> </span><span class="n">o2</span><span class="p">,</span>
</span><span id="__span-10-5"><a id="__codelineno-10-5" name="__codelineno-10-5"></a><a href="#__codelineno-10-5"><span class="linenos" data-linenos="5 "></span></a><span class="w">    </span><span class="k">output</span><span class="w"> </span><span class="kt">wire</span><span class="w"> </span><span class="n">o1</span><span class="p">,</span>
</span><span id="__span-10-6"><a id="__codelineno-10-6" name="__codelineno-10-6"></a><a href="#__codelineno-10-6"><span class="linenos" data-linenos="6 "></span></a><span class="w">    </span><span class="k">output</span><span class="w"> </span><span class="kt">wire</span><span class="w"> </span><span class="n">o0</span><span class="w">  </span><span class="p">);</span><span class="w"> </span><span class="c1">// Module body starts after module declaration</span>
</span><span id="__span-10-7"><a id="__codelineno-10-7" name="__codelineno-10-7"></a><a href="#__codelineno-10-7"><span class="linenos" data-linenos="7 "></span></a><span class="w">    </span><span class="k">assign</span><span class="w"> </span><span class="n">outv</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">vec</span><span class="p">;</span>
</span><span id="__span-10-8"><a id="__codelineno-10-8" name="__codelineno-10-8"></a><a href="#__codelineno-10-8"><span class="linenos" data-linenos="8 "></span></a><span class="w">    </span><span class="k">assign</span><span class="w"> </span><span class="p">{</span><span class="n">o2</span><span class="p">,</span><span class="n">o1</span><span class="p">,</span><span class="n">o0</span><span class="p">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">vec</span><span class="p">;</span>
</span><span id="__span-10-9"><a id="__codelineno-10-9" name="__codelineno-10-9"></a><a href="#__codelineno-10-9"><span class="linenos" data-linenos="9 "></span></a><span class="k">endmodule</span>
</span></code></pre></div></p>
<hr />
<h4 id="vectors-in-more-detail">Vectors in more detail<a class="headerlink" href="#vectors-in-more-detail" title="Anchor link to this section for reference">⚓︎</a></h4>
<p>Website: <a href="https://hdlbits.01xz.net/wiki/Vector1" target="_blank">https://hdlbits.01xz.net/wiki/Vector1</a></p>
<p>跟上題大同小異，<code>assign {out_hi,out_lo} = in;</code>等價於<code>assign out_hi = in[15:8]; assign out_lo = in[7:0];</code>。
<div class="language-verilog highlight"><span class="filename">Verilog</span><pre><span></span><code><span id="__span-11-1"><a id="__codelineno-11-1" name="__codelineno-11-1"></a><a href="#__codelineno-11-1"><span class="linenos" data-linenos="1 "></span></a><span class="no">`default_nettype</span><span class="w"> </span><span class="n">none</span><span class="w">     </span><span class="c1">// Disable implicit nets. Reduces some types of bugs.</span>
</span><span id="__span-11-2"><a id="__codelineno-11-2" name="__codelineno-11-2"></a><a href="#__codelineno-11-2"><span class="linenos" data-linenos="2 "></span></a><span class="k">module</span><span class="w"> </span><span class="n">top_module</span><span class="p">(</span><span class="w"> </span>
</span><span id="__span-11-3"><a id="__codelineno-11-3" name="__codelineno-11-3"></a><a href="#__codelineno-11-3"><span class="linenos" data-linenos="3 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="kt">wire</span><span class="w"> </span><span class="p">[</span><span class="mh">15</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">in</span><span class="p">,</span>
</span><span id="__span-11-4"><a id="__codelineno-11-4" name="__codelineno-11-4"></a><a href="#__codelineno-11-4"><span class="linenos" data-linenos="4 "></span></a><span class="w">    </span><span class="k">output</span><span class="w"> </span><span class="kt">wire</span><span class="w"> </span><span class="p">[</span><span class="mh">7</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">out_hi</span><span class="p">,</span>
</span><span id="__span-11-5"><a id="__codelineno-11-5" name="__codelineno-11-5"></a><a href="#__codelineno-11-5"><span class="linenos" data-linenos="5 "></span></a><span class="w">    </span><span class="k">output</span><span class="w"> </span><span class="kt">wire</span><span class="w"> </span><span class="p">[</span><span class="mh">7</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">out_lo</span><span class="w"> </span><span class="p">);</span>
</span><span id="__span-11-6"><a id="__codelineno-11-6" name="__codelineno-11-6"></a><a href="#__codelineno-11-6"><span class="linenos" data-linenos="6 "></span></a><span class="w">    </span><span class="k">assign</span><span class="w"> </span><span class="p">{</span><span class="n">out_hi</span><span class="p">,</span><span class="n">out_lo</span><span class="p">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">in</span><span class="p">;</span>
</span><span id="__span-11-7"><a id="__codelineno-11-7" name="__codelineno-11-7"></a><a href="#__codelineno-11-7"><span class="linenos" data-linenos="7 "></span></a><span class="k">endmodule</span>
</span></code></pre></div></p>
<hr />
<h4 id="vector-part-select">Vector part select<a class="headerlink" href="#vector-part-select" title="Anchor link to this section for reference">⚓︎</a></h4>
<p>Website: <a href="https://hdlbits.01xz.net/wiki/Vector2" target="_blank">https://hdlbits.01xz.net/wiki/Vector2</a></p>
<p>跟上題大同小異，<code>assign out = {in[7:0],in[15:8],in[23:16],in[31:24]};</code>等價於<code>assign out[31:24] = in[ 7: 0]; assign out[23:16] = in[15: 8]; assign out[15: 8] = in[23:16]; assign out[ 7: 0] = in[31:24];</code>。
<div class="language-verilog highlight"><span class="filename">Verilog</span><pre><span></span><code><span id="__span-12-1"><a id="__codelineno-12-1" name="__codelineno-12-1"></a><a href="#__codelineno-12-1"><span class="linenos" data-linenos="1 "></span></a><span class="k">module</span><span class="w"> </span><span class="n">top_module</span><span class="p">(</span><span class="w"> </span>
</span><span id="__span-12-2"><a id="__codelineno-12-2" name="__codelineno-12-2"></a><a href="#__codelineno-12-2"><span class="linenos" data-linenos="2 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="p">[</span><span class="mh">31</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">in</span><span class="p">,</span>
</span><span id="__span-12-3"><a id="__codelineno-12-3" name="__codelineno-12-3"></a><a href="#__codelineno-12-3"><span class="linenos" data-linenos="3 "></span></a><span class="w">    </span><span class="k">output</span><span class="w"> </span><span class="p">[</span><span class="mh">31</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">out</span><span class="w"> </span><span class="p">);</span>
</span><span id="__span-12-4"><a id="__codelineno-12-4" name="__codelineno-12-4"></a><a href="#__codelineno-12-4"><span class="linenos" data-linenos="4 "></span></a><span class="w">    </span><span class="k">assign</span><span class="w"> </span><span class="n">out</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="n">in</span><span class="p">[</span><span class="mh">7</span><span class="o">:</span><span class="mh">0</span><span class="p">],</span><span class="n">in</span><span class="p">[</span><span class="mh">15</span><span class="o">:</span><span class="mh">8</span><span class="p">],</span><span class="n">in</span><span class="p">[</span><span class="mh">23</span><span class="o">:</span><span class="mh">16</span><span class="p">],</span><span class="n">in</span><span class="p">[</span><span class="mh">31</span><span class="o">:</span><span class="mh">24</span><span class="p">]};</span>
</span><span id="__span-12-5"><a id="__codelineno-12-5" name="__codelineno-12-5"></a><a href="#__codelineno-12-5"><span class="linenos" data-linenos="5 "></span></a><span class="k">endmodule</span>
</span></code></pre></div></p>
<hr />
<h4 id="bitwise-operators">Bitwise operators<a class="headerlink" href="#bitwise-operators" title="Anchor link to this section for reference">⚓︎</a></h4>
<p>Website: <a href="https://hdlbits.01xz.net/wiki/Vectorgates" target="_blank">https://hdlbits.01xz.net/wiki/Vectorgates</a></p>
<p>這題主要講述bitwise operators和logical operators的差異。像說bitwise or的符號為<code>|</code>，logical or的符號為<code>||</code>，bitwise not的符號為<code>~</code>，logical not的符號為<code>!</code>。這題的not是bitwise not，不要弄混了。
<div class="language-verilog highlight"><span class="filename">Verilog</span><pre><span></span><code><span id="__span-13-1"><a id="__codelineno-13-1" name="__codelineno-13-1"></a><a href="#__codelineno-13-1"><span class="linenos" data-linenos=" 1 "></span></a><span class="k">module</span><span class="w"> </span><span class="n">top_module</span><span class="p">(</span><span class="w"> </span>
</span><span id="__span-13-2"><a id="__codelineno-13-2" name="__codelineno-13-2"></a><a href="#__codelineno-13-2"><span class="linenos" data-linenos=" 2 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="p">[</span><span class="mh">2</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">a</span><span class="p">,</span>
</span><span id="__span-13-3"><a id="__codelineno-13-3" name="__codelineno-13-3"></a><a href="#__codelineno-13-3"><span class="linenos" data-linenos=" 3 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="p">[</span><span class="mh">2</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">b</span><span class="p">,</span>
</span><span id="__span-13-4"><a id="__codelineno-13-4" name="__codelineno-13-4"></a><a href="#__codelineno-13-4"><span class="linenos" data-linenos=" 4 "></span></a><span class="w">    </span><span class="k">output</span><span class="w"> </span><span class="p">[</span><span class="mh">2</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">out_or_bitwise</span><span class="p">,</span>
</span><span id="__span-13-5"><a id="__codelineno-13-5" name="__codelineno-13-5"></a><a href="#__codelineno-13-5"><span class="linenos" data-linenos=" 5 "></span></a><span class="w">    </span><span class="k">output</span><span class="w"> </span><span class="n">out_or_logical</span><span class="p">,</span>
</span><span id="__span-13-6"><a id="__codelineno-13-6" name="__codelineno-13-6"></a><a href="#__codelineno-13-6"><span class="linenos" data-linenos=" 6 "></span></a><span class="w">    </span><span class="k">output</span><span class="w"> </span><span class="p">[</span><span class="mh">5</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">out_not</span>
</span><span id="__span-13-7"><a id="__codelineno-13-7" name="__codelineno-13-7"></a><a href="#__codelineno-13-7"><span class="linenos" data-linenos=" 7 "></span></a><span class="p">);</span>
</span><span id="__span-13-8"><a id="__codelineno-13-8" name="__codelineno-13-8"></a><a href="#__codelineno-13-8"><span class="linenos" data-linenos=" 8 "></span></a><span class="w">    </span><span class="k">assign</span><span class="w"> </span><span class="n">out_or_bitwise</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">b</span><span class="p">;</span>
</span><span id="__span-13-9"><a id="__codelineno-13-9" name="__codelineno-13-9"></a><a href="#__codelineno-13-9"><span class="linenos" data-linenos=" 9 "></span></a><span class="w">    </span><span class="k">assign</span><span class="w"> </span><span class="n">out_or_logical</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="n">b</span><span class="p">;</span>
</span><span id="__span-13-10"><a id="__codelineno-13-10" name="__codelineno-13-10"></a><a href="#__codelineno-13-10"><span class="linenos" data-linenos="10 "></span></a><span class="w">    </span><span class="k">assign</span><span class="w"> </span><span class="n">out_not</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">~</span><span class="w"> </span><span class="p">{</span><span class="n">b</span><span class="p">,</span><span class="n">a</span><span class="p">};</span>
</span><span id="__span-13-11"><a id="__codelineno-13-11" name="__codelineno-13-11"></a><a href="#__codelineno-13-11"><span class="linenos" data-linenos="11 "></span></a><span class="k">endmodule</span>
</span></code></pre></div></p>
<hr />
<h4 id="four-input-gates">Four-input gates<a class="headerlink" href="#four-input-gates" title="Anchor link to this section for reference">⚓︎</a></h4>
<p>Website: <a href="https://hdlbits.01xz.net/wiki/Gates4" target="_blank">https://hdlbits.01xz.net/wiki/Gates4</a></p>
<p>這題在複習各種gate的用法。
<div class="language-verilog highlight"><span class="filename">Verilog</span><pre><span></span><code><span id="__span-14-1"><a id="__codelineno-14-1" name="__codelineno-14-1"></a><a href="#__codelineno-14-1"><span class="linenos" data-linenos=" 1 "></span></a><span class="k">module</span><span class="w"> </span><span class="n">top_module</span><span class="p">(</span><span class="w"> </span>
</span><span id="__span-14-2"><a id="__codelineno-14-2" name="__codelineno-14-2"></a><a href="#__codelineno-14-2"><span class="linenos" data-linenos=" 2 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="p">[</span><span class="mh">3</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">in</span><span class="p">,</span>
</span><span id="__span-14-3"><a id="__codelineno-14-3" name="__codelineno-14-3"></a><a href="#__codelineno-14-3"><span class="linenos" data-linenos=" 3 "></span></a><span class="w">    </span><span class="k">output</span><span class="w"> </span><span class="n">out_and</span><span class="p">,</span>
</span><span id="__span-14-4"><a id="__codelineno-14-4" name="__codelineno-14-4"></a><a href="#__codelineno-14-4"><span class="linenos" data-linenos=" 4 "></span></a><span class="w">    </span><span class="k">output</span><span class="w"> </span><span class="n">out_or</span><span class="p">,</span>
</span><span id="__span-14-5"><a id="__codelineno-14-5" name="__codelineno-14-5"></a><a href="#__codelineno-14-5"><span class="linenos" data-linenos=" 5 "></span></a><span class="w">    </span><span class="k">output</span><span class="w"> </span><span class="n">out_xor</span>
</span><span id="__span-14-6"><a id="__codelineno-14-6" name="__codelineno-14-6"></a><a href="#__codelineno-14-6"><span class="linenos" data-linenos=" 6 "></span></a><span class="p">);</span>
</span><span id="__span-14-7"><a id="__codelineno-14-7" name="__codelineno-14-7"></a><a href="#__codelineno-14-7"><span class="linenos" data-linenos=" 7 "></span></a><span class="w">    </span><span class="k">assign</span><span class="w"> </span><span class="n">out_and</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">in</span><span class="p">[</span><span class="mh">3</span><span class="p">]</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="n">in</span><span class="p">[</span><span class="mh">2</span><span class="p">]</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="n">in</span><span class="p">[</span><span class="mh">1</span><span class="p">]</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="n">in</span><span class="p">[</span><span class="mh">0</span><span class="p">];</span>
</span><span id="__span-14-8"><a id="__codelineno-14-8" name="__codelineno-14-8"></a><a href="#__codelineno-14-8"><span class="linenos" data-linenos=" 8 "></span></a><span class="w">    </span><span class="k">assign</span><span class="w"> </span><span class="n">out_or</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">in</span><span class="p">[</span><span class="mh">3</span><span class="p">]</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">in</span><span class="p">[</span><span class="mh">2</span><span class="p">]</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">in</span><span class="p">[</span><span class="mh">1</span><span class="p">]</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">in</span><span class="p">[</span><span class="mh">0</span><span class="p">];</span>
</span><span id="__span-14-9"><a id="__codelineno-14-9" name="__codelineno-14-9"></a><a href="#__codelineno-14-9"><span class="linenos" data-linenos=" 9 "></span></a><span class="w">    </span><span class="k">assign</span><span class="w"> </span><span class="n">out_xor</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">in</span><span class="p">[</span><span class="mh">3</span><span class="p">]</span><span class="w"> </span><span class="o">^</span><span class="w"> </span><span class="n">in</span><span class="p">[</span><span class="mh">2</span><span class="p">]</span><span class="w"> </span><span class="o">^</span><span class="w"> </span><span class="n">in</span><span class="p">[</span><span class="mh">1</span><span class="p">]</span><span class="w"> </span><span class="o">^</span><span class="w"> </span><span class="n">in</span><span class="p">[</span><span class="mh">0</span><span class="p">];</span>
</span><span id="__span-14-10"><a id="__codelineno-14-10" name="__codelineno-14-10"></a><a href="#__codelineno-14-10"><span class="linenos" data-linenos="10 "></span></a><span class="k">endmodule</span>
</span></code></pre></div></p>
<h4 id="vector-concatenation-operator">Vector concatenation operator<a class="headerlink" href="#vector-concatenation-operator" title="Anchor link to this section for reference">⚓︎</a></h4>
<p>Website: <a href="https://hdlbits.01xz.net/wiki/Vector3" target="_blank">https://hdlbits.01xz.net/wiki/Vector3</a></p>
<p>這題在教concatenation的概念，然後因為題目要求要padding11在最右邊2bits，所以要加上2'b11。
<div class="language-verilog highlight"><span class="filename">Verilog</span><pre><span></span><code><span id="__span-15-1"><a id="__codelineno-15-1" name="__codelineno-15-1"></a><a href="#__codelineno-15-1"><span class="linenos" data-linenos="1 "></span></a><span class="k">module</span><span class="w"> </span><span class="n">top_module</span><span class="w"> </span><span class="p">(</span>
</span><span id="__span-15-2"><a id="__codelineno-15-2" name="__codelineno-15-2"></a><a href="#__codelineno-15-2"><span class="linenos" data-linenos="2 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="p">[</span><span class="mh">4</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">a</span><span class="p">,</span><span class="w"> </span><span class="n">b</span><span class="p">,</span><span class="w"> </span><span class="n">c</span><span class="p">,</span><span class="w"> </span><span class="n">d</span><span class="p">,</span><span class="w"> </span><span class="n">e</span><span class="p">,</span><span class="w"> </span><span class="n">f</span><span class="p">,</span>
</span><span id="__span-15-3"><a id="__codelineno-15-3" name="__codelineno-15-3"></a><a href="#__codelineno-15-3"><span class="linenos" data-linenos="3 "></span></a><span class="w">    </span><span class="k">output</span><span class="w"> </span><span class="p">[</span><span class="mh">7</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">w</span><span class="p">,</span><span class="w"> </span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="n">y</span><span class="p">,</span><span class="w"> </span><span class="n">z</span><span class="w"> </span><span class="p">);</span><span class="c1">//</span>
</span><span id="__span-15-4"><a id="__codelineno-15-4" name="__codelineno-15-4"></a><a href="#__codelineno-15-4"><span class="linenos" data-linenos="4 "></span></a>
</span><span id="__span-15-5"><a id="__codelineno-15-5" name="__codelineno-15-5"></a><a href="#__codelineno-15-5"><span class="linenos" data-linenos="5 "></span></a><span class="w">    </span><span class="k">assign</span><span class="w"> </span><span class="p">{</span><span class="n">w</span><span class="p">,</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">,</span><span class="n">z</span><span class="p">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">,</span><span class="n">c</span><span class="p">,</span><span class="n">d</span><span class="p">,</span><span class="n">e</span><span class="p">,</span><span class="n">f</span><span class="p">,</span><span class="mh">2</span><span class="mb">&#39;b11</span><span class="p">};</span>
</span><span id="__span-15-6"><a id="__codelineno-15-6" name="__codelineno-15-6"></a><a href="#__codelineno-15-6"><span class="linenos" data-linenos="6 "></span></a>
</span><span id="__span-15-7"><a id="__codelineno-15-7" name="__codelineno-15-7"></a><a href="#__codelineno-15-7"><span class="linenos" data-linenos="7 "></span></a><span class="k">endmodule</span>
</span></code></pre></div></p>
<hr />
<h4 id="vector-reversal-1">Vector reversal 1<a class="headerlink" href="#vector-reversal-1" title="Anchor link to this section for reference">⚓︎</a></h4>
<p>Website: <a href="https://hdlbits.01xz.net/wiki/Vectorr" target="_blank">https://hdlbits.01xz.net/wiki/Vectorr</a></p>
<p>這題當然能用concatenation的概念完成，當然如果想寫個類似for loop的方法連線，可以參考generate語法。
<div class="language-verilog highlight"><span class="filename">Verilog</span><pre><span></span><code><span id="__span-16-1"><a id="__codelineno-16-1" name="__codelineno-16-1"></a><a href="#__codelineno-16-1"><span class="linenos" data-linenos=" 1 "></span></a><span class="k">module</span><span class="w"> </span><span class="n">top_module</span><span class="p">(</span><span class="w"> </span>
</span><span id="__span-16-2"><a id="__codelineno-16-2" name="__codelineno-16-2"></a><a href="#__codelineno-16-2"><span class="linenos" data-linenos=" 2 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="p">[</span><span class="mh">7</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">in</span><span class="p">,</span>
</span><span id="__span-16-3"><a id="__codelineno-16-3" name="__codelineno-16-3"></a><a href="#__codelineno-16-3"><span class="linenos" data-linenos=" 3 "></span></a><span class="w">    </span><span class="k">output</span><span class="w"> </span><span class="p">[</span><span class="mh">7</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">out</span>
</span><span id="__span-16-4"><a id="__codelineno-16-4" name="__codelineno-16-4"></a><a href="#__codelineno-16-4"><span class="linenos" data-linenos=" 4 "></span></a><span class="p">);</span>
</span><span id="__span-16-5"><a id="__codelineno-16-5" name="__codelineno-16-5"></a><a href="#__codelineno-16-5"><span class="linenos" data-linenos=" 5 "></span></a><span class="w">    </span><span class="k">generate</span>
</span><span id="__span-16-6"><a id="__codelineno-16-6" name="__codelineno-16-6"></a><a href="#__codelineno-16-6"><span class="linenos" data-linenos=" 6 "></span></a><span class="w">        </span><span class="k">genvar</span><span class="w"> </span><span class="n">i</span><span class="p">;</span>
</span><span id="__span-16-7"><a id="__codelineno-16-7" name="__codelineno-16-7"></a><a href="#__codelineno-16-7"><span class="linenos" data-linenos=" 7 "></span></a><span class="w">        </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">i</span><span class="o">=</span><span class="mh">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">&lt;</span><span class="mh">8</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">i</span><span class="o">+</span><span class="mh">1</span><span class="p">)</span><span class="w"> </span><span class="k">begin</span><span class="o">:</span><span class="w"> </span><span class="n">my_block_name</span>
</span><span id="__span-16-8"><a id="__codelineno-16-8" name="__codelineno-16-8"></a><a href="#__codelineno-16-8"><span class="linenos" data-linenos=" 8 "></span></a><span class="w">            </span><span class="k">assign</span><span class="w"> </span><span class="n">out</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">in</span><span class="p">[</span><span class="mh">8</span><span class="o">-</span><span class="n">i</span><span class="o">-</span><span class="mh">1</span><span class="p">];</span>
</span><span id="__span-16-9"><a id="__codelineno-16-9" name="__codelineno-16-9"></a><a href="#__codelineno-16-9"><span class="linenos" data-linenos=" 9 "></span></a><span class="w">        </span><span class="k">end</span>
</span><span id="__span-16-10"><a id="__codelineno-16-10" name="__codelineno-16-10"></a><a href="#__codelineno-16-10"><span class="linenos" data-linenos="10 "></span></a><span class="w">    </span><span class="k">endgenerate</span>
</span><span id="__span-16-11"><a id="__codelineno-16-11" name="__codelineno-16-11"></a><a href="#__codelineno-16-11"><span class="linenos" data-linenos="11 "></span></a><span class="k">endmodule</span>
</span></code></pre></div></p>
<hr />
<h4 id="replication-operator">Replication operator<a class="headerlink" href="#replication-operator" title="Anchor link to this section for reference">⚓︎</a></h4>
<p>Website: <a href="https://hdlbits.01xz.net/wiki/Vector4" target="_blank">https://hdlbits.01xz.net/wiki/Vector4</a></p>
<p>這題將8bit轉成32bit，並且多餘的24bit要填入in[7]，所以語法如下。
<div class="language-verilog highlight"><span class="filename">Verilog</span><pre><span></span><code><span id="__span-17-1"><a id="__codelineno-17-1" name="__codelineno-17-1"></a><a href="#__codelineno-17-1"><span class="linenos" data-linenos="1 "></span></a><span class="k">module</span><span class="w"> </span><span class="n">top_module</span><span class="w"> </span><span class="p">(</span>
</span><span id="__span-17-2"><a id="__codelineno-17-2" name="__codelineno-17-2"></a><a href="#__codelineno-17-2"><span class="linenos" data-linenos="2 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="p">[</span><span class="mh">7</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">in</span><span class="p">,</span>
</span><span id="__span-17-3"><a id="__codelineno-17-3" name="__codelineno-17-3"></a><a href="#__codelineno-17-3"><span class="linenos" data-linenos="3 "></span></a><span class="w">    </span><span class="k">output</span><span class="w"> </span><span class="p">[</span><span class="mh">31</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">out</span><span class="w"> </span><span class="p">);</span><span class="c1">//</span>
</span><span id="__span-17-4"><a id="__codelineno-17-4" name="__codelineno-17-4"></a><a href="#__codelineno-17-4"><span class="linenos" data-linenos="4 "></span></a>
</span><span id="__span-17-5"><a id="__codelineno-17-5" name="__codelineno-17-5"></a><a href="#__codelineno-17-5"><span class="linenos" data-linenos="5 "></span></a><span class="w">    </span><span class="k">assign</span><span class="w"> </span><span class="n">out</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="mh">24</span><span class="p">{</span><span class="w"> </span><span class="n">in</span><span class="p">[</span><span class="mh">7</span><span class="p">]</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">},</span><span class="n">in</span><span class="p">};</span>
</span><span id="__span-17-6"><a id="__codelineno-17-6" name="__codelineno-17-6"></a><a href="#__codelineno-17-6"><span class="linenos" data-linenos="6 "></span></a>
</span><span id="__span-17-7"><a id="__codelineno-17-7" name="__codelineno-17-7"></a><a href="#__codelineno-17-7"><span class="linenos" data-linenos="7 "></span></a><span class="k">endmodule</span>
</span></code></pre></div></p>
<hr />
<h4 id="more-replication">More replication<a class="headerlink" href="#more-replication" title="Anchor link to this section for reference">⚓︎</a></h4>
<p>Website: <a href="https://hdlbits.01xz.net/wiki/Vector5" target="_blank">https://hdlbits.01xz.net/wiki/Vector5</a></p>
<p>這題也是練習replication，aaaaabbbbbcccccdddddeeeee可以寫成<code>{ {5{a}},{5{b}},{5{c}},{5{d}},{5{e}}}</code>，abcdeabcdeabcdeabcdeabcde可以寫成<code>{5{a,b,c,d,e}}</code>。
<div class="language-verilog highlight"><span class="filename">Verilog</span><pre><span></span><code><span id="__span-18-1"><a id="__codelineno-18-1" name="__codelineno-18-1"></a><a href="#__codelineno-18-1"><span class="linenos" data-linenos="1 "></span></a><span class="k">module</span><span class="w"> </span><span class="n">top_module</span><span class="w"> </span><span class="p">(</span>
</span><span id="__span-18-2"><a id="__codelineno-18-2" name="__codelineno-18-2"></a><a href="#__codelineno-18-2"><span class="linenos" data-linenos="2 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">a</span><span class="p">,</span><span class="w"> </span><span class="n">b</span><span class="p">,</span><span class="w"> </span><span class="n">c</span><span class="p">,</span><span class="w"> </span><span class="n">d</span><span class="p">,</span><span class="w"> </span><span class="n">e</span><span class="p">,</span>
</span><span id="__span-18-3"><a id="__codelineno-18-3" name="__codelineno-18-3"></a><a href="#__codelineno-18-3"><span class="linenos" data-linenos="3 "></span></a><span class="w">    </span><span class="k">output</span><span class="w"> </span><span class="p">[</span><span class="mh">24</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">out</span><span class="w"> </span><span class="p">);</span><span class="c1">//</span>
</span><span id="__span-18-4"><a id="__codelineno-18-4" name="__codelineno-18-4"></a><a href="#__codelineno-18-4"><span class="linenos" data-linenos="4 "></span></a><span class="w">    </span><span class="k">assign</span><span class="w"> </span><span class="n">out</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">~</span><span class="p">({</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="mh">5</span><span class="p">{</span><span class="n">a</span><span class="p">}</span><span class="w"> </span><span class="p">},{</span><span class="mh">5</span><span class="p">{</span><span class="n">b</span><span class="p">}},{</span><span class="mh">5</span><span class="p">{</span><span class="n">c</span><span class="p">}},{</span><span class="mh">5</span><span class="p">{</span><span class="n">d</span><span class="p">}},{</span><span class="mh">5</span><span class="p">{</span><span class="n">e</span><span class="p">}}}</span><span class="w"> </span><span class="o">^</span><span class="w"> </span><span class="p">{</span><span class="mh">5</span><span class="p">{</span><span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">,</span><span class="n">c</span><span class="p">,</span><span class="n">d</span><span class="p">,</span><span class="n">e</span><span class="p">}});</span>
</span><span id="__span-18-5"><a id="__codelineno-18-5" name="__codelineno-18-5"></a><a href="#__codelineno-18-5"><span class="linenos" data-linenos="5 "></span></a><span class="k">endmodule</span>
</span></code></pre></div></p>
<hr />
<h3 id="modules-hierarchy">Modules: Hierarchy<a class="headerlink" href="#modules-hierarchy" title="Anchor link to this section for reference">⚓︎</a></h3>
<h4 id="modules">Modules<a class="headerlink" href="#modules" title="Anchor link to this section for reference">⚓︎</a></h4>
<p>Website: <a href="https://hdlbits.01xz.net/wiki/Module" target="_blank">https://hdlbits.01xz.net/wiki/Module</a></p>
<p>這題在教如何引用module。
<div class="language-verilog highlight"><span class="filename">Verilog</span><pre><span></span><code><span id="__span-19-1"><a id="__codelineno-19-1" name="__codelineno-19-1"></a><a href="#__codelineno-19-1"><span class="linenos" data-linenos="1 "></span></a><span class="k">module</span><span class="w"> </span><span class="n">top_module</span><span class="w"> </span><span class="p">(</span><span class="w"> </span><span class="k">input</span><span class="w"> </span><span class="n">a</span><span class="p">,</span><span class="w"> </span><span class="k">input</span><span class="w"> </span><span class="n">b</span><span class="p">,</span><span class="w"> </span><span class="k">output</span><span class="w"> </span><span class="n">out</span><span class="w"> </span><span class="p">);</span>
</span><span id="__span-19-2"><a id="__codelineno-19-2" name="__codelineno-19-2"></a><a href="#__codelineno-19-2"><span class="linenos" data-linenos="2 "></span></a><span class="w">    </span><span class="n">mod_a</span><span class="w"> </span><span class="n">moda</span><span class="p">(.</span><span class="n">out</span><span class="p">(</span><span class="n">out</span><span class="p">),.</span><span class="n">in1</span><span class="p">(</span><span class="n">a</span><span class="p">),.</span><span class="n">in2</span><span class="p">(</span><span class="n">b</span><span class="p">));</span>
</span><span id="__span-19-3"><a id="__codelineno-19-3" name="__codelineno-19-3"></a><a href="#__codelineno-19-3"><span class="linenos" data-linenos="3 "></span></a><span class="k">endmodule</span>
</span></code></pre></div></p>
<hr />
<h4 id="connecting-ports-by-position">Connecting ports by position<a class="headerlink" href="#connecting-ports-by-position" title="Anchor link to this section for reference">⚓︎</a></h4>
<p>Website: <a href="https://hdlbits.01xz.net/wiki/Module_pos" target="_blank">https://hdlbits.01xz.net/wiki/Module_pos</a></p>
<p>這題跟上題差不多，題目要求我們照著argument的位置接線。
<div class="language-verilog highlight"><span class="filename">Verilog</span><pre><span></span><code><span id="__span-20-1"><a id="__codelineno-20-1" name="__codelineno-20-1"></a><a href="#__codelineno-20-1"><span class="linenos" data-linenos=" 1 "></span></a><span class="k">module</span><span class="w"> </span><span class="n">top_module</span><span class="w"> </span><span class="p">(</span><span class="w"> </span>
</span><span id="__span-20-2"><a id="__codelineno-20-2" name="__codelineno-20-2"></a><a href="#__codelineno-20-2"><span class="linenos" data-linenos=" 2 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">a</span><span class="p">,</span><span class="w"> </span>
</span><span id="__span-20-3"><a id="__codelineno-20-3" name="__codelineno-20-3"></a><a href="#__codelineno-20-3"><span class="linenos" data-linenos=" 3 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">b</span><span class="p">,</span><span class="w"> </span>
</span><span id="__span-20-4"><a id="__codelineno-20-4" name="__codelineno-20-4"></a><a href="#__codelineno-20-4"><span class="linenos" data-linenos=" 4 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">c</span><span class="p">,</span>
</span><span id="__span-20-5"><a id="__codelineno-20-5" name="__codelineno-20-5"></a><a href="#__codelineno-20-5"><span class="linenos" data-linenos=" 5 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">d</span><span class="p">,</span>
</span><span id="__span-20-6"><a id="__codelineno-20-6" name="__codelineno-20-6"></a><a href="#__codelineno-20-6"><span class="linenos" data-linenos=" 6 "></span></a><span class="w">    </span><span class="k">output</span><span class="w"> </span><span class="n">out1</span><span class="p">,</span>
</span><span id="__span-20-7"><a id="__codelineno-20-7" name="__codelineno-20-7"></a><a href="#__codelineno-20-7"><span class="linenos" data-linenos=" 7 "></span></a><span class="w">    </span><span class="k">output</span><span class="w"> </span><span class="n">out2</span>
</span><span id="__span-20-8"><a id="__codelineno-20-8" name="__codelineno-20-8"></a><a href="#__codelineno-20-8"><span class="linenos" data-linenos=" 8 "></span></a><span class="p">);</span>
</span><span id="__span-20-9"><a id="__codelineno-20-9" name="__codelineno-20-9"></a><a href="#__codelineno-20-9"><span class="linenos" data-linenos=" 9 "></span></a><span class="w">    </span><span class="k">module</span><span class="w"> </span><span class="n">mod_a</span><span class="w"> </span><span class="p">(</span><span class="w"> </span><span class="n">out1</span><span class="p">,</span><span class="w"> </span><span class="n">out2</span><span class="p">,</span><span class="w"> </span><span class="n">a</span><span class="p">,</span><span class="w"> </span><span class="n">b</span><span class="p">,</span><span class="w"> </span><span class="n">c</span><span class="p">,</span><span class="w"> </span><span class="n">d</span><span class="w"> </span><span class="p">);</span>
</span><span id="__span-20-10"><a id="__codelineno-20-10" name="__codelineno-20-10"></a><a href="#__codelineno-20-10"><span class="linenos" data-linenos="10 "></span></a><span class="k">endmodule</span>
</span></code></pre></div></p>
<hr />
<h4 id="connecting-ports-by-name">Connecting ports by name<a class="headerlink" href="#connecting-ports-by-name" title="Anchor link to this section for reference">⚓︎</a></h4>
<p>Website: <a href="https://hdlbits.01xz.net/wiki/Module_name" target="_blank">https://hdlbits.01xz.net/wiki/Module_name</a></p>
<p>這題跟上題差不多，只是上題是要求根據argument的位置接線，這題是要求跟據argument的名字接線。
<div class="language-verilog highlight"><span class="filename">Verilog</span><pre><span></span><code><span id="__span-21-1"><a id="__codelineno-21-1" name="__codelineno-21-1"></a><a href="#__codelineno-21-1"><span class="linenos" data-linenos=" 1 "></span></a><span class="k">module</span><span class="w"> </span><span class="n">top_module</span><span class="w"> </span><span class="p">(</span><span class="w"> </span>
</span><span id="__span-21-2"><a id="__codelineno-21-2" name="__codelineno-21-2"></a><a href="#__codelineno-21-2"><span class="linenos" data-linenos=" 2 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">a</span><span class="p">,</span><span class="w"> </span>
</span><span id="__span-21-3"><a id="__codelineno-21-3" name="__codelineno-21-3"></a><a href="#__codelineno-21-3"><span class="linenos" data-linenos=" 3 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">b</span><span class="p">,</span><span class="w"> </span>
</span><span id="__span-21-4"><a id="__codelineno-21-4" name="__codelineno-21-4"></a><a href="#__codelineno-21-4"><span class="linenos" data-linenos=" 4 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">c</span><span class="p">,</span>
</span><span id="__span-21-5"><a id="__codelineno-21-5" name="__codelineno-21-5"></a><a href="#__codelineno-21-5"><span class="linenos" data-linenos=" 5 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">d</span><span class="p">,</span>
</span><span id="__span-21-6"><a id="__codelineno-21-6" name="__codelineno-21-6"></a><a href="#__codelineno-21-6"><span class="linenos" data-linenos=" 6 "></span></a><span class="w">    </span><span class="k">output</span><span class="w"> </span><span class="n">out1</span><span class="p">,</span>
</span><span id="__span-21-7"><a id="__codelineno-21-7" name="__codelineno-21-7"></a><a href="#__codelineno-21-7"><span class="linenos" data-linenos=" 7 "></span></a><span class="w">    </span><span class="k">output</span><span class="w"> </span><span class="n">out2</span>
</span><span id="__span-21-8"><a id="__codelineno-21-8" name="__codelineno-21-8"></a><a href="#__codelineno-21-8"><span class="linenos" data-linenos=" 8 "></span></a><span class="p">);</span>
</span><span id="__span-21-9"><a id="__codelineno-21-9" name="__codelineno-21-9"></a><a href="#__codelineno-21-9"><span class="linenos" data-linenos=" 9 "></span></a><span class="w">    </span><span class="n">mod_a</span><span class="w"> </span><span class="n">moda</span><span class="p">(.</span><span class="n">out1</span><span class="p">(</span><span class="n">out1</span><span class="p">),</span><span class="w"> </span><span class="p">.</span><span class="n">out2</span><span class="p">(</span><span class="n">out2</span><span class="p">),</span><span class="w"> </span><span class="p">.</span><span class="n">in1</span><span class="p">(</span><span class="n">a</span><span class="p">),</span><span class="w"> </span><span class="p">.</span><span class="n">in2</span><span class="p">(</span><span class="n">b</span><span class="p">),</span><span class="w"> </span><span class="p">.</span><span class="n">in3</span><span class="p">(</span><span class="n">c</span><span class="p">),</span><span class="w"> </span><span class="p">.</span><span class="n">in4</span><span class="p">(</span><span class="n">d</span><span class="p">));</span>
</span><span id="__span-21-10"><a id="__codelineno-21-10" name="__codelineno-21-10"></a><a href="#__codelineno-21-10"><span class="linenos" data-linenos="10 "></span></a><span class="k">endmodule</span>
</span></code></pre></div></p>
<hr />
<h4 id="three-modules">Three modules<a class="headerlink" href="#three-modules" title="Anchor link to this section for reference">⚓︎</a></h4>
<p>Website: <a href="https://hdlbits.01xz.net/wiki/Module_shift" target="_blank">https://hdlbits.01xz.net/wiki/Module_shift</a></p>
<p>這題是練習用接線的方式，將3個dff串接在一起。
<div class="language-verilog highlight"><span class="filename">Verilog</span><pre><span></span><code><span id="__span-22-1"><a id="__codelineno-22-1" name="__codelineno-22-1"></a><a href="#__codelineno-22-1"><span class="linenos" data-linenos="1 "></span></a><span class="k">module</span><span class="w"> </span><span class="n">top_module</span><span class="w"> </span><span class="p">(</span><span class="w"> </span><span class="k">input</span><span class="w"> </span><span class="n">clk</span><span class="p">,</span><span class="w"> </span><span class="k">input</span><span class="w"> </span><span class="n">d</span><span class="p">,</span><span class="w"> </span><span class="k">output</span><span class="w"> </span><span class="n">q</span><span class="w"> </span><span class="p">);</span>
</span><span id="__span-22-2"><a id="__codelineno-22-2" name="__codelineno-22-2"></a><a href="#__codelineno-22-2"><span class="linenos" data-linenos="2 "></span></a><span class="w">    </span><span class="kt">wire</span><span class="w"> </span><span class="n">q1</span><span class="p">,</span><span class="n">q2</span><span class="p">;</span>
</span><span id="__span-22-3"><a id="__codelineno-22-3" name="__codelineno-22-3"></a><a href="#__codelineno-22-3"><span class="linenos" data-linenos="3 "></span></a><span class="w">    </span><span class="n">my_dff</span><span class="w"> </span><span class="n">dff1</span><span class="p">(</span><span class="w"> </span><span class="p">.</span><span class="n">clk</span><span class="p">(</span><span class="n">clk</span><span class="p">),</span><span class="w"> </span><span class="p">.</span><span class="n">d</span><span class="p">(</span><span class="n">d</span><span class="p">),</span><span class="w"> </span><span class="p">.</span><span class="n">q</span><span class="p">(</span><span class="n">q1</span><span class="p">));</span>
</span><span id="__span-22-4"><a id="__codelineno-22-4" name="__codelineno-22-4"></a><a href="#__codelineno-22-4"><span class="linenos" data-linenos="4 "></span></a><span class="w">    </span><span class="n">my_dff</span><span class="w"> </span><span class="n">dff2</span><span class="p">(</span><span class="w"> </span><span class="p">.</span><span class="n">clk</span><span class="p">(</span><span class="n">clk</span><span class="p">),</span><span class="w"> </span><span class="p">.</span><span class="n">d</span><span class="p">(</span><span class="n">q1</span><span class="p">),</span><span class="w"> </span><span class="p">.</span><span class="n">q</span><span class="p">(</span><span class="n">q2</span><span class="p">));</span>
</span><span id="__span-22-5"><a id="__codelineno-22-5" name="__codelineno-22-5"></a><a href="#__codelineno-22-5"><span class="linenos" data-linenos="5 "></span></a><span class="w">    </span><span class="n">my_dff</span><span class="w"> </span><span class="n">dff3</span><span class="p">(</span><span class="w"> </span><span class="p">.</span><span class="n">clk</span><span class="p">(</span><span class="n">clk</span><span class="p">),</span><span class="w"> </span><span class="p">.</span><span class="n">d</span><span class="p">(</span><span class="n">q2</span><span class="p">),</span><span class="w"> </span><span class="p">.</span><span class="n">q</span><span class="p">(</span><span class="n">q</span><span class="p">));</span>
</span><span id="__span-22-6"><a id="__codelineno-22-6" name="__codelineno-22-6"></a><a href="#__codelineno-22-6"><span class="linenos" data-linenos="6 "></span></a><span class="k">endmodule</span>
</span></code></pre></div></p>
<hr />
<h4 id="modules-and-vectors">Modules and vectors<a class="headerlink" href="#modules-and-vectors" title="Anchor link to this section for reference">⚓︎</a></h4>
<p>Website: <a href="https://hdlbits.01xz.net/wiki/Module_shift8" target="_blank">https://hdlbits.01xz.net/wiki/Module_shift8</a></p>
<p>這題跟上題差不多，只是後面多接了一個multiplexer。而multiplexer可以用always block實現，速度會比用if else還快，而因為multiplexer是combinational logic，所以要用blocking assignments。
<div class="language-verilog highlight"><span class="filename">Verilog</span><pre><span></span><code><span id="__span-23-1"><a id="__codelineno-23-1" name="__codelineno-23-1"></a><a href="#__codelineno-23-1"><span class="linenos" data-linenos=" 1 "></span></a><span class="k">module</span><span class="w"> </span><span class="n">top_module</span><span class="w"> </span><span class="p">(</span><span class="w"> </span>
</span><span id="__span-23-2"><a id="__codelineno-23-2" name="__codelineno-23-2"></a><a href="#__codelineno-23-2"><span class="linenos" data-linenos=" 2 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">clk</span><span class="p">,</span><span class="w"> </span>
</span><span id="__span-23-3"><a id="__codelineno-23-3" name="__codelineno-23-3"></a><a href="#__codelineno-23-3"><span class="linenos" data-linenos=" 3 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="p">[</span><span class="mh">7</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">d</span><span class="p">,</span><span class="w"> </span>
</span><span id="__span-23-4"><a id="__codelineno-23-4" name="__codelineno-23-4"></a><a href="#__codelineno-23-4"><span class="linenos" data-linenos=" 4 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="p">[</span><span class="mh">1</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">sel</span><span class="p">,</span><span class="w"> </span>
</span><span id="__span-23-5"><a id="__codelineno-23-5" name="__codelineno-23-5"></a><a href="#__codelineno-23-5"><span class="linenos" data-linenos=" 5 "></span></a><span class="w">    </span><span class="k">output</span><span class="w"> </span><span class="p">[</span><span class="mh">7</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">q</span><span class="w"> </span>
</span><span id="__span-23-6"><a id="__codelineno-23-6" name="__codelineno-23-6"></a><a href="#__codelineno-23-6"><span class="linenos" data-linenos=" 6 "></span></a><span class="p">);</span>
</span><span id="__span-23-7"><a id="__codelineno-23-7" name="__codelineno-23-7"></a><a href="#__codelineno-23-7"><span class="linenos" data-linenos=" 7 "></span></a><span class="w">    </span><span class="kt">wire</span><span class="w"> </span><span class="p">[</span><span class="mh">7</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="n">q1</span><span class="p">,</span><span class="n">q2</span><span class="p">,</span><span class="n">q3</span><span class="p">;</span>
</span><span id="__span-23-8"><a id="__codelineno-23-8" name="__codelineno-23-8"></a><a href="#__codelineno-23-8"><span class="linenos" data-linenos=" 8 "></span></a><span class="w">    </span><span class="n">my_dff8</span><span class="w"> </span><span class="n">dff1</span><span class="p">(</span><span class="w"> </span><span class="p">.</span><span class="n">clk</span><span class="p">(</span><span class="n">clk</span><span class="p">),</span><span class="w"> </span><span class="p">.</span><span class="n">d</span><span class="p">(</span><span class="n">d</span><span class="p">),</span><span class="w"> </span><span class="p">.</span><span class="n">q</span><span class="p">(</span><span class="n">q1</span><span class="p">));</span>
</span><span id="__span-23-9"><a id="__codelineno-23-9" name="__codelineno-23-9"></a><a href="#__codelineno-23-9"><span class="linenos" data-linenos=" 9 "></span></a><span class="w">    </span><span class="n">my_dff8</span><span class="w"> </span><span class="n">dff2</span><span class="p">(</span><span class="w"> </span><span class="p">.</span><span class="n">clk</span><span class="p">(</span><span class="n">clk</span><span class="p">),</span><span class="w"> </span><span class="p">.</span><span class="n">d</span><span class="p">(</span><span class="n">q1</span><span class="p">),</span><span class="w"> </span><span class="p">.</span><span class="n">q</span><span class="p">(</span><span class="n">q2</span><span class="p">));</span>
</span><span id="__span-23-10"><a id="__codelineno-23-10" name="__codelineno-23-10"></a><a href="#__codelineno-23-10"><span class="linenos" data-linenos="10 "></span></a><span class="w">    </span><span class="n">my_dff8</span><span class="w"> </span><span class="n">dff3</span><span class="p">(</span><span class="w"> </span><span class="p">.</span><span class="n">clk</span><span class="p">(</span><span class="n">clk</span><span class="p">),</span><span class="w"> </span><span class="p">.</span><span class="n">d</span><span class="p">(</span><span class="n">q2</span><span class="p">),</span><span class="w"> </span><span class="p">.</span><span class="n">q</span><span class="p">(</span><span class="n">q3</span><span class="p">));</span>
</span><span id="__span-23-11"><a id="__codelineno-23-11" name="__codelineno-23-11"></a><a href="#__codelineno-23-11"><span class="linenos" data-linenos="11 "></span></a><span class="w">    </span><span class="k">always</span><span class="w"> </span><span class="p">@(</span><span class="o">*</span><span class="p">)</span>
</span><span id="__span-23-12"><a id="__codelineno-23-12" name="__codelineno-23-12"></a><a href="#__codelineno-23-12"><span class="linenos" data-linenos="12 "></span></a><span class="w">        </span><span class="k">case</span><span class="p">(</span><span class="n">sel</span><span class="p">)</span>
</span><span id="__span-23-13"><a id="__codelineno-23-13" name="__codelineno-23-13"></a><a href="#__codelineno-23-13"><span class="linenos" data-linenos="13 "></span></a><span class="w">            </span><span class="mh">2</span><span class="mb">&#39;b00</span><span class="o">:</span><span class="w"> </span><span class="n">q</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">d</span><span class="p">;</span>
</span><span id="__span-23-14"><a id="__codelineno-23-14" name="__codelineno-23-14"></a><a href="#__codelineno-23-14"><span class="linenos" data-linenos="14 "></span></a><span class="w">            </span><span class="mh">2</span><span class="mb">&#39;b01</span><span class="o">:</span><span class="w"> </span><span class="n">q</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">q1</span><span class="p">;</span>
</span><span id="__span-23-15"><a id="__codelineno-23-15" name="__codelineno-23-15"></a><a href="#__codelineno-23-15"><span class="linenos" data-linenos="15 "></span></a><span class="w">            </span><span class="mh">2</span><span class="mb">&#39;b10</span><span class="o">:</span><span class="w"> </span><span class="n">q</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">q2</span><span class="p">;</span>
</span><span id="__span-23-16"><a id="__codelineno-23-16" name="__codelineno-23-16"></a><a href="#__codelineno-23-16"><span class="linenos" data-linenos="16 "></span></a><span class="w">            </span><span class="mh">2</span><span class="mb">&#39;b11</span><span class="o">:</span><span class="w"> </span><span class="n">q</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">q3</span><span class="p">;</span>
</span><span id="__span-23-17"><a id="__codelineno-23-17" name="__codelineno-23-17"></a><a href="#__codelineno-23-17"><span class="linenos" data-linenos="17 "></span></a><span class="w">        </span><span class="k">endcase</span>
</span><span id="__span-23-18"><a id="__codelineno-23-18" name="__codelineno-23-18"></a><a href="#__codelineno-23-18"><span class="linenos" data-linenos="18 "></span></a><span class="k">endmodule</span>
</span></code></pre></div></p>
<hr />
<h4 id="adder-1">Adder 1<a class="headerlink" href="#adder-1" title="Anchor link to this section for reference">⚓︎</a></h4>
<p>Website: <a href="https://hdlbits.01xz.net/wiki/Module_add" target="_blank">https://hdlbits.01xz.net/wiki/Module_add</a></p>
<p>這題單純把兩個16bit adder接在一起，值得注意的是，如果argument不想接線，直接留空就行了。
<div class="language-verilog highlight"><span class="filename">Verilog</span><pre><span></span><code><span id="__span-24-1"><a id="__codelineno-24-1" name="__codelineno-24-1"></a><a href="#__codelineno-24-1"><span class="linenos" data-linenos="1 "></span></a><span class="k">module</span><span class="w"> </span><span class="n">top_module</span><span class="p">(</span>
</span><span id="__span-24-2"><a id="__codelineno-24-2" name="__codelineno-24-2"></a><a href="#__codelineno-24-2"><span class="linenos" data-linenos="2 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="p">[</span><span class="mh">31</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">a</span><span class="p">,</span>
</span><span id="__span-24-3"><a id="__codelineno-24-3" name="__codelineno-24-3"></a><a href="#__codelineno-24-3"><span class="linenos" data-linenos="3 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="p">[</span><span class="mh">31</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">b</span><span class="p">,</span>
</span><span id="__span-24-4"><a id="__codelineno-24-4" name="__codelineno-24-4"></a><a href="#__codelineno-24-4"><span class="linenos" data-linenos="4 "></span></a><span class="w">    </span><span class="k">output</span><span class="w"> </span><span class="p">[</span><span class="mh">31</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">sum</span>
</span><span id="__span-24-5"><a id="__codelineno-24-5" name="__codelineno-24-5"></a><a href="#__codelineno-24-5"><span class="linenos" data-linenos="5 "></span></a><span class="p">);</span>
</span><span id="__span-24-6"><a id="__codelineno-24-6" name="__codelineno-24-6"></a><a href="#__codelineno-24-6"><span class="linenos" data-linenos="6 "></span></a><span class="w">    </span><span class="kt">wire</span><span class="w"> </span><span class="n">c1</span><span class="p">;</span>
</span><span id="__span-24-7"><a id="__codelineno-24-7" name="__codelineno-24-7"></a><a href="#__codelineno-24-7"><span class="linenos" data-linenos="7 "></span></a><span class="w">    </span><span class="n">add16</span><span class="w"> </span><span class="n">add_1</span><span class="p">(</span><span class="w"> </span><span class="p">.</span><span class="n">a</span><span class="p">(</span><span class="n">a</span><span class="p">[</span><span class="mh">15</span><span class="o">:</span><span class="mh">0</span><span class="p">]),</span><span class="w"> </span><span class="p">.</span><span class="n">b</span><span class="p">(</span><span class="n">b</span><span class="p">[</span><span class="mh">15</span><span class="o">:</span><span class="mh">0</span><span class="p">]),</span><span class="w"> </span><span class="p">.</span><span class="n">cin</span><span class="p">(</span><span class="mh">1</span><span class="mb">&#39;b0</span><span class="p">),</span><span class="w"> </span><span class="p">.</span><span class="n">sum</span><span class="p">(</span><span class="n">sum</span><span class="p">[</span><span class="mh">15</span><span class="o">:</span><span class="mh">0</span><span class="p">]),</span><span class="w"> </span><span class="p">.</span><span class="n">cout</span><span class="p">(</span><span class="n">c1</span><span class="p">));</span>
</span><span id="__span-24-8"><a id="__codelineno-24-8" name="__codelineno-24-8"></a><a href="#__codelineno-24-8"><span class="linenos" data-linenos="8 "></span></a><span class="w">    </span><span class="n">add16</span><span class="w"> </span><span class="n">add_2</span><span class="p">(</span><span class="w"> </span><span class="p">.</span><span class="n">a</span><span class="p">(</span><span class="n">a</span><span class="p">[</span><span class="mh">31</span><span class="o">:</span><span class="mh">16</span><span class="p">]),</span><span class="w"> </span><span class="p">.</span><span class="n">b</span><span class="p">(</span><span class="n">b</span><span class="p">[</span><span class="mh">31</span><span class="o">:</span><span class="mh">16</span><span class="p">]),</span><span class="w"> </span><span class="p">.</span><span class="n">cin</span><span class="p">(</span><span class="n">c1</span><span class="p">),</span><span class="w"> </span><span class="p">.</span><span class="n">sum</span><span class="p">(</span><span class="n">sum</span><span class="p">[</span><span class="mh">31</span><span class="o">:</span><span class="mh">16</span><span class="p">]),</span><span class="w"> </span><span class="p">.</span><span class="n">cout</span><span class="p">());</span>
</span><span id="__span-24-9"><a id="__codelineno-24-9" name="__codelineno-24-9"></a><a href="#__codelineno-24-9"><span class="linenos" data-linenos="9 "></span></a><span class="k">endmodule</span>
</span></code></pre></div></p>
<hr />
<h4 id="adder-2">Adder 2<a class="headerlink" href="#adder-2" title="Anchor link to this section for reference">⚓︎</a></h4>
<p>Website: <a href="hhttps://hdlbits.01xz.net/wiki/Module_fadd" target="_blank">https://hdlbits.01xz.net/wiki/Module_fadd</a></p>
<p>這題跟上題差不多，只是要多寫一個1 bit full adder，可以用concatenation來實現。
<div class="language-verilog highlight"><span class="filename">Verilog</span><pre><span></span><code><span id="__span-25-1"><a id="__codelineno-25-1" name="__codelineno-25-1"></a><a href="#__codelineno-25-1"><span class="linenos" data-linenos=" 1 "></span></a><span class="k">module</span><span class="w"> </span><span class="n">top_module</span><span class="w"> </span><span class="p">(</span>
</span><span id="__span-25-2"><a id="__codelineno-25-2" name="__codelineno-25-2"></a><a href="#__codelineno-25-2"><span class="linenos" data-linenos=" 2 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="p">[</span><span class="mh">31</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">a</span><span class="p">,</span>
</span><span id="__span-25-3"><a id="__codelineno-25-3" name="__codelineno-25-3"></a><a href="#__codelineno-25-3"><span class="linenos" data-linenos=" 3 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="p">[</span><span class="mh">31</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">b</span><span class="p">,</span>
</span><span id="__span-25-4"><a id="__codelineno-25-4" name="__codelineno-25-4"></a><a href="#__codelineno-25-4"><span class="linenos" data-linenos=" 4 "></span></a><span class="w">    </span><span class="k">output</span><span class="w"> </span><span class="p">[</span><span class="mh">31</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">sum</span>
</span><span id="__span-25-5"><a id="__codelineno-25-5" name="__codelineno-25-5"></a><a href="#__codelineno-25-5"><span class="linenos" data-linenos=" 5 "></span></a><span class="p">);</span><span class="c1">//</span>
</span><span id="__span-25-6"><a id="__codelineno-25-6" name="__codelineno-25-6"></a><a href="#__codelineno-25-6"><span class="linenos" data-linenos=" 6 "></span></a><span class="w">    </span><span class="kt">wire</span><span class="w"> </span><span class="n">c1</span><span class="p">;</span>
</span><span id="__span-25-7"><a id="__codelineno-25-7" name="__codelineno-25-7"></a><a href="#__codelineno-25-7"><span class="linenos" data-linenos=" 7 "></span></a><span class="w">    </span><span class="n">add16</span><span class="w"> </span><span class="n">add_1</span><span class="p">(</span><span class="w"> </span><span class="p">.</span><span class="n">a</span><span class="p">(</span><span class="n">a</span><span class="p">[</span><span class="mh">15</span><span class="o">:</span><span class="mh">0</span><span class="p">]),</span><span class="w"> </span><span class="p">.</span><span class="n">b</span><span class="p">(</span><span class="n">b</span><span class="p">[</span><span class="mh">15</span><span class="o">:</span><span class="mh">0</span><span class="p">]),</span><span class="w"> </span><span class="p">.</span><span class="n">cin</span><span class="p">(</span><span class="mh">1</span><span class="mb">&#39;b0</span><span class="p">),</span><span class="w"> </span><span class="p">.</span><span class="n">sum</span><span class="p">(</span><span class="n">sum</span><span class="p">[</span><span class="mh">15</span><span class="o">:</span><span class="mh">0</span><span class="p">]),</span><span class="w"> </span><span class="p">.</span><span class="n">cout</span><span class="p">(</span><span class="n">c1</span><span class="p">));</span>
</span><span id="__span-25-8"><a id="__codelineno-25-8" name="__codelineno-25-8"></a><a href="#__codelineno-25-8"><span class="linenos" data-linenos=" 8 "></span></a><span class="w">    </span><span class="n">add16</span><span class="w"> </span><span class="n">add_2</span><span class="p">(</span><span class="w"> </span><span class="p">.</span><span class="n">a</span><span class="p">(</span><span class="n">a</span><span class="p">[</span><span class="mh">31</span><span class="o">:</span><span class="mh">16</span><span class="p">]),</span><span class="w"> </span><span class="p">.</span><span class="n">b</span><span class="p">(</span><span class="n">b</span><span class="p">[</span><span class="mh">31</span><span class="o">:</span><span class="mh">16</span><span class="p">]),</span><span class="w"> </span><span class="p">.</span><span class="n">cin</span><span class="p">(</span><span class="n">c1</span><span class="p">),</span><span class="w"> </span><span class="p">.</span><span class="n">sum</span><span class="p">(</span><span class="n">sum</span><span class="p">[</span><span class="mh">31</span><span class="o">:</span><span class="mh">16</span><span class="p">]),</span><span class="w"> </span><span class="p">.</span><span class="n">cout</span><span class="p">());</span>
</span><span id="__span-25-9"><a id="__codelineno-25-9" name="__codelineno-25-9"></a><a href="#__codelineno-25-9"><span class="linenos" data-linenos=" 9 "></span></a><span class="k">endmodule</span>
</span><span id="__span-25-10"><a id="__codelineno-25-10" name="__codelineno-25-10"></a><a href="#__codelineno-25-10"><span class="linenos" data-linenos="10 "></span></a>
</span><span id="__span-25-11"><a id="__codelineno-25-11" name="__codelineno-25-11"></a><a href="#__codelineno-25-11"><span class="linenos" data-linenos="11 "></span></a><span class="k">module</span><span class="w"> </span><span class="n">add1</span><span class="w"> </span><span class="p">(</span><span class="w"> </span><span class="k">input</span><span class="w"> </span><span class="n">a</span><span class="p">,</span><span class="w"> </span><span class="k">input</span><span class="w"> </span><span class="n">b</span><span class="p">,</span><span class="w"> </span><span class="k">input</span><span class="w"> </span><span class="n">cin</span><span class="p">,</span><span class="w">   </span><span class="k">output</span><span class="w"> </span><span class="n">sum</span><span class="p">,</span><span class="w"> </span><span class="k">output</span><span class="w"> </span><span class="n">cout</span><span class="w"> </span><span class="p">);</span>
</span><span id="__span-25-12"><a id="__codelineno-25-12" name="__codelineno-25-12"></a><a href="#__codelineno-25-12"><span class="linenos" data-linenos="12 "></span></a><span class="w">    </span><span class="k">assign</span><span class="w"> </span><span class="p">{</span><span class="n">cout</span><span class="p">,</span><span class="w"> </span><span class="n">sum</span><span class="p">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">cin</span><span class="p">;</span>
</span><span id="__span-25-13"><a id="__codelineno-25-13" name="__codelineno-25-13"></a><a href="#__codelineno-25-13"><span class="linenos" data-linenos="13 "></span></a><span class="k">endmodule</span>
</span></code></pre></div></p>
<hr />
<h4 id="carry-select-adder">Carry-select adder<a class="headerlink" href="#carry-select-adder" title="Anchor link to this section for reference">⚓︎</a></h4>
<p>Website: <a href="https://hdlbits.01xz.net/wiki/Module_cseladd" target="_blank">https://hdlbits.01xz.net/wiki/Module_cseladd</a></p>
<p>這題要我們接線CSA(carry-select adder)，CSA的好處在於已經偷算完cin是0和1的case，等到低位元進位後，就能馬上用multiplexer輸出算好的結果，缺點就是因為同時要算cin是0和1的結果，面積會變兩倍。
<div class="language-verilog highlight"><span class="filename">Verilog</span><pre><span></span><code><span id="__span-26-1"><a id="__codelineno-26-1" name="__codelineno-26-1"></a><a href="#__codelineno-26-1"><span class="linenos" data-linenos=" 1 "></span></a><span class="k">module</span><span class="w"> </span><span class="n">top_module</span><span class="p">(</span>
</span><span id="__span-26-2"><a id="__codelineno-26-2" name="__codelineno-26-2"></a><a href="#__codelineno-26-2"><span class="linenos" data-linenos=" 2 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="p">[</span><span class="mh">31</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">a</span><span class="p">,</span>
</span><span id="__span-26-3"><a id="__codelineno-26-3" name="__codelineno-26-3"></a><a href="#__codelineno-26-3"><span class="linenos" data-linenos=" 3 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="p">[</span><span class="mh">31</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">b</span><span class="p">,</span>
</span><span id="__span-26-4"><a id="__codelineno-26-4" name="__codelineno-26-4"></a><a href="#__codelineno-26-4"><span class="linenos" data-linenos=" 4 "></span></a><span class="w">    </span><span class="k">output</span><span class="w"> </span><span class="p">[</span><span class="mh">31</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">sum</span>
</span><span id="__span-26-5"><a id="__codelineno-26-5" name="__codelineno-26-5"></a><a href="#__codelineno-26-5"><span class="linenos" data-linenos=" 5 "></span></a><span class="p">);</span><span class="w">  </span>
</span><span id="__span-26-6"><a id="__codelineno-26-6" name="__codelineno-26-6"></a><a href="#__codelineno-26-6"><span class="linenos" data-linenos=" 6 "></span></a><span class="w">    </span><span class="kt">wire</span><span class="w"> </span><span class="n">sel</span><span class="p">;</span>
</span><span id="__span-26-7"><a id="__codelineno-26-7" name="__codelineno-26-7"></a><a href="#__codelineno-26-7"><span class="linenos" data-linenos=" 7 "></span></a><span class="w">    </span><span class="kt">wire</span><span class="w"> </span><span class="p">[</span><span class="mh">15</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">s1</span><span class="p">,</span><span class="n">s2</span><span class="p">;</span>
</span><span id="__span-26-8"><a id="__codelineno-26-8" name="__codelineno-26-8"></a><a href="#__codelineno-26-8"><span class="linenos" data-linenos=" 8 "></span></a><span class="w">    </span><span class="n">add16</span><span class="w"> </span><span class="n">add1</span><span class="p">(</span><span class="w"> </span><span class="p">.</span><span class="n">a</span><span class="p">(</span><span class="n">a</span><span class="p">[</span><span class="mh">15</span><span class="o">:</span><span class="mh">0</span><span class="p">]),</span><span class="w"> </span><span class="p">.</span><span class="n">b</span><span class="p">(</span><span class="n">b</span><span class="p">[</span><span class="mh">15</span><span class="o">:</span><span class="mh">0</span><span class="p">]),</span><span class="w"> </span><span class="p">.</span><span class="n">cin</span><span class="p">(</span><span class="mh">1</span><span class="mb">&#39;b0</span><span class="p">),</span><span class="w"> </span><span class="p">.</span><span class="n">sum</span><span class="p">(</span><span class="n">sum</span><span class="p">[</span><span class="mh">15</span><span class="o">:</span><span class="mh">0</span><span class="p">]),</span><span class="w"> </span><span class="p">.</span><span class="n">cout</span><span class="p">(</span><span class="n">sel</span><span class="p">));</span>
</span><span id="__span-26-9"><a id="__codelineno-26-9" name="__codelineno-26-9"></a><a href="#__codelineno-26-9"><span class="linenos" data-linenos=" 9 "></span></a><span class="w">    </span><span class="n">add16</span><span class="w"> </span><span class="n">add2</span><span class="p">(</span><span class="w"> </span><span class="p">.</span><span class="n">a</span><span class="p">(</span><span class="n">a</span><span class="p">[</span><span class="mh">31</span><span class="o">:</span><span class="mh">16</span><span class="p">]),</span><span class="w"> </span><span class="p">.</span><span class="n">b</span><span class="p">(</span><span class="n">b</span><span class="p">[</span><span class="mh">31</span><span class="o">:</span><span class="mh">16</span><span class="p">]),</span><span class="w"> </span><span class="p">.</span><span class="n">cin</span><span class="p">(</span><span class="mh">1</span><span class="mb">&#39;b0</span><span class="p">),</span><span class="w"> </span><span class="p">.</span><span class="n">sum</span><span class="p">(</span><span class="n">s1</span><span class="p">),</span><span class="w"> </span><span class="p">.</span><span class="n">cout</span><span class="p">());</span>
</span><span id="__span-26-10"><a id="__codelineno-26-10" name="__codelineno-26-10"></a><a href="#__codelineno-26-10"><span class="linenos" data-linenos="10 "></span></a><span class="w">    </span><span class="n">add16</span><span class="w"> </span><span class="n">add3</span><span class="p">(</span><span class="w"> </span><span class="p">.</span><span class="n">a</span><span class="p">(</span><span class="n">a</span><span class="p">[</span><span class="mh">31</span><span class="o">:</span><span class="mh">16</span><span class="p">]),</span><span class="w"> </span><span class="p">.</span><span class="n">b</span><span class="p">(</span><span class="n">b</span><span class="p">[</span><span class="mh">31</span><span class="o">:</span><span class="mh">16</span><span class="p">]),</span><span class="w"> </span><span class="p">.</span><span class="n">cin</span><span class="p">(</span><span class="mh">1</span><span class="mb">&#39;b1</span><span class="p">),</span><span class="w"> </span><span class="p">.</span><span class="n">sum</span><span class="p">(</span><span class="n">s2</span><span class="p">),</span><span class="w"> </span><span class="p">.</span><span class="n">cout</span><span class="p">());</span>
</span><span id="__span-26-11"><a id="__codelineno-26-11" name="__codelineno-26-11"></a><a href="#__codelineno-26-11"><span class="linenos" data-linenos="11 "></span></a><span class="w">    </span><span class="k">always</span><span class="w"> </span><span class="p">@(</span><span class="o">*</span><span class="p">)</span>
</span><span id="__span-26-12"><a id="__codelineno-26-12" name="__codelineno-26-12"></a><a href="#__codelineno-26-12"><span class="linenos" data-linenos="12 "></span></a><span class="w">        </span><span class="k">case</span><span class="p">(</span><span class="n">sel</span><span class="p">)</span>
</span><span id="__span-26-13"><a id="__codelineno-26-13" name="__codelineno-26-13"></a><a href="#__codelineno-26-13"><span class="linenos" data-linenos="13 "></span></a><span class="w">            </span><span class="mh">1</span><span class="mb">&#39;b0</span><span class="o">:</span><span class="w"> </span><span class="n">sum</span><span class="p">[</span><span class="mh">31</span><span class="o">:</span><span class="mh">16</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">s1</span><span class="p">;</span>
</span><span id="__span-26-14"><a id="__codelineno-26-14" name="__codelineno-26-14"></a><a href="#__codelineno-26-14"><span class="linenos" data-linenos="14 "></span></a><span class="w">            </span><span class="mh">1</span><span class="mb">&#39;b1</span><span class="o">:</span><span class="w"> </span><span class="n">sum</span><span class="p">[</span><span class="mh">31</span><span class="o">:</span><span class="mh">16</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">s2</span><span class="p">;</span>
</span><span id="__span-26-15"><a id="__codelineno-26-15" name="__codelineno-26-15"></a><a href="#__codelineno-26-15"><span class="linenos" data-linenos="15 "></span></a><span class="w">        </span><span class="k">endcase</span>
</span><span id="__span-26-16"><a id="__codelineno-26-16" name="__codelineno-26-16"></a><a href="#__codelineno-26-16"><span class="linenos" data-linenos="16 "></span></a><span class="k">endmodule</span>
</span></code></pre></div></p>
<hr />
<h4 id="adder-subtractor">Adder-subtractor<a class="headerlink" href="#adder-subtractor" title="Anchor link to this section for reference">⚓︎</a></h4>
<p>Website: <a href="https://hdlbits.01xz.net/wiki/Module_addsub" target="_blank">https://hdlbits.01xz.net/wiki/Module_addsub</a></p>
<p>這題在教如何快速實現減法，也就是<code>a - b = a + ~(b) + 1</code>這件事。
<div class="language-verilog highlight"><span class="filename">Verilog</span><pre><span></span><code><span id="__span-27-1"><a id="__codelineno-27-1" name="__codelineno-27-1"></a><a href="#__codelineno-27-1"><span class="linenos" data-linenos=" 1 "></span></a><span class="k">module</span><span class="w"> </span><span class="n">top_module</span><span class="p">(</span>
</span><span id="__span-27-2"><a id="__codelineno-27-2" name="__codelineno-27-2"></a><a href="#__codelineno-27-2"><span class="linenos" data-linenos=" 2 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="p">[</span><span class="mh">31</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">a</span><span class="p">,</span>
</span><span id="__span-27-3"><a id="__codelineno-27-3" name="__codelineno-27-3"></a><a href="#__codelineno-27-3"><span class="linenos" data-linenos=" 3 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="p">[</span><span class="mh">31</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">b</span><span class="p">,</span>
</span><span id="__span-27-4"><a id="__codelineno-27-4" name="__codelineno-27-4"></a><a href="#__codelineno-27-4"><span class="linenos" data-linenos=" 4 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">sub</span><span class="p">,</span>
</span><span id="__span-27-5"><a id="__codelineno-27-5" name="__codelineno-27-5"></a><a href="#__codelineno-27-5"><span class="linenos" data-linenos=" 5 "></span></a><span class="w">    </span><span class="k">output</span><span class="w"> </span><span class="p">[</span><span class="mh">31</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">sum</span>
</span><span id="__span-27-6"><a id="__codelineno-27-6" name="__codelineno-27-6"></a><a href="#__codelineno-27-6"><span class="linenos" data-linenos=" 6 "></span></a><span class="p">);</span>
</span><span id="__span-27-7"><a id="__codelineno-27-7" name="__codelineno-27-7"></a><a href="#__codelineno-27-7"><span class="linenos" data-linenos=" 7 "></span></a><span class="w">    </span><span class="kt">wire</span><span class="w"> </span><span class="n">c1</span><span class="p">;</span>
</span><span id="__span-27-8"><a id="__codelineno-27-8" name="__codelineno-27-8"></a><a href="#__codelineno-27-8"><span class="linenos" data-linenos=" 8 "></span></a><span class="w">    </span><span class="kt">wire</span><span class="w"> </span><span class="p">[</span><span class="mh">31</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">b_xor</span><span class="p">;</span>
</span><span id="__span-27-9"><a id="__codelineno-27-9" name="__codelineno-27-9"></a><a href="#__codelineno-27-9"><span class="linenos" data-linenos=" 9 "></span></a><span class="w">    </span><span class="k">assign</span><span class="w"> </span><span class="n">b_xor</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="o">^</span><span class="w"> </span><span class="p">{</span><span class="mh">32</span><span class="p">{</span><span class="n">sub</span><span class="p">}};</span>
</span><span id="__span-27-10"><a id="__codelineno-27-10" name="__codelineno-27-10"></a><a href="#__codelineno-27-10"><span class="linenos" data-linenos="10 "></span></a><span class="w">    </span><span class="n">add16</span><span class="w"> </span><span class="n">add_1</span><span class="p">(</span><span class="w"> </span><span class="p">.</span><span class="n">a</span><span class="p">(</span><span class="n">a</span><span class="p">[</span><span class="mh">15</span><span class="o">:</span><span class="mh">0</span><span class="p">]),</span><span class="w"> </span><span class="p">.</span><span class="n">b</span><span class="p">(</span><span class="n">b_xor</span><span class="p">[</span><span class="mh">15</span><span class="o">:</span><span class="mh">0</span><span class="p">]),</span><span class="w"> </span><span class="p">.</span><span class="n">cin</span><span class="p">(</span><span class="n">sub</span><span class="p">),</span><span class="w"> </span><span class="p">.</span><span class="n">sum</span><span class="p">(</span><span class="n">sum</span><span class="p">[</span><span class="mh">15</span><span class="o">:</span><span class="mh">0</span><span class="p">]),</span><span class="w"> </span><span class="p">.</span><span class="n">cout</span><span class="p">(</span><span class="n">c1</span><span class="p">));</span>
</span><span id="__span-27-11"><a id="__codelineno-27-11" name="__codelineno-27-11"></a><a href="#__codelineno-27-11"><span class="linenos" data-linenos="11 "></span></a><span class="w">    </span><span class="n">add16</span><span class="w"> </span><span class="n">add_2</span><span class="p">(</span><span class="w"> </span><span class="p">.</span><span class="n">a</span><span class="p">(</span><span class="n">a</span><span class="p">[</span><span class="mh">31</span><span class="o">:</span><span class="mh">16</span><span class="p">]),</span><span class="w"> </span><span class="p">.</span><span class="n">b</span><span class="p">(</span><span class="n">b_xor</span><span class="p">[</span><span class="mh">31</span><span class="o">:</span><span class="mh">16</span><span class="p">]),</span><span class="w"> </span><span class="p">.</span><span class="n">cin</span><span class="p">(</span><span class="n">c1</span><span class="p">),</span><span class="w"> </span><span class="p">.</span><span class="n">sum</span><span class="p">(</span><span class="n">sum</span><span class="p">[</span><span class="mh">31</span><span class="o">:</span><span class="mh">16</span><span class="p">]),</span><span class="w"> </span><span class="p">.</span><span class="n">cout</span><span class="p">());</span>
</span><span id="__span-27-12"><a id="__codelineno-27-12" name="__codelineno-27-12"></a><a href="#__codelineno-27-12"><span class="linenos" data-linenos="12 "></span></a><span class="k">endmodule</span>
</span></code></pre></div></p>
<hr />
<h3 id="procedures">Procedures<a class="headerlink" href="#procedures" title="Anchor link to this section for reference">⚓︎</a></h3>
<h4 id="always-blocks-combinational">Always blocks (combinational)<a class="headerlink" href="#always-blocks-combinational" title="Anchor link to this section for reference">⚓︎</a></h4>
<p>Website: <a href="https://hdlbits.01xz.net/wiki/Alwaysblock1" target="_blank">https://hdlbits.01xz.net/wiki/Alwaysblock1</a></p>
<p>這題在講說combinational logic可以有assign和always @(*)兩種寫法。然後有個細節要注意，assign的左值要用wire，always的左值要用reg，雖然這兩者在合成電路後沒差。
<div class="language-verilog highlight"><span class="filename">Verilog</span><pre><span></span><code><span id="__span-28-1"><a id="__codelineno-28-1" name="__codelineno-28-1"></a><a href="#__codelineno-28-1"><span class="linenos" data-linenos=" 1 "></span></a><span class="c1">// synthesis verilog_input_version verilog_2001</span>
</span><span id="__span-28-2"><a id="__codelineno-28-2" name="__codelineno-28-2"></a><a href="#__codelineno-28-2"><span class="linenos" data-linenos=" 2 "></span></a><span class="k">module</span><span class="w"> </span><span class="n">top_module</span><span class="p">(</span>
</span><span id="__span-28-3"><a id="__codelineno-28-3" name="__codelineno-28-3"></a><a href="#__codelineno-28-3"><span class="linenos" data-linenos=" 3 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">a</span><span class="p">,</span><span class="w"> </span>
</span><span id="__span-28-4"><a id="__codelineno-28-4" name="__codelineno-28-4"></a><a href="#__codelineno-28-4"><span class="linenos" data-linenos=" 4 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">b</span><span class="p">,</span>
</span><span id="__span-28-5"><a id="__codelineno-28-5" name="__codelineno-28-5"></a><a href="#__codelineno-28-5"><span class="linenos" data-linenos=" 5 "></span></a><span class="w">    </span><span class="k">output</span><span class="w"> </span><span class="kt">wire</span><span class="w"> </span><span class="n">out_assign</span><span class="p">,</span>
</span><span id="__span-28-6"><a id="__codelineno-28-6" name="__codelineno-28-6"></a><a href="#__codelineno-28-6"><span class="linenos" data-linenos=" 6 "></span></a><span class="w">    </span><span class="k">output</span><span class="w"> </span><span class="kt">reg</span><span class="w"> </span><span class="n">out_alwaysblock</span>
</span><span id="__span-28-7"><a id="__codelineno-28-7" name="__codelineno-28-7"></a><a href="#__codelineno-28-7"><span class="linenos" data-linenos=" 7 "></span></a><span class="p">);</span>
</span><span id="__span-28-8"><a id="__codelineno-28-8" name="__codelineno-28-8"></a><a href="#__codelineno-28-8"><span class="linenos" data-linenos=" 8 "></span></a><span class="w">    </span><span class="k">assign</span><span class="w"> </span><span class="n">out_assign</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="n">b</span><span class="p">;</span>
</span><span id="__span-28-9"><a id="__codelineno-28-9" name="__codelineno-28-9"></a><a href="#__codelineno-28-9"><span class="linenos" data-linenos=" 9 "></span></a><span class="w">    </span><span class="k">always</span><span class="w"> </span><span class="p">@(</span><span class="o">*</span><span class="p">)</span>
</span><span id="__span-28-10"><a id="__codelineno-28-10" name="__codelineno-28-10"></a><a href="#__codelineno-28-10"><span class="linenos" data-linenos="10 "></span></a><span class="w">        </span><span class="n">out_alwaysblock</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="n">b</span><span class="p">;</span>
</span><span id="__span-28-11"><a id="__codelineno-28-11" name="__codelineno-28-11"></a><a href="#__codelineno-28-11"><span class="linenos" data-linenos="11 "></span></a><span class="k">endmodule</span>
</span></code></pre></div></p>
<hr />
<h4 id="always-blocks-clocked">Always blocks (clocked)<a class="headerlink" href="#always-blocks-clocked" title="Anchor link to this section for reference">⚓︎</a></h4>
<p>Website: <a href="https://hdlbits.01xz.net/wiki/Alwaysblock2" target="_blank">https://hdlbits.01xz.net/wiki/Alwaysblock2</a></p>
<p>這題就是在講combinational logic和sequential logic的差別。如果是clock always的話，最好賦值使用non-blocking。
<div class="language-verilog highlight"><span class="filename">Verilog</span><pre><span></span><code><span id="__span-29-1"><a id="__codelineno-29-1" name="__codelineno-29-1"></a><a href="#__codelineno-29-1"><span class="linenos" data-linenos=" 1 "></span></a><span class="c1">// synthesis verilog_input_version verilog_2001</span>
</span><span id="__span-29-2"><a id="__codelineno-29-2" name="__codelineno-29-2"></a><a href="#__codelineno-29-2"><span class="linenos" data-linenos=" 2 "></span></a><span class="k">module</span><span class="w"> </span><span class="n">top_module</span><span class="p">(</span>
</span><span id="__span-29-3"><a id="__codelineno-29-3" name="__codelineno-29-3"></a><a href="#__codelineno-29-3"><span class="linenos" data-linenos=" 3 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">clk</span><span class="p">,</span>
</span><span id="__span-29-4"><a id="__codelineno-29-4" name="__codelineno-29-4"></a><a href="#__codelineno-29-4"><span class="linenos" data-linenos=" 4 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">a</span><span class="p">,</span>
</span><span id="__span-29-5"><a id="__codelineno-29-5" name="__codelineno-29-5"></a><a href="#__codelineno-29-5"><span class="linenos" data-linenos=" 5 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">b</span><span class="p">,</span>
</span><span id="__span-29-6"><a id="__codelineno-29-6" name="__codelineno-29-6"></a><a href="#__codelineno-29-6"><span class="linenos" data-linenos=" 6 "></span></a><span class="w">    </span><span class="k">output</span><span class="w"> </span><span class="kt">wire</span><span class="w"> </span><span class="n">out_assign</span><span class="p">,</span>
</span><span id="__span-29-7"><a id="__codelineno-29-7" name="__codelineno-29-7"></a><a href="#__codelineno-29-7"><span class="linenos" data-linenos=" 7 "></span></a><span class="w">    </span><span class="k">output</span><span class="w"> </span><span class="kt">reg</span><span class="w"> </span><span class="n">out_always_comb</span><span class="p">,</span>
</span><span id="__span-29-8"><a id="__codelineno-29-8" name="__codelineno-29-8"></a><a href="#__codelineno-29-8"><span class="linenos" data-linenos=" 8 "></span></a><span class="w">    </span><span class="k">output</span><span class="w"> </span><span class="kt">reg</span><span class="w"> </span><span class="n">out_always_ff</span><span class="w">   </span><span class="p">);</span>
</span><span id="__span-29-9"><a id="__codelineno-29-9" name="__codelineno-29-9"></a><a href="#__codelineno-29-9"><span class="linenos" data-linenos=" 9 "></span></a><span class="w">    </span><span class="k">assign</span><span class="w"> </span><span class="n">out_assign</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="o">^</span><span class="w"> </span><span class="n">b</span><span class="p">;</span>
</span><span id="__span-29-10"><a id="__codelineno-29-10" name="__codelineno-29-10"></a><a href="#__codelineno-29-10"><span class="linenos" data-linenos="10 "></span></a><span class="w">    </span><span class="k">always</span><span class="p">@(</span><span class="o">*</span><span class="p">)</span>
</span><span id="__span-29-11"><a id="__codelineno-29-11" name="__codelineno-29-11"></a><a href="#__codelineno-29-11"><span class="linenos" data-linenos="11 "></span></a><span class="w">        </span><span class="n">out_always_comb</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="o">^</span><span class="w"> </span><span class="n">b</span><span class="p">;</span>
</span><span id="__span-29-12"><a id="__codelineno-29-12" name="__codelineno-29-12"></a><a href="#__codelineno-29-12"><span class="linenos" data-linenos="12 "></span></a><span class="w">    </span><span class="k">always</span><span class="p">@(</span><span class="k">posedge</span><span class="w"> </span><span class="n">clk</span><span class="p">)</span>
</span><span id="__span-29-13"><a id="__codelineno-29-13" name="__codelineno-29-13"></a><a href="#__codelineno-29-13"><span class="linenos" data-linenos="13 "></span></a><span class="w">        </span><span class="n">out_always_ff</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="o">^</span><span class="w"> </span><span class="n">b</span><span class="p">;</span>
</span><span id="__span-29-14"><a id="__codelineno-29-14" name="__codelineno-29-14"></a><a href="#__codelineno-29-14"><span class="linenos" data-linenos="14 "></span></a><span class="k">endmodule</span>
</span></code></pre></div></p>
<hr />
<h4 id="if-statement">If statement<a class="headerlink" href="#if-statement" title="Anchor link to this section for reference">⚓︎</a></h4>
<p>Website: <a href="https://hdlbits.01xz.net/wiki/Always_if" target="_blank">https://hdlbits.01xz.net/wiki/Always_if</a></p>
<p>這題分別要求要寫三元運算和在combinational block中寫if/else，可能要注意的是cond可以共用。
<div class="language-verilog highlight"><span class="filename">Verilog</span><pre><span></span><code><span id="__span-30-1"><a id="__codelineno-30-1" name="__codelineno-30-1"></a><a href="#__codelineno-30-1"><span class="linenos" data-linenos=" 1 "></span></a><span class="c1">// synthesis verilog_input_version verilog_2001</span>
</span><span id="__span-30-2"><a id="__codelineno-30-2" name="__codelineno-30-2"></a><a href="#__codelineno-30-2"><span class="linenos" data-linenos=" 2 "></span></a><span class="k">module</span><span class="w"> </span><span class="n">top_module</span><span class="p">(</span>
</span><span id="__span-30-3"><a id="__codelineno-30-3" name="__codelineno-30-3"></a><a href="#__codelineno-30-3"><span class="linenos" data-linenos=" 3 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">a</span><span class="p">,</span>
</span><span id="__span-30-4"><a id="__codelineno-30-4" name="__codelineno-30-4"></a><a href="#__codelineno-30-4"><span class="linenos" data-linenos=" 4 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">b</span><span class="p">,</span>
</span><span id="__span-30-5"><a id="__codelineno-30-5" name="__codelineno-30-5"></a><a href="#__codelineno-30-5"><span class="linenos" data-linenos=" 5 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">sel_b1</span><span class="p">,</span>
</span><span id="__span-30-6"><a id="__codelineno-30-6" name="__codelineno-30-6"></a><a href="#__codelineno-30-6"><span class="linenos" data-linenos=" 6 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">sel_b2</span><span class="p">,</span>
</span><span id="__span-30-7"><a id="__codelineno-30-7" name="__codelineno-30-7"></a><a href="#__codelineno-30-7"><span class="linenos" data-linenos=" 7 "></span></a><span class="w">    </span><span class="k">output</span><span class="w"> </span><span class="kt">wire</span><span class="w"> </span><span class="n">out_assign</span><span class="p">,</span>
</span><span id="__span-30-8"><a id="__codelineno-30-8" name="__codelineno-30-8"></a><a href="#__codelineno-30-8"><span class="linenos" data-linenos=" 8 "></span></a><span class="w">    </span><span class="k">output</span><span class="w"> </span><span class="kt">reg</span><span class="w"> </span><span class="n">out_always</span><span class="w">   </span><span class="p">);</span><span class="w"> </span>
</span><span id="__span-30-9"><a id="__codelineno-30-9" name="__codelineno-30-9"></a><a href="#__codelineno-30-9"><span class="linenos" data-linenos=" 9 "></span></a><span class="w">    </span><span class="kt">wire</span><span class="w"> </span><span class="n">cond</span><span class="p">;</span>
</span><span id="__span-30-10"><a id="__codelineno-30-10" name="__codelineno-30-10"></a><a href="#__codelineno-30-10"><span class="linenos" data-linenos="10 "></span></a><span class="w">    </span><span class="k">assign</span><span class="w"> </span><span class="n">cond</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">sel_b1</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="n">sel_b2</span><span class="p">;</span>
</span><span id="__span-30-11"><a id="__codelineno-30-11" name="__codelineno-30-11"></a><a href="#__codelineno-30-11"><span class="linenos" data-linenos="11 "></span></a><span class="w">    </span><span class="k">assign</span><span class="w"> </span><span class="n">out_assign</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">cond</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">a</span><span class="p">;</span>
</span><span id="__span-30-12"><a id="__codelineno-30-12" name="__codelineno-30-12"></a><a href="#__codelineno-30-12"><span class="linenos" data-linenos="12 "></span></a><span class="w">    </span><span class="k">always</span><span class="p">@(</span><span class="o">*</span><span class="p">)</span><span class="k">begin</span>
</span><span id="__span-30-13"><a id="__codelineno-30-13" name="__codelineno-30-13"></a><a href="#__codelineno-30-13"><span class="linenos" data-linenos="13 "></span></a><span class="w">        </span><span class="k">if</span><span class="p">(</span><span class="n">cond</span><span class="p">)</span><span class="k">begin</span>
</span><span id="__span-30-14"><a id="__codelineno-30-14" name="__codelineno-30-14"></a><a href="#__codelineno-30-14"><span class="linenos" data-linenos="14 "></span></a><span class="w">            </span><span class="n">out_always</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">b</span><span class="p">;</span>
</span><span id="__span-30-15"><a id="__codelineno-30-15" name="__codelineno-30-15"></a><a href="#__codelineno-30-15"><span class="linenos" data-linenos="15 "></span></a><span class="w">        </span><span class="k">end</span>
</span><span id="__span-30-16"><a id="__codelineno-30-16" name="__codelineno-30-16"></a><a href="#__codelineno-30-16"><span class="linenos" data-linenos="16 "></span></a><span class="w">        </span><span class="k">else</span><span class="w"> </span><span class="k">begin</span>
</span><span id="__span-30-17"><a id="__codelineno-30-17" name="__codelineno-30-17"></a><a href="#__codelineno-30-17"><span class="linenos" data-linenos="17 "></span></a><span class="w">            </span><span class="n">out_always</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">a</span><span class="p">;</span>
</span><span id="__span-30-18"><a id="__codelineno-30-18" name="__codelineno-30-18"></a><a href="#__codelineno-30-18"><span class="linenos" data-linenos="18 "></span></a><span class="w">        </span><span class="k">end</span>
</span><span id="__span-30-19"><a id="__codelineno-30-19" name="__codelineno-30-19"></a><a href="#__codelineno-30-19"><span class="linenos" data-linenos="19 "></span></a><span class="w">    </span><span class="k">end</span><span class="w"> </span>
</span><span id="__span-30-20"><a id="__codelineno-30-20" name="__codelineno-30-20"></a><a href="#__codelineno-30-20"><span class="linenos" data-linenos="20 "></span></a><span class="k">endmodule</span>
</span></code></pre></div></p>
<hr />
<h4 id="if-statement-latches">If statement latches<a class="headerlink" href="#if-statement-latches" title="Anchor link to this section for reference">⚓︎</a></h4>
<p>Website: <a href="https://hdlbits.01xz.net/wiki/Always_if2" target="_blank">https://hdlbits.01xz.net/wiki/Always_if2</a></p>
<p>這題在講說要寫清楚else和default，不然verilog會合成出latch。
<div class="language-verilog highlight"><span class="filename">Verilog</span><pre><span></span><code><span id="__span-31-1"><a id="__codelineno-31-1" name="__codelineno-31-1"></a><a href="#__codelineno-31-1"><span class="linenos" data-linenos=" 1 "></span></a><span class="c1">// synthesis verilog_input_version verilog_2001</span>
</span><span id="__span-31-2"><a id="__codelineno-31-2" name="__codelineno-31-2"></a><a href="#__codelineno-31-2"><span class="linenos" data-linenos=" 2 "></span></a><span class="k">module</span><span class="w"> </span><span class="n">top_module</span><span class="w"> </span><span class="p">(</span>
</span><span id="__span-31-3"><a id="__codelineno-31-3" name="__codelineno-31-3"></a><a href="#__codelineno-31-3"><span class="linenos" data-linenos=" 3 "></span></a><span class="w">    </span><span class="k">input</span><span class="w">      </span><span class="n">cpu_overheated</span><span class="p">,</span>
</span><span id="__span-31-4"><a id="__codelineno-31-4" name="__codelineno-31-4"></a><a href="#__codelineno-31-4"><span class="linenos" data-linenos=" 4 "></span></a><span class="w">    </span><span class="k">output</span><span class="w"> </span><span class="kt">reg</span><span class="w"> </span><span class="n">shut_off_computer</span><span class="p">,</span>
</span><span id="__span-31-5"><a id="__codelineno-31-5" name="__codelineno-31-5"></a><a href="#__codelineno-31-5"><span class="linenos" data-linenos=" 5 "></span></a><span class="w">    </span><span class="k">input</span><span class="w">      </span><span class="n">arrived</span><span class="p">,</span>
</span><span id="__span-31-6"><a id="__codelineno-31-6" name="__codelineno-31-6"></a><a href="#__codelineno-31-6"><span class="linenos" data-linenos=" 6 "></span></a><span class="w">    </span><span class="k">input</span><span class="w">      </span><span class="n">gas_tank_empty</span><span class="p">,</span>
</span><span id="__span-31-7"><a id="__codelineno-31-7" name="__codelineno-31-7"></a><a href="#__codelineno-31-7"><span class="linenos" data-linenos=" 7 "></span></a><span class="w">    </span><span class="k">output</span><span class="w"> </span><span class="kt">reg</span><span class="w"> </span><span class="n">keep_driving</span><span class="w">  </span><span class="p">);</span><span class="w"> </span><span class="c1">//</span>
</span><span id="__span-31-8"><a id="__codelineno-31-8" name="__codelineno-31-8"></a><a href="#__codelineno-31-8"><span class="linenos" data-linenos=" 8 "></span></a>
</span><span id="__span-31-9"><a id="__codelineno-31-9" name="__codelineno-31-9"></a><a href="#__codelineno-31-9"><span class="linenos" data-linenos=" 9 "></span></a><span class="w">    </span><span class="k">always</span><span class="w"> </span><span class="p">@(</span><span class="o">*</span><span class="p">)</span><span class="w"> </span><span class="k">begin</span>
</span><span id="__span-31-10"><a id="__codelineno-31-10" name="__codelineno-31-10"></a><a href="#__codelineno-31-10"><span class="linenos" data-linenos="10 "></span></a><span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">cpu_overheated</span><span class="p">)</span>
</span><span id="__span-31-11"><a id="__codelineno-31-11" name="__codelineno-31-11"></a><a href="#__codelineno-31-11"><span class="linenos" data-linenos="11 "></span></a><span class="w">           </span><span class="n">shut_off_computer</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">1</span><span class="p">;</span>
</span><span id="__span-31-12"><a id="__codelineno-31-12" name="__codelineno-31-12"></a><a href="#__codelineno-31-12"><span class="linenos" data-linenos="12 "></span></a><span class="w">        </span><span class="k">else</span>
</span><span id="__span-31-13"><a id="__codelineno-31-13" name="__codelineno-31-13"></a><a href="#__codelineno-31-13"><span class="linenos" data-linenos="13 "></span></a><span class="w">           </span><span class="n">shut_off_computer</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">0</span><span class="p">;</span>
</span><span id="__span-31-14"><a id="__codelineno-31-14" name="__codelineno-31-14"></a><a href="#__codelineno-31-14"><span class="linenos" data-linenos="14 "></span></a><span class="w">    </span><span class="k">end</span>
</span><span id="__span-31-15"><a id="__codelineno-31-15" name="__codelineno-31-15"></a><a href="#__codelineno-31-15"><span class="linenos" data-linenos="15 "></span></a>
</span><span id="__span-31-16"><a id="__codelineno-31-16" name="__codelineno-31-16"></a><a href="#__codelineno-31-16"><span class="linenos" data-linenos="16 "></span></a><span class="w">    </span><span class="k">always</span><span class="w"> </span><span class="p">@(</span><span class="o">*</span><span class="p">)</span><span class="w"> </span><span class="k">begin</span>
</span><span id="__span-31-17"><a id="__codelineno-31-17" name="__codelineno-31-17"></a><a href="#__codelineno-31-17"><span class="linenos" data-linenos="17 "></span></a><span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">~</span><span class="n">arrived</span><span class="p">)</span>
</span><span id="__span-31-18"><a id="__codelineno-31-18" name="__codelineno-31-18"></a><a href="#__codelineno-31-18"><span class="linenos" data-linenos="18 "></span></a><span class="w">           </span><span class="n">keep_driving</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">~</span><span class="n">gas_tank_empty</span><span class="p">;</span>
</span><span id="__span-31-19"><a id="__codelineno-31-19" name="__codelineno-31-19"></a><a href="#__codelineno-31-19"><span class="linenos" data-linenos="19 "></span></a><span class="w">        </span><span class="k">else</span>
</span><span id="__span-31-20"><a id="__codelineno-31-20" name="__codelineno-31-20"></a><a href="#__codelineno-31-20"><span class="linenos" data-linenos="20 "></span></a><span class="w">           </span><span class="n">keep_driving</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">1</span><span class="mb">&#39;b0</span><span class="p">;</span>
</span><span id="__span-31-21"><a id="__codelineno-31-21" name="__codelineno-31-21"></a><a href="#__codelineno-31-21"><span class="linenos" data-linenos="21 "></span></a><span class="w">    </span><span class="k">end</span>
</span><span id="__span-31-22"><a id="__codelineno-31-22" name="__codelineno-31-22"></a><a href="#__codelineno-31-22"><span class="linenos" data-linenos="22 "></span></a>
</span><span id="__span-31-23"><a id="__codelineno-31-23" name="__codelineno-31-23"></a><a href="#__codelineno-31-23"><span class="linenos" data-linenos="23 "></span></a><span class="k">endmodule</span>
</span></code></pre></div></p>
<hr />
<h4 id="case-statement">Case statement<a class="headerlink" href="#case-statement" title="Anchor link to this section for reference">⚓︎</a></h4>
<p>Website: <a href="https://hdlbits.01xz.net/wiki/Always_case" target="_blank">https://hdlbits.01xz.net/wiki/Always_case</a></p>
<p>這題在教case如何使用，然後要記得寫default防止latch。
<div class="language-verilog highlight"><span class="filename">Verilog</span><pre><span></span><code><span id="__span-32-1"><a id="__codelineno-32-1" name="__codelineno-32-1"></a><a href="#__codelineno-32-1"><span class="linenos" data-linenos=" 1 "></span></a><span class="c1">// synthesis verilog_input_version verilog_2001</span>
</span><span id="__span-32-2"><a id="__codelineno-32-2" name="__codelineno-32-2"></a><a href="#__codelineno-32-2"><span class="linenos" data-linenos=" 2 "></span></a><span class="k">module</span><span class="w"> </span><span class="n">top_module</span><span class="w"> </span><span class="p">(</span><span class="w"> </span>
</span><span id="__span-32-3"><a id="__codelineno-32-3" name="__codelineno-32-3"></a><a href="#__codelineno-32-3"><span class="linenos" data-linenos=" 3 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="p">[</span><span class="mh">2</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">sel</span><span class="p">,</span><span class="w"> </span>
</span><span id="__span-32-4"><a id="__codelineno-32-4" name="__codelineno-32-4"></a><a href="#__codelineno-32-4"><span class="linenos" data-linenos=" 4 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="p">[</span><span class="mh">3</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">data0</span><span class="p">,</span>
</span><span id="__span-32-5"><a id="__codelineno-32-5" name="__codelineno-32-5"></a><a href="#__codelineno-32-5"><span class="linenos" data-linenos=" 5 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="p">[</span><span class="mh">3</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">data1</span><span class="p">,</span>
</span><span id="__span-32-6"><a id="__codelineno-32-6" name="__codelineno-32-6"></a><a href="#__codelineno-32-6"><span class="linenos" data-linenos=" 6 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="p">[</span><span class="mh">3</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">data2</span><span class="p">,</span>
</span><span id="__span-32-7"><a id="__codelineno-32-7" name="__codelineno-32-7"></a><a href="#__codelineno-32-7"><span class="linenos" data-linenos=" 7 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="p">[</span><span class="mh">3</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">data3</span><span class="p">,</span>
</span><span id="__span-32-8"><a id="__codelineno-32-8" name="__codelineno-32-8"></a><a href="#__codelineno-32-8"><span class="linenos" data-linenos=" 8 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="p">[</span><span class="mh">3</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">data4</span><span class="p">,</span>
</span><span id="__span-32-9"><a id="__codelineno-32-9" name="__codelineno-32-9"></a><a href="#__codelineno-32-9"><span class="linenos" data-linenos=" 9 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="p">[</span><span class="mh">3</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">data5</span><span class="p">,</span>
</span><span id="__span-32-10"><a id="__codelineno-32-10" name="__codelineno-32-10"></a><a href="#__codelineno-32-10"><span class="linenos" data-linenos="10 "></span></a><span class="w">    </span><span class="k">output</span><span class="w"> </span><span class="kt">reg</span><span class="w"> </span><span class="p">[</span><span class="mh">3</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">out</span><span class="w">   </span><span class="p">);</span><span class="c1">//</span>
</span><span id="__span-32-11"><a id="__codelineno-32-11" name="__codelineno-32-11"></a><a href="#__codelineno-32-11"><span class="linenos" data-linenos="11 "></span></a>
</span><span id="__span-32-12"><a id="__codelineno-32-12" name="__codelineno-32-12"></a><a href="#__codelineno-32-12"><span class="linenos" data-linenos="12 "></span></a><span class="w">    </span><span class="k">always</span><span class="p">@(</span><span class="o">*</span><span class="p">)</span><span class="w"> </span><span class="k">begin</span><span class="w">  </span><span class="c1">// This is a combinational circuit</span>
</span><span id="__span-32-13"><a id="__codelineno-32-13" name="__codelineno-32-13"></a><a href="#__codelineno-32-13"><span class="linenos" data-linenos="13 "></span></a><span class="w">        </span><span class="k">case</span><span class="p">(</span><span class="n">sel</span><span class="p">)</span>
</span><span id="__span-32-14"><a id="__codelineno-32-14" name="__codelineno-32-14"></a><a href="#__codelineno-32-14"><span class="linenos" data-linenos="14 "></span></a><span class="w">            </span><span class="mh">3</span><span class="mb">&#39;b000</span><span class="o">:</span><span class="w"> </span><span class="n">out</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">data0</span><span class="p">;</span>
</span><span id="__span-32-15"><a id="__codelineno-32-15" name="__codelineno-32-15"></a><a href="#__codelineno-32-15"><span class="linenos" data-linenos="15 "></span></a><span class="w">            </span><span class="mh">3</span><span class="mb">&#39;b001</span><span class="o">:</span><span class="w"> </span><span class="n">out</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">data1</span><span class="p">;</span>
</span><span id="__span-32-16"><a id="__codelineno-32-16" name="__codelineno-32-16"></a><a href="#__codelineno-32-16"><span class="linenos" data-linenos="16 "></span></a><span class="w">            </span><span class="mh">3</span><span class="mb">&#39;b010</span><span class="o">:</span><span class="w"> </span><span class="n">out</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">data2</span><span class="p">;</span>
</span><span id="__span-32-17"><a id="__codelineno-32-17" name="__codelineno-32-17"></a><a href="#__codelineno-32-17"><span class="linenos" data-linenos="17 "></span></a><span class="w">            </span><span class="mh">3</span><span class="mb">&#39;b011</span><span class="o">:</span><span class="w"> </span><span class="n">out</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">data3</span><span class="p">;</span>
</span><span id="__span-32-18"><a id="__codelineno-32-18" name="__codelineno-32-18"></a><a href="#__codelineno-32-18"><span class="linenos" data-linenos="18 "></span></a><span class="w">            </span><span class="mh">3</span><span class="mb">&#39;b100</span><span class="o">:</span><span class="w"> </span><span class="n">out</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">data4</span><span class="p">;</span>
</span><span id="__span-32-19"><a id="__codelineno-32-19" name="__codelineno-32-19"></a><a href="#__codelineno-32-19"><span class="linenos" data-linenos="19 "></span></a><span class="w">            </span><span class="mh">3</span><span class="mb">&#39;b101</span><span class="o">:</span><span class="w"> </span><span class="n">out</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">data5</span><span class="p">;</span>
</span><span id="__span-32-20"><a id="__codelineno-32-20" name="__codelineno-32-20"></a><a href="#__codelineno-32-20"><span class="linenos" data-linenos="20 "></span></a><span class="w">            </span><span class="k">default</span><span class="o">:</span><span class="w"> </span><span class="n">out</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">4</span><span class="mb">&#39;b0000</span><span class="p">;</span>
</span><span id="__span-32-21"><a id="__codelineno-32-21" name="__codelineno-32-21"></a><a href="#__codelineno-32-21"><span class="linenos" data-linenos="21 "></span></a><span class="w">        </span><span class="k">endcase</span>
</span><span id="__span-32-22"><a id="__codelineno-32-22" name="__codelineno-32-22"></a><a href="#__codelineno-32-22"><span class="linenos" data-linenos="22 "></span></a><span class="w">    </span><span class="k">end</span>
</span><span id="__span-32-23"><a id="__codelineno-32-23" name="__codelineno-32-23"></a><a href="#__codelineno-32-23"><span class="linenos" data-linenos="23 "></span></a>
</span><span id="__span-32-24"><a id="__codelineno-32-24" name="__codelineno-32-24"></a><a href="#__codelineno-32-24"><span class="linenos" data-linenos="24 "></span></a><span class="k">endmodule</span>
</span></code></pre></div></p>
<hr />
<h4 id="priority-encoder">Priority encoder<a class="headerlink" href="#priority-encoder" title="Anchor link to this section for reference">⚓︎</a></h4>
<p>Website: <a href="https://hdlbits.01xz.net/wiki/Always_case2" target="_blank">https://hdlbits.01xz.net/wiki/Always_case2</a></p>
<p>這題要寫一個encoder，我看了卡諾圖後，發現用if else或卡諾圖畫的沒什麼太大的差異，卡諾圖的gate level少了一點，但是gate多了一些，所以這題練習用if else寫。
<div class="language-verilog highlight"><span class="filename">Verilog</span><pre><span></span><code><span id="__span-33-1"><a id="__codelineno-33-1" name="__codelineno-33-1"></a><a href="#__codelineno-33-1"><span class="linenos" data-linenos=" 1 "></span></a><span class="c1">// synthesis verilog_input_version verilog_2001</span>
</span><span id="__span-33-2"><a id="__codelineno-33-2" name="__codelineno-33-2"></a><a href="#__codelineno-33-2"><span class="linenos" data-linenos=" 2 "></span></a><span class="k">module</span><span class="w"> </span><span class="n">top_module</span><span class="w"> </span><span class="p">(</span>
</span><span id="__span-33-3"><a id="__codelineno-33-3" name="__codelineno-33-3"></a><a href="#__codelineno-33-3"><span class="linenos" data-linenos=" 3 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="p">[</span><span class="mh">3</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">in</span><span class="p">,</span>
</span><span id="__span-33-4"><a id="__codelineno-33-4" name="__codelineno-33-4"></a><a href="#__codelineno-33-4"><span class="linenos" data-linenos=" 4 "></span></a><span class="w">    </span><span class="k">output</span><span class="w"> </span><span class="kt">reg</span><span class="w"> </span><span class="p">[</span><span class="mh">1</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">pos</span><span class="w">  </span><span class="p">);</span>
</span><span id="__span-33-5"><a id="__codelineno-33-5" name="__codelineno-33-5"></a><a href="#__codelineno-33-5"><span class="linenos" data-linenos=" 5 "></span></a><span class="w">    </span><span class="k">always</span><span class="p">@(</span><span class="o">*</span><span class="p">)</span><span class="k">begin</span>
</span><span id="__span-33-6"><a id="__codelineno-33-6" name="__codelineno-33-6"></a><a href="#__codelineno-33-6"><span class="linenos" data-linenos=" 6 "></span></a><span class="w">        </span><span class="k">if</span><span class="p">(</span><span class="n">in</span><span class="p">[</span><span class="mh">0</span><span class="p">])</span><span class="w"> </span><span class="n">pos</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">2</span><span class="mb">&#39;b00</span><span class="p">;</span>
</span><span id="__span-33-7"><a id="__codelineno-33-7" name="__codelineno-33-7"></a><a href="#__codelineno-33-7"><span class="linenos" data-linenos=" 7 "></span></a><span class="w">        </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="p">(</span><span class="n">in</span><span class="p">[</span><span class="mh">1</span><span class="p">])</span><span class="w"> </span><span class="n">pos</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">2</span><span class="mb">&#39;b01</span><span class="p">;</span>
</span><span id="__span-33-8"><a id="__codelineno-33-8" name="__codelineno-33-8"></a><a href="#__codelineno-33-8"><span class="linenos" data-linenos=" 8 "></span></a><span class="w">        </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="p">(</span><span class="n">in</span><span class="p">[</span><span class="mh">2</span><span class="p">])</span><span class="w"> </span><span class="n">pos</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">2</span><span class="mb">&#39;b10</span><span class="p">;</span>
</span><span id="__span-33-9"><a id="__codelineno-33-9" name="__codelineno-33-9"></a><a href="#__codelineno-33-9"><span class="linenos" data-linenos=" 9 "></span></a><span class="w">        </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="p">(</span><span class="n">in</span><span class="p">[</span><span class="mh">3</span><span class="p">])</span><span class="w"> </span><span class="n">pos</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">2</span><span class="mb">&#39;b11</span><span class="p">;</span>
</span><span id="__span-33-10"><a id="__codelineno-33-10" name="__codelineno-33-10"></a><a href="#__codelineno-33-10"><span class="linenos" data-linenos="10 "></span></a><span class="w">        </span><span class="k">else</span><span class="w"> </span><span class="n">pos</span><span class="o">=</span><span class="w"> </span><span class="mh">2</span><span class="mb">&#39;b00</span><span class="p">;</span>
</span><span id="__span-33-11"><a id="__codelineno-33-11" name="__codelineno-33-11"></a><a href="#__codelineno-33-11"><span class="linenos" data-linenos="11 "></span></a><span class="w">    </span><span class="k">end</span>
</span><span id="__span-33-12"><a id="__codelineno-33-12" name="__codelineno-33-12"></a><a href="#__codelineno-33-12"><span class="linenos" data-linenos="12 "></span></a><span class="k">endmodule</span>
</span></code></pre></div></p>
<hr />
<h4 id="priority-encoder-with-casez">Priority encoder with casez<a class="headerlink" href="#priority-encoder-with-casez" title="Anchor link to this section for reference">⚓︎</a></h4>
<p>Website: <a href="https://hdlbits.01xz.net/wiki/Always_casez" target="_blank">https://hdlbits.01xz.net/wiki/Always_casez</a></p>
<p>這題跟上題差不多，只是嘗試用casez實作encoder。
<div class="language-verilog highlight"><span class="filename">Verilog</span><pre><span></span><code><span id="__span-34-1"><a id="__codelineno-34-1" name="__codelineno-34-1"></a><a href="#__codelineno-34-1"><span class="linenos" data-linenos=" 1 "></span></a><span class="c1">// synthesis verilog_input_version verilog_2001</span>
</span><span id="__span-34-2"><a id="__codelineno-34-2" name="__codelineno-34-2"></a><a href="#__codelineno-34-2"><span class="linenos" data-linenos=" 2 "></span></a><span class="k">module</span><span class="w"> </span><span class="n">top_module</span><span class="w"> </span><span class="p">(</span>
</span><span id="__span-34-3"><a id="__codelineno-34-3" name="__codelineno-34-3"></a><a href="#__codelineno-34-3"><span class="linenos" data-linenos=" 3 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="p">[</span><span class="mh">7</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">in</span><span class="p">,</span>
</span><span id="__span-34-4"><a id="__codelineno-34-4" name="__codelineno-34-4"></a><a href="#__codelineno-34-4"><span class="linenos" data-linenos=" 4 "></span></a><span class="w">    </span><span class="k">output</span><span class="w"> </span><span class="kt">reg</span><span class="w"> </span><span class="p">[</span><span class="mh">2</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">pos</span><span class="w"> </span><span class="p">);</span>
</span><span id="__span-34-5"><a id="__codelineno-34-5" name="__codelineno-34-5"></a><a href="#__codelineno-34-5"><span class="linenos" data-linenos=" 5 "></span></a><span class="w">    </span><span class="k">always</span><span class="p">@(</span><span class="o">*</span><span class="p">)</span><span class="k">begin</span>
</span><span id="__span-34-6"><a id="__codelineno-34-6" name="__codelineno-34-6"></a><a href="#__codelineno-34-6"><span class="linenos" data-linenos=" 6 "></span></a><span class="w">        </span><span class="k">casez</span><span class="p">(</span><span class="n">in</span><span class="p">)</span>
</span><span id="__span-34-7"><a id="__codelineno-34-7" name="__codelineno-34-7"></a><a href="#__codelineno-34-7"><span class="linenos" data-linenos=" 7 "></span></a><span class="w">            </span><span class="mh">8</span><span class="p">&#39;</span><span class="nl">bzzzzzzz1:</span><span class="w"> </span><span class="n">pos</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">3</span><span class="mb">&#39;b000</span><span class="p">;</span>
</span><span id="__span-34-8"><a id="__codelineno-34-8" name="__codelineno-34-8"></a><a href="#__codelineno-34-8"><span class="linenos" data-linenos=" 8 "></span></a><span class="w">            </span><span class="mh">8</span><span class="p">&#39;</span><span class="nl">bzzzzzz10:</span><span class="w"> </span><span class="n">pos</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">3</span><span class="mb">&#39;b001</span><span class="p">;</span>
</span><span id="__span-34-9"><a id="__codelineno-34-9" name="__codelineno-34-9"></a><a href="#__codelineno-34-9"><span class="linenos" data-linenos=" 9 "></span></a><span class="w">            </span><span class="mh">8</span><span class="p">&#39;</span><span class="nl">bzzzzz100:</span><span class="w"> </span><span class="n">pos</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">3</span><span class="mb">&#39;b010</span><span class="p">;</span>
</span><span id="__span-34-10"><a id="__codelineno-34-10" name="__codelineno-34-10"></a><a href="#__codelineno-34-10"><span class="linenos" data-linenos="10 "></span></a><span class="w">            </span><span class="mh">8</span><span class="p">&#39;</span><span class="nl">bzzzz1000:</span><span class="w"> </span><span class="n">pos</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">3</span><span class="mb">&#39;b011</span><span class="p">;</span>
</span><span id="__span-34-11"><a id="__codelineno-34-11" name="__codelineno-34-11"></a><a href="#__codelineno-34-11"><span class="linenos" data-linenos="11 "></span></a><span class="w">            </span><span class="mh">8</span><span class="p">&#39;</span><span class="nl">bzzz10000:</span><span class="w"> </span><span class="n">pos</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">3</span><span class="mb">&#39;b100</span><span class="p">;</span>
</span><span id="__span-34-12"><a id="__codelineno-34-12" name="__codelineno-34-12"></a><a href="#__codelineno-34-12"><span class="linenos" data-linenos="12 "></span></a><span class="w">            </span><span class="mh">8</span><span class="p">&#39;</span><span class="nl">bzz100000:</span><span class="w"> </span><span class="n">pos</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">3</span><span class="mb">&#39;b101</span><span class="p">;</span>
</span><span id="__span-34-13"><a id="__codelineno-34-13" name="__codelineno-34-13"></a><a href="#__codelineno-34-13"><span class="linenos" data-linenos="13 "></span></a><span class="w">            </span><span class="mh">8</span><span class="p">&#39;</span><span class="nl">bz1000000:</span><span class="w"> </span><span class="n">pos</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">3</span><span class="mb">&#39;b110</span><span class="p">;</span>
</span><span id="__span-34-14"><a id="__codelineno-34-14" name="__codelineno-34-14"></a><a href="#__codelineno-34-14"><span class="linenos" data-linenos="14 "></span></a><span class="w">            </span><span class="mh">8</span><span class="mb">&#39;b10000000</span><span class="o">:</span><span class="w"> </span><span class="n">pos</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">3</span><span class="mb">&#39;b111</span><span class="p">;</span>
</span><span id="__span-34-15"><a id="__codelineno-34-15" name="__codelineno-34-15"></a><a href="#__codelineno-34-15"><span class="linenos" data-linenos="15 "></span></a><span class="w">            </span><span class="k">default</span><span class="o">:</span><span class="w">     </span><span class="n">pos</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">3</span><span class="mb">&#39;b000</span><span class="p">;</span>
</span><span id="__span-34-16"><a id="__codelineno-34-16" name="__codelineno-34-16"></a><a href="#__codelineno-34-16"><span class="linenos" data-linenos="16 "></span></a><span class="w">        </span><span class="k">endcase</span>
</span><span id="__span-34-17"><a id="__codelineno-34-17" name="__codelineno-34-17"></a><a href="#__codelineno-34-17"><span class="linenos" data-linenos="17 "></span></a><span class="w">    </span><span class="k">end</span>
</span><span id="__span-34-18"><a id="__codelineno-34-18" name="__codelineno-34-18"></a><a href="#__codelineno-34-18"><span class="linenos" data-linenos="18 "></span></a><span class="k">endmodule</span>
</span></code></pre></div></p>
<hr />
<h4 id="avoiding-latches">Avoiding latches<a class="headerlink" href="#avoiding-latches" title="Anchor link to this section for reference">⚓︎</a></h4>
<p>Website: <a href="https://hdlbits.01xz.net/wiki/Always_nolatches" target="_blank">https://hdlbits.01xz.net/wiki/Always_nolatches</a></p>
<p>這題在練習如何在有大量output情形時，透過預先寫默認的輸入來減少行數，而這種寫法對於合成電路沒什麼影響，因為實際的電路不是照著程式碼一行一行執行。
<div class="language-verilog highlight"><span class="filename">Verilog</span><pre><span></span><code><span id="__span-35-1"><a id="__codelineno-35-1" name="__codelineno-35-1"></a><a href="#__codelineno-35-1"><span class="linenos" data-linenos=" 1 "></span></a><span class="c1">// synthesis verilog_input_version verilog_2001</span>
</span><span id="__span-35-2"><a id="__codelineno-35-2" name="__codelineno-35-2"></a><a href="#__codelineno-35-2"><span class="linenos" data-linenos=" 2 "></span></a><span class="k">module</span><span class="w"> </span><span class="n">top_module</span><span class="w"> </span><span class="p">(</span>
</span><span id="__span-35-3"><a id="__codelineno-35-3" name="__codelineno-35-3"></a><a href="#__codelineno-35-3"><span class="linenos" data-linenos=" 3 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="p">[</span><span class="mh">15</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">scancode</span><span class="p">,</span>
</span><span id="__span-35-4"><a id="__codelineno-35-4" name="__codelineno-35-4"></a><a href="#__codelineno-35-4"><span class="linenos" data-linenos=" 4 "></span></a><span class="w">    </span><span class="k">output</span><span class="w"> </span><span class="kt">reg</span><span class="w"> </span><span class="n">left</span><span class="p">,</span>
</span><span id="__span-35-5"><a id="__codelineno-35-5" name="__codelineno-35-5"></a><a href="#__codelineno-35-5"><span class="linenos" data-linenos=" 5 "></span></a><span class="w">    </span><span class="k">output</span><span class="w"> </span><span class="kt">reg</span><span class="w"> </span><span class="n">down</span><span class="p">,</span>
</span><span id="__span-35-6"><a id="__codelineno-35-6" name="__codelineno-35-6"></a><a href="#__codelineno-35-6"><span class="linenos" data-linenos=" 6 "></span></a><span class="w">    </span><span class="k">output</span><span class="w"> </span><span class="kt">reg</span><span class="w"> </span><span class="n">right</span><span class="p">,</span>
</span><span id="__span-35-7"><a id="__codelineno-35-7" name="__codelineno-35-7"></a><a href="#__codelineno-35-7"><span class="linenos" data-linenos=" 7 "></span></a><span class="w">    </span><span class="k">output</span><span class="w"> </span><span class="kt">reg</span><span class="w"> </span><span class="n">up</span><span class="w">  </span><span class="p">);</span><span class="w"> </span>
</span><span id="__span-35-8"><a id="__codelineno-35-8" name="__codelineno-35-8"></a><a href="#__codelineno-35-8"><span class="linenos" data-linenos=" 8 "></span></a><span class="w">    </span><span class="k">always</span><span class="p">@(</span><span class="o">*</span><span class="p">)</span><span class="k">begin</span>
</span><span id="__span-35-9"><a id="__codelineno-35-9" name="__codelineno-35-9"></a><a href="#__codelineno-35-9"><span class="linenos" data-linenos=" 9 "></span></a><span class="w">        </span><span class="n">up</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">1</span><span class="mb">&#39;b0</span><span class="p">;</span>
</span><span id="__span-35-10"><a id="__codelineno-35-10" name="__codelineno-35-10"></a><a href="#__codelineno-35-10"><span class="linenos" data-linenos="10 "></span></a><span class="w">        </span><span class="n">down</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">1</span><span class="mb">&#39;b0</span><span class="p">;</span>
</span><span id="__span-35-11"><a id="__codelineno-35-11" name="__codelineno-35-11"></a><a href="#__codelineno-35-11"><span class="linenos" data-linenos="11 "></span></a><span class="w">        </span><span class="n">left</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">1</span><span class="mb">&#39;b0</span><span class="p">;</span>
</span><span id="__span-35-12"><a id="__codelineno-35-12" name="__codelineno-35-12"></a><a href="#__codelineno-35-12"><span class="linenos" data-linenos="12 "></span></a><span class="w">        </span><span class="n">right</span><span class="w"> </span><span class="o">=</span><span class="mh">1</span><span class="mb">&#39;b0</span><span class="p">;</span>
</span><span id="__span-35-13"><a id="__codelineno-35-13" name="__codelineno-35-13"></a><a href="#__codelineno-35-13"><span class="linenos" data-linenos="13 "></span></a><span class="w">        </span><span class="k">case</span><span class="p">(</span><span class="n">scancode</span><span class="p">)</span>
</span><span id="__span-35-14"><a id="__codelineno-35-14" name="__codelineno-35-14"></a><a href="#__codelineno-35-14"><span class="linenos" data-linenos="14 "></span></a><span class="w">            </span><span class="mh">16&#39;he06b</span><span class="o">:</span><span class="w"> </span><span class="n">left</span><span class="o">=</span><span class="w"> </span><span class="mh">1</span><span class="mb">&#39;b1</span><span class="p">;</span>
</span><span id="__span-35-15"><a id="__codelineno-35-15" name="__codelineno-35-15"></a><a href="#__codelineno-35-15"><span class="linenos" data-linenos="15 "></span></a><span class="w">            </span><span class="mh">16&#39;he072</span><span class="o">:</span><span class="w"> </span><span class="n">down</span><span class="o">=</span><span class="w"> </span><span class="mh">1</span><span class="mb">&#39;b1</span><span class="p">;</span>
</span><span id="__span-35-16"><a id="__codelineno-35-16" name="__codelineno-35-16"></a><a href="#__codelineno-35-16"><span class="linenos" data-linenos="16 "></span></a><span class="w">            </span><span class="mh">16&#39;he074</span><span class="o">:</span><span class="w"> </span><span class="n">right</span><span class="o">=</span><span class="w"> </span><span class="mh">1</span><span class="mb">&#39;b1</span><span class="p">;</span>
</span><span id="__span-35-17"><a id="__codelineno-35-17" name="__codelineno-35-17"></a><a href="#__codelineno-35-17"><span class="linenos" data-linenos="17 "></span></a><span class="w">            </span><span class="mh">16&#39;he075</span><span class="o">:</span><span class="w"> </span><span class="n">up</span><span class="o">=</span><span class="w"> </span><span class="mh">1</span><span class="mb">&#39;b1</span><span class="p">;</span>
</span><span id="__span-35-18"><a id="__codelineno-35-18" name="__codelineno-35-18"></a><a href="#__codelineno-35-18"><span class="linenos" data-linenos="18 "></span></a><span class="w">        </span><span class="k">endcase</span>
</span><span id="__span-35-19"><a id="__codelineno-35-19" name="__codelineno-35-19"></a><a href="#__codelineno-35-19"><span class="linenos" data-linenos="19 "></span></a><span class="w">    </span><span class="k">end</span>
</span><span id="__span-35-20"><a id="__codelineno-35-20" name="__codelineno-35-20"></a><a href="#__codelineno-35-20"><span class="linenos" data-linenos="20 "></span></a><span class="k">endmodule</span>
</span></code></pre></div></p>
<hr />
<h3 id="more-verilog-features">More Verilog Features<a class="headerlink" href="#more-verilog-features" title="Anchor link to this section for reference">⚓︎</a></h3>
<h4 id="conditional-ternary-operator">Conditional ternary operator<a class="headerlink" href="#conditional-ternary-operator" title="Anchor link to this section for reference">⚓︎</a></h4>
<p>Website: <a href="https://hdlbits.01xz.net/wiki/Conditional" target="_blank">https://hdlbits.01xz.net/wiki/Conditional</a></p>
<p>這題在教三元運算的使用。題目說要做一個4-to-1 MUX，可以簡單用3個2元運算接出電路。
<div class="language-verilog highlight"><span class="filename">Verilog</span><pre><span></span><code><span id="__span-36-1"><a id="__codelineno-36-1" name="__codelineno-36-1"></a><a href="#__codelineno-36-1"><span class="linenos" data-linenos=" 1 "></span></a><span class="k">module</span><span class="w"> </span><span class="n">top_module</span><span class="w"> </span><span class="p">(</span>
</span><span id="__span-36-2"><a id="__codelineno-36-2" name="__codelineno-36-2"></a><a href="#__codelineno-36-2"><span class="linenos" data-linenos=" 2 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="p">[</span><span class="mh">7</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">a</span><span class="p">,</span><span class="w"> </span><span class="n">b</span><span class="p">,</span><span class="w"> </span><span class="n">c</span><span class="p">,</span><span class="w"> </span><span class="n">d</span><span class="p">,</span>
</span><span id="__span-36-3"><a id="__codelineno-36-3" name="__codelineno-36-3"></a><a href="#__codelineno-36-3"><span class="linenos" data-linenos=" 3 "></span></a><span class="w">    </span><span class="k">output</span><span class="w"> </span><span class="p">[</span><span class="mh">7</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">min</span><span class="p">);</span><span class="c1">//</span>
</span><span id="__span-36-4"><a id="__codelineno-36-4" name="__codelineno-36-4"></a><a href="#__codelineno-36-4"><span class="linenos" data-linenos=" 4 "></span></a>
</span><span id="__span-36-5"><a id="__codelineno-36-5" name="__codelineno-36-5"></a><a href="#__codelineno-36-5"><span class="linenos" data-linenos=" 5 "></span></a><span class="w">    </span><span class="c1">// assign intermediate_result1 = compare? true: false;</span>
</span><span id="__span-36-6"><a id="__codelineno-36-6" name="__codelineno-36-6"></a><a href="#__codelineno-36-6"><span class="linenos" data-linenos=" 6 "></span></a><span class="w">    </span><span class="kt">wire</span><span class="w"> </span><span class="p">[</span><span class="mh">7</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="n">w1</span><span class="p">,</span><span class="n">w2</span><span class="p">;</span>
</span><span id="__span-36-7"><a id="__codelineno-36-7" name="__codelineno-36-7"></a><a href="#__codelineno-36-7"><span class="linenos" data-linenos=" 7 "></span></a><span class="w">    </span><span class="k">assign</span><span class="w"> </span><span class="n">w1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">a</span><span class="o">&lt;</span><span class="n">b</span><span class="p">)</span><span class="o">?</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">b</span><span class="p">;</span>
</span><span id="__span-36-8"><a id="__codelineno-36-8" name="__codelineno-36-8"></a><a href="#__codelineno-36-8"><span class="linenos" data-linenos=" 8 "></span></a><span class="w">    </span><span class="k">assign</span><span class="w"> </span><span class="n">w2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">c</span><span class="o">&lt;</span><span class="n">d</span><span class="p">)</span><span class="o">?</span><span class="w"> </span><span class="n">c</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">d</span><span class="p">;</span>
</span><span id="__span-36-9"><a id="__codelineno-36-9" name="__codelineno-36-9"></a><a href="#__codelineno-36-9"><span class="linenos" data-linenos=" 9 "></span></a><span class="w">    </span><span class="k">assign</span><span class="w"> </span><span class="n">min</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">w1</span><span class="o">&lt;</span><span class="n">w2</span><span class="p">)</span><span class="o">?</span><span class="w"> </span><span class="n">w1</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">w2</span><span class="p">;</span>
</span><span id="__span-36-10"><a id="__codelineno-36-10" name="__codelineno-36-10"></a><a href="#__codelineno-36-10"><span class="linenos" data-linenos="10 "></span></a><span class="k">endmodule</span>
</span></code></pre></div></p>
<hr />
<h4 id="reduction-operators">Reduction operators<a class="headerlink" href="#reduction-operators" title="Anchor link to this section for reference">⚓︎</a></h4>
<p>Website: <a href="https://hdlbits.01xz.net/wiki/Reduction" target="_blank">https://hdlbits.01xz.net/wiki/Reduction</a></p>
<p>這題練習reduction operator，透過<code>assign parity =^in</code>，省去了冗長的in運算。
<div class="language-verilog highlight"><span class="filename">Verilog</span><pre><span></span><code><span id="__span-37-1"><a id="__codelineno-37-1" name="__codelineno-37-1"></a><a href="#__codelineno-37-1"><span class="linenos" data-linenos="1 "></span></a><span class="k">module</span><span class="w"> </span><span class="n">top_module</span><span class="w"> </span><span class="p">(</span>
</span><span id="__span-37-2"><a id="__codelineno-37-2" name="__codelineno-37-2"></a><a href="#__codelineno-37-2"><span class="linenos" data-linenos="2 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="p">[</span><span class="mh">7</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">in</span><span class="p">,</span>
</span><span id="__span-37-3"><a id="__codelineno-37-3" name="__codelineno-37-3"></a><a href="#__codelineno-37-3"><span class="linenos" data-linenos="3 "></span></a><span class="w">    </span><span class="k">output</span><span class="w"> </span><span class="n">parity</span><span class="p">);</span><span class="w"> </span>
</span><span id="__span-37-4"><a id="__codelineno-37-4" name="__codelineno-37-4"></a><a href="#__codelineno-37-4"><span class="linenos" data-linenos="4 "></span></a><span class="w">    </span><span class="k">assign</span><span class="w"> </span><span class="n">parity</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">^</span><span class="n">in</span><span class="p">;</span>
</span><span id="__span-37-5"><a id="__codelineno-37-5" name="__codelineno-37-5"></a><a href="#__codelineno-37-5"><span class="linenos" data-linenos="5 "></span></a><span class="k">endmodule</span>
</span></code></pre></div></p>
<hr />
<h4 id="reduction-even-wider-gates">Reduction: Even wider gates<a class="headerlink" href="#reduction-even-wider-gates" title="Anchor link to this section for reference">⚓︎</a></h4>
<p>Website: <a href="https://hdlbits.01xz.net/wiki/Gates100" target="_blank">https://hdlbits.01xz.net/wiki/Gates100</a></p>
<p>這題跟上題差不多，只是位數變多了。
<div class="language-verilog highlight"><span class="filename">Verilog</span><pre><span></span><code><span id="__span-38-1"><a id="__codelineno-38-1" name="__codelineno-38-1"></a><a href="#__codelineno-38-1"><span class="linenos" data-linenos=" 1 "></span></a><span class="k">module</span><span class="w"> </span><span class="n">top_module</span><span class="p">(</span><span class="w"> </span>
</span><span id="__span-38-2"><a id="__codelineno-38-2" name="__codelineno-38-2"></a><a href="#__codelineno-38-2"><span class="linenos" data-linenos=" 2 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="p">[</span><span class="mh">99</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">in</span><span class="p">,</span>
</span><span id="__span-38-3"><a id="__codelineno-38-3" name="__codelineno-38-3"></a><a href="#__codelineno-38-3"><span class="linenos" data-linenos=" 3 "></span></a><span class="w">    </span><span class="k">output</span><span class="w"> </span><span class="n">out_and</span><span class="p">,</span>
</span><span id="__span-38-4"><a id="__codelineno-38-4" name="__codelineno-38-4"></a><a href="#__codelineno-38-4"><span class="linenos" data-linenos=" 4 "></span></a><span class="w">    </span><span class="k">output</span><span class="w"> </span><span class="n">out_or</span><span class="p">,</span>
</span><span id="__span-38-5"><a id="__codelineno-38-5" name="__codelineno-38-5"></a><a href="#__codelineno-38-5"><span class="linenos" data-linenos=" 5 "></span></a><span class="w">    </span><span class="k">output</span><span class="w"> </span><span class="n">out_xor</span><span class="w"> </span>
</span><span id="__span-38-6"><a id="__codelineno-38-6" name="__codelineno-38-6"></a><a href="#__codelineno-38-6"><span class="linenos" data-linenos=" 6 "></span></a><span class="p">);</span>
</span><span id="__span-38-7"><a id="__codelineno-38-7" name="__codelineno-38-7"></a><a href="#__codelineno-38-7"><span class="linenos" data-linenos=" 7 "></span></a><span class="w">    </span><span class="k">assign</span><span class="w"> </span><span class="n">out_and</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">&amp;</span><span class="n">in</span><span class="p">;</span>
</span><span id="__span-38-8"><a id="__codelineno-38-8" name="__codelineno-38-8"></a><a href="#__codelineno-38-8"><span class="linenos" data-linenos=" 8 "></span></a><span class="w">    </span><span class="k">assign</span><span class="w"> </span><span class="n">out_or</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">|</span><span class="n">in</span><span class="p">;</span>
</span><span id="__span-38-9"><a id="__codelineno-38-9" name="__codelineno-38-9"></a><a href="#__codelineno-38-9"><span class="linenos" data-linenos=" 9 "></span></a><span class="w">    </span><span class="k">assign</span><span class="w"> </span><span class="n">out_xor</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">^</span><span class="n">in</span><span class="p">;</span>
</span><span id="__span-38-10"><a id="__codelineno-38-10" name="__codelineno-38-10"></a><a href="#__codelineno-38-10"><span class="linenos" data-linenos="10 "></span></a><span class="k">endmodule</span>
</span></code></pre></div></p>
<hr />
<h4 id="combinational-for-loop-vector-reversal-2">Combinational for-loop: Vector reversal 2<a class="headerlink" href="#combinational-for-loop-vector-reversal-2" title="Anchor link to this section for reference">⚓︎</a></h4>
<p>Website: <a href="https://hdlbits.01xz.net/wiki/Vector100r" target="_blank">https://hdlbits.01xz.net/wiki/Vector100r</a></p>
<p>這題教程推薦用always block來實作reversal，就可以不用寫generate了。
<div class="language-verilog highlight"><span class="filename">Verilog</span><pre><span></span><code><span id="__span-39-1"><a id="__codelineno-39-1" name="__codelineno-39-1"></a><a href="#__codelineno-39-1"><span class="linenos" data-linenos=" 1 "></span></a><span class="k">module</span><span class="w"> </span><span class="n">top_module</span><span class="p">(</span><span class="w"> </span>
</span><span id="__span-39-2"><a id="__codelineno-39-2" name="__codelineno-39-2"></a><a href="#__codelineno-39-2"><span class="linenos" data-linenos=" 2 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="p">[</span><span class="mh">99</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">in</span><span class="p">,</span>
</span><span id="__span-39-3"><a id="__codelineno-39-3" name="__codelineno-39-3"></a><a href="#__codelineno-39-3"><span class="linenos" data-linenos=" 3 "></span></a><span class="w">    </span><span class="k">output</span><span class="w"> </span><span class="p">[</span><span class="mh">99</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">out</span>
</span><span id="__span-39-4"><a id="__codelineno-39-4" name="__codelineno-39-4"></a><a href="#__codelineno-39-4"><span class="linenos" data-linenos=" 4 "></span></a><span class="p">);</span>
</span><span id="__span-39-5"><a id="__codelineno-39-5" name="__codelineno-39-5"></a><a href="#__codelineno-39-5"><span class="linenos" data-linenos=" 5 "></span></a><span class="w">    </span><span class="k">integer</span><span class="w"> </span><span class="n">i</span><span class="p">;</span>
</span><span id="__span-39-6"><a id="__codelineno-39-6" name="__codelineno-39-6"></a><a href="#__codelineno-39-6"><span class="linenos" data-linenos=" 6 "></span></a><span class="w">    </span><span class="k">always</span><span class="p">@(</span><span class="o">*</span><span class="p">)</span><span class="k">begin</span>
</span><span id="__span-39-7"><a id="__codelineno-39-7" name="__codelineno-39-7"></a><a href="#__codelineno-39-7"><span class="linenos" data-linenos=" 7 "></span></a><span class="w">        </span><span class="k">for</span><span class="p">(</span><span class="n">i</span><span class="o">=</span><span class="mh">0</span><span class="p">;</span><span class="n">i</span><span class="o">&lt;</span><span class="mh">100</span><span class="p">;</span><span class="n">i</span><span class="o">++</span><span class="p">)</span><span class="k">begin</span>
</span><span id="__span-39-8"><a id="__codelineno-39-8" name="__codelineno-39-8"></a><a href="#__codelineno-39-8"><span class="linenos" data-linenos=" 8 "></span></a><span class="w">            </span><span class="n">out</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">in</span><span class="p">[</span><span class="mh">99</span><span class="o">-</span><span class="n">i</span><span class="p">];</span>
</span><span id="__span-39-9"><a id="__codelineno-39-9" name="__codelineno-39-9"></a><a href="#__codelineno-39-9"><span class="linenos" data-linenos=" 9 "></span></a><span class="w">        </span><span class="k">end</span>
</span><span id="__span-39-10"><a id="__codelineno-39-10" name="__codelineno-39-10"></a><a href="#__codelineno-39-10"><span class="linenos" data-linenos="10 "></span></a><span class="w">    </span><span class="k">end</span>
</span><span id="__span-39-11"><a id="__codelineno-39-11" name="__codelineno-39-11"></a><a href="#__codelineno-39-11"><span class="linenos" data-linenos="11 "></span></a><span class="k">endmodule</span>
</span></code></pre></div></p>
<hr />
<h4 id="combinational-for-loop-255-bit-population-count">Combinational for-loop: 255-bit population count<a class="headerlink" href="#combinational-for-loop-255-bit-population-count" title="Anchor link to this section for reference">⚓︎</a></h4>
<p>Website: <a href="https://hdlbits.01xz.net/wiki/Popcount255" target="_blank">https://hdlbits.01xz.net/wiki/Popcount255</a></p>
<p>這題要算陣列中元素的數量，可以用for loop來實現，然後記得out要初始化為0。
<div class="language-verilog highlight"><span class="filename">Verilog</span><pre><span></span><code><span id="__span-40-1"><a id="__codelineno-40-1" name="__codelineno-40-1"></a><a href="#__codelineno-40-1"><span class="linenos" data-linenos=" 1 "></span></a><span class="k">module</span><span class="w"> </span><span class="n">top_module</span><span class="p">(</span><span class="w"> </span>
</span><span id="__span-40-2"><a id="__codelineno-40-2" name="__codelineno-40-2"></a><a href="#__codelineno-40-2"><span class="linenos" data-linenos=" 2 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="p">[</span><span class="mh">254</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">in</span><span class="p">,</span>
</span><span id="__span-40-3"><a id="__codelineno-40-3" name="__codelineno-40-3"></a><a href="#__codelineno-40-3"><span class="linenos" data-linenos=" 3 "></span></a><span class="w">    </span><span class="k">output</span><span class="w"> </span><span class="p">[</span><span class="mh">7</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">out</span><span class="w"> </span><span class="p">);</span>
</span><span id="__span-40-4"><a id="__codelineno-40-4" name="__codelineno-40-4"></a><a href="#__codelineno-40-4"><span class="linenos" data-linenos=" 4 "></span></a><span class="w">    </span><span class="k">integer</span><span class="w"> </span><span class="n">i</span><span class="p">;</span>
</span><span id="__span-40-5"><a id="__codelineno-40-5" name="__codelineno-40-5"></a><a href="#__codelineno-40-5"><span class="linenos" data-linenos=" 5 "></span></a><span class="w">    </span><span class="k">always</span><span class="p">@(</span><span class="o">*</span><span class="p">)</span><span class="k">begin</span>
</span><span id="__span-40-6"><a id="__codelineno-40-6" name="__codelineno-40-6"></a><a href="#__codelineno-40-6"><span class="linenos" data-linenos=" 6 "></span></a><span class="w">        </span><span class="n">out</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">8</span><span class="mb">&#39;b00000000</span><span class="p">;</span>
</span><span id="__span-40-7"><a id="__codelineno-40-7" name="__codelineno-40-7"></a><a href="#__codelineno-40-7"><span class="linenos" data-linenos=" 7 "></span></a><span class="w">        </span><span class="k">for</span><span class="p">(</span><span class="n">i</span><span class="o">=</span><span class="mh">0</span><span class="p">;</span><span class="n">i</span><span class="o">&lt;</span><span class="mh">255</span><span class="p">;</span><span class="n">i</span><span class="o">++</span><span class="p">)</span><span class="k">begin</span>
</span><span id="__span-40-8"><a id="__codelineno-40-8" name="__codelineno-40-8"></a><a href="#__codelineno-40-8"><span class="linenos" data-linenos=" 8 "></span></a><span class="w">            </span><span class="n">out</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">out</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">in</span><span class="p">[</span><span class="n">i</span><span class="p">];</span>
</span><span id="__span-40-9"><a id="__codelineno-40-9" name="__codelineno-40-9"></a><a href="#__codelineno-40-9"><span class="linenos" data-linenos=" 9 "></span></a><span class="w">        </span><span class="k">end</span>
</span><span id="__span-40-10"><a id="__codelineno-40-10" name="__codelineno-40-10"></a><a href="#__codelineno-40-10"><span class="linenos" data-linenos="10 "></span></a><span class="w">    </span><span class="k">end</span>
</span><span id="__span-40-11"><a id="__codelineno-40-11" name="__codelineno-40-11"></a><a href="#__codelineno-40-11"><span class="linenos" data-linenos="11 "></span></a><span class="k">endmodule</span>
</span></code></pre></div></p>
<hr />
<h4 id="generate-for-loop-100-bit-binary-adder-2">Generate for-loop: 100-bit binary adder 2<a class="headerlink" href="#generate-for-loop-100-bit-binary-adder-2" title="Anchor link to this section for reference">⚓︎</a></h4>
<p>Website: <a href="https://hdlbits.01xz.net/wiki/Adder100i" target="_blank">https://hdlbits.01xz.net/wiki/Adder100i</a></p>
<p>這題在練習100bit的加法，因為題目要求用module實作1bit full adder，所以這裡只能用generate初始化。
<div class="language-verilog highlight"><span class="filename">Verilog</span><pre><span></span><code><span id="__span-41-1"><a id="__codelineno-41-1" name="__codelineno-41-1"></a><a href="#__codelineno-41-1"><span class="linenos" data-linenos=" 1 "></span></a><span class="k">module</span><span class="w"> </span><span class="n">top_module</span><span class="p">(</span><span class="w"> </span>
</span><span id="__span-41-2"><a id="__codelineno-41-2" name="__codelineno-41-2"></a><a href="#__codelineno-41-2"><span class="linenos" data-linenos=" 2 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="p">[</span><span class="mh">99</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">a</span><span class="p">,</span><span class="w"> </span><span class="n">b</span><span class="p">,</span>
</span><span id="__span-41-3"><a id="__codelineno-41-3" name="__codelineno-41-3"></a><a href="#__codelineno-41-3"><span class="linenos" data-linenos=" 3 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">cin</span><span class="p">,</span>
</span><span id="__span-41-4"><a id="__codelineno-41-4" name="__codelineno-41-4"></a><a href="#__codelineno-41-4"><span class="linenos" data-linenos=" 4 "></span></a><span class="w">    </span><span class="k">output</span><span class="w"> </span><span class="p">[</span><span class="mh">99</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">cout</span><span class="p">,</span>
</span><span id="__span-41-5"><a id="__codelineno-41-5" name="__codelineno-41-5"></a><a href="#__codelineno-41-5"><span class="linenos" data-linenos=" 5 "></span></a><span class="w">    </span><span class="k">output</span><span class="w"> </span><span class="p">[</span><span class="mh">99</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">sum</span><span class="w"> </span><span class="p">);</span>
</span><span id="__span-41-6"><a id="__codelineno-41-6" name="__codelineno-41-6"></a><a href="#__codelineno-41-6"><span class="linenos" data-linenos=" 6 "></span></a>
</span><span id="__span-41-7"><a id="__codelineno-41-7" name="__codelineno-41-7"></a><a href="#__codelineno-41-7"><span class="linenos" data-linenos=" 7 "></span></a><span class="w">    </span><span class="n">full_adder</span><span class="w"> </span><span class="n">fa_first</span><span class="p">(.</span><span class="n">a</span><span class="p">(</span><span class="n">a</span><span class="p">[</span><span class="mh">0</span><span class="p">]),.</span><span class="n">b</span><span class="p">(</span><span class="n">b</span><span class="p">[</span><span class="mh">0</span><span class="p">]),.</span><span class="n">cin</span><span class="p">(</span><span class="n">cin</span><span class="p">),.</span><span class="n">cout</span><span class="p">(</span><span class="n">cout</span><span class="p">[</span><span class="mh">0</span><span class="p">]),.</span><span class="n">sum</span><span class="p">(</span><span class="n">sum</span><span class="p">[</span><span class="mh">0</span><span class="p">]));</span>
</span><span id="__span-41-8"><a id="__codelineno-41-8" name="__codelineno-41-8"></a><a href="#__codelineno-41-8"><span class="linenos" data-linenos=" 8 "></span></a>
</span><span id="__span-41-9"><a id="__codelineno-41-9" name="__codelineno-41-9"></a><a href="#__codelineno-41-9"><span class="linenos" data-linenos=" 9 "></span></a><span class="w">    </span><span class="k">genvar</span><span class="w"> </span><span class="n">i</span><span class="p">;</span>
</span><span id="__span-41-10"><a id="__codelineno-41-10" name="__codelineno-41-10"></a><a href="#__codelineno-41-10"><span class="linenos" data-linenos="10 "></span></a><span class="w">    </span><span class="k">generate</span>
</span><span id="__span-41-11"><a id="__codelineno-41-11" name="__codelineno-41-11"></a><a href="#__codelineno-41-11"><span class="linenos" data-linenos="11 "></span></a><span class="w">        </span><span class="k">for</span><span class="p">(</span><span class="n">i</span><span class="o">=</span><span class="mh">1</span><span class="p">;</span><span class="n">i</span><span class="o">&lt;</span><span class="mh">100</span><span class="p">;</span><span class="n">i</span><span class="o">++</span><span class="p">)</span><span class="k">begin</span><span class="o">:</span><span class="w"> </span><span class="n">block_name</span>
</span><span id="__span-41-12"><a id="__codelineno-41-12" name="__codelineno-41-12"></a><a href="#__codelineno-41-12"><span class="linenos" data-linenos="12 "></span></a><span class="w">            </span><span class="n">full_adder</span><span class="w"> </span><span class="n">fa</span><span class="p">(.</span><span class="n">a</span><span class="p">(</span><span class="n">a</span><span class="p">[</span><span class="n">i</span><span class="p">]),.</span><span class="n">b</span><span class="p">(</span><span class="n">b</span><span class="p">[</span><span class="n">i</span><span class="p">]),.</span><span class="n">cin</span><span class="p">(</span><span class="n">cout</span><span class="p">[</span><span class="n">i</span><span class="o">-</span><span class="mh">1</span><span class="p">]),.</span><span class="n">cout</span><span class="p">(</span><span class="n">cout</span><span class="p">[</span><span class="n">i</span><span class="p">]),.</span><span class="n">sum</span><span class="p">(</span><span class="n">sum</span><span class="p">[</span><span class="n">i</span><span class="p">]));</span>
</span><span id="__span-41-13"><a id="__codelineno-41-13" name="__codelineno-41-13"></a><a href="#__codelineno-41-13"><span class="linenos" data-linenos="13 "></span></a><span class="w">        </span><span class="k">end</span>
</span><span id="__span-41-14"><a id="__codelineno-41-14" name="__codelineno-41-14"></a><a href="#__codelineno-41-14"><span class="linenos" data-linenos="14 "></span></a><span class="w">    </span><span class="k">endgenerate</span>
</span><span id="__span-41-15"><a id="__codelineno-41-15" name="__codelineno-41-15"></a><a href="#__codelineno-41-15"><span class="linenos" data-linenos="15 "></span></a><span class="k">endmodule</span>
</span><span id="__span-41-16"><a id="__codelineno-41-16" name="__codelineno-41-16"></a><a href="#__codelineno-41-16"><span class="linenos" data-linenos="16 "></span></a>
</span><span id="__span-41-17"><a id="__codelineno-41-17" name="__codelineno-41-17"></a><a href="#__codelineno-41-17"><span class="linenos" data-linenos="17 "></span></a><span class="k">module</span><span class="w"> </span><span class="n">full_adder</span><span class="p">(</span><span class="k">input</span><span class="w"> </span><span class="n">a</span><span class="p">,</span><span class="k">input</span><span class="w"> </span><span class="n">b</span><span class="p">,</span><span class="k">input</span><span class="w"> </span><span class="n">cin</span><span class="p">,</span><span class="k">output</span><span class="w"> </span><span class="n">cout</span><span class="p">,</span><span class="k">output</span><span class="w"> </span><span class="n">sum</span><span class="p">);</span>
</span><span id="__span-41-18"><a id="__codelineno-41-18" name="__codelineno-41-18"></a><a href="#__codelineno-41-18"><span class="linenos" data-linenos="18 "></span></a><span class="w">    </span><span class="k">assign</span><span class="w"> </span><span class="p">{</span><span class="n">cout</span><span class="p">,</span><span class="n">sum</span><span class="p">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">cin</span><span class="p">;</span>
</span><span id="__span-41-19"><a id="__codelineno-41-19" name="__codelineno-41-19"></a><a href="#__codelineno-41-19"><span class="linenos" data-linenos="19 "></span></a><span class="k">endmodule</span>
</span></code></pre></div></p>
<hr />
<h4 id="generate-for-loop-100-digit-bcd-adder">Generate for-loop: 100-digit BCD adder<a class="headerlink" href="#generate-for-loop-100-digit-bcd-adder" title="Anchor link to this section for reference">⚓︎</a></h4>
<p>Website: <a href="https://hdlbits.01xz.net/wiki/Bcdadd100" target="_blank">https://hdlbits.01xz.net/wiki/Bcdadd100</a></p>
<p>這題跟上題差不多，只是將adder變成了BCD-adder。
<div class="language-verilog highlight"><span class="filename">Verilog</span><pre><span></span><code><span id="__span-42-1"><a id="__codelineno-42-1" name="__codelineno-42-1"></a><a href="#__codelineno-42-1"><span class="linenos" data-linenos=" 1 "></span></a><span class="k">module</span><span class="w"> </span><span class="n">top_module</span><span class="p">(</span><span class="w"> </span>
</span><span id="__span-42-2"><a id="__codelineno-42-2" name="__codelineno-42-2"></a><a href="#__codelineno-42-2"><span class="linenos" data-linenos=" 2 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="p">[</span><span class="mh">399</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">a</span><span class="p">,</span><span class="w"> </span><span class="n">b</span><span class="p">,</span>
</span><span id="__span-42-3"><a id="__codelineno-42-3" name="__codelineno-42-3"></a><a href="#__codelineno-42-3"><span class="linenos" data-linenos=" 3 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">cin</span><span class="p">,</span>
</span><span id="__span-42-4"><a id="__codelineno-42-4" name="__codelineno-42-4"></a><a href="#__codelineno-42-4"><span class="linenos" data-linenos=" 4 "></span></a><span class="w">    </span><span class="k">output</span><span class="w"> </span><span class="n">cout</span><span class="p">,</span>
</span><span id="__span-42-5"><a id="__codelineno-42-5" name="__codelineno-42-5"></a><a href="#__codelineno-42-5"><span class="linenos" data-linenos=" 5 "></span></a><span class="w">    </span><span class="k">output</span><span class="w"> </span><span class="p">[</span><span class="mh">399</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">sum</span><span class="w"> </span><span class="p">);</span>
</span><span id="__span-42-6"><a id="__codelineno-42-6" name="__codelineno-42-6"></a><a href="#__codelineno-42-6"><span class="linenos" data-linenos=" 6 "></span></a>
</span><span id="__span-42-7"><a id="__codelineno-42-7" name="__codelineno-42-7"></a><a href="#__codelineno-42-7"><span class="linenos" data-linenos=" 7 "></span></a><span class="w">    </span><span class="kt">wire</span><span class="w"> </span><span class="p">[</span><span class="mh">99</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="n">w</span><span class="p">;</span>
</span><span id="__span-42-8"><a id="__codelineno-42-8" name="__codelineno-42-8"></a><a href="#__codelineno-42-8"><span class="linenos" data-linenos=" 8 "></span></a><span class="w">    </span><span class="k">assign</span><span class="w"> </span><span class="n">cout</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">w</span><span class="p">[</span><span class="mh">99</span><span class="p">];</span>
</span><span id="__span-42-9"><a id="__codelineno-42-9" name="__codelineno-42-9"></a><a href="#__codelineno-42-9"><span class="linenos" data-linenos=" 9 "></span></a><span class="w">    </span><span class="n">bcd_fadd</span><span class="w"> </span><span class="n">bcd_fadd_first</span><span class="p">(.</span><span class="n">a</span><span class="p">(</span><span class="n">a</span><span class="p">[</span><span class="mh">3</span><span class="o">:</span><span class="mh">0</span><span class="p">]),.</span><span class="n">b</span><span class="p">(</span><span class="n">b</span><span class="p">[</span><span class="mh">3</span><span class="o">:</span><span class="mh">0</span><span class="p">]),.</span><span class="n">cin</span><span class="p">(</span><span class="n">cin</span><span class="p">),.</span><span class="n">cout</span><span class="p">(</span><span class="n">w</span><span class="p">[</span><span class="mh">0</span><span class="p">]),.</span><span class="n">sum</span><span class="p">(</span><span class="n">sum</span><span class="p">[</span><span class="mh">3</span><span class="o">:</span><span class="mh">0</span><span class="p">]));</span>
</span><span id="__span-42-10"><a id="__codelineno-42-10" name="__codelineno-42-10"></a><a href="#__codelineno-42-10"><span class="linenos" data-linenos="10 "></span></a>
</span><span id="__span-42-11"><a id="__codelineno-42-11" name="__codelineno-42-11"></a><a href="#__codelineno-42-11"><span class="linenos" data-linenos="11 "></span></a><span class="w">    </span><span class="k">genvar</span><span class="w"> </span><span class="n">i</span><span class="p">;</span>
</span><span id="__span-42-12"><a id="__codelineno-42-12" name="__codelineno-42-12"></a><a href="#__codelineno-42-12"><span class="linenos" data-linenos="12 "></span></a><span class="w">    </span><span class="k">generate</span>
</span><span id="__span-42-13"><a id="__codelineno-42-13" name="__codelineno-42-13"></a><a href="#__codelineno-42-13"><span class="linenos" data-linenos="13 "></span></a><span class="w">        </span><span class="k">for</span><span class="p">(</span><span class="n">i</span><span class="o">=</span><span class="mh">1</span><span class="p">;</span><span class="n">i</span><span class="o">&lt;</span><span class="mh">100</span><span class="p">;</span><span class="n">i</span><span class="o">++</span><span class="p">)</span><span class="k">begin</span><span class="o">:</span><span class="n">block_bcd</span>
</span><span id="__span-42-14"><a id="__codelineno-42-14" name="__codelineno-42-14"></a><a href="#__codelineno-42-14"><span class="linenos" data-linenos="14 "></span></a><span class="w">            </span><span class="n">bcd_fadd</span><span class="w"> </span><span class="n">bf</span><span class="p">(.</span><span class="n">a</span><span class="p">(</span><span class="n">a</span><span class="p">[</span><span class="mh">4</span><span class="o">*</span><span class="n">i</span><span class="o">+</span><span class="mh">3</span><span class="o">:</span><span class="mh">4</span><span class="o">*</span><span class="n">i</span><span class="p">]),.</span><span class="n">b</span><span class="p">(</span><span class="n">b</span><span class="p">[</span><span class="mh">4</span><span class="o">*</span><span class="n">i</span><span class="o">+</span><span class="mh">3</span><span class="o">:</span><span class="mh">4</span><span class="o">*</span><span class="n">i</span><span class="p">]),.</span><span class="n">cin</span><span class="p">(</span><span class="n">w</span><span class="p">[</span><span class="n">i</span><span class="o">-</span><span class="mh">1</span><span class="p">]),.</span><span class="n">cout</span><span class="p">(</span><span class="n">w</span><span class="p">[</span><span class="n">i</span><span class="p">]),.</span><span class="n">sum</span><span class="p">(</span><span class="n">sum</span><span class="p">[</span><span class="mh">4</span><span class="o">*</span><span class="n">i</span><span class="o">+</span><span class="mh">3</span><span class="o">:</span><span class="mh">4</span><span class="o">*</span><span class="n">i</span><span class="p">]));</span>
</span><span id="__span-42-15"><a id="__codelineno-42-15" name="__codelineno-42-15"></a><a href="#__codelineno-42-15"><span class="linenos" data-linenos="15 "></span></a><span class="w">        </span><span class="k">end</span>
</span><span id="__span-42-16"><a id="__codelineno-42-16" name="__codelineno-42-16"></a><a href="#__codelineno-42-16"><span class="linenos" data-linenos="16 "></span></a><span class="w">    </span><span class="k">endgenerate</span>
</span><span id="__span-42-17"><a id="__codelineno-42-17" name="__codelineno-42-17"></a><a href="#__codelineno-42-17"><span class="linenos" data-linenos="17 "></span></a><span class="k">endmodule</span>
</span></code></pre></div></p>
<hr />
<h2 id="circuits">Circuits<a class="headerlink" href="#circuits" title="Anchor link to this section for reference">⚓︎</a></h2>
<h3 id="combinational-logic">Combinational Logic<a class="headerlink" href="#combinational-logic" title="Anchor link to this section for reference">⚓︎</a></h3>
<h4 id="basic-gates">Basic Gates<a class="headerlink" href="#basic-gates" title="Anchor link to this section for reference">⚓︎</a></h4>
<h5 id="wire">Wire<a class="headerlink" href="#wire" title="Anchor link to this section for reference">⚓︎</a></h5>
<p>Website: <a href="https://hdlbits.01xz.net/wiki/Exams/m2014_q4h" target="_blank">https://hdlbits.01xz.net/wiki/Exams/m2014_q4h</a></p>
<p>這題就單純接線。
<div class="language-verilog highlight"><span class="filename">Verilog</span><pre><span></span><code><span id="__span-43-1"><a id="__codelineno-43-1" name="__codelineno-43-1"></a><a href="#__codelineno-43-1"><span class="linenos" data-linenos="1 "></span></a><span class="k">module</span><span class="w"> </span><span class="n">top_module</span><span class="w"> </span><span class="p">(</span>
</span><span id="__span-43-2"><a id="__codelineno-43-2" name="__codelineno-43-2"></a><a href="#__codelineno-43-2"><span class="linenos" data-linenos="2 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">in</span><span class="p">,</span>
</span><span id="__span-43-3"><a id="__codelineno-43-3" name="__codelineno-43-3"></a><a href="#__codelineno-43-3"><span class="linenos" data-linenos="3 "></span></a><span class="w">    </span><span class="k">output</span><span class="w"> </span><span class="n">out</span><span class="p">);</span>
</span><span id="__span-43-4"><a id="__codelineno-43-4" name="__codelineno-43-4"></a><a href="#__codelineno-43-4"><span class="linenos" data-linenos="4 "></span></a><span class="w">    </span><span class="k">assign</span><span class="w"> </span><span class="n">out</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">in</span><span class="p">;</span>
</span><span id="__span-43-5"><a id="__codelineno-43-5" name="__codelineno-43-5"></a><a href="#__codelineno-43-5"><span class="linenos" data-linenos="5 "></span></a><span class="k">endmodule</span>
</span></code></pre></div></p>
<hr />
<h5 id="gnd">GND<a class="headerlink" href="#gnd" title="Anchor link to this section for reference">⚓︎</a></h5>
<p>Website: <a href="https://hdlbits.01xz.net/wiki/Exams/m2014_q4i" target="_blank">https://hdlbits.01xz.net/wiki/Exams/m2014_q4i</a></p>
<p>這題就單純接線。
<div class="language-verilog highlight"><span class="filename">Verilog</span><pre><span></span><code><span id="__span-44-1"><a id="__codelineno-44-1" name="__codelineno-44-1"></a><a href="#__codelineno-44-1"><span class="linenos" data-linenos="1 "></span></a><span class="k">module</span><span class="w"> </span><span class="n">top_module</span><span class="w"> </span><span class="p">(</span>
</span><span id="__span-44-2"><a id="__codelineno-44-2" name="__codelineno-44-2"></a><a href="#__codelineno-44-2"><span class="linenos" data-linenos="2 "></span></a><span class="w">    </span><span class="k">output</span><span class="w"> </span><span class="n">out</span><span class="p">);</span>
</span><span id="__span-44-3"><a id="__codelineno-44-3" name="__codelineno-44-3"></a><a href="#__codelineno-44-3"><span class="linenos" data-linenos="3 "></span></a><span class="w">    </span><span class="k">assign</span><span class="w"> </span><span class="n">out</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">1</span><span class="mb">&#39;b0</span><span class="p">;</span>
</span><span id="__span-44-4"><a id="__codelineno-44-4" name="__codelineno-44-4"></a><a href="#__codelineno-44-4"><span class="linenos" data-linenos="4 "></span></a><span class="k">endmodule</span>
</span></code></pre></div></p>
<hr />
<h5 id="nor">NOR<a class="headerlink" href="#nor" title="Anchor link to this section for reference">⚓︎</a></h5>
<p>Website: <a href="https://hdlbits.01xz.net/wiki/Exams/m2014_q4e" target="_blank">https://hdlbits.01xz.net/wiki/Exams/m2014_q4e</a></p>
<p>這題就單純接線。
<div class="language-verilog highlight"><span class="filename">Verilog</span><pre><span></span><code><span id="__span-45-1"><a id="__codelineno-45-1" name="__codelineno-45-1"></a><a href="#__codelineno-45-1"><span class="linenos" data-linenos="1 "></span></a><span class="k">module</span><span class="w"> </span><span class="n">top_module</span><span class="w"> </span><span class="p">(</span>
</span><span id="__span-45-2"><a id="__codelineno-45-2" name="__codelineno-45-2"></a><a href="#__codelineno-45-2"><span class="linenos" data-linenos="2 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">in1</span><span class="p">,</span>
</span><span id="__span-45-3"><a id="__codelineno-45-3" name="__codelineno-45-3"></a><a href="#__codelineno-45-3"><span class="linenos" data-linenos="3 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">in2</span><span class="p">,</span>
</span><span id="__span-45-4"><a id="__codelineno-45-4" name="__codelineno-45-4"></a><a href="#__codelineno-45-4"><span class="linenos" data-linenos="4 "></span></a><span class="w">    </span><span class="k">output</span><span class="w"> </span><span class="n">out</span><span class="p">);</span>
</span><span id="__span-45-5"><a id="__codelineno-45-5" name="__codelineno-45-5"></a><a href="#__codelineno-45-5"><span class="linenos" data-linenos="5 "></span></a><span class="w">    </span><span class="k">assign</span><span class="w"> </span><span class="n">out</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">~</span><span class="w"> </span><span class="p">(</span><span class="n">in1</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">in2</span><span class="p">);</span>
</span><span id="__span-45-6"><a id="__codelineno-45-6" name="__codelineno-45-6"></a><a href="#__codelineno-45-6"><span class="linenos" data-linenos="6 "></span></a><span class="k">endmodule</span>
</span></code></pre></div></p>
<hr />
<h5 id="another-gate">Another gate<a class="headerlink" href="#another-gate" title="Anchor link to this section for reference">⚓︎</a></h5>
<p>Website: <a href="https://hdlbits.01xz.net/wiki/Exams/m2014_q4f" target="_blank">https://hdlbits.01xz.net/wiki/Exams/m2014_q4f</a></p>
<p>這題就單純接線。
<div class="language-verilog highlight"><span class="filename">Verilog</span><pre><span></span><code><span id="__span-46-1"><a id="__codelineno-46-1" name="__codelineno-46-1"></a><a href="#__codelineno-46-1"><span class="linenos" data-linenos="1 "></span></a><span class="k">module</span><span class="w"> </span><span class="n">top_module</span><span class="w"> </span><span class="p">(</span>
</span><span id="__span-46-2"><a id="__codelineno-46-2" name="__codelineno-46-2"></a><a href="#__codelineno-46-2"><span class="linenos" data-linenos="2 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">in1</span><span class="p">,</span>
</span><span id="__span-46-3"><a id="__codelineno-46-3" name="__codelineno-46-3"></a><a href="#__codelineno-46-3"><span class="linenos" data-linenos="3 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">in2</span><span class="p">,</span>
</span><span id="__span-46-4"><a id="__codelineno-46-4" name="__codelineno-46-4"></a><a href="#__codelineno-46-4"><span class="linenos" data-linenos="4 "></span></a><span class="w">    </span><span class="k">output</span><span class="w"> </span><span class="n">out</span><span class="p">);</span>
</span><span id="__span-46-5"><a id="__codelineno-46-5" name="__codelineno-46-5"></a><a href="#__codelineno-46-5"><span class="linenos" data-linenos="5 "></span></a><span class="w">    </span><span class="k">assign</span><span class="w"> </span><span class="n">out</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">in1</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="p">(</span><span class="o">~</span><span class="n">in2</span><span class="p">);</span>
</span><span id="__span-46-6"><a id="__codelineno-46-6" name="__codelineno-46-6"></a><a href="#__codelineno-46-6"><span class="linenos" data-linenos="6 "></span></a><span class="k">endmodule</span>
</span></code></pre></div></p>
<hr />
<h5 id="two-gates">Two gates<a class="headerlink" href="#two-gates" title="Anchor link to this section for reference">⚓︎</a></h5>
<p>Website: <a href="https://hdlbits.01xz.net/wiki/Exams/m2014_q4g" target="_blank">https://hdlbits.01xz.net/wiki/Exams/m2014_q4g</a></p>
<p>這題就單純接線。
<div class="language-verilog highlight"><span class="filename">Verilog</span><pre><span></span><code><span id="__span-47-1"><a id="__codelineno-47-1" name="__codelineno-47-1"></a><a href="#__codelineno-47-1"><span class="linenos" data-linenos="1 "></span></a><span class="k">module</span><span class="w"> </span><span class="n">top_module</span><span class="w"> </span><span class="p">(</span>
</span><span id="__span-47-2"><a id="__codelineno-47-2" name="__codelineno-47-2"></a><a href="#__codelineno-47-2"><span class="linenos" data-linenos="2 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">in1</span><span class="p">,</span>
</span><span id="__span-47-3"><a id="__codelineno-47-3" name="__codelineno-47-3"></a><a href="#__codelineno-47-3"><span class="linenos" data-linenos="3 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">in2</span><span class="p">,</span>
</span><span id="__span-47-4"><a id="__codelineno-47-4" name="__codelineno-47-4"></a><a href="#__codelineno-47-4"><span class="linenos" data-linenos="4 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">in3</span><span class="p">,</span>
</span><span id="__span-47-5"><a id="__codelineno-47-5" name="__codelineno-47-5"></a><a href="#__codelineno-47-5"><span class="linenos" data-linenos="5 "></span></a><span class="w">    </span><span class="k">output</span><span class="w"> </span><span class="n">out</span><span class="p">);</span>
</span><span id="__span-47-6"><a id="__codelineno-47-6" name="__codelineno-47-6"></a><a href="#__codelineno-47-6"><span class="linenos" data-linenos="6 "></span></a><span class="w">    </span><span class="k">assign</span><span class="w"> </span><span class="n">out</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="o">~</span><span class="p">(</span><span class="n">in1</span><span class="w"> </span><span class="o">^</span><span class="w"> </span><span class="n">in2</span><span class="p">))</span><span class="o">^</span><span class="w"> </span><span class="n">in3</span><span class="p">;</span>
</span><span id="__span-47-7"><a id="__codelineno-47-7" name="__codelineno-47-7"></a><a href="#__codelineno-47-7"><span class="linenos" data-linenos="7 "></span></a><span class="k">endmodule</span>
</span></code></pre></div></p>
<hr />
<h5 id="more-logic-gates">More logic gates<a class="headerlink" href="#more-logic-gates" title="Anchor link to this section for reference">⚓︎</a></h5>
<p>Website: <a href="https://hdlbits.01xz.net/wiki/Gates" target="_blank">https://hdlbits.01xz.net/wiki/Gates</a></p>
<p>這題考各種gate的運算。
<div class="language-verilog highlight"><span class="filename">Verilog</span><pre><span></span><code><span id="__span-48-1"><a id="__codelineno-48-1" name="__codelineno-48-1"></a><a href="#__codelineno-48-1"><span class="linenos" data-linenos=" 1 "></span></a><span class="k">module</span><span class="w"> </span><span class="n">top_module</span><span class="p">(</span><span class="w"> </span>
</span><span id="__span-48-2"><a id="__codelineno-48-2" name="__codelineno-48-2"></a><a href="#__codelineno-48-2"><span class="linenos" data-linenos=" 2 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">a</span><span class="p">,</span><span class="w"> </span><span class="n">b</span><span class="p">,</span>
</span><span id="__span-48-3"><a id="__codelineno-48-3" name="__codelineno-48-3"></a><a href="#__codelineno-48-3"><span class="linenos" data-linenos=" 3 "></span></a><span class="w">    </span><span class="k">output</span><span class="w"> </span><span class="n">out_and</span><span class="p">,</span>
</span><span id="__span-48-4"><a id="__codelineno-48-4" name="__codelineno-48-4"></a><a href="#__codelineno-48-4"><span class="linenos" data-linenos=" 4 "></span></a><span class="w">    </span><span class="k">output</span><span class="w"> </span><span class="n">out_or</span><span class="p">,</span>
</span><span id="__span-48-5"><a id="__codelineno-48-5" name="__codelineno-48-5"></a><a href="#__codelineno-48-5"><span class="linenos" data-linenos=" 5 "></span></a><span class="w">    </span><span class="k">output</span><span class="w"> </span><span class="n">out_xor</span><span class="p">,</span>
</span><span id="__span-48-6"><a id="__codelineno-48-6" name="__codelineno-48-6"></a><a href="#__codelineno-48-6"><span class="linenos" data-linenos=" 6 "></span></a><span class="w">    </span><span class="k">output</span><span class="w"> </span><span class="n">out_nand</span><span class="p">,</span>
</span><span id="__span-48-7"><a id="__codelineno-48-7" name="__codelineno-48-7"></a><a href="#__codelineno-48-7"><span class="linenos" data-linenos=" 7 "></span></a><span class="w">    </span><span class="k">output</span><span class="w"> </span><span class="n">out_nor</span><span class="p">,</span>
</span><span id="__span-48-8"><a id="__codelineno-48-8" name="__codelineno-48-8"></a><a href="#__codelineno-48-8"><span class="linenos" data-linenos=" 8 "></span></a><span class="w">    </span><span class="k">output</span><span class="w"> </span><span class="n">out_xnor</span><span class="p">,</span>
</span><span id="__span-48-9"><a id="__codelineno-48-9" name="__codelineno-48-9"></a><a href="#__codelineno-48-9"><span class="linenos" data-linenos=" 9 "></span></a><span class="w">    </span><span class="k">output</span><span class="w"> </span><span class="n">out_anotb</span>
</span><span id="__span-48-10"><a id="__codelineno-48-10" name="__codelineno-48-10"></a><a href="#__codelineno-48-10"><span class="linenos" data-linenos="10 "></span></a><span class="p">);</span>
</span><span id="__span-48-11"><a id="__codelineno-48-11" name="__codelineno-48-11"></a><a href="#__codelineno-48-11"><span class="linenos" data-linenos="11 "></span></a><span class="w">    </span><span class="k">assign</span><span class="w"> </span><span class="n">out_and</span><span class="w">   </span><span class="o">=</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="n">b</span><span class="p">;</span>
</span><span id="__span-48-12"><a id="__codelineno-48-12" name="__codelineno-48-12"></a><a href="#__codelineno-48-12"><span class="linenos" data-linenos="12 "></span></a><span class="w">    </span><span class="k">assign</span><span class="w"> </span><span class="n">out_or</span><span class="w">    </span><span class="o">=</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">b</span><span class="p">;</span>
</span><span id="__span-48-13"><a id="__codelineno-48-13" name="__codelineno-48-13"></a><a href="#__codelineno-48-13"><span class="linenos" data-linenos="13 "></span></a><span class="w">    </span><span class="k">assign</span><span class="w"> </span><span class="n">out_xor</span><span class="w">   </span><span class="o">=</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="o">^</span><span class="w"> </span><span class="n">b</span><span class="p">;</span>
</span><span id="__span-48-14"><a id="__codelineno-48-14" name="__codelineno-48-14"></a><a href="#__codelineno-48-14"><span class="linenos" data-linenos="14 "></span></a><span class="w">    </span><span class="k">assign</span><span class="w"> </span><span class="n">out_nand</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="o">~</span><span class="p">(</span><span class="n">a</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="n">b</span><span class="p">);</span>
</span><span id="__span-48-15"><a id="__codelineno-48-15" name="__codelineno-48-15"></a><a href="#__codelineno-48-15"><span class="linenos" data-linenos="15 "></span></a><span class="w">    </span><span class="k">assign</span><span class="w"> </span><span class="n">out_nor</span><span class="w">   </span><span class="o">=</span><span class="w"> </span><span class="o">~</span><span class="p">(</span><span class="n">a</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">b</span><span class="p">);</span>
</span><span id="__span-48-16"><a id="__codelineno-48-16" name="__codelineno-48-16"></a><a href="#__codelineno-48-16"><span class="linenos" data-linenos="16 "></span></a><span class="w">    </span><span class="k">assign</span><span class="w"> </span><span class="n">out_xnor</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="o">~</span><span class="p">(</span><span class="n">a</span><span class="w"> </span><span class="o">^</span><span class="w"> </span><span class="n">b</span><span class="p">);</span>
</span><span id="__span-48-17"><a id="__codelineno-48-17" name="__codelineno-48-17"></a><a href="#__codelineno-48-17"><span class="linenos" data-linenos="17 "></span></a><span class="w">    </span><span class="k">assign</span><span class="w"> </span><span class="n">out_anotb</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="p">(</span><span class="o">~</span><span class="n">b</span><span class="p">);</span>
</span><span id="__span-48-18"><a id="__codelineno-48-18" name="__codelineno-48-18"></a><a href="#__codelineno-48-18"><span class="linenos" data-linenos="18 "></span></a><span class="k">endmodule</span>
</span></code></pre></div></p>
<hr />
<h5 id="7420-chip">7420 chip<a class="headerlink" href="#7420-chip" title="Anchor link to this section for reference">⚓︎</a></h5>
<p>Website: <a href="https://hdlbits.01xz.net/wiki/7420" target="_blank">https://hdlbits.01xz.net/wiki/7420</a></p>
<p>這題考稍微複雜的接線。
<div class="language-verilog highlight"><span class="filename">Verilog</span><pre><span></span><code><span id="__span-49-1"><a id="__codelineno-49-1" name="__codelineno-49-1"></a><a href="#__codelineno-49-1"><span class="linenos" data-linenos="1 "></span></a><span class="k">module</span><span class="w"> </span><span class="n">top_module</span><span class="w"> </span><span class="p">(</span><span class="w"> </span>
</span><span id="__span-49-2"><a id="__codelineno-49-2" name="__codelineno-49-2"></a><a href="#__codelineno-49-2"><span class="linenos" data-linenos="2 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">p1a</span><span class="p">,</span><span class="w"> </span><span class="n">p1b</span><span class="p">,</span><span class="w"> </span><span class="n">p1c</span><span class="p">,</span><span class="w"> </span><span class="n">p1d</span><span class="p">,</span>
</span><span id="__span-49-3"><a id="__codelineno-49-3" name="__codelineno-49-3"></a><a href="#__codelineno-49-3"><span class="linenos" data-linenos="3 "></span></a><span class="w">    </span><span class="k">output</span><span class="w"> </span><span class="n">p1y</span><span class="p">,</span>
</span><span id="__span-49-4"><a id="__codelineno-49-4" name="__codelineno-49-4"></a><a href="#__codelineno-49-4"><span class="linenos" data-linenos="4 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">p2a</span><span class="p">,</span><span class="w"> </span><span class="n">p2b</span><span class="p">,</span><span class="w"> </span><span class="n">p2c</span><span class="p">,</span><span class="w"> </span><span class="n">p2d</span><span class="p">,</span>
</span><span id="__span-49-5"><a id="__codelineno-49-5" name="__codelineno-49-5"></a><a href="#__codelineno-49-5"><span class="linenos" data-linenos="5 "></span></a><span class="w">    </span><span class="k">output</span><span class="w"> </span><span class="n">p2y</span><span class="w"> </span><span class="p">);</span>
</span><span id="__span-49-6"><a id="__codelineno-49-6" name="__codelineno-49-6"></a><a href="#__codelineno-49-6"><span class="linenos" data-linenos="6 "></span></a><span class="w">    </span><span class="k">assign</span><span class="w"> </span><span class="n">p1y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">~</span><span class="p">(</span><span class="n">p1a</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="n">p1b</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="n">p1c</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="n">p1d</span><span class="p">);</span>
</span><span id="__span-49-7"><a id="__codelineno-49-7" name="__codelineno-49-7"></a><a href="#__codelineno-49-7"><span class="linenos" data-linenos="7 "></span></a><span class="w">    </span><span class="k">assign</span><span class="w"> </span><span class="n">p2y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">~</span><span class="p">(</span><span class="n">p2a</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="n">p2b</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="n">p2c</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="n">p2d</span><span class="p">);</span>
</span><span id="__span-49-8"><a id="__codelineno-49-8" name="__codelineno-49-8"></a><a href="#__codelineno-49-8"><span class="linenos" data-linenos="8 "></span></a><span class="k">endmodule</span>
</span></code></pre></div></p>
<hr />
<h5 id="truth-tables">Truth tables<a class="headerlink" href="#truth-tables" title="Anchor link to this section for reference">⚓︎</a></h5>
<p>Website: <a href="https://hdlbits.01xz.net/wiki/Truthtable1" target="_blank">https://hdlbits.01xz.net/wiki/Truthtable1</a></p>
<p>這題給了真值表，可以進一步使用卡諾圖化簡。
<div class="language-verilog highlight"><span class="filename">Verilog</span><pre><span></span><code><span id="__span-50-1"><a id="__codelineno-50-1" name="__codelineno-50-1"></a><a href="#__codelineno-50-1"><span class="linenos" data-linenos="1 "></span></a><span class="k">module</span><span class="w"> </span><span class="n">top_module</span><span class="p">(</span><span class="w"> </span>
</span><span id="__span-50-2"><a id="__codelineno-50-2" name="__codelineno-50-2"></a><a href="#__codelineno-50-2"><span class="linenos" data-linenos="2 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">x3</span><span class="p">,</span>
</span><span id="__span-50-3"><a id="__codelineno-50-3" name="__codelineno-50-3"></a><a href="#__codelineno-50-3"><span class="linenos" data-linenos="3 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">x2</span><span class="p">,</span>
</span><span id="__span-50-4"><a id="__codelineno-50-4" name="__codelineno-50-4"></a><a href="#__codelineno-50-4"><span class="linenos" data-linenos="4 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">x1</span><span class="p">,</span><span class="w">  </span><span class="c1">// three inputs</span>
</span><span id="__span-50-5"><a id="__codelineno-50-5" name="__codelineno-50-5"></a><a href="#__codelineno-50-5"><span class="linenos" data-linenos="5 "></span></a><span class="w">    </span><span class="k">output</span><span class="w"> </span><span class="n">f</span><span class="w">   </span><span class="c1">// one output</span>
</span><span id="__span-50-6"><a id="__codelineno-50-6" name="__codelineno-50-6"></a><a href="#__codelineno-50-6"><span class="linenos" data-linenos="6 "></span></a><span class="p">);</span>
</span><span id="__span-50-7"><a id="__codelineno-50-7" name="__codelineno-50-7"></a><a href="#__codelineno-50-7"><span class="linenos" data-linenos="7 "></span></a><span class="w">    </span><span class="k">assign</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">x3</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="n">x1</span><span class="p">)</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="p">((</span><span class="o">~</span><span class="n">x3</span><span class="p">)</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="n">x2</span><span class="p">);</span>
</span><span id="__span-50-8"><a id="__codelineno-50-8" name="__codelineno-50-8"></a><a href="#__codelineno-50-8"><span class="linenos" data-linenos="8 "></span></a><span class="k">endmodule</span>
</span></code></pre></div></p>
<hr />
<h5 id="two-bit-equality">Two-bit equality<a class="headerlink" href="#two-bit-equality" title="Anchor link to this section for reference">⚓︎</a></h5>
<p>Website: <a href="https://hdlbits.01xz.net/wiki/Mt2015_eq2" target="_blank">https://hdlbits.01xz.net/wiki/Mt2015_eq2</a></p>
<p>這題用三元運算子就能解決。
<div class="language-verilog highlight"><span class="filename">Verilog</span><pre><span></span><code><span id="__span-51-1"><a id="__codelineno-51-1" name="__codelineno-51-1"></a><a href="#__codelineno-51-1"><span class="linenos" data-linenos="1 "></span></a><span class="k">module</span><span class="w"> </span><span class="n">top_module</span><span class="w"> </span><span class="p">(</span><span class="w"> </span><span class="k">input</span><span class="w"> </span><span class="p">[</span><span class="mh">1</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">A</span><span class="p">,</span><span class="w"> </span><span class="k">input</span><span class="w"> </span><span class="p">[</span><span class="mh">1</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">B</span><span class="p">,</span><span class="w"> </span><span class="k">output</span><span class="w"> </span><span class="n">z</span><span class="w"> </span><span class="p">);</span><span class="w"> </span>
</span><span id="__span-51-2"><a id="__codelineno-51-2" name="__codelineno-51-2"></a><a href="#__codelineno-51-2"><span class="linenos" data-linenos="2 "></span></a><span class="w">    </span><span class="k">assign</span><span class="w"> </span><span class="n">z</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">A</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">B</span><span class="p">)</span><span class="o">?</span><span class="w"> </span><span class="mh">1</span><span class="mb">&#39;b1</span><span class="o">:</span><span class="w"> </span><span class="mh">1</span><span class="mb">&#39;b0</span><span class="p">;</span>
</span><span id="__span-51-3"><a id="__codelineno-51-3" name="__codelineno-51-3"></a><a href="#__codelineno-51-3"><span class="linenos" data-linenos="3 "></span></a><span class="k">endmodule</span>
</span></code></pre></div></p>
<hr />
<h5 id="simple-circuit-a">Simple circuit A<a class="headerlink" href="#simple-circuit-a" title="Anchor link to this section for reference">⚓︎</a></h5>
<p>Website: <a href="https://hdlbits.01xz.net/wiki/Mt2015_q4a" target="_blank">https://hdlbits.01xz.net/wiki/Mt2015_q4a</a></p>
<p>這題照題目assign就行，如果從類比層面來看，not gate會比and，or，xor還小，強烈推薦多化簡成not gate。
<div class="language-verilog highlight"><span class="filename">Verilog</span><pre><span></span><code><span id="__span-52-1"><a id="__codelineno-52-1" name="__codelineno-52-1"></a><a href="#__codelineno-52-1"><span class="linenos" data-linenos="1 "></span></a><span class="k">module</span><span class="w"> </span><span class="n">top_module</span><span class="w"> </span><span class="p">(</span><span class="k">input</span><span class="w"> </span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="k">input</span><span class="w"> </span><span class="n">y</span><span class="p">,</span><span class="w"> </span><span class="k">output</span><span class="w"> </span><span class="n">z</span><span class="p">);</span>
</span><span id="__span-52-2"><a id="__codelineno-52-2" name="__codelineno-52-2"></a><a href="#__codelineno-52-2"><span class="linenos" data-linenos="2 "></span></a><span class="w">    </span><span class="k">assign</span><span class="w">  </span><span class="n">z</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="p">(</span><span class="o">~</span><span class="n">y</span><span class="p">);</span>
</span><span id="__span-52-3"><a id="__codelineno-52-3" name="__codelineno-52-3"></a><a href="#__codelineno-52-3"><span class="linenos" data-linenos="3 "></span></a><span class="k">endmodule</span>
</span></code></pre></div></p>
<hr />
<h5 id="simple-circuit-b">Simple circuit B<a class="headerlink" href="#simple-circuit-b" title="Anchor link to this section for reference">⚓︎</a></h5>
<p>Website: <a href="https://hdlbits.01xz.net/wiki/Mt2015_q4b" target="_blank">https://hdlbits.01xz.net/wiki/Mt2015_q4b</a></p>
<p>這題透過觀察波形，寫出組合邏輯。
<div class="language-verilog highlight"><span class="filename">Verilog</span><pre><span></span><code><span id="__span-53-1"><a id="__codelineno-53-1" name="__codelineno-53-1"></a><a href="#__codelineno-53-1"><span class="linenos" data-linenos="1 "></span></a><span class="k">module</span><span class="w"> </span><span class="n">top_module</span><span class="w"> </span><span class="p">(</span><span class="w"> </span><span class="k">input</span><span class="w"> </span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="k">input</span><span class="w"> </span><span class="n">y</span><span class="p">,</span><span class="w"> </span><span class="k">output</span><span class="w"> </span><span class="n">z</span><span class="w"> </span><span class="p">);</span>
</span><span id="__span-53-2"><a id="__codelineno-53-2" name="__codelineno-53-2"></a><a href="#__codelineno-53-2"><span class="linenos" data-linenos="2 "></span></a><span class="w">    </span><span class="k">assign</span><span class="w"> </span><span class="n">z</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">~</span><span class="p">(</span><span class="n">x</span><span class="w"> </span><span class="o">^</span><span class="w"> </span><span class="n">y</span><span class="p">);</span>
</span><span id="__span-53-3"><a id="__codelineno-53-3" name="__codelineno-53-3"></a><a href="#__codelineno-53-3"><span class="linenos" data-linenos="3 "></span></a><span class="k">endmodule</span>
</span></code></pre></div></p>
<hr />
<h5 id="combine-circuits-a-and-b">Combine circuits A and B<a class="headerlink" href="#combine-circuits-a-and-b" title="Anchor link to this section for reference">⚓︎</a></h5>
<p>Website: <a href="https://hdlbits.01xz.net/wiki/Mt2015_q4" target="_blank">https://hdlbits.01xz.net/wiki/Mt2015_q4</a></p>
<p>這題只是將上兩題當作當作submodule後接線。
<div class="language-verilog highlight"><span class="filename">Verilog</span><pre><span></span><code><span id="__span-54-1"><a id="__codelineno-54-1" name="__codelineno-54-1"></a><a href="#__codelineno-54-1"><span class="linenos" data-linenos=" 1 "></span></a><span class="k">module</span><span class="w"> </span><span class="n">top_module</span><span class="w"> </span><span class="p">(</span><span class="k">input</span><span class="w"> </span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="k">input</span><span class="w"> </span><span class="n">y</span><span class="p">,</span><span class="w"> </span><span class="k">output</span><span class="w"> </span><span class="n">z</span><span class="p">);</span>
</span><span id="__span-54-2"><a id="__codelineno-54-2" name="__codelineno-54-2"></a><a href="#__codelineno-54-2"><span class="linenos" data-linenos=" 2 "></span></a><span class="w">    </span><span class="kt">wire</span><span class="w"> </span><span class="n">wa1</span><span class="p">,</span><span class="n">wa2</span><span class="p">,</span><span class="n">wb1</span><span class="p">,</span><span class="n">wb2</span><span class="p">;</span>
</span><span id="__span-54-3"><a id="__codelineno-54-3" name="__codelineno-54-3"></a><a href="#__codelineno-54-3"><span class="linenos" data-linenos=" 3 "></span></a><span class="w">    </span><span class="n">A</span><span class="w"> </span><span class="n">IA1</span><span class="p">(.</span><span class="n">x</span><span class="p">(</span><span class="n">x</span><span class="p">),</span><span class="w"> </span><span class="p">.</span><span class="n">y</span><span class="p">(</span><span class="n">y</span><span class="p">),</span><span class="w"> </span><span class="p">.</span><span class="n">z</span><span class="p">(</span><span class="n">wa1</span><span class="p">));</span>
</span><span id="__span-54-4"><a id="__codelineno-54-4" name="__codelineno-54-4"></a><a href="#__codelineno-54-4"><span class="linenos" data-linenos=" 4 "></span></a><span class="w">    </span><span class="n">A</span><span class="w"> </span><span class="n">IA2</span><span class="p">(.</span><span class="n">x</span><span class="p">(</span><span class="n">x</span><span class="p">),</span><span class="w"> </span><span class="p">.</span><span class="n">y</span><span class="p">(</span><span class="n">y</span><span class="p">),</span><span class="w"> </span><span class="p">.</span><span class="n">z</span><span class="p">(</span><span class="n">wa2</span><span class="p">));</span>
</span><span id="__span-54-5"><a id="__codelineno-54-5" name="__codelineno-54-5"></a><a href="#__codelineno-54-5"><span class="linenos" data-linenos=" 5 "></span></a><span class="w">    </span><span class="n">B</span><span class="w"> </span><span class="n">IB1</span><span class="p">(.</span><span class="n">x</span><span class="p">(</span><span class="n">x</span><span class="p">),</span><span class="w"> </span><span class="p">.</span><span class="n">y</span><span class="p">(</span><span class="n">y</span><span class="p">),</span><span class="w"> </span><span class="p">.</span><span class="n">z</span><span class="p">(</span><span class="n">wb1</span><span class="p">));</span>
</span><span id="__span-54-6"><a id="__codelineno-54-6" name="__codelineno-54-6"></a><a href="#__codelineno-54-6"><span class="linenos" data-linenos=" 6 "></span></a><span class="w">    </span><span class="n">B</span><span class="w"> </span><span class="n">IB2</span><span class="p">(.</span><span class="n">x</span><span class="p">(</span><span class="n">x</span><span class="p">),</span><span class="w"> </span><span class="p">.</span><span class="n">y</span><span class="p">(</span><span class="n">y</span><span class="p">),</span><span class="w"> </span><span class="p">.</span><span class="n">z</span><span class="p">(</span><span class="n">wb2</span><span class="p">));</span>
</span><span id="__span-54-7"><a id="__codelineno-54-7" name="__codelineno-54-7"></a><a href="#__codelineno-54-7"><span class="linenos" data-linenos=" 7 "></span></a><span class="w">    </span><span class="k">assign</span><span class="w"> </span><span class="n">z</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="w"> </span><span class="n">wa1</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">wb1</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="o">^</span><span class="w"> </span><span class="p">(</span><span class="w"> </span><span class="n">wa2</span><span class="w">  </span><span class="o">&amp;</span><span class="w"> </span><span class="n">wb2</span><span class="w"> </span><span class="p">);</span>
</span><span id="__span-54-8"><a id="__codelineno-54-8" name="__codelineno-54-8"></a><a href="#__codelineno-54-8"><span class="linenos" data-linenos=" 8 "></span></a><span class="k">endmodule</span>
</span><span id="__span-54-9"><a id="__codelineno-54-9" name="__codelineno-54-9"></a><a href="#__codelineno-54-9"><span class="linenos" data-linenos=" 9 "></span></a>
</span><span id="__span-54-10"><a id="__codelineno-54-10" name="__codelineno-54-10"></a><a href="#__codelineno-54-10"><span class="linenos" data-linenos="10 "></span></a><span class="k">module</span><span class="w"> </span><span class="n">A</span><span class="w"> </span><span class="p">(</span><span class="k">input</span><span class="w"> </span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="k">input</span><span class="w"> </span><span class="n">y</span><span class="p">,</span><span class="w"> </span><span class="k">output</span><span class="w"> </span><span class="n">z</span><span class="p">);</span>
</span><span id="__span-54-11"><a id="__codelineno-54-11" name="__codelineno-54-11"></a><a href="#__codelineno-54-11"><span class="linenos" data-linenos="11 "></span></a><span class="w">    </span><span class="k">assign</span><span class="w">  </span><span class="n">z</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="p">(</span><span class="o">~</span><span class="n">y</span><span class="p">);</span>
</span><span id="__span-54-12"><a id="__codelineno-54-12" name="__codelineno-54-12"></a><a href="#__codelineno-54-12"><span class="linenos" data-linenos="12 "></span></a><span class="k">endmodule</span>
</span><span id="__span-54-13"><a id="__codelineno-54-13" name="__codelineno-54-13"></a><a href="#__codelineno-54-13"><span class="linenos" data-linenos="13 "></span></a>
</span><span id="__span-54-14"><a id="__codelineno-54-14" name="__codelineno-54-14"></a><a href="#__codelineno-54-14"><span class="linenos" data-linenos="14 "></span></a><span class="k">module</span><span class="w"> </span><span class="n">B</span><span class="w"> </span><span class="p">(</span><span class="w"> </span><span class="k">input</span><span class="w"> </span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="k">input</span><span class="w"> </span><span class="n">y</span><span class="p">,</span><span class="w"> </span><span class="k">output</span><span class="w"> </span><span class="n">z</span><span class="w"> </span><span class="p">);</span>
</span><span id="__span-54-15"><a id="__codelineno-54-15" name="__codelineno-54-15"></a><a href="#__codelineno-54-15"><span class="linenos" data-linenos="15 "></span></a><span class="w">    </span><span class="k">assign</span><span class="w"> </span><span class="n">z</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">~</span><span class="p">(</span><span class="n">x</span><span class="w"> </span><span class="o">^</span><span class="w"> </span><span class="n">y</span><span class="p">);</span>
</span><span id="__span-54-16"><a id="__codelineno-54-16" name="__codelineno-54-16"></a><a href="#__codelineno-54-16"><span class="linenos" data-linenos="16 "></span></a><span class="k">endmodule</span>
</span></code></pre></div></p>
<hr />
<h5 id="ring-or-vibrate">Ring or vibrate?<a class="headerlink" href="#ring-or-vibrate" title="Anchor link to this section for reference">⚓︎</a></h5>
<p>Website: <a href="https://hdlbits.01xz.net/wiki/Ringer" target="_blank">https://hdlbits.01xz.net/wiki/Ringer</a></p>
<p>這題題目要求用gate寫出符合敘述的邏輯。
<div class="language-verilog highlight"><span class="filename">Verilog</span><pre><span></span><code><span id="__span-55-1"><a id="__codelineno-55-1" name="__codelineno-55-1"></a><a href="#__codelineno-55-1"><span class="linenos" data-linenos="1 "></span></a><span class="k">module</span><span class="w"> </span><span class="n">top_module</span><span class="w"> </span><span class="p">(</span>
</span><span id="__span-55-2"><a id="__codelineno-55-2" name="__codelineno-55-2"></a><a href="#__codelineno-55-2"><span class="linenos" data-linenos="2 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">ring</span><span class="p">,</span>
</span><span id="__span-55-3"><a id="__codelineno-55-3" name="__codelineno-55-3"></a><a href="#__codelineno-55-3"><span class="linenos" data-linenos="3 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">vibrate_mode</span><span class="p">,</span>
</span><span id="__span-55-4"><a id="__codelineno-55-4" name="__codelineno-55-4"></a><a href="#__codelineno-55-4"><span class="linenos" data-linenos="4 "></span></a><span class="w">    </span><span class="k">output</span><span class="w"> </span><span class="n">ringer</span><span class="p">,</span><span class="w">       </span><span class="c1">// Make sound</span>
</span><span id="__span-55-5"><a id="__codelineno-55-5" name="__codelineno-55-5"></a><a href="#__codelineno-55-5"><span class="linenos" data-linenos="5 "></span></a><span class="w">    </span><span class="k">output</span><span class="w"> </span><span class="n">motor</span><span class="w">         </span><span class="c1">// Vibrate</span>
</span><span id="__span-55-6"><a id="__codelineno-55-6" name="__codelineno-55-6"></a><a href="#__codelineno-55-6"><span class="linenos" data-linenos="6 "></span></a><span class="p">);</span>
</span><span id="__span-55-7"><a id="__codelineno-55-7" name="__codelineno-55-7"></a><a href="#__codelineno-55-7"><span class="linenos" data-linenos="7 "></span></a><span class="w">    </span><span class="k">assign</span><span class="w"> </span><span class="n">motor</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ring</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="n">vibrate_mode</span><span class="p">;</span>
</span><span id="__span-55-8"><a id="__codelineno-55-8" name="__codelineno-55-8"></a><a href="#__codelineno-55-8"><span class="linenos" data-linenos="8 "></span></a><span class="w">    </span><span class="k">assign</span><span class="w"> </span><span class="n">ringer</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ring</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="p">(</span><span class="o">~</span><span class="n">vibrate_mode</span><span class="p">);</span>
</span><span id="__span-55-9"><a id="__codelineno-55-9" name="__codelineno-55-9"></a><a href="#__codelineno-55-9"><span class="linenos" data-linenos="9 "></span></a><span class="k">endmodule</span>
</span></code></pre></div></p>
<hr />
<h5 id="thermostat">Thermostat<a class="headerlink" href="#thermostat" title="Anchor link to this section for reference">⚓︎</a></h5>
<p>Website: <a href="https://hdlbits.01xz.net/wiki/Thermostat" target="_blank">https://hdlbits.01xz.net/wiki/Thermostat</a></p>
<p>這題跟上題差不多，就是照著條件接出對應的電路。
<div class="language-verilog highlight"><span class="filename">Verilog</span><pre><span></span><code><span id="__span-56-1"><a id="__codelineno-56-1" name="__codelineno-56-1"></a><a href="#__codelineno-56-1"><span class="linenos" data-linenos=" 1 "></span></a><span class="k">module</span><span class="w"> </span><span class="n">top_module</span><span class="w"> </span><span class="p">(</span>
</span><span id="__span-56-2"><a id="__codelineno-56-2" name="__codelineno-56-2"></a><a href="#__codelineno-56-2"><span class="linenos" data-linenos=" 2 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">too_cold</span><span class="p">,</span>
</span><span id="__span-56-3"><a id="__codelineno-56-3" name="__codelineno-56-3"></a><a href="#__codelineno-56-3"><span class="linenos" data-linenos=" 3 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">too_hot</span><span class="p">,</span>
</span><span id="__span-56-4"><a id="__codelineno-56-4" name="__codelineno-56-4"></a><a href="#__codelineno-56-4"><span class="linenos" data-linenos=" 4 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">mode</span><span class="p">,</span>
</span><span id="__span-56-5"><a id="__codelineno-56-5" name="__codelineno-56-5"></a><a href="#__codelineno-56-5"><span class="linenos" data-linenos=" 5 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">fan_on</span><span class="p">,</span>
</span><span id="__span-56-6"><a id="__codelineno-56-6" name="__codelineno-56-6"></a><a href="#__codelineno-56-6"><span class="linenos" data-linenos=" 6 "></span></a><span class="w">    </span><span class="k">output</span><span class="w"> </span><span class="n">heater</span><span class="p">,</span>
</span><span id="__span-56-7"><a id="__codelineno-56-7" name="__codelineno-56-7"></a><a href="#__codelineno-56-7"><span class="linenos" data-linenos=" 7 "></span></a><span class="w">    </span><span class="k">output</span><span class="w"> </span><span class="n">aircon</span><span class="p">,</span>
</span><span id="__span-56-8"><a id="__codelineno-56-8" name="__codelineno-56-8"></a><a href="#__codelineno-56-8"><span class="linenos" data-linenos=" 8 "></span></a><span class="w">    </span><span class="k">output</span><span class="w"> </span><span class="n">fan</span>
</span><span id="__span-56-9"><a id="__codelineno-56-9" name="__codelineno-56-9"></a><a href="#__codelineno-56-9"><span class="linenos" data-linenos=" 9 "></span></a><span class="p">);</span><span class="w"> </span>
</span><span id="__span-56-10"><a id="__codelineno-56-10" name="__codelineno-56-10"></a><a href="#__codelineno-56-10"><span class="linenos" data-linenos="10 "></span></a><span class="w">    </span><span class="k">assign</span><span class="w"> </span><span class="n">heater</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">mode</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="n">too_cold</span><span class="p">;</span>
</span><span id="__span-56-11"><a id="__codelineno-56-11" name="__codelineno-56-11"></a><a href="#__codelineno-56-11"><span class="linenos" data-linenos="11 "></span></a><span class="w">    </span><span class="k">assign</span><span class="w"> </span><span class="n">aircon</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="o">~</span><span class="n">mode</span><span class="p">)</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="n">too_hot</span><span class="p">;</span>
</span><span id="__span-56-12"><a id="__codelineno-56-12" name="__codelineno-56-12"></a><a href="#__codelineno-56-12"><span class="linenos" data-linenos="12 "></span></a><span class="w">    </span><span class="k">assign</span><span class="w"> </span><span class="n">fan</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">heater</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">aircon</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">fan_on</span><span class="p">;</span>
</span><span id="__span-56-13"><a id="__codelineno-56-13" name="__codelineno-56-13"></a><a href="#__codelineno-56-13"><span class="linenos" data-linenos="13 "></span></a><span class="k">endmodule</span>
</span></code></pre></div></p>
<hr />
<h5 id="3-bit-population-count">3-bit population count<a class="headerlink" href="#3-bit-population-count" title="Anchor link to this section for reference">⚓︎</a></h5>
<p>Website: <a href="https://hdlbits.01xz.net/wiki/Popcount3" target="_blank">https://hdlbits.01xz.net/wiki/Popcount3</a></p>
<p>這題就是寫個全加器。
<div class="language-verilog highlight"><span class="filename">Verilog</span><pre><span></span><code><span id="__span-57-1"><a id="__codelineno-57-1" name="__codelineno-57-1"></a><a href="#__codelineno-57-1"><span class="linenos" data-linenos="1 "></span></a><span class="k">module</span><span class="w"> </span><span class="n">top_module</span><span class="p">(</span><span class="w"> </span>
</span><span id="__span-57-2"><a id="__codelineno-57-2" name="__codelineno-57-2"></a><a href="#__codelineno-57-2"><span class="linenos" data-linenos="2 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="p">[</span><span class="mh">2</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">in</span><span class="p">,</span>
</span><span id="__span-57-3"><a id="__codelineno-57-3" name="__codelineno-57-3"></a><a href="#__codelineno-57-3"><span class="linenos" data-linenos="3 "></span></a><span class="w">    </span><span class="k">output</span><span class="w"> </span><span class="p">[</span><span class="mh">1</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">out</span><span class="w"> </span><span class="p">);</span>
</span><span id="__span-57-4"><a id="__codelineno-57-4" name="__codelineno-57-4"></a><a href="#__codelineno-57-4"><span class="linenos" data-linenos="4 "></span></a><span class="w">    </span><span class="k">assign</span><span class="w"> </span><span class="n">out</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">in</span><span class="p">[</span><span class="mh">2</span><span class="p">]</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">in</span><span class="p">[</span><span class="mh">1</span><span class="p">]</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">in</span><span class="p">[</span><span class="mh">0</span><span class="p">];</span>
</span><span id="__span-57-5"><a id="__codelineno-57-5" name="__codelineno-57-5"></a><a href="#__codelineno-57-5"><span class="linenos" data-linenos="5 "></span></a><span class="k">endmodule</span>
</span></code></pre></div></p>
<hr />
<h5 id="gates-and-vectors">Gates and vectors<a class="headerlink" href="#gates-and-vectors" title="Anchor link to this section for reference">⚓︎</a></h5>
<p>Website: <a href="https://hdlbits.01xz.net/wiki/Gatesv" target="_blank">https://hdlbits.01xz.net/wiki/Gatesv</a></p>
<p>這題就是練習assign一排運算。
<div class="language-verilog highlight"><span class="filename">Verilog</span><pre><span></span><code><span id="__span-58-1"><a id="__codelineno-58-1" name="__codelineno-58-1"></a><a href="#__codelineno-58-1"><span class="linenos" data-linenos="1 "></span></a><span class="k">module</span><span class="w"> </span><span class="n">top_module</span><span class="p">(</span><span class="w"> </span>
</span><span id="__span-58-2"><a id="__codelineno-58-2" name="__codelineno-58-2"></a><a href="#__codelineno-58-2"><span class="linenos" data-linenos="2 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="p">[</span><span class="mh">3</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">in</span><span class="p">,</span>
</span><span id="__span-58-3"><a id="__codelineno-58-3" name="__codelineno-58-3"></a><a href="#__codelineno-58-3"><span class="linenos" data-linenos="3 "></span></a><span class="w">    </span><span class="k">output</span><span class="w"> </span><span class="p">[</span><span class="mh">2</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">out_both</span><span class="p">,</span>
</span><span id="__span-58-4"><a id="__codelineno-58-4" name="__codelineno-58-4"></a><a href="#__codelineno-58-4"><span class="linenos" data-linenos="4 "></span></a><span class="w">    </span><span class="k">output</span><span class="w"> </span><span class="p">[</span><span class="mh">3</span><span class="o">:</span><span class="mh">1</span><span class="p">]</span><span class="w"> </span><span class="n">out_any</span><span class="p">,</span>
</span><span id="__span-58-5"><a id="__codelineno-58-5" name="__codelineno-58-5"></a><a href="#__codelineno-58-5"><span class="linenos" data-linenos="5 "></span></a><span class="w">    </span><span class="k">output</span><span class="w"> </span><span class="p">[</span><span class="mh">3</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">out_different</span><span class="w"> </span><span class="p">);</span>
</span><span id="__span-58-6"><a id="__codelineno-58-6" name="__codelineno-58-6"></a><a href="#__codelineno-58-6"><span class="linenos" data-linenos="6 "></span></a><span class="w">    </span><span class="k">assign</span><span class="w"> </span><span class="n">out_both</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">in</span><span class="p">[</span><span class="mh">2</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="n">in</span><span class="p">[</span><span class="mh">3</span><span class="o">:</span><span class="mh">1</span><span class="p">];</span>
</span><span id="__span-58-7"><a id="__codelineno-58-7" name="__codelineno-58-7"></a><a href="#__codelineno-58-7"><span class="linenos" data-linenos="7 "></span></a><span class="w">    </span><span class="k">assign</span><span class="w"> </span><span class="n">out_any</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">in</span><span class="p">[</span><span class="mh">2</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">in</span><span class="p">[</span><span class="mh">3</span><span class="o">:</span><span class="mh">1</span><span class="p">];</span>
</span><span id="__span-58-8"><a id="__codelineno-58-8" name="__codelineno-58-8"></a><a href="#__codelineno-58-8"><span class="linenos" data-linenos="8 "></span></a><span class="w">    </span><span class="k">assign</span><span class="w"> </span><span class="n">out_different</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">in</span><span class="w"> </span><span class="p">[</span><span class="mh">3</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="o">^</span><span class="w"> </span><span class="p">{</span><span class="n">in</span><span class="p">[</span><span class="mh">0</span><span class="p">],</span><span class="n">in</span><span class="p">[</span><span class="mh">3</span><span class="o">:</span><span class="mh">1</span><span class="p">]};</span>
</span><span id="__span-58-9"><a id="__codelineno-58-9" name="__codelineno-58-9"></a><a href="#__codelineno-58-9"><span class="linenos" data-linenos="9 "></span></a><span class="k">endmodule</span>
</span></code></pre></div></p>
<hr />
<h5 id="even-longer-vectors">Even longer vectors<a class="headerlink" href="#even-longer-vectors" title="Anchor link to this section for reference">⚓︎</a></h5>
<p>Website: <a href="https://hdlbits.01xz.net/wiki/Gatesv100" target="_blank">https://hdlbits.01xz.net/wiki/Gatesv100</a></p>
<p>這題跟上題差不多，只是input vector變長了。
<div class="language-verilog highlight"><span class="filename">Verilog</span><pre><span></span><code><span id="__span-59-1"><a id="__codelineno-59-1" name="__codelineno-59-1"></a><a href="#__codelineno-59-1"><span class="linenos" data-linenos="1 "></span></a><span class="k">module</span><span class="w"> </span><span class="n">top_module</span><span class="p">(</span><span class="w"> </span>
</span><span id="__span-59-2"><a id="__codelineno-59-2" name="__codelineno-59-2"></a><a href="#__codelineno-59-2"><span class="linenos" data-linenos="2 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="p">[</span><span class="mh">99</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">in</span><span class="p">,</span>
</span><span id="__span-59-3"><a id="__codelineno-59-3" name="__codelineno-59-3"></a><a href="#__codelineno-59-3"><span class="linenos" data-linenos="3 "></span></a><span class="w">    </span><span class="k">output</span><span class="w"> </span><span class="p">[</span><span class="mh">98</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">out_both</span><span class="p">,</span>
</span><span id="__span-59-4"><a id="__codelineno-59-4" name="__codelineno-59-4"></a><a href="#__codelineno-59-4"><span class="linenos" data-linenos="4 "></span></a><span class="w">    </span><span class="k">output</span><span class="w"> </span><span class="p">[</span><span class="mh">99</span><span class="o">:</span><span class="mh">1</span><span class="p">]</span><span class="w"> </span><span class="n">out_any</span><span class="p">,</span>
</span><span id="__span-59-5"><a id="__codelineno-59-5" name="__codelineno-59-5"></a><a href="#__codelineno-59-5"><span class="linenos" data-linenos="5 "></span></a><span class="w">    </span><span class="k">output</span><span class="w"> </span><span class="p">[</span><span class="mh">99</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">out_different</span><span class="w"> </span><span class="p">);</span>
</span><span id="__span-59-6"><a id="__codelineno-59-6" name="__codelineno-59-6"></a><a href="#__codelineno-59-6"><span class="linenos" data-linenos="6 "></span></a><span class="w">    </span><span class="k">assign</span><span class="w"> </span><span class="n">out_both</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">in</span><span class="p">[</span><span class="mh">98</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="n">in</span><span class="p">[</span><span class="mh">99</span><span class="o">:</span><span class="mh">1</span><span class="p">];</span>
</span><span id="__span-59-7"><a id="__codelineno-59-7" name="__codelineno-59-7"></a><a href="#__codelineno-59-7"><span class="linenos" data-linenos="7 "></span></a><span class="w">    </span><span class="k">assign</span><span class="w"> </span><span class="n">out_any</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">in</span><span class="p">[</span><span class="mh">98</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">in</span><span class="p">[</span><span class="mh">99</span><span class="o">:</span><span class="mh">1</span><span class="p">];</span>
</span><span id="__span-59-8"><a id="__codelineno-59-8" name="__codelineno-59-8"></a><a href="#__codelineno-59-8"><span class="linenos" data-linenos="8 "></span></a><span class="w">    </span><span class="k">assign</span><span class="w"> </span><span class="n">out_different</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">in</span><span class="w"> </span><span class="p">[</span><span class="mh">99</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="o">^</span><span class="w"> </span><span class="p">{</span><span class="n">in</span><span class="p">[</span><span class="mh">0</span><span class="p">],</span><span class="n">in</span><span class="p">[</span><span class="mh">99</span><span class="o">:</span><span class="mh">1</span><span class="p">]};</span>
</span><span id="__span-59-9"><a id="__codelineno-59-9" name="__codelineno-59-9"></a><a href="#__codelineno-59-9"><span class="linenos" data-linenos="9 "></span></a><span class="k">endmodule</span>
</span></code></pre></div></p>
<hr />
<h4 id="multiplexers">Multiplexers<a class="headerlink" href="#multiplexers" title="Anchor link to this section for reference">⚓︎</a></h4>
<h5 id="2-to-1-multiplexer">2-to-1 multiplexer<a class="headerlink" href="#2-to-1-multiplexer" title="Anchor link to this section for reference">⚓︎</a></h5>
<p>Website: <a href="https://hdlbits.01xz.net/wiki/Mux2to1" target="_blank">https://hdlbits.01xz.net/wiki/Mux2to1</a></p>
<p>用三元運算子就能輕鬆寫出multiplexer。
<div class="language-verilog highlight"><span class="filename">Verilog</span><pre><span></span><code><span id="__span-60-1"><a id="__codelineno-60-1" name="__codelineno-60-1"></a><a href="#__codelineno-60-1"><span class="linenos" data-linenos="1 "></span></a><span class="k">module</span><span class="w"> </span><span class="n">top_module</span><span class="p">(</span><span class="w"> </span>
</span><span id="__span-60-2"><a id="__codelineno-60-2" name="__codelineno-60-2"></a><a href="#__codelineno-60-2"><span class="linenos" data-linenos="2 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">a</span><span class="p">,</span><span class="w"> </span><span class="n">b</span><span class="p">,</span><span class="w"> </span><span class="n">sel</span><span class="p">,</span>
</span><span id="__span-60-3"><a id="__codelineno-60-3" name="__codelineno-60-3"></a><a href="#__codelineno-60-3"><span class="linenos" data-linenos="3 "></span></a><span class="w">    </span><span class="k">output</span><span class="w"> </span><span class="n">out</span><span class="w"> </span><span class="p">);</span><span class="w"> </span>
</span><span id="__span-60-4"><a id="__codelineno-60-4" name="__codelineno-60-4"></a><a href="#__codelineno-60-4"><span class="linenos" data-linenos="4 "></span></a><span class="w">    </span><span class="k">assign</span><span class="w"> </span><span class="n">out</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">sel</span><span class="o">?</span><span class="w"> </span><span class="nl">b:</span><span class="w"> </span><span class="n">a</span><span class="p">;</span>
</span><span id="__span-60-5"><a id="__codelineno-60-5" name="__codelineno-60-5"></a><a href="#__codelineno-60-5"><span class="linenos" data-linenos="5 "></span></a><span class="k">endmodule</span>
</span></code></pre></div></p>
<hr />
<h5 id="2-to-1-bus-multiplexer">2-to-1 bus multiplexer<a class="headerlink" href="#2-to-1-bus-multiplexer" title="Anchor link to this section for reference">⚓︎</a></h5>
<p>Website: <a href="https://hdlbits.01xz.net/wiki/Mux2to1v" target="_blank">https://hdlbits.01xz.net/wiki/Mux2to1v</a></p>
<p>跟上題差不多，用三元運算子就能輕鬆寫出vector的multiplexer。
<div class="language-verilog highlight"><span class="filename">Verilog</span><pre><span></span><code><span id="__span-61-1"><a id="__codelineno-61-1" name="__codelineno-61-1"></a><a href="#__codelineno-61-1"><span class="linenos" data-linenos="1 "></span></a><span class="k">module</span><span class="w"> </span><span class="n">top_module</span><span class="p">(</span><span class="w"> </span>
</span><span id="__span-61-2"><a id="__codelineno-61-2" name="__codelineno-61-2"></a><a href="#__codelineno-61-2"><span class="linenos" data-linenos="2 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="p">[</span><span class="mh">99</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">a</span><span class="p">,</span><span class="w"> </span><span class="n">b</span><span class="p">,</span>
</span><span id="__span-61-3"><a id="__codelineno-61-3" name="__codelineno-61-3"></a><a href="#__codelineno-61-3"><span class="linenos" data-linenos="3 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">sel</span><span class="p">,</span>
</span><span id="__span-61-4"><a id="__codelineno-61-4" name="__codelineno-61-4"></a><a href="#__codelineno-61-4"><span class="linenos" data-linenos="4 "></span></a><span class="w">    </span><span class="k">output</span><span class="w"> </span><span class="p">[</span><span class="mh">99</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">out</span><span class="w"> </span><span class="p">);</span>
</span><span id="__span-61-5"><a id="__codelineno-61-5" name="__codelineno-61-5"></a><a href="#__codelineno-61-5"><span class="linenos" data-linenos="5 "></span></a><span class="w">    </span><span class="k">assign</span><span class="w"> </span><span class="n">out</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">sel</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">a</span><span class="p">;</span>
</span><span id="__span-61-6"><a id="__codelineno-61-6" name="__codelineno-61-6"></a><a href="#__codelineno-61-6"><span class="linenos" data-linenos="6 "></span></a><span class="k">endmodule</span>
</span></code></pre></div></p>
<hr />
<h5 id="9-to-1-multiplexer">9-to-1 multiplexer<a class="headerlink" href="#9-to-1-multiplexer" title="Anchor link to this section for reference">⚓︎</a></h5>
<p>Website: <a href="https://hdlbits.01xz.net/wiki/Mux9to1v" target="_blank">https://hdlbits.01xz.net/wiki/Mux9to1v</a></p>
<p>這題可以用case來實現9-to-1 multiplexer。
<div class="language-verilog highlight"><span class="filename">Verilog</span><pre><span></span><code><span id="__span-62-1"><a id="__codelineno-62-1" name="__codelineno-62-1"></a><a href="#__codelineno-62-1"><span class="linenos" data-linenos=" 1 "></span></a><span class="k">module</span><span class="w"> </span><span class="n">top_module</span><span class="p">(</span><span class="w"> </span>
</span><span id="__span-62-2"><a id="__codelineno-62-2" name="__codelineno-62-2"></a><a href="#__codelineno-62-2"><span class="linenos" data-linenos=" 2 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="p">[</span><span class="mh">15</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">a</span><span class="p">,</span><span class="w"> </span><span class="n">b</span><span class="p">,</span><span class="w"> </span><span class="n">c</span><span class="p">,</span><span class="w"> </span><span class="n">d</span><span class="p">,</span><span class="w"> </span><span class="n">e</span><span class="p">,</span><span class="w"> </span><span class="n">f</span><span class="p">,</span><span class="w"> </span><span class="n">g</span><span class="p">,</span><span class="w"> </span><span class="n">h</span><span class="p">,</span><span class="w"> </span><span class="n">i</span><span class="p">,</span>
</span><span id="__span-62-3"><a id="__codelineno-62-3" name="__codelineno-62-3"></a><a href="#__codelineno-62-3"><span class="linenos" data-linenos=" 3 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="p">[</span><span class="mh">3</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">sel</span><span class="p">,</span>
</span><span id="__span-62-4"><a id="__codelineno-62-4" name="__codelineno-62-4"></a><a href="#__codelineno-62-4"><span class="linenos" data-linenos=" 4 "></span></a><span class="w">    </span><span class="k">output</span><span class="w"> </span><span class="p">[</span><span class="mh">15</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">out</span><span class="w"> </span><span class="p">);</span>
</span><span id="__span-62-5"><a id="__codelineno-62-5" name="__codelineno-62-5"></a><a href="#__codelineno-62-5"><span class="linenos" data-linenos=" 5 "></span></a><span class="w">    </span><span class="k">always</span><span class="p">@(</span><span class="o">*</span><span class="p">)</span><span class="k">begin</span>
</span><span id="__span-62-6"><a id="__codelineno-62-6" name="__codelineno-62-6"></a><a href="#__codelineno-62-6"><span class="linenos" data-linenos=" 6 "></span></a><span class="w">        </span><span class="k">case</span><span class="p">(</span><span class="n">sel</span><span class="p">)</span>
</span><span id="__span-62-7"><a id="__codelineno-62-7" name="__codelineno-62-7"></a><a href="#__codelineno-62-7"><span class="linenos" data-linenos=" 7 "></span></a><span class="w">            </span><span class="mh">4</span><span class="mb">&#39;b0000</span><span class="o">:</span><span class="w"> </span><span class="n">out</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">a</span><span class="p">;</span>
</span><span id="__span-62-8"><a id="__codelineno-62-8" name="__codelineno-62-8"></a><a href="#__codelineno-62-8"><span class="linenos" data-linenos=" 8 "></span></a><span class="w">            </span><span class="mh">4</span><span class="mb">&#39;b0001</span><span class="o">:</span><span class="w"> </span><span class="n">out</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">b</span><span class="p">;</span>
</span><span id="__span-62-9"><a id="__codelineno-62-9" name="__codelineno-62-9"></a><a href="#__codelineno-62-9"><span class="linenos" data-linenos=" 9 "></span></a><span class="w">            </span><span class="mh">4</span><span class="mb">&#39;b0010</span><span class="o">:</span><span class="w"> </span><span class="n">out</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">c</span><span class="p">;</span>
</span><span id="__span-62-10"><a id="__codelineno-62-10" name="__codelineno-62-10"></a><a href="#__codelineno-62-10"><span class="linenos" data-linenos="10 "></span></a><span class="w">            </span><span class="mh">4</span><span class="mb">&#39;b0011</span><span class="o">:</span><span class="w"> </span><span class="n">out</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">d</span><span class="p">;</span>
</span><span id="__span-62-11"><a id="__codelineno-62-11" name="__codelineno-62-11"></a><a href="#__codelineno-62-11"><span class="linenos" data-linenos="11 "></span></a><span class="w">            </span><span class="mh">4</span><span class="mb">&#39;b0100</span><span class="o">:</span><span class="w"> </span><span class="n">out</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">e</span><span class="p">;</span>
</span><span id="__span-62-12"><a id="__codelineno-62-12" name="__codelineno-62-12"></a><a href="#__codelineno-62-12"><span class="linenos" data-linenos="12 "></span></a><span class="w">            </span><span class="mh">4</span><span class="mb">&#39;b0101</span><span class="o">:</span><span class="w"> </span><span class="n">out</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">f</span><span class="p">;</span>
</span><span id="__span-62-13"><a id="__codelineno-62-13" name="__codelineno-62-13"></a><a href="#__codelineno-62-13"><span class="linenos" data-linenos="13 "></span></a><span class="w">            </span><span class="mh">4</span><span class="mb">&#39;b0110</span><span class="o">:</span><span class="w"> </span><span class="n">out</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">g</span><span class="p">;</span>
</span><span id="__span-62-14"><a id="__codelineno-62-14" name="__codelineno-62-14"></a><a href="#__codelineno-62-14"><span class="linenos" data-linenos="14 "></span></a><span class="w">            </span><span class="mh">4</span><span class="mb">&#39;b0111</span><span class="o">:</span><span class="w"> </span><span class="n">out</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">h</span><span class="p">;</span>
</span><span id="__span-62-15"><a id="__codelineno-62-15" name="__codelineno-62-15"></a><a href="#__codelineno-62-15"><span class="linenos" data-linenos="15 "></span></a><span class="w">            </span><span class="mh">4</span><span class="mb">&#39;b1000</span><span class="o">:</span><span class="w"> </span><span class="n">out</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">i</span><span class="p">;</span>
</span><span id="__span-62-16"><a id="__codelineno-62-16" name="__codelineno-62-16"></a><a href="#__codelineno-62-16"><span class="linenos" data-linenos="16 "></span></a><span class="w">            </span><span class="k">default</span><span class="o">:</span><span class="w"> </span><span class="n">out</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="mh">16</span><span class="p">{</span><span class="mh">1</span><span class="mb">&#39;b1</span><span class="p">}};</span>
</span><span id="__span-62-17"><a id="__codelineno-62-17" name="__codelineno-62-17"></a><a href="#__codelineno-62-17"><span class="linenos" data-linenos="17 "></span></a><span class="w">        </span><span class="k">endcase</span>
</span><span id="__span-62-18"><a id="__codelineno-62-18" name="__codelineno-62-18"></a><a href="#__codelineno-62-18"><span class="linenos" data-linenos="18 "></span></a><span class="w">    </span><span class="k">end</span>
</span><span id="__span-62-19"><a id="__codelineno-62-19" name="__codelineno-62-19"></a><a href="#__codelineno-62-19"><span class="linenos" data-linenos="19 "></span></a><span class="k">endmodule</span>
</span></code></pre></div></p>
<hr />
<h5 id="256-to-1-multiplexer">256-to-1 multiplexer<a class="headerlink" href="#256-to-1-multiplexer" title="Anchor link to this section for reference">⚓︎</a></h5>
<p>Website: <a href="https://hdlbits.01xz.net/wiki/Mux256to1" target="_blank">https://hdlbits.01xz.net/wiki/Mux256to1</a></p>
<p>這題講述sel也可以放在index的位置。
<div class="language-verilog highlight"><span class="filename">Verilog</span><pre><span></span><code><span id="__span-63-1"><a id="__codelineno-63-1" name="__codelineno-63-1"></a><a href="#__codelineno-63-1"><span class="linenos" data-linenos="1 "></span></a><span class="k">module</span><span class="w"> </span><span class="n">top_module</span><span class="p">(</span><span class="w"> </span>
</span><span id="__span-63-2"><a id="__codelineno-63-2" name="__codelineno-63-2"></a><a href="#__codelineno-63-2"><span class="linenos" data-linenos="2 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="p">[</span><span class="mh">255</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">in</span><span class="p">,</span>
</span><span id="__span-63-3"><a id="__codelineno-63-3" name="__codelineno-63-3"></a><a href="#__codelineno-63-3"><span class="linenos" data-linenos="3 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="p">[</span><span class="mh">7</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">sel</span><span class="p">,</span>
</span><span id="__span-63-4"><a id="__codelineno-63-4" name="__codelineno-63-4"></a><a href="#__codelineno-63-4"><span class="linenos" data-linenos="4 "></span></a><span class="w">    </span><span class="k">output</span><span class="w"> </span><span class="n">out</span><span class="w"> </span><span class="p">);</span>
</span><span id="__span-63-5"><a id="__codelineno-63-5" name="__codelineno-63-5"></a><a href="#__codelineno-63-5"><span class="linenos" data-linenos="5 "></span></a><span class="w">    </span><span class="k">assign</span><span class="w"> </span><span class="n">out</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">in</span><span class="p">[</span><span class="n">sel</span><span class="p">];</span>
</span><span id="__span-63-6"><a id="__codelineno-63-6" name="__codelineno-63-6"></a><a href="#__codelineno-63-6"><span class="linenos" data-linenos="6 "></span></a><span class="k">endmodule</span>
</span></code></pre></div></p>
<hr />
<h5 id="256-to-1-4-bit-multiplexer">256-to-1 4-bit multiplexer<a class="headerlink" href="#256-to-1-4-bit-multiplexer" title="Anchor link to this section for reference">⚓︎</a></h5>
<p>Website: <a href="https://hdlbits.01xz.net/wiki/Mux256to1v" target="_blank">https://hdlbits.01xz.net/wiki/Mux256to1v</a></p>
<p>題目講說<code>assign out = in[4*sel+3 :4*sel];</code>會編不過，所以可以改寫成<code>assign out = in[4*sel +:4];</code>，從4*sel的地方往上取4位。
<div class="language-verilog highlight"><span class="filename">Verilog</span><pre><span></span><code><span id="__span-64-1"><a id="__codelineno-64-1" name="__codelineno-64-1"></a><a href="#__codelineno-64-1"><span class="linenos" data-linenos="1 "></span></a><span class="k">module</span><span class="w"> </span><span class="n">top_module</span><span class="p">(</span><span class="w"> </span>
</span><span id="__span-64-2"><a id="__codelineno-64-2" name="__codelineno-64-2"></a><a href="#__codelineno-64-2"><span class="linenos" data-linenos="2 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="p">[</span><span class="mh">1023</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">in</span><span class="p">,</span>
</span><span id="__span-64-3"><a id="__codelineno-64-3" name="__codelineno-64-3"></a><a href="#__codelineno-64-3"><span class="linenos" data-linenos="3 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="p">[</span><span class="mh">7</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">sel</span><span class="p">,</span>
</span><span id="__span-64-4"><a id="__codelineno-64-4" name="__codelineno-64-4"></a><a href="#__codelineno-64-4"><span class="linenos" data-linenos="4 "></span></a><span class="w">    </span><span class="k">output</span><span class="w"> </span><span class="p">[</span><span class="mh">3</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">out</span><span class="w"> </span><span class="p">);</span>
</span><span id="__span-64-5"><a id="__codelineno-64-5" name="__codelineno-64-5"></a><a href="#__codelineno-64-5"><span class="linenos" data-linenos="5 "></span></a><span class="w">    </span><span class="k">assign</span><span class="w"> </span><span class="n">out</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">in</span><span class="p">[</span><span class="mh">4</span><span class="o">*</span><span class="n">sel</span><span class="w"> </span><span class="o">+:</span><span class="mh">4</span><span class="p">];</span>
</span><span id="__span-64-6"><a id="__codelineno-64-6" name="__codelineno-64-6"></a><a href="#__codelineno-64-6"><span class="linenos" data-linenos="6 "></span></a><span class="k">endmodule</span>
</span></code></pre></div></p>
<hr />
<h4 id="arithmetic-circuits">Arithmetic Circuits<a class="headerlink" href="#arithmetic-circuits" title="Anchor link to this section for reference">⚓︎</a></h4>
<h5 id="half-adder">Half adder<a class="headerlink" href="#half-adder" title="Anchor link to this section for reference">⚓︎</a></h5>
<p>Website: <a href="https://hdlbits.01xz.net/wiki/Hadd" target="_blank">https://hdlbits.01xz.net/wiki/Hadd</a></p>
<p>這題就是寫一個半加器。
<div class="language-verilog highlight"><span class="filename">Verilog</span><pre><span></span><code><span id="__span-65-1"><a id="__codelineno-65-1" name="__codelineno-65-1"></a><a href="#__codelineno-65-1"><span class="linenos" data-linenos="1 "></span></a><span class="k">module</span><span class="w"> </span><span class="n">top_module</span><span class="p">(</span><span class="w"> </span>
</span><span id="__span-65-2"><a id="__codelineno-65-2" name="__codelineno-65-2"></a><a href="#__codelineno-65-2"><span class="linenos" data-linenos="2 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">a</span><span class="p">,</span><span class="w"> </span><span class="n">b</span><span class="p">,</span>
</span><span id="__span-65-3"><a id="__codelineno-65-3" name="__codelineno-65-3"></a><a href="#__codelineno-65-3"><span class="linenos" data-linenos="3 "></span></a><span class="w">    </span><span class="k">output</span><span class="w"> </span><span class="n">cout</span><span class="p">,</span><span class="w"> </span><span class="n">sum</span><span class="w"> </span><span class="p">);</span>
</span><span id="__span-65-4"><a id="__codelineno-65-4" name="__codelineno-65-4"></a><a href="#__codelineno-65-4"><span class="linenos" data-linenos="4 "></span></a><span class="w">    </span><span class="k">assign</span><span class="w"> </span><span class="n">cout</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="n">b</span><span class="p">;</span>
</span><span id="__span-65-5"><a id="__codelineno-65-5" name="__codelineno-65-5"></a><a href="#__codelineno-65-5"><span class="linenos" data-linenos="5 "></span></a><span class="w">    </span><span class="k">assign</span><span class="w"> </span><span class="n">sum</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="o">^</span><span class="w"> </span><span class="n">b</span><span class="p">;</span>
</span><span id="__span-65-6"><a id="__codelineno-65-6" name="__codelineno-65-6"></a><a href="#__codelineno-65-6"><span class="linenos" data-linenos="6 "></span></a><span class="k">endmodule</span>
</span></code></pre></div></p>
<hr />
<h5 id="full-adder">Full adder<a class="headerlink" href="#full-adder" title="Anchor link to this section for reference">⚓︎</a></h5>
<p>Website: <a href="https://hdlbits.01xz.net/wiki/Fadd" target="_blank">https://hdlbits.01xz.net/wiki/Fadd</a></p>
<p>這題就是寫一個全加器。
<div class="language-verilog highlight"><span class="filename">Verilog</span><pre><span></span><code><span id="__span-66-1"><a id="__codelineno-66-1" name="__codelineno-66-1"></a><a href="#__codelineno-66-1"><span class="linenos" data-linenos="1 "></span></a><span class="k">module</span><span class="w"> </span><span class="n">top_module</span><span class="p">(</span><span class="w"> </span>
</span><span id="__span-66-2"><a id="__codelineno-66-2" name="__codelineno-66-2"></a><a href="#__codelineno-66-2"><span class="linenos" data-linenos="2 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">a</span><span class="p">,</span><span class="w"> </span><span class="n">b</span><span class="p">,</span><span class="w"> </span><span class="n">cin</span><span class="p">,</span>
</span><span id="__span-66-3"><a id="__codelineno-66-3" name="__codelineno-66-3"></a><a href="#__codelineno-66-3"><span class="linenos" data-linenos="3 "></span></a><span class="w">    </span><span class="k">output</span><span class="w"> </span><span class="n">cout</span><span class="p">,</span><span class="w"> </span><span class="n">sum</span><span class="w"> </span><span class="p">);</span>
</span><span id="__span-66-4"><a id="__codelineno-66-4" name="__codelineno-66-4"></a><a href="#__codelineno-66-4"><span class="linenos" data-linenos="4 "></span></a><span class="w">    </span><span class="k">assign</span><span class="w"> </span><span class="p">{</span><span class="n">cout</span><span class="p">,</span><span class="n">sum</span><span class="p">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">cin</span><span class="p">;</span>
</span><span id="__span-66-5"><a id="__codelineno-66-5" name="__codelineno-66-5"></a><a href="#__codelineno-66-5"><span class="linenos" data-linenos="5 "></span></a><span class="k">endmodule</span>
</span></code></pre></div></p>
<hr />
<h5 id="3-bit-binary-adder">3-bit binary adder<a class="headerlink" href="#3-bit-binary-adder" title="Anchor link to this section for reference">⚓︎</a></h5>
<p>Website: <a href="https://hdlbits.01xz.net/wiki/Adder3" target="_blank">https://hdlbits.01xz.net/wiki/Adder3</a></p>
<p>這題就是將3個全加器串在一起。
<div class="language-verilog highlight"><span class="filename">Verilog</span><pre><span></span><code><span id="__span-67-1"><a id="__codelineno-67-1" name="__codelineno-67-1"></a><a href="#__codelineno-67-1"><span class="linenos" data-linenos=" 1 "></span></a><span class="k">module</span><span class="w"> </span><span class="n">top_module</span><span class="p">(</span><span class="w"> </span>
</span><span id="__span-67-2"><a id="__codelineno-67-2" name="__codelineno-67-2"></a><a href="#__codelineno-67-2"><span class="linenos" data-linenos=" 2 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="p">[</span><span class="mh">2</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">a</span><span class="p">,</span><span class="w"> </span><span class="n">b</span><span class="p">,</span>
</span><span id="__span-67-3"><a id="__codelineno-67-3" name="__codelineno-67-3"></a><a href="#__codelineno-67-3"><span class="linenos" data-linenos=" 3 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">cin</span><span class="p">,</span>
</span><span id="__span-67-4"><a id="__codelineno-67-4" name="__codelineno-67-4"></a><a href="#__codelineno-67-4"><span class="linenos" data-linenos=" 4 "></span></a><span class="w">    </span><span class="k">output</span><span class="w"> </span><span class="p">[</span><span class="mh">2</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">cout</span><span class="p">,</span>
</span><span id="__span-67-5"><a id="__codelineno-67-5" name="__codelineno-67-5"></a><a href="#__codelineno-67-5"><span class="linenos" data-linenos=" 5 "></span></a><span class="w">    </span><span class="k">output</span><span class="w"> </span><span class="p">[</span><span class="mh">2</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">sum</span><span class="w"> </span><span class="p">);</span>
</span><span id="__span-67-6"><a id="__codelineno-67-6" name="__codelineno-67-6"></a><a href="#__codelineno-67-6"><span class="linenos" data-linenos=" 6 "></span></a><span class="w">    </span><span class="n">FA</span><span class="w"> </span><span class="n">FA1</span><span class="p">(.</span><span class="n">a</span><span class="p">(</span><span class="n">a</span><span class="p">[</span><span class="mh">0</span><span class="p">]),.</span><span class="n">b</span><span class="p">(</span><span class="n">b</span><span class="p">[</span><span class="mh">0</span><span class="p">]),.</span><span class="n">cin</span><span class="p">(</span><span class="n">cin</span><span class="p">),.</span><span class="n">cout</span><span class="p">(</span><span class="n">cout</span><span class="p">[</span><span class="mh">0</span><span class="p">]),.</span><span class="n">sum</span><span class="p">(</span><span class="n">sum</span><span class="p">[</span><span class="mh">0</span><span class="p">]));</span>
</span><span id="__span-67-7"><a id="__codelineno-67-7" name="__codelineno-67-7"></a><a href="#__codelineno-67-7"><span class="linenos" data-linenos=" 7 "></span></a><span class="w">    </span><span class="n">FA</span><span class="w"> </span><span class="n">FA2</span><span class="p">(.</span><span class="n">a</span><span class="p">(</span><span class="n">a</span><span class="p">[</span><span class="mh">1</span><span class="p">]),.</span><span class="n">b</span><span class="p">(</span><span class="n">b</span><span class="p">[</span><span class="mh">1</span><span class="p">]),.</span><span class="n">cin</span><span class="p">(</span><span class="n">cout</span><span class="p">[</span><span class="mh">0</span><span class="p">]),.</span><span class="n">cout</span><span class="p">(</span><span class="n">cout</span><span class="p">[</span><span class="mh">1</span><span class="p">]),.</span><span class="n">sum</span><span class="p">(</span><span class="n">sum</span><span class="p">[</span><span class="mh">1</span><span class="p">]));</span>
</span><span id="__span-67-8"><a id="__codelineno-67-8" name="__codelineno-67-8"></a><a href="#__codelineno-67-8"><span class="linenos" data-linenos=" 8 "></span></a><span class="w">    </span><span class="n">FA</span><span class="w"> </span><span class="n">FA3</span><span class="p">(.</span><span class="n">a</span><span class="p">(</span><span class="n">a</span><span class="p">[</span><span class="mh">2</span><span class="p">]),.</span><span class="n">b</span><span class="p">(</span><span class="n">b</span><span class="p">[</span><span class="mh">2</span><span class="p">]),.</span><span class="n">cin</span><span class="p">(</span><span class="n">cout</span><span class="p">[</span><span class="mh">1</span><span class="p">]),.</span><span class="n">cout</span><span class="p">(</span><span class="n">cout</span><span class="p">[</span><span class="mh">2</span><span class="p">]),.</span><span class="n">sum</span><span class="p">(</span><span class="n">sum</span><span class="p">[</span><span class="mh">2</span><span class="p">]));</span>
</span><span id="__span-67-9"><a id="__codelineno-67-9" name="__codelineno-67-9"></a><a href="#__codelineno-67-9"><span class="linenos" data-linenos=" 9 "></span></a><span class="k">endmodule</span>
</span><span id="__span-67-10"><a id="__codelineno-67-10" name="__codelineno-67-10"></a><a href="#__codelineno-67-10"><span class="linenos" data-linenos="10 "></span></a>
</span><span id="__span-67-11"><a id="__codelineno-67-11" name="__codelineno-67-11"></a><a href="#__codelineno-67-11"><span class="linenos" data-linenos="11 "></span></a><span class="k">module</span><span class="w"> </span><span class="n">FA</span><span class="p">(</span><span class="w"> </span>
</span><span id="__span-67-12"><a id="__codelineno-67-12" name="__codelineno-67-12"></a><a href="#__codelineno-67-12"><span class="linenos" data-linenos="12 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">a</span><span class="p">,</span><span class="w"> </span><span class="n">b</span><span class="p">,</span><span class="w"> </span><span class="n">cin</span><span class="p">,</span>
</span><span id="__span-67-13"><a id="__codelineno-67-13" name="__codelineno-67-13"></a><a href="#__codelineno-67-13"><span class="linenos" data-linenos="13 "></span></a><span class="w">    </span><span class="k">output</span><span class="w"> </span><span class="n">cout</span><span class="p">,</span><span class="w"> </span><span class="n">sum</span><span class="w"> </span><span class="p">);</span>
</span><span id="__span-67-14"><a id="__codelineno-67-14" name="__codelineno-67-14"></a><a href="#__codelineno-67-14"><span class="linenos" data-linenos="14 "></span></a><span class="w">    </span><span class="k">assign</span><span class="w"> </span><span class="p">{</span><span class="n">cout</span><span class="p">,</span><span class="n">sum</span><span class="p">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">cin</span><span class="p">;</span>
</span><span id="__span-67-15"><a id="__codelineno-67-15" name="__codelineno-67-15"></a><a href="#__codelineno-67-15"><span class="linenos" data-linenos="15 "></span></a><span class="k">endmodule</span>
</span></code></pre></div></p>
<hr />
<h5 id="adder">Adder<a class="headerlink" href="#adder" title="Anchor link to this section for reference">⚓︎</a></h5>
<p>Website: <a href="https://hdlbits.01xz.net/wiki/Exams/m2014_q4j" target="_blank">https://hdlbits.01xz.net/wiki/Exams/m2014_q4j</a></p>
<p>這題就是將4個全加器串在一起，順便練習用generate block寫了for loop。
<div class="language-verilog highlight"><span class="filename">Verilog</span><pre><span></span><code><span id="__span-68-1"><a id="__codelineno-68-1" name="__codelineno-68-1"></a><a href="#__codelineno-68-1"><span class="linenos" data-linenos=" 1 "></span></a><span class="k">module</span><span class="w"> </span><span class="n">top_module</span><span class="w"> </span><span class="p">(</span>
</span><span id="__span-68-2"><a id="__codelineno-68-2" name="__codelineno-68-2"></a><a href="#__codelineno-68-2"><span class="linenos" data-linenos=" 2 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="p">[</span><span class="mh">3</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">x</span><span class="p">,</span>
</span><span id="__span-68-3"><a id="__codelineno-68-3" name="__codelineno-68-3"></a><a href="#__codelineno-68-3"><span class="linenos" data-linenos=" 3 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="p">[</span><span class="mh">3</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">y</span><span class="p">,</span><span class="w"> </span>
</span><span id="__span-68-4"><a id="__codelineno-68-4" name="__codelineno-68-4"></a><a href="#__codelineno-68-4"><span class="linenos" data-linenos=" 4 "></span></a><span class="w">    </span><span class="k">output</span><span class="w"> </span><span class="p">[</span><span class="mh">4</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">sum</span><span class="p">);</span>
</span><span id="__span-68-5"><a id="__codelineno-68-5" name="__codelineno-68-5"></a><a href="#__codelineno-68-5"><span class="linenos" data-linenos=" 5 "></span></a><span class="w">    </span><span class="kt">wire</span><span class="w"> </span><span class="p">[</span><span class="mh">4</span><span class="o">:</span><span class="mh">1</span><span class="p">]</span><span class="n">cout</span><span class="p">;</span>
</span><span id="__span-68-6"><a id="__codelineno-68-6" name="__codelineno-68-6"></a><a href="#__codelineno-68-6"><span class="linenos" data-linenos=" 6 "></span></a><span class="w">    </span><span class="k">assign</span><span class="w"> </span><span class="n">sum</span><span class="p">[</span><span class="mh">4</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">cout</span><span class="p">[</span><span class="mh">4</span><span class="p">];</span>
</span><span id="__span-68-7"><a id="__codelineno-68-7" name="__codelineno-68-7"></a><a href="#__codelineno-68-7"><span class="linenos" data-linenos=" 7 "></span></a><span class="w">    </span><span class="n">FA</span><span class="w"> </span><span class="n">FAA</span><span class="p">(.</span><span class="n">a</span><span class="p">(</span><span class="n">x</span><span class="p">[</span><span class="mh">0</span><span class="p">]),.</span><span class="n">b</span><span class="p">(</span><span class="n">y</span><span class="p">[</span><span class="mh">0</span><span class="p">]),.</span><span class="n">cin</span><span class="p">(</span><span class="mh">1</span><span class="mb">&#39;b0</span><span class="p">),.</span><span class="n">cout</span><span class="p">(</span><span class="n">cout</span><span class="p">[</span><span class="mh">1</span><span class="p">]),.</span><span class="n">sum</span><span class="p">(</span><span class="n">sum</span><span class="p">[</span><span class="mh">0</span><span class="p">]));</span>
</span><span id="__span-68-8"><a id="__codelineno-68-8" name="__codelineno-68-8"></a><a href="#__codelineno-68-8"><span class="linenos" data-linenos=" 8 "></span></a><span class="w">    </span><span class="k">genvar</span><span class="w"> </span><span class="n">i</span><span class="p">;</span>
</span><span id="__span-68-9"><a id="__codelineno-68-9" name="__codelineno-68-9"></a><a href="#__codelineno-68-9"><span class="linenos" data-linenos=" 9 "></span></a><span class="w">    </span><span class="k">generate</span>
</span><span id="__span-68-10"><a id="__codelineno-68-10" name="__codelineno-68-10"></a><a href="#__codelineno-68-10"><span class="linenos" data-linenos="10 "></span></a><span class="w">        </span><span class="k">for</span><span class="p">(</span><span class="n">i</span><span class="o">=</span><span class="mh">1</span><span class="p">;</span><span class="n">i</span><span class="o">&lt;</span><span class="mh">4</span><span class="p">;</span><span class="n">i</span><span class="o">++</span><span class="p">)</span><span class="k">begin</span><span class="o">:</span><span class="n">block</span>
</span><span id="__span-68-11"><a id="__codelineno-68-11" name="__codelineno-68-11"></a><a href="#__codelineno-68-11"><span class="linenos" data-linenos="11 "></span></a><span class="w">            </span><span class="n">FA</span><span class="w"> </span><span class="n">FAA</span><span class="p">(.</span><span class="n">a</span><span class="p">(</span><span class="n">x</span><span class="p">[</span><span class="n">i</span><span class="p">]),.</span><span class="n">b</span><span class="p">(</span><span class="n">y</span><span class="p">[</span><span class="n">i</span><span class="p">]),.</span><span class="n">cin</span><span class="p">(</span><span class="n">cout</span><span class="p">[</span><span class="n">i</span><span class="p">]),.</span><span class="n">cout</span><span class="p">(</span><span class="n">cout</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mh">1</span><span class="p">]),.</span><span class="n">sum</span><span class="p">(</span><span class="n">sum</span><span class="p">[</span><span class="n">i</span><span class="p">]));</span>
</span><span id="__span-68-12"><a id="__codelineno-68-12" name="__codelineno-68-12"></a><a href="#__codelineno-68-12"><span class="linenos" data-linenos="12 "></span></a><span class="w">        </span><span class="k">end</span>
</span><span id="__span-68-13"><a id="__codelineno-68-13" name="__codelineno-68-13"></a><a href="#__codelineno-68-13"><span class="linenos" data-linenos="13 "></span></a><span class="w">    </span><span class="k">endgenerate</span>
</span><span id="__span-68-14"><a id="__codelineno-68-14" name="__codelineno-68-14"></a><a href="#__codelineno-68-14"><span class="linenos" data-linenos="14 "></span></a><span class="k">endmodule</span>
</span><span id="__span-68-15"><a id="__codelineno-68-15" name="__codelineno-68-15"></a><a href="#__codelineno-68-15"><span class="linenos" data-linenos="15 "></span></a>
</span><span id="__span-68-16"><a id="__codelineno-68-16" name="__codelineno-68-16"></a><a href="#__codelineno-68-16"><span class="linenos" data-linenos="16 "></span></a><span class="k">module</span><span class="w"> </span><span class="n">FA</span><span class="p">(</span><span class="w"> </span>
</span><span id="__span-68-17"><a id="__codelineno-68-17" name="__codelineno-68-17"></a><a href="#__codelineno-68-17"><span class="linenos" data-linenos="17 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">a</span><span class="p">,</span><span class="w"> </span><span class="n">b</span><span class="p">,</span><span class="w"> </span><span class="n">cin</span><span class="p">,</span>
</span><span id="__span-68-18"><a id="__codelineno-68-18" name="__codelineno-68-18"></a><a href="#__codelineno-68-18"><span class="linenos" data-linenos="18 "></span></a><span class="w">    </span><span class="k">output</span><span class="w"> </span><span class="n">cout</span><span class="p">,</span><span class="w"> </span><span class="n">sum</span><span class="w"> </span><span class="p">);</span>
</span><span id="__span-68-19"><a id="__codelineno-68-19" name="__codelineno-68-19"></a><a href="#__codelineno-68-19"><span class="linenos" data-linenos="19 "></span></a><span class="w">    </span><span class="k">assign</span><span class="w"> </span><span class="p">{</span><span class="n">cout</span><span class="p">,</span><span class="n">sum</span><span class="p">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">cin</span><span class="p">;</span>
</span><span id="__span-68-20"><a id="__codelineno-68-20" name="__codelineno-68-20"></a><a href="#__codelineno-68-20"><span class="linenos" data-linenos="20 "></span></a><span class="k">endmodule</span>
</span></code></pre></div></p>
<hr />
<h5 id="signed-addition-overflow">Signed addition overflow<a class="headerlink" href="#signed-addition-overflow" title="Anchor link to this section for reference">⚓︎</a></h5>
<p>Website: <a href="https://hdlbits.01xz.net/wiki/Exams/ece241_2014_q1c" target="_blank">https://hdlbits.01xz.net/wiki/Exams/ece241_2014_q1c</a></p>
<p>這題單純練習overflow的判別，也就是兩正數相加或兩負數相減時，分別得到負數和正數，那就是發生overflow。
<div class="language-verilog highlight"><span class="filename">Verilog</span><pre><span></span><code><span id="__span-69-1"><a id="__codelineno-69-1" name="__codelineno-69-1"></a><a href="#__codelineno-69-1"><span class="linenos" data-linenos="1 "></span></a><span class="k">module</span><span class="w"> </span><span class="n">top_module</span><span class="w"> </span><span class="p">(</span>
</span><span id="__span-69-2"><a id="__codelineno-69-2" name="__codelineno-69-2"></a><a href="#__codelineno-69-2"><span class="linenos" data-linenos="2 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="p">[</span><span class="mh">7</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">a</span><span class="p">,</span>
</span><span id="__span-69-3"><a id="__codelineno-69-3" name="__codelineno-69-3"></a><a href="#__codelineno-69-3"><span class="linenos" data-linenos="3 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="p">[</span><span class="mh">7</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">b</span><span class="p">,</span>
</span><span id="__span-69-4"><a id="__codelineno-69-4" name="__codelineno-69-4"></a><a href="#__codelineno-69-4"><span class="linenos" data-linenos="4 "></span></a><span class="w">    </span><span class="k">output</span><span class="w"> </span><span class="p">[</span><span class="mh">7</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">s</span><span class="p">,</span>
</span><span id="__span-69-5"><a id="__codelineno-69-5" name="__codelineno-69-5"></a><a href="#__codelineno-69-5"><span class="linenos" data-linenos="5 "></span></a><span class="w">    </span><span class="k">output</span><span class="w"> </span><span class="n">overflow</span>
</span><span id="__span-69-6"><a id="__codelineno-69-6" name="__codelineno-69-6"></a><a href="#__codelineno-69-6"><span class="linenos" data-linenos="6 "></span></a><span class="p">);</span>
</span><span id="__span-69-7"><a id="__codelineno-69-7" name="__codelineno-69-7"></a><a href="#__codelineno-69-7"><span class="linenos" data-linenos="7 "></span></a><span class="w">    </span><span class="k">assign</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">b</span><span class="p">;</span>
</span><span id="__span-69-8"><a id="__codelineno-69-8" name="__codelineno-69-8"></a><a href="#__codelineno-69-8"><span class="linenos" data-linenos="8 "></span></a><span class="w">    </span><span class="k">assign</span><span class="w"> </span><span class="n">overflow</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">a</span><span class="p">[</span><span class="mh">7</span><span class="p">]</span><span class="o">&amp;</span><span class="n">b</span><span class="p">[</span><span class="mh">7</span><span class="p">]</span><span class="o">&amp;</span><span class="p">(</span><span class="o">~</span><span class="n">s</span><span class="p">[</span><span class="mh">7</span><span class="p">]))</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="p">((</span><span class="o">~</span><span class="n">a</span><span class="p">[</span><span class="mh">7</span><span class="p">])</span><span class="o">&amp;</span><span class="p">(</span><span class="o">~</span><span class="n">b</span><span class="p">[</span><span class="mh">7</span><span class="p">])</span><span class="o">&amp;</span><span class="n">s</span><span class="p">[</span><span class="mh">7</span><span class="p">]);</span>
</span><span id="__span-69-9"><a id="__codelineno-69-9" name="__codelineno-69-9"></a><a href="#__codelineno-69-9"><span class="linenos" data-linenos="9 "></span></a><span class="k">endmodule</span>
</span></code></pre></div></p>
<hr />
<h5 id="100-bit-binary-adder">100-bit binary adder<a class="headerlink" href="#100-bit-binary-adder" title="Anchor link to this section for reference">⚓︎</a></h5>
<p>Website: <a href="https://hdlbits.01xz.net/wiki/Adder100" target="_blank">https://hdlbits.01xz.net/wiki/Adder100</a></p>
<p>這題在練習如何用behavioural code描述電路。
<div class="language-verilog highlight"><span class="filename">Verilog</span><pre><span></span><code><span id="__span-70-1"><a id="__codelineno-70-1" name="__codelineno-70-1"></a><a href="#__codelineno-70-1"><span class="linenos" data-linenos="1 "></span></a><span class="k">module</span><span class="w"> </span><span class="n">top_module</span><span class="p">(</span><span class="w"> </span>
</span><span id="__span-70-2"><a id="__codelineno-70-2" name="__codelineno-70-2"></a><a href="#__codelineno-70-2"><span class="linenos" data-linenos="2 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="p">[</span><span class="mh">99</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">a</span><span class="p">,</span><span class="w"> </span><span class="n">b</span><span class="p">,</span>
</span><span id="__span-70-3"><a id="__codelineno-70-3" name="__codelineno-70-3"></a><a href="#__codelineno-70-3"><span class="linenos" data-linenos="3 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">cin</span><span class="p">,</span>
</span><span id="__span-70-4"><a id="__codelineno-70-4" name="__codelineno-70-4"></a><a href="#__codelineno-70-4"><span class="linenos" data-linenos="4 "></span></a><span class="w">    </span><span class="k">output</span><span class="w"> </span><span class="n">cout</span><span class="p">,</span>
</span><span id="__span-70-5"><a id="__codelineno-70-5" name="__codelineno-70-5"></a><a href="#__codelineno-70-5"><span class="linenos" data-linenos="5 "></span></a><span class="w">    </span><span class="k">output</span><span class="w"> </span><span class="p">[</span><span class="mh">99</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">sum</span><span class="w"> </span><span class="p">);</span>
</span><span id="__span-70-6"><a id="__codelineno-70-6" name="__codelineno-70-6"></a><a href="#__codelineno-70-6"><span class="linenos" data-linenos="6 "></span></a><span class="w">    </span><span class="k">assign</span><span class="w"> </span><span class="p">{</span><span class="n">cout</span><span class="p">,</span><span class="n">sum</span><span class="p">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">cin</span><span class="p">;</span>
</span><span id="__span-70-7"><a id="__codelineno-70-7" name="__codelineno-70-7"></a><a href="#__codelineno-70-7"><span class="linenos" data-linenos="7 "></span></a><span class="k">endmodule</span>
</span></code></pre></div></p>
<hr />
<h5 id="4-digit-bcd-adder">4-digit BCD adder<a class="headerlink" href="#4-digit-bcd-adder" title="Anchor link to this section for reference">⚓︎</a></h5>
<p>Website: <a href="https://hdlbits.01xz.net/wiki/Bcdadd4" target="_blank">https://hdlbits.01xz.net/wiki/Bcdadd4</a></p>
<p>這題在練習串接BCD adder。
<div class="language-verilog highlight"><span class="filename">Verilog</span><pre><span></span><code><span id="__span-71-1"><a id="__codelineno-71-1" name="__codelineno-71-1"></a><a href="#__codelineno-71-1"><span class="linenos" data-linenos=" 1 "></span></a><span class="k">module</span><span class="w"> </span><span class="n">top_module</span><span class="w"> </span><span class="p">(</span><span class="w"> </span>
</span><span id="__span-71-2"><a id="__codelineno-71-2" name="__codelineno-71-2"></a><a href="#__codelineno-71-2"><span class="linenos" data-linenos=" 2 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="p">[</span><span class="mh">15</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">a</span><span class="p">,</span><span class="w"> </span><span class="n">b</span><span class="p">,</span>
</span><span id="__span-71-3"><a id="__codelineno-71-3" name="__codelineno-71-3"></a><a href="#__codelineno-71-3"><span class="linenos" data-linenos=" 3 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">cin</span><span class="p">,</span>
</span><span id="__span-71-4"><a id="__codelineno-71-4" name="__codelineno-71-4"></a><a href="#__codelineno-71-4"><span class="linenos" data-linenos=" 4 "></span></a><span class="w">    </span><span class="k">output</span><span class="w"> </span><span class="n">cout</span><span class="p">,</span>
</span><span id="__span-71-5"><a id="__codelineno-71-5" name="__codelineno-71-5"></a><a href="#__codelineno-71-5"><span class="linenos" data-linenos=" 5 "></span></a><span class="w">    </span><span class="k">output</span><span class="w"> </span><span class="p">[</span><span class="mh">15</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">sum</span><span class="w"> </span><span class="p">);</span>
</span><span id="__span-71-6"><a id="__codelineno-71-6" name="__codelineno-71-6"></a><a href="#__codelineno-71-6"><span class="linenos" data-linenos=" 6 "></span></a><span class="w">    </span><span class="kt">wire</span><span class="w"> </span><span class="p">[</span><span class="mh">3</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">co</span><span class="p">;</span>
</span><span id="__span-71-7"><a id="__codelineno-71-7" name="__codelineno-71-7"></a><a href="#__codelineno-71-7"><span class="linenos" data-linenos=" 7 "></span></a><span class="w">    </span><span class="n">bcd_fadd</span><span class="w"> </span><span class="n">bf1</span><span class="p">(.</span><span class="n">a</span><span class="p">(</span><span class="n">a</span><span class="p">[</span><span class="mh">3</span><span class="o">:</span><span class="mh">0</span><span class="p">]),.</span><span class="n">b</span><span class="p">(</span><span class="n">b</span><span class="p">[</span><span class="mh">3</span><span class="o">:</span><span class="mh">0</span><span class="p">]),.</span><span class="n">cin</span><span class="p">(</span><span class="n">cin</span><span class="p">),.</span><span class="n">cout</span><span class="p">(</span><span class="n">co</span><span class="p">[</span><span class="mh">0</span><span class="p">]),.</span><span class="n">sum</span><span class="p">(</span><span class="n">sum</span><span class="p">[</span><span class="mh">3</span><span class="o">:</span><span class="mh">0</span><span class="p">]));</span>
</span><span id="__span-71-8"><a id="__codelineno-71-8" name="__codelineno-71-8"></a><a href="#__codelineno-71-8"><span class="linenos" data-linenos=" 8 "></span></a><span class="w">    </span><span class="n">bcd_fadd</span><span class="w"> </span><span class="n">bf2</span><span class="p">(.</span><span class="n">a</span><span class="p">(</span><span class="n">a</span><span class="p">[</span><span class="mh">7</span><span class="o">:</span><span class="mh">4</span><span class="p">]),.</span><span class="n">b</span><span class="p">(</span><span class="n">b</span><span class="p">[</span><span class="mh">7</span><span class="o">:</span><span class="mh">4</span><span class="p">]),.</span><span class="n">cin</span><span class="p">(</span><span class="n">co</span><span class="p">[</span><span class="mh">0</span><span class="p">]),.</span><span class="n">cout</span><span class="p">(</span><span class="n">co</span><span class="p">[</span><span class="mh">1</span><span class="p">]),.</span><span class="n">sum</span><span class="p">(</span><span class="n">sum</span><span class="p">[</span><span class="mh">7</span><span class="o">:</span><span class="mh">4</span><span class="p">]));</span>
</span><span id="__span-71-9"><a id="__codelineno-71-9" name="__codelineno-71-9"></a><a href="#__codelineno-71-9"><span class="linenos" data-linenos=" 9 "></span></a><span class="w">    </span><span class="n">bcd_fadd</span><span class="w"> </span><span class="n">bf3</span><span class="p">(.</span><span class="n">a</span><span class="p">(</span><span class="n">a</span><span class="p">[</span><span class="mh">11</span><span class="o">:</span><span class="mh">8</span><span class="p">]),.</span><span class="n">b</span><span class="p">(</span><span class="n">b</span><span class="p">[</span><span class="mh">11</span><span class="o">:</span><span class="mh">8</span><span class="p">]),.</span><span class="n">cin</span><span class="p">(</span><span class="n">co</span><span class="p">[</span><span class="mh">1</span><span class="p">]),.</span><span class="n">cout</span><span class="p">(</span><span class="n">co</span><span class="p">[</span><span class="mh">2</span><span class="p">]),.</span><span class="n">sum</span><span class="p">(</span><span class="n">sum</span><span class="p">[</span><span class="mh">11</span><span class="o">:</span><span class="mh">8</span><span class="p">]));</span>
</span><span id="__span-71-10"><a id="__codelineno-71-10" name="__codelineno-71-10"></a><a href="#__codelineno-71-10"><span class="linenos" data-linenos="10 "></span></a><span class="w">    </span><span class="n">bcd_fadd</span><span class="w"> </span><span class="n">bf4</span><span class="p">(.</span><span class="n">a</span><span class="p">(</span><span class="n">a</span><span class="p">[</span><span class="mh">15</span><span class="o">:</span><span class="mh">12</span><span class="p">]),.</span><span class="n">b</span><span class="p">(</span><span class="n">b</span><span class="p">[</span><span class="mh">15</span><span class="o">:</span><span class="mh">12</span><span class="p">]),.</span><span class="n">cin</span><span class="p">(</span><span class="n">co</span><span class="p">[</span><span class="mh">2</span><span class="p">]),.</span><span class="n">cout</span><span class="p">(</span><span class="n">co</span><span class="p">[</span><span class="mh">3</span><span class="p">]),.</span><span class="n">sum</span><span class="p">(</span><span class="n">sum</span><span class="p">[</span><span class="mh">15</span><span class="o">:</span><span class="mh">12</span><span class="p">]));</span>
</span><span id="__span-71-11"><a id="__codelineno-71-11" name="__codelineno-71-11"></a><a href="#__codelineno-71-11"><span class="linenos" data-linenos="11 "></span></a><span class="w">    </span><span class="k">assign</span><span class="w"> </span><span class="n">cout</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">co</span><span class="p">[</span><span class="mh">3</span><span class="p">];</span>
</span><span id="__span-71-12"><a id="__codelineno-71-12" name="__codelineno-71-12"></a><a href="#__codelineno-71-12"><span class="linenos" data-linenos="12 "></span></a><span class="k">endmodule</span>
</span></code></pre></div></p>
<hr />
<h4 id="karnaugh-map-to-circuit">Karnaugh Map to Circuit<a class="headerlink" href="#karnaugh-map-to-circuit" title="Anchor link to this section for reference">⚓︎</a></h4>
<h5 id="3-variable">3-variable<a class="headerlink" href="#3-variable" title="Anchor link to this section for reference">⚓︎</a></h5>
<p>Website: <a href="https://hdlbits.01xz.net/wiki/Kmap1" target="_blank">https://hdlbits.01xz.net/wiki/Kmap1</a></p>
<p>這題練習如何化簡k-map。
<div class="language-verilog highlight"><span class="filename">Verilog</span><pre><span></span><code><span id="__span-72-1"><a id="__codelineno-72-1" name="__codelineno-72-1"></a><a href="#__codelineno-72-1"><span class="linenos" data-linenos="1 "></span></a><span class="k">module</span><span class="w"> </span><span class="n">top_module</span><span class="p">(</span>
</span><span id="__span-72-2"><a id="__codelineno-72-2" name="__codelineno-72-2"></a><a href="#__codelineno-72-2"><span class="linenos" data-linenos="2 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">a</span><span class="p">,</span>
</span><span id="__span-72-3"><a id="__codelineno-72-3" name="__codelineno-72-3"></a><a href="#__codelineno-72-3"><span class="linenos" data-linenos="3 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">b</span><span class="p">,</span>
</span><span id="__span-72-4"><a id="__codelineno-72-4" name="__codelineno-72-4"></a><a href="#__codelineno-72-4"><span class="linenos" data-linenos="4 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">c</span><span class="p">,</span>
</span><span id="__span-72-5"><a id="__codelineno-72-5" name="__codelineno-72-5"></a><a href="#__codelineno-72-5"><span class="linenos" data-linenos="5 "></span></a><span class="w">    </span><span class="k">output</span><span class="w"> </span><span class="n">out</span><span class="w">  </span><span class="p">);</span><span class="w"> </span>
</span><span id="__span-72-6"><a id="__codelineno-72-6" name="__codelineno-72-6"></a><a href="#__codelineno-72-6"><span class="linenos" data-linenos="6 "></span></a><span class="w">    </span><span class="k">assign</span><span class="w"> </span><span class="n">out</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">c</span><span class="p">;</span>
</span><span id="__span-72-7"><a id="__codelineno-72-7" name="__codelineno-72-7"></a><a href="#__codelineno-72-7"><span class="linenos" data-linenos="7 "></span></a><span class="k">endmodule</span>
</span></code></pre></div></p>
<hr />
<h5 id="4-variable1">4-variable(1)<a class="headerlink" href="#4-variable1" title="Anchor link to this section for reference">⚓︎</a></h5>
<p>Website: <a href="https://hdlbits.01xz.net/wiki/Kmap2" target="_blank">https://hdlbits.01xz.net/wiki/Kmap2</a></p>
<p>這題練習如何化簡k-map，值得注意的是，k map畫圈要重疊，才不會發生hazard。
<div class="language-verilog highlight"><span class="filename">Verilog</span><pre><span></span><code><span id="__span-73-1"><a id="__codelineno-73-1" name="__codelineno-73-1"></a><a href="#__codelineno-73-1"><span class="linenos" data-linenos="1 "></span></a><span class="k">module</span><span class="w"> </span><span class="n">top_module</span><span class="p">(</span>
</span><span id="__span-73-2"><a id="__codelineno-73-2" name="__codelineno-73-2"></a><a href="#__codelineno-73-2"><span class="linenos" data-linenos="2 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">a</span><span class="p">,</span>
</span><span id="__span-73-3"><a id="__codelineno-73-3" name="__codelineno-73-3"></a><a href="#__codelineno-73-3"><span class="linenos" data-linenos="3 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">b</span><span class="p">,</span>
</span><span id="__span-73-4"><a id="__codelineno-73-4" name="__codelineno-73-4"></a><a href="#__codelineno-73-4"><span class="linenos" data-linenos="4 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">c</span><span class="p">,</span>
</span><span id="__span-73-5"><a id="__codelineno-73-5" name="__codelineno-73-5"></a><a href="#__codelineno-73-5"><span class="linenos" data-linenos="5 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">d</span><span class="p">,</span>
</span><span id="__span-73-6"><a id="__codelineno-73-6" name="__codelineno-73-6"></a><a href="#__codelineno-73-6"><span class="linenos" data-linenos="6 "></span></a><span class="w">    </span><span class="k">output</span><span class="w"> </span><span class="n">out</span><span class="w">  </span><span class="p">);</span><span class="w"> </span>
</span><span id="__span-73-7"><a id="__codelineno-73-7" name="__codelineno-73-7"></a><a href="#__codelineno-73-7"><span class="linenos" data-linenos="7 "></span></a><span class="w">    </span><span class="k">assign</span><span class="w"> </span><span class="n">out</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="o">~</span><span class="n">a</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="o">~</span><span class="n">d</span><span class="p">)</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="p">(</span><span class="o">~</span><span class="n">b</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="o">~</span><span class="n">c</span><span class="p">)</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="p">(</span><span class="n">a</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="o">~</span><span class="n">b</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="n">d</span><span class="p">)</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="p">(</span><span class="n">a</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="n">c</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="n">d</span><span class="p">)</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="p">(</span><span class="n">b</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="n">c</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="n">d</span><span class="p">);</span>
</span><span id="__span-73-8"><a id="__codelineno-73-8" name="__codelineno-73-8"></a><a href="#__codelineno-73-8"><span class="linenos" data-linenos="8 "></span></a><span class="k">endmodule</span>
</span></code></pre></div></p>
<hr />
<h5 id="4-variable2">4-variable(2)<a class="headerlink" href="#4-variable2" title="Anchor link to this section for reference">⚓︎</a></h5>
<p>Website: <a href="https://hdlbits.01xz.net/wiki/Kmap3" target="_blank">https://hdlbits.01xz.net/wiki/Kmap3</a></p>
<p>這題練習如何化簡k-map，don't care的部分可以既看成0或看成1化簡，就看方便化簡。
<div class="language-verilog highlight"><span class="filename">Verilog</span><pre><span></span><code><span id="__span-74-1"><a id="__codelineno-74-1" name="__codelineno-74-1"></a><a href="#__codelineno-74-1"><span class="linenos" data-linenos="1 "></span></a><span class="k">module</span><span class="w"> </span><span class="n">top_module</span><span class="p">(</span>
</span><span id="__span-74-2"><a id="__codelineno-74-2" name="__codelineno-74-2"></a><a href="#__codelineno-74-2"><span class="linenos" data-linenos="2 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">a</span><span class="p">,</span>
</span><span id="__span-74-3"><a id="__codelineno-74-3" name="__codelineno-74-3"></a><a href="#__codelineno-74-3"><span class="linenos" data-linenos="3 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">b</span><span class="p">,</span>
</span><span id="__span-74-4"><a id="__codelineno-74-4" name="__codelineno-74-4"></a><a href="#__codelineno-74-4"><span class="linenos" data-linenos="4 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">c</span><span class="p">,</span>
</span><span id="__span-74-5"><a id="__codelineno-74-5" name="__codelineno-74-5"></a><a href="#__codelineno-74-5"><span class="linenos" data-linenos="5 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">d</span><span class="p">,</span>
</span><span id="__span-74-6"><a id="__codelineno-74-6" name="__codelineno-74-6"></a><a href="#__codelineno-74-6"><span class="linenos" data-linenos="6 "></span></a><span class="w">    </span><span class="k">output</span><span class="w"> </span><span class="n">out</span><span class="w">  </span><span class="p">);</span><span class="w"> </span>
</span><span id="__span-74-7"><a id="__codelineno-74-7" name="__codelineno-74-7"></a><a href="#__codelineno-74-7"><span class="linenos" data-linenos="7 "></span></a><span class="w">    </span><span class="k">assign</span><span class="w"> </span><span class="n">out</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="p">(</span><span class="o">~</span><span class="n">b</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="n">c</span><span class="p">);</span>
</span><span id="__span-74-8"><a id="__codelineno-74-8" name="__codelineno-74-8"></a><a href="#__codelineno-74-8"><span class="linenos" data-linenos="8 "></span></a><span class="k">endmodule</span>
</span></code></pre></div></p>
<hr />
<h5 id="4-variable3">4-variable(3)<a class="headerlink" href="#4-variable3" title="Anchor link to this section for reference">⚓︎</a></h5>
<p>Website: <a href="https://hdlbits.01xz.net/wiki/Kmap4" target="_blank">https://hdlbits.01xz.net/wiki/Kmap4</a></p>
<p>這題練習如何化簡k-map，有點腦筋急轉彎，這題反而不能想用sum of product或product of sum。
<div class="language-verilog highlight"><span class="filename">Verilog</span><pre><span></span><code><span id="__span-75-1"><a id="__codelineno-75-1" name="__codelineno-75-1"></a><a href="#__codelineno-75-1"><span class="linenos" data-linenos="1 "></span></a><span class="k">module</span><span class="w"> </span><span class="n">top_module</span><span class="p">(</span>
</span><span id="__span-75-2"><a id="__codelineno-75-2" name="__codelineno-75-2"></a><a href="#__codelineno-75-2"><span class="linenos" data-linenos="2 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">a</span><span class="p">,</span>
</span><span id="__span-75-3"><a id="__codelineno-75-3" name="__codelineno-75-3"></a><a href="#__codelineno-75-3"><span class="linenos" data-linenos="3 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">b</span><span class="p">,</span>
</span><span id="__span-75-4"><a id="__codelineno-75-4" name="__codelineno-75-4"></a><a href="#__codelineno-75-4"><span class="linenos" data-linenos="4 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">c</span><span class="p">,</span>
</span><span id="__span-75-5"><a id="__codelineno-75-5" name="__codelineno-75-5"></a><a href="#__codelineno-75-5"><span class="linenos" data-linenos="5 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">d</span><span class="p">,</span>
</span><span id="__span-75-6"><a id="__codelineno-75-6" name="__codelineno-75-6"></a><a href="#__codelineno-75-6"><span class="linenos" data-linenos="6 "></span></a><span class="w">    </span><span class="k">output</span><span class="w"> </span><span class="n">out</span><span class="w">  </span><span class="p">);</span><span class="w"> </span>
</span><span id="__span-75-7"><a id="__codelineno-75-7" name="__codelineno-75-7"></a><a href="#__codelineno-75-7"><span class="linenos" data-linenos="7 "></span></a><span class="w">    </span><span class="k">assign</span><span class="w"> </span><span class="n">out</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="o">^</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="o">^</span><span class="w"> </span><span class="n">c</span><span class="w"> </span><span class="o">^</span><span class="w"> </span><span class="n">d</span><span class="p">;</span>
</span><span id="__span-75-8"><a id="__codelineno-75-8" name="__codelineno-75-8"></a><a href="#__codelineno-75-8"><span class="linenos" data-linenos="8 "></span></a><span class="k">endmodule</span>
</span></code></pre></div></p>
<hr />
<h5 id="minimum-sop-and-pos">Minimum SOP and POS<a class="headerlink" href="#minimum-sop-and-pos" title="Anchor link to this section for reference">⚓︎</a></h5>
<p>Website: <a href="https://hdlbits.01xz.net/wiki/Exams/ece241_2013_q2" target="_blank">https://hdlbits.01xz.net/wiki/Exams/ece241_2013_q2</a></p>
<p>這題練習如何畫k map並化簡。
<div class="language-verilog highlight"><span class="filename">Verilog</span><pre><span></span><code><span id="__span-76-1"><a id="__codelineno-76-1" name="__codelineno-76-1"></a><a href="#__codelineno-76-1"><span class="linenos" data-linenos=" 1 "></span></a><span class="k">module</span><span class="w"> </span><span class="n">top_module</span><span class="w"> </span><span class="p">(</span>
</span><span id="__span-76-2"><a id="__codelineno-76-2" name="__codelineno-76-2"></a><a href="#__codelineno-76-2"><span class="linenos" data-linenos=" 2 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">a</span><span class="p">,</span>
</span><span id="__span-76-3"><a id="__codelineno-76-3" name="__codelineno-76-3"></a><a href="#__codelineno-76-3"><span class="linenos" data-linenos=" 3 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">b</span><span class="p">,</span>
</span><span id="__span-76-4"><a id="__codelineno-76-4" name="__codelineno-76-4"></a><a href="#__codelineno-76-4"><span class="linenos" data-linenos=" 4 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">c</span><span class="p">,</span>
</span><span id="__span-76-5"><a id="__codelineno-76-5" name="__codelineno-76-5"></a><a href="#__codelineno-76-5"><span class="linenos" data-linenos=" 5 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">d</span><span class="p">,</span>
</span><span id="__span-76-6"><a id="__codelineno-76-6" name="__codelineno-76-6"></a><a href="#__codelineno-76-6"><span class="linenos" data-linenos=" 6 "></span></a><span class="w">    </span><span class="k">output</span><span class="w"> </span><span class="n">out_sop</span><span class="p">,</span>
</span><span id="__span-76-7"><a id="__codelineno-76-7" name="__codelineno-76-7"></a><a href="#__codelineno-76-7"><span class="linenos" data-linenos=" 7 "></span></a><span class="w">    </span><span class="k">output</span><span class="w"> </span><span class="n">out_pos</span>
</span><span id="__span-76-8"><a id="__codelineno-76-8" name="__codelineno-76-8"></a><a href="#__codelineno-76-8"><span class="linenos" data-linenos=" 8 "></span></a><span class="p">);</span>
</span><span id="__span-76-9"><a id="__codelineno-76-9" name="__codelineno-76-9"></a><a href="#__codelineno-76-9"><span class="linenos" data-linenos=" 9 "></span></a><span class="c1">//K map</span>
</span><span id="__span-76-10"><a id="__codelineno-76-10" name="__codelineno-76-10"></a><a href="#__codelineno-76-10"><span class="linenos" data-linenos="10 "></span></a><span class="c1">//cd\ab 00 01 11 10</span>
</span><span id="__span-76-11"><a id="__codelineno-76-11" name="__codelineno-76-11"></a><a href="#__codelineno-76-11"><span class="linenos" data-linenos="11 "></span></a><span class="c1">//   00  0  0  d  d  </span>
</span><span id="__span-76-12"><a id="__codelineno-76-12" name="__codelineno-76-12"></a><a href="#__codelineno-76-12"><span class="linenos" data-linenos="12 "></span></a><span class="c1">//   01  0  0  0  0</span>
</span><span id="__span-76-13"><a id="__codelineno-76-13" name="__codelineno-76-13"></a><a href="#__codelineno-76-13"><span class="linenos" data-linenos="13 "></span></a><span class="c1">//   11  d  1  1  d</span>
</span><span id="__span-76-14"><a id="__codelineno-76-14" name="__codelineno-76-14"></a><a href="#__codelineno-76-14"><span class="linenos" data-linenos="14 "></span></a><span class="c1">//   10  1  0  0  0</span>
</span><span id="__span-76-15"><a id="__codelineno-76-15" name="__codelineno-76-15"></a><a href="#__codelineno-76-15"><span class="linenos" data-linenos="15 "></span></a><span class="w">    </span><span class="k">assign</span><span class="w"> </span><span class="n">out_sop</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">c</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="n">d</span><span class="p">)</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="p">(</span><span class="o">~</span><span class="n">a</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="o">~</span><span class="n">b</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="n">c</span><span class="p">);</span>
</span><span id="__span-76-16"><a id="__codelineno-76-16" name="__codelineno-76-16"></a><a href="#__codelineno-76-16"><span class="linenos" data-linenos="16 "></span></a><span class="w">    </span><span class="k">assign</span><span class="w"> </span><span class="n">out_pos</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">c</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="p">(</span><span class="o">~</span><span class="n">a</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">b</span><span class="p">)</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="p">(</span><span class="o">~</span><span class="n">b</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">d</span><span class="p">);</span>
</span><span id="__span-76-17"><a id="__codelineno-76-17" name="__codelineno-76-17"></a><a href="#__codelineno-76-17"><span class="linenos" data-linenos="17 "></span></a><span class="k">endmodule</span>
</span></code></pre></div></p>
<hr />
<h5 id="karnaugh-map1">Karnaugh map(1)<a class="headerlink" href="#karnaugh-map1" title="Anchor link to this section for reference">⚓︎</a></h5>
<p>Website: <a href="https://hdlbits.01xz.net/wiki/Exams/m2014_q3" target="_blank">https://hdlbits.01xz.net/wiki/Exams/m2014_q3</a></p>
<p>這題練習如何畫k map並化簡。
<div class="language-verilog highlight"><span class="filename">Verilog</span><pre><span></span><code><span id="__span-77-1"><a id="__codelineno-77-1" name="__codelineno-77-1"></a><a href="#__codelineno-77-1"><span class="linenos" data-linenos="1 "></span></a><span class="k">module</span><span class="w"> </span><span class="n">top_module</span><span class="w"> </span><span class="p">(</span>
</span><span id="__span-77-2"><a id="__codelineno-77-2" name="__codelineno-77-2"></a><a href="#__codelineno-77-2"><span class="linenos" data-linenos="2 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="p">[</span><span class="mh">4</span><span class="o">:</span><span class="mh">1</span><span class="p">]</span><span class="w"> </span><span class="n">x</span><span class="p">,</span><span class="w"> </span>
</span><span id="__span-77-3"><a id="__codelineno-77-3" name="__codelineno-77-3"></a><a href="#__codelineno-77-3"><span class="linenos" data-linenos="3 "></span></a><span class="w">    </span><span class="k">output</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="p">);</span>
</span><span id="__span-77-4"><a id="__codelineno-77-4" name="__codelineno-77-4"></a><a href="#__codelineno-77-4"><span class="linenos" data-linenos="4 "></span></a><span class="w">    </span><span class="k">assign</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="o">~</span><span class="n">x</span><span class="p">[</span><span class="mh">1</span><span class="p">]</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="n">x</span><span class="p">[</span><span class="mh">3</span><span class="p">])</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="p">(</span><span class="n">x</span><span class="p">[</span><span class="mh">2</span><span class="p">]</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="n">x</span><span class="p">[</span><span class="mh">4</span><span class="p">]);</span>
</span><span id="__span-77-5"><a id="__codelineno-77-5" name="__codelineno-77-5"></a><a href="#__codelineno-77-5"><span class="linenos" data-linenos="5 "></span></a><span class="k">endmodule</span>
</span></code></pre></div></p>
<hr />
<h5 id="karnaugh-map2">Karnaugh map(2)<a class="headerlink" href="#karnaugh-map2" title="Anchor link to this section for reference">⚓︎</a></h5>
<p>Website: <a href="https://hdlbits.01xz.net/wiki/Exams/2012_q1g" target="_blank">https://hdlbits.01xz.net/wiki/Exams/2012_q1g</a></p>
<p>這題練習如何畫k map並化簡。
<div class="language-verilog highlight"><span class="filename">Verilog</span><pre><span></span><code><span id="__span-78-1"><a id="__codelineno-78-1" name="__codelineno-78-1"></a><a href="#__codelineno-78-1"><span class="linenos" data-linenos="1 "></span></a><span class="k">module</span><span class="w"> </span><span class="n">top_module</span><span class="w"> </span><span class="p">(</span>
</span><span id="__span-78-2"><a id="__codelineno-78-2" name="__codelineno-78-2"></a><a href="#__codelineno-78-2"><span class="linenos" data-linenos="2 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="p">[</span><span class="mh">4</span><span class="o">:</span><span class="mh">1</span><span class="p">]</span><span class="w"> </span><span class="n">x</span><span class="p">,</span>
</span><span id="__span-78-3"><a id="__codelineno-78-3" name="__codelineno-78-3"></a><a href="#__codelineno-78-3"><span class="linenos" data-linenos="3 "></span></a><span class="w">    </span><span class="k">output</span><span class="w"> </span><span class="n">f</span>
</span><span id="__span-78-4"><a id="__codelineno-78-4" name="__codelineno-78-4"></a><a href="#__codelineno-78-4"><span class="linenos" data-linenos="4 "></span></a><span class="p">);</span><span class="w"> </span>
</span><span id="__span-78-5"><a id="__codelineno-78-5" name="__codelineno-78-5"></a><a href="#__codelineno-78-5"><span class="linenos" data-linenos="5 "></span></a><span class="w">    </span><span class="k">assign</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="o">~</span><span class="n">x</span><span class="p">[</span><span class="mh">2</span><span class="p">]</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="o">~</span><span class="n">x</span><span class="p">[</span><span class="mh">4</span><span class="p">])</span><span class="o">|</span><span class="p">(</span><span class="o">~</span><span class="n">x</span><span class="p">[</span><span class="mh">1</span><span class="p">]</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="n">x</span><span class="p">[</span><span class="mh">3</span><span class="p">])</span><span class="o">|</span><span class="p">(</span><span class="n">x</span><span class="p">[</span><span class="mh">2</span><span class="p">]</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="n">x</span><span class="p">[</span><span class="mh">3</span><span class="p">]</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="n">x</span><span class="p">[</span><span class="mh">4</span><span class="p">]);</span>
</span><span id="__span-78-6"><a id="__codelineno-78-6" name="__codelineno-78-6"></a><a href="#__codelineno-78-6"><span class="linenos" data-linenos="6 "></span></a><span class="k">endmodule</span>
</span></code></pre></div></p>
<hr />
<h5 id="k-map-implemented-with-a-multiplexer">K-map implemented with a multiplexer<a class="headerlink" href="#k-map-implemented-with-a-multiplexer" title="Anchor link to this section for reference">⚓︎</a></h5>
<p>Website: <a href="https://hdlbits.01xz.net/wiki/Exams/ece241_2014_q3" target="_blank">https://hdlbits.01xz.net/wiki/Exams/ece241_2014_q3</a></p>
<p>這題練習如何畫k map並化簡，比較有意思的是，這題用到了multiplexer畫k-map。
<div class="language-verilog highlight"><span class="filename">Verilog</span><pre><span></span><code><span id="__span-79-1"><a id="__codelineno-79-1" name="__codelineno-79-1"></a><a href="#__codelineno-79-1"><span class="linenos" data-linenos=" 1 "></span></a><span class="k">module</span><span class="w"> </span><span class="n">top_module</span><span class="w"> </span><span class="p">(</span>
</span><span id="__span-79-2"><a id="__codelineno-79-2" name="__codelineno-79-2"></a><a href="#__codelineno-79-2"><span class="linenos" data-linenos=" 2 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">c</span><span class="p">,</span>
</span><span id="__span-79-3"><a id="__codelineno-79-3" name="__codelineno-79-3"></a><a href="#__codelineno-79-3"><span class="linenos" data-linenos=" 3 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">d</span><span class="p">,</span>
</span><span id="__span-79-4"><a id="__codelineno-79-4" name="__codelineno-79-4"></a><a href="#__codelineno-79-4"><span class="linenos" data-linenos=" 4 "></span></a><span class="w">    </span><span class="k">output</span><span class="w"> </span><span class="p">[</span><span class="mh">3</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">mux_in</span>
</span><span id="__span-79-5"><a id="__codelineno-79-5" name="__codelineno-79-5"></a><a href="#__codelineno-79-5"><span class="linenos" data-linenos=" 5 "></span></a><span class="p">);</span><span class="w"> </span>
</span><span id="__span-79-6"><a id="__codelineno-79-6" name="__codelineno-79-6"></a><a href="#__codelineno-79-6"><span class="linenos" data-linenos=" 6 "></span></a><span class="w">    </span><span class="k">assign</span><span class="w"> </span><span class="n">mux_in</span><span class="p">[</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">c</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">d</span><span class="p">;</span>
</span><span id="__span-79-7"><a id="__codelineno-79-7" name="__codelineno-79-7"></a><a href="#__codelineno-79-7"><span class="linenos" data-linenos=" 7 "></span></a><span class="w">    </span><span class="k">assign</span><span class="w"> </span><span class="n">mux_in</span><span class="p">[</span><span class="mh">1</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w">  </span><span class="mh">1</span><span class="mb">&#39;b0</span><span class="p">;</span>
</span><span id="__span-79-8"><a id="__codelineno-79-8" name="__codelineno-79-8"></a><a href="#__codelineno-79-8"><span class="linenos" data-linenos=" 8 "></span></a><span class="w">    </span><span class="k">assign</span><span class="w"> </span><span class="n">mux_in</span><span class="p">[</span><span class="mh">2</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w">    </span><span class="o">~</span><span class="n">d</span><span class="p">;</span>
</span><span id="__span-79-9"><a id="__codelineno-79-9" name="__codelineno-79-9"></a><a href="#__codelineno-79-9"><span class="linenos" data-linenos=" 9 "></span></a><span class="w">    </span><span class="k">assign</span><span class="w"> </span><span class="n">mux_in</span><span class="p">[</span><span class="mh">3</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">c</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="n">d</span><span class="p">;</span>
</span><span id="__span-79-10"><a id="__codelineno-79-10" name="__codelineno-79-10"></a><a href="#__codelineno-79-10"><span class="linenos" data-linenos="10 "></span></a><span class="k">endmodule</span>
</span></code></pre></div></p>
<hr />
<h3 id="sequential-logic">Sequential Logic<a class="headerlink" href="#sequential-logic" title="Anchor link to this section for reference">⚓︎</a></h3>
<h4 id="latches-and-flip-flops">Latches and Flip-Flops<a class="headerlink" href="#latches-and-flip-flops" title="Anchor link to this section for reference">⚓︎</a></h4>
<h5 id="d-flip-flop">D flip-flop<a class="headerlink" href="#d-flip-flop" title="Anchor link to this section for reference">⚓︎</a></h5>
<p>Website: <a href="https://hdlbits.01xz.net/wiki/Dff" target="_blank">https://hdlbits.01xz.net/wiki/Dff</a></p>
<p>這題單純練習如何用sequential block建立DFF，注意要用non-blocking assignment。
<div class="language-verilog highlight"><span class="filename">Verilog</span><pre><span></span><code><span id="__span-80-1"><a id="__codelineno-80-1" name="__codelineno-80-1"></a><a href="#__codelineno-80-1"><span class="linenos" data-linenos=" 1 "></span></a><span class="k">module</span><span class="w"> </span><span class="n">top_module</span><span class="w"> </span><span class="p">(</span>
</span><span id="__span-80-2"><a id="__codelineno-80-2" name="__codelineno-80-2"></a><a href="#__codelineno-80-2"><span class="linenos" data-linenos=" 2 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">clk</span><span class="p">,</span><span class="w">    </span><span class="c1">// Clocks are used in sequential circuits</span>
</span><span id="__span-80-3"><a id="__codelineno-80-3" name="__codelineno-80-3"></a><a href="#__codelineno-80-3"><span class="linenos" data-linenos=" 3 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">d</span><span class="p">,</span>
</span><span id="__span-80-4"><a id="__codelineno-80-4" name="__codelineno-80-4"></a><a href="#__codelineno-80-4"><span class="linenos" data-linenos=" 4 "></span></a><span class="w">    </span><span class="k">output</span><span class="w"> </span><span class="kt">reg</span><span class="w"> </span><span class="n">q</span><span class="w"> </span><span class="p">);</span><span class="c1">//</span>
</span><span id="__span-80-5"><a id="__codelineno-80-5" name="__codelineno-80-5"></a><a href="#__codelineno-80-5"><span class="linenos" data-linenos=" 5 "></span></a>
</span><span id="__span-80-6"><a id="__codelineno-80-6" name="__codelineno-80-6"></a><a href="#__codelineno-80-6"><span class="linenos" data-linenos=" 6 "></span></a><span class="w">    </span><span class="c1">// Use a clocked always block</span>
</span><span id="__span-80-7"><a id="__codelineno-80-7" name="__codelineno-80-7"></a><a href="#__codelineno-80-7"><span class="linenos" data-linenos=" 7 "></span></a><span class="w">    </span><span class="c1">//   copy d to q at every positive edge of clk</span>
</span><span id="__span-80-8"><a id="__codelineno-80-8" name="__codelineno-80-8"></a><a href="#__codelineno-80-8"><span class="linenos" data-linenos=" 8 "></span></a><span class="w">    </span><span class="c1">//   Clocked always blocks should use non-blocking assignments</span>
</span><span id="__span-80-9"><a id="__codelineno-80-9" name="__codelineno-80-9"></a><a href="#__codelineno-80-9"><span class="linenos" data-linenos=" 9 "></span></a><span class="w">    </span><span class="k">always</span><span class="p">@(</span><span class="k">posedge</span><span class="w"> </span><span class="n">clk</span><span class="p">)</span>
</span><span id="__span-80-10"><a id="__codelineno-80-10" name="__codelineno-80-10"></a><a href="#__codelineno-80-10"><span class="linenos" data-linenos="10 "></span></a><span class="w">        </span><span class="n">q</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">d</span><span class="p">;</span>
</span><span id="__span-80-11"><a id="__codelineno-80-11" name="__codelineno-80-11"></a><a href="#__codelineno-80-11"><span class="linenos" data-linenos="11 "></span></a><span class="k">endmodule</span>
</span></code></pre></div></p>
<hr />
<h5 id="d-flip-flops">D flip-flops<a class="headerlink" href="#d-flip-flops" title="Anchor link to this section for reference">⚓︎</a></h5>
<p>Website: <a href="https://hdlbits.01xz.net/wiki/Dff8" target="_blank">https://hdlbits.01xz.net/wiki/Dff8</a></p>
<p>這題單純練習如何用sequential block建立8-bit input DFF。
<div class="language-verilog highlight"><span class="filename">Verilog</span><pre><span></span><code><span id="__span-81-1"><a id="__codelineno-81-1" name="__codelineno-81-1"></a><a href="#__codelineno-81-1"><span class="linenos" data-linenos="1 "></span></a><span class="k">module</span><span class="w"> </span><span class="n">top_module</span><span class="w"> </span><span class="p">(</span>
</span><span id="__span-81-2"><a id="__codelineno-81-2" name="__codelineno-81-2"></a><a href="#__codelineno-81-2"><span class="linenos" data-linenos="2 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">clk</span><span class="p">,</span>
</span><span id="__span-81-3"><a id="__codelineno-81-3" name="__codelineno-81-3"></a><a href="#__codelineno-81-3"><span class="linenos" data-linenos="3 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="p">[</span><span class="mh">7</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">d</span><span class="p">,</span>
</span><span id="__span-81-4"><a id="__codelineno-81-4" name="__codelineno-81-4"></a><a href="#__codelineno-81-4"><span class="linenos" data-linenos="4 "></span></a><span class="w">    </span><span class="k">output</span><span class="w"> </span><span class="kt">reg</span><span class="w"> </span><span class="p">[</span><span class="mh">7</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">q</span>
</span><span id="__span-81-5"><a id="__codelineno-81-5" name="__codelineno-81-5"></a><a href="#__codelineno-81-5"><span class="linenos" data-linenos="5 "></span></a><span class="p">);</span>
</span><span id="__span-81-6"><a id="__codelineno-81-6" name="__codelineno-81-6"></a><a href="#__codelineno-81-6"><span class="linenos" data-linenos="6 "></span></a><span class="w">    </span><span class="k">always</span><span class="p">@(</span><span class="k">posedge</span><span class="w"> </span><span class="n">clk</span><span class="p">)</span>
</span><span id="__span-81-7"><a id="__codelineno-81-7" name="__codelineno-81-7"></a><a href="#__codelineno-81-7"><span class="linenos" data-linenos="7 "></span></a><span class="w">        </span><span class="n">q</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">d</span><span class="p">;</span>
</span><span id="__span-81-8"><a id="__codelineno-81-8" name="__codelineno-81-8"></a><a href="#__codelineno-81-8"><span class="linenos" data-linenos="8 "></span></a><span class="k">endmodule</span>
</span></code></pre></div></p>
<hr />
<h5 id="dff-with-reset">DFF with reset<a class="headerlink" href="#dff-with-reset" title="Anchor link to this section for reference">⚓︎</a></h5>
<p>Website: <a href="https://hdlbits.01xz.net/wiki/Dff8r" target="_blank">https://hdlbits.01xz.net/wiki/Dff8r</a></p>
<p>這題單純練習如何用sequential block建立8-bit input with DFF synchronous reset。
<div class="language-verilog highlight"><span class="filename">Verilog</span><pre><span></span><code><span id="__span-82-1"><a id="__codelineno-82-1" name="__codelineno-82-1"></a><a href="#__codelineno-82-1"><span class="linenos" data-linenos=" 1 "></span></a><span class="k">module</span><span class="w"> </span><span class="n">top_module</span><span class="w"> </span><span class="p">(</span>
</span><span id="__span-82-2"><a id="__codelineno-82-2" name="__codelineno-82-2"></a><a href="#__codelineno-82-2"><span class="linenos" data-linenos=" 2 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">clk</span><span class="p">,</span>
</span><span id="__span-82-3"><a id="__codelineno-82-3" name="__codelineno-82-3"></a><a href="#__codelineno-82-3"><span class="linenos" data-linenos=" 3 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">reset</span><span class="p">,</span><span class="w">            </span><span class="c1">// Synchronous reset</span>
</span><span id="__span-82-4"><a id="__codelineno-82-4" name="__codelineno-82-4"></a><a href="#__codelineno-82-4"><span class="linenos" data-linenos=" 4 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="p">[</span><span class="mh">7</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">d</span><span class="p">,</span>
</span><span id="__span-82-5"><a id="__codelineno-82-5" name="__codelineno-82-5"></a><a href="#__codelineno-82-5"><span class="linenos" data-linenos=" 5 "></span></a><span class="w">    </span><span class="k">output</span><span class="w"> </span><span class="kt">reg</span><span class="w"> </span><span class="p">[</span><span class="mh">7</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">q</span>
</span><span id="__span-82-6"><a id="__codelineno-82-6" name="__codelineno-82-6"></a><a href="#__codelineno-82-6"><span class="linenos" data-linenos=" 6 "></span></a><span class="p">);</span>
</span><span id="__span-82-7"><a id="__codelineno-82-7" name="__codelineno-82-7"></a><a href="#__codelineno-82-7"><span class="linenos" data-linenos=" 7 "></span></a><span class="w">    </span><span class="k">always</span><span class="p">@(</span><span class="k">posedge</span><span class="w"> </span><span class="n">clk</span><span class="p">)</span><span class="k">begin</span>
</span><span id="__span-82-8"><a id="__codelineno-82-8" name="__codelineno-82-8"></a><a href="#__codelineno-82-8"><span class="linenos" data-linenos=" 8 "></span></a><span class="w">        </span><span class="k">if</span><span class="p">(</span><span class="n">reset</span><span class="p">)</span><span class="w"> </span><span class="n">q</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="mh">8</span><span class="mb">&#39;b0000</span><span class="n">_0000</span><span class="p">;</span>
</span><span id="__span-82-9"><a id="__codelineno-82-9" name="__codelineno-82-9"></a><a href="#__codelineno-82-9"><span class="linenos" data-linenos=" 9 "></span></a><span class="w">        </span><span class="k">else</span><span class="w"> </span><span class="n">q</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">d</span><span class="p">;</span>
</span><span id="__span-82-10"><a id="__codelineno-82-10" name="__codelineno-82-10"></a><a href="#__codelineno-82-10"><span class="linenos" data-linenos="10 "></span></a><span class="w">    </span><span class="k">end</span>
</span><span id="__span-82-11"><a id="__codelineno-82-11" name="__codelineno-82-11"></a><a href="#__codelineno-82-11"><span class="linenos" data-linenos="11 "></span></a><span class="k">endmodule</span>
</span></code></pre></div></p>
<hr />
<h5 id="dff-with-reset-value">DFF with reset value<a class="headerlink" href="#dff-with-reset-value" title="Anchor link to this section for reference">⚓︎</a></h5>
<p>Website: <a href="https://hdlbits.01xz.net/wiki/Dff8p" target="_blank">https://hdlbits.01xz.net/wiki/Dff8p</a></p>
<p>這題練習負緣更新，然後題目所說在reset時要更新成0x34，0x的意思是16進位制。
<div class="language-verilog highlight"><span class="filename">Verilog</span><pre><span></span><code><span id="__span-83-1"><a id="__codelineno-83-1" name="__codelineno-83-1"></a><a href="#__codelineno-83-1"><span class="linenos" data-linenos=" 1 "></span></a><span class="k">module</span><span class="w"> </span><span class="n">top_module</span><span class="w"> </span><span class="p">(</span>
</span><span id="__span-83-2"><a id="__codelineno-83-2" name="__codelineno-83-2"></a><a href="#__codelineno-83-2"><span class="linenos" data-linenos=" 2 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">clk</span><span class="p">,</span>
</span><span id="__span-83-3"><a id="__codelineno-83-3" name="__codelineno-83-3"></a><a href="#__codelineno-83-3"><span class="linenos" data-linenos=" 3 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">reset</span><span class="p">,</span>
</span><span id="__span-83-4"><a id="__codelineno-83-4" name="__codelineno-83-4"></a><a href="#__codelineno-83-4"><span class="linenos" data-linenos=" 4 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="p">[</span><span class="mh">7</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">d</span><span class="p">,</span>
</span><span id="__span-83-5"><a id="__codelineno-83-5" name="__codelineno-83-5"></a><a href="#__codelineno-83-5"><span class="linenos" data-linenos=" 5 "></span></a><span class="w">    </span><span class="k">output</span><span class="w"> </span><span class="kt">reg</span><span class="w"> </span><span class="p">[</span><span class="mh">7</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">q</span>
</span><span id="__span-83-6"><a id="__codelineno-83-6" name="__codelineno-83-6"></a><a href="#__codelineno-83-6"><span class="linenos" data-linenos=" 6 "></span></a><span class="p">);</span>
</span><span id="__span-83-7"><a id="__codelineno-83-7" name="__codelineno-83-7"></a><a href="#__codelineno-83-7"><span class="linenos" data-linenos=" 7 "></span></a><span class="w">    </span><span class="k">always</span><span class="p">@(</span><span class="k">negedge</span><span class="w"> </span><span class="n">clk</span><span class="p">)</span><span class="k">begin</span>
</span><span id="__span-83-8"><a id="__codelineno-83-8" name="__codelineno-83-8"></a><a href="#__codelineno-83-8"><span class="linenos" data-linenos=" 8 "></span></a><span class="w">        </span><span class="k">if</span><span class="p">(</span><span class="n">reset</span><span class="p">)</span><span class="w"> </span><span class="n">q</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="mh">8&#39;h34</span><span class="p">;</span>
</span><span id="__span-83-9"><a id="__codelineno-83-9" name="__codelineno-83-9"></a><a href="#__codelineno-83-9"><span class="linenos" data-linenos=" 9 "></span></a><span class="w">        </span><span class="k">else</span><span class="w"> </span><span class="n">q</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">d</span><span class="p">;</span>
</span><span id="__span-83-10"><a id="__codelineno-83-10" name="__codelineno-83-10"></a><a href="#__codelineno-83-10"><span class="linenos" data-linenos="10 "></span></a><span class="w">    </span><span class="k">end</span>
</span><span id="__span-83-11"><a id="__codelineno-83-11" name="__codelineno-83-11"></a><a href="#__codelineno-83-11"><span class="linenos" data-linenos="11 "></span></a><span class="k">endmodule</span>
</span></code></pre></div></p>
<hr />
<h5 id="dff-with-asynchronous-reset">DFF with asynchronous reset<a class="headerlink" href="#dff-with-asynchronous-reset" title="Anchor link to this section for reference">⚓︎</a></h5>
<p>Website: <a href="https://hdlbits.01xz.net/wiki/Dff8ar" target="_blank">https://hdlbits.01xz.net/wiki/Dff8ar</a></p>
<p>這題要做異步復位的DFF。
<div class="language-verilog highlight"><span class="filename">Verilog</span><pre><span></span><code><span id="__span-84-1"><a id="__codelineno-84-1" name="__codelineno-84-1"></a><a href="#__codelineno-84-1"><span class="linenos" data-linenos=" 1 "></span></a><span class="k">module</span><span class="w"> </span><span class="n">top_module</span><span class="w"> </span><span class="p">(</span>
</span><span id="__span-84-2"><a id="__codelineno-84-2" name="__codelineno-84-2"></a><a href="#__codelineno-84-2"><span class="linenos" data-linenos=" 2 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">clk</span><span class="p">,</span>
</span><span id="__span-84-3"><a id="__codelineno-84-3" name="__codelineno-84-3"></a><a href="#__codelineno-84-3"><span class="linenos" data-linenos=" 3 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">areset</span><span class="p">,</span><span class="w">   </span><span class="c1">// active high asynchronous reset</span>
</span><span id="__span-84-4"><a id="__codelineno-84-4" name="__codelineno-84-4"></a><a href="#__codelineno-84-4"><span class="linenos" data-linenos=" 4 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="p">[</span><span class="mh">7</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">d</span><span class="p">,</span>
</span><span id="__span-84-5"><a id="__codelineno-84-5" name="__codelineno-84-5"></a><a href="#__codelineno-84-5"><span class="linenos" data-linenos=" 5 "></span></a><span class="w">    </span><span class="k">output</span><span class="w"> </span><span class="kt">reg</span><span class="w"> </span><span class="p">[</span><span class="mh">7</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">q</span>
</span><span id="__span-84-6"><a id="__codelineno-84-6" name="__codelineno-84-6"></a><a href="#__codelineno-84-6"><span class="linenos" data-linenos=" 6 "></span></a><span class="p">);</span>
</span><span id="__span-84-7"><a id="__codelineno-84-7" name="__codelineno-84-7"></a><a href="#__codelineno-84-7"><span class="linenos" data-linenos=" 7 "></span></a><span class="w">    </span><span class="k">always</span><span class="p">@(</span><span class="k">posedge</span><span class="w"> </span><span class="n">clk</span><span class="p">,</span><span class="w"> </span><span class="k">posedge</span><span class="w"> </span><span class="n">areset</span><span class="p">)</span><span class="k">begin</span>
</span><span id="__span-84-8"><a id="__codelineno-84-8" name="__codelineno-84-8"></a><a href="#__codelineno-84-8"><span class="linenos" data-linenos=" 8 "></span></a><span class="w">        </span><span class="k">if</span><span class="p">(</span><span class="n">areset</span><span class="p">)</span><span class="w"> </span><span class="n">q</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="mh">8</span><span class="mb">&#39;b0000</span><span class="n">_0000</span><span class="p">;</span>
</span><span id="__span-84-9"><a id="__codelineno-84-9" name="__codelineno-84-9"></a><a href="#__codelineno-84-9"><span class="linenos" data-linenos=" 9 "></span></a><span class="w">        </span><span class="k">else</span><span class="w"> </span><span class="n">q</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">d</span><span class="p">;</span>
</span><span id="__span-84-10"><a id="__codelineno-84-10" name="__codelineno-84-10"></a><a href="#__codelineno-84-10"><span class="linenos" data-linenos="10 "></span></a><span class="w">    </span><span class="k">end</span>
</span><span id="__span-84-11"><a id="__codelineno-84-11" name="__codelineno-84-11"></a><a href="#__codelineno-84-11"><span class="linenos" data-linenos="11 "></span></a><span class="k">endmodule</span>
</span></code></pre></div></p>
<hr />
<h5 id="dff-with-byte-enable">DFF with byte enable<a class="headerlink" href="#dff-with-byte-enable" title="Anchor link to this section for reference">⚓︎</a></h5>
<p>Website: <a href="https://hdlbits.01xz.net/wiki/Dff16e" target="_blank">https://hdlbits.01xz.net/wiki/Dff16e</a></p>
<p>這題就是DFF加上enable。
<div class="language-verilog highlight"><span class="filename">Verilog</span><pre><span></span><code><span id="__span-85-1"><a id="__codelineno-85-1" name="__codelineno-85-1"></a><a href="#__codelineno-85-1"><span class="linenos" data-linenos=" 1 "></span></a><span class="k">module</span><span class="w"> </span><span class="n">top_module</span><span class="w"> </span><span class="p">(</span>
</span><span id="__span-85-2"><a id="__codelineno-85-2" name="__codelineno-85-2"></a><a href="#__codelineno-85-2"><span class="linenos" data-linenos=" 2 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">clk</span><span class="p">,</span>
</span><span id="__span-85-3"><a id="__codelineno-85-3" name="__codelineno-85-3"></a><a href="#__codelineno-85-3"><span class="linenos" data-linenos=" 3 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">resetn</span><span class="p">,</span>
</span><span id="__span-85-4"><a id="__codelineno-85-4" name="__codelineno-85-4"></a><a href="#__codelineno-85-4"><span class="linenos" data-linenos=" 4 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="p">[</span><span class="mh">1</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">byteena</span><span class="p">,</span>
</span><span id="__span-85-5"><a id="__codelineno-85-5" name="__codelineno-85-5"></a><a href="#__codelineno-85-5"><span class="linenos" data-linenos=" 5 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="p">[</span><span class="mh">15</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">d</span><span class="p">,</span>
</span><span id="__span-85-6"><a id="__codelineno-85-6" name="__codelineno-85-6"></a><a href="#__codelineno-85-6"><span class="linenos" data-linenos=" 6 "></span></a><span class="w">    </span><span class="k">output</span><span class="w"> </span><span class="kt">reg</span><span class="p">[</span><span class="mh">15</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">q</span>
</span><span id="__span-85-7"><a id="__codelineno-85-7" name="__codelineno-85-7"></a><a href="#__codelineno-85-7"><span class="linenos" data-linenos=" 7 "></span></a><span class="p">);</span>
</span><span id="__span-85-8"><a id="__codelineno-85-8" name="__codelineno-85-8"></a><a href="#__codelineno-85-8"><span class="linenos" data-linenos=" 8 "></span></a><span class="w">    </span><span class="k">always</span><span class="p">@(</span><span class="k">posedge</span><span class="w"> </span><span class="n">clk</span><span class="p">)</span><span class="k">begin</span>
</span><span id="__span-85-9"><a id="__codelineno-85-9" name="__codelineno-85-9"></a><a href="#__codelineno-85-9"><span class="linenos" data-linenos=" 9 "></span></a><span class="w">        </span><span class="k">if</span><span class="p">(</span><span class="o">~</span><span class="n">resetn</span><span class="p">)</span><span class="w"> </span><span class="n">q</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="mh">16&#39;h0000</span><span class="p">;</span>
</span><span id="__span-85-10"><a id="__codelineno-85-10" name="__codelineno-85-10"></a><a href="#__codelineno-85-10"><span class="linenos" data-linenos="10 "></span></a><span class="w">        </span><span class="k">else</span><span class="w"> </span><span class="k">begin</span>
</span><span id="__span-85-11"><a id="__codelineno-85-11" name="__codelineno-85-11"></a><a href="#__codelineno-85-11"><span class="linenos" data-linenos="11 "></span></a><span class="w">            </span><span class="n">q</span><span class="p">[</span><span class="mh">15</span><span class="o">:</span><span class="mh">8</span><span class="p">]</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">byteena</span><span class="p">[</span><span class="mh">1</span><span class="p">]</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="n">d</span><span class="p">[</span><span class="mh">15</span><span class="o">:</span><span class="mh">8</span><span class="p">]</span><span class="o">:</span><span class="w"> </span><span class="n">q</span><span class="p">[</span><span class="mh">15</span><span class="o">:</span><span class="mh">8</span><span class="p">];</span>
</span><span id="__span-85-12"><a id="__codelineno-85-12" name="__codelineno-85-12"></a><a href="#__codelineno-85-12"><span class="linenos" data-linenos="12 "></span></a><span class="w">            </span><span class="n">q</span><span class="p">[</span><span class="mh">7</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">byteena</span><span class="p">[</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="n">d</span><span class="p">[</span><span class="mh">7</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="o">:</span><span class="w"> </span><span class="n">q</span><span class="p">[</span><span class="mh">7</span><span class="o">:</span><span class="mh">0</span><span class="p">];</span>
</span><span id="__span-85-13"><a id="__codelineno-85-13" name="__codelineno-85-13"></a><a href="#__codelineno-85-13"><span class="linenos" data-linenos="13 "></span></a><span class="w">        </span><span class="k">end</span>
</span><span id="__span-85-14"><a id="__codelineno-85-14" name="__codelineno-85-14"></a><a href="#__codelineno-85-14"><span class="linenos" data-linenos="14 "></span></a><span class="w">    </span><span class="k">end</span>
</span><span id="__span-85-15"><a id="__codelineno-85-15" name="__codelineno-85-15"></a><a href="#__codelineno-85-15"><span class="linenos" data-linenos="15 "></span></a><span class="k">endmodule</span>
</span></code></pre></div></p>
<hr />
<h5 id="d-latch">D Latch<a class="headerlink" href="#d-latch" title="Anchor link to this section for reference">⚓︎</a></h5>
<p>Website: <a href="https://hdlbits.01xz.net/wiki/Exams/m2014_q4a" target="_blank">https://hdlbits.01xz.net/wiki/Exams/m2014_q4a</a></p>
<p>這題練習寫d latch，因為d latch是level-sensitive，所以要用<code>always@(*)</code>，而因為是sequential logic，所以要用non-blocking assignment。
<div class="language-verilog highlight"><span class="filename">Verilog</span><pre><span></span><code><span id="__span-86-1"><a id="__codelineno-86-1" name="__codelineno-86-1"></a><a href="#__codelineno-86-1"><span class="linenos" data-linenos="1 "></span></a><span class="k">module</span><span class="w"> </span><span class="n">top_module</span><span class="w"> </span><span class="p">(</span>
</span><span id="__span-86-2"><a id="__codelineno-86-2" name="__codelineno-86-2"></a><a href="#__codelineno-86-2"><span class="linenos" data-linenos="2 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">d</span><span class="p">,</span><span class="w"> </span>
</span><span id="__span-86-3"><a id="__codelineno-86-3" name="__codelineno-86-3"></a><a href="#__codelineno-86-3"><span class="linenos" data-linenos="3 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">ena</span><span class="p">,</span>
</span><span id="__span-86-4"><a id="__codelineno-86-4" name="__codelineno-86-4"></a><a href="#__codelineno-86-4"><span class="linenos" data-linenos="4 "></span></a><span class="w">    </span><span class="k">output</span><span class="w"> </span><span class="kt">reg</span><span class="w"> </span><span class="n">q</span><span class="p">);</span>
</span><span id="__span-86-5"><a id="__codelineno-86-5" name="__codelineno-86-5"></a><a href="#__codelineno-86-5"><span class="linenos" data-linenos="5 "></span></a><span class="w">    </span><span class="k">always</span><span class="p">@(</span><span class="o">*</span><span class="p">)</span><span class="k">begin</span>
</span><span id="__span-86-6"><a id="__codelineno-86-6" name="__codelineno-86-6"></a><a href="#__codelineno-86-6"><span class="linenos" data-linenos="6 "></span></a><span class="w">        </span><span class="k">if</span><span class="p">(</span><span class="n">ena</span><span class="p">)</span><span class="w"> </span><span class="n">q</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">d</span><span class="p">;</span>
</span><span id="__span-86-7"><a id="__codelineno-86-7" name="__codelineno-86-7"></a><a href="#__codelineno-86-7"><span class="linenos" data-linenos="7 "></span></a><span class="w">    </span><span class="k">end</span>
</span><span id="__span-86-8"><a id="__codelineno-86-8" name="__codelineno-86-8"></a><a href="#__codelineno-86-8"><span class="linenos" data-linenos="8 "></span></a><span class="k">endmodule</span>
</span></code></pre></div></p>
<hr />
<h5 id="dff1">DFF(1)<a class="headerlink" href="#dff1" title="Anchor link to this section for reference">⚓︎</a></h5>
<p>Website: <a href="https://hdlbits.01xz.net/wiki/Exams/m2014_q4b" target="_blank">https://hdlbits.01xz.net/wiki/Exams/m2014_q4b</a></p>
<p>這題練習寫DFF with asynchronous reset。
<div class="language-verilog highlight"><span class="filename">Verilog</span><pre><span></span><code><span id="__span-87-1"><a id="__codelineno-87-1" name="__codelineno-87-1"></a><a href="#__codelineno-87-1"><span class="linenos" data-linenos=" 1 "></span></a><span class="k">module</span><span class="w"> </span><span class="n">top_module</span><span class="w"> </span><span class="p">(</span>
</span><span id="__span-87-2"><a id="__codelineno-87-2" name="__codelineno-87-2"></a><a href="#__codelineno-87-2"><span class="linenos" data-linenos=" 2 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">clk</span><span class="p">,</span>
</span><span id="__span-87-3"><a id="__codelineno-87-3" name="__codelineno-87-3"></a><a href="#__codelineno-87-3"><span class="linenos" data-linenos=" 3 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">d</span><span class="p">,</span><span class="w"> </span>
</span><span id="__span-87-4"><a id="__codelineno-87-4" name="__codelineno-87-4"></a><a href="#__codelineno-87-4"><span class="linenos" data-linenos=" 4 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">ar</span><span class="p">,</span><span class="w">   </span><span class="c1">// asynchronous reset</span>
</span><span id="__span-87-5"><a id="__codelineno-87-5" name="__codelineno-87-5"></a><a href="#__codelineno-87-5"><span class="linenos" data-linenos=" 5 "></span></a><span class="w">    </span><span class="k">output</span><span class="w"> </span><span class="kt">reg</span><span class="w"> </span><span class="n">q</span><span class="p">);</span>
</span><span id="__span-87-6"><a id="__codelineno-87-6" name="__codelineno-87-6"></a><a href="#__codelineno-87-6"><span class="linenos" data-linenos=" 6 "></span></a><span class="w">    </span><span class="k">always</span><span class="p">@(</span><span class="k">posedge</span><span class="w"> </span><span class="n">clk</span><span class="p">,</span><span class="k">posedge</span><span class="w"> </span><span class="n">ar</span><span class="p">)</span><span class="k">begin</span>
</span><span id="__span-87-7"><a id="__codelineno-87-7" name="__codelineno-87-7"></a><a href="#__codelineno-87-7"><span class="linenos" data-linenos=" 7 "></span></a><span class="w">        </span><span class="k">if</span><span class="p">(</span><span class="n">ar</span><span class="p">)</span><span class="w"> </span><span class="n">q</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="mh">1</span><span class="mb">&#39;b0</span><span class="p">;</span>
</span><span id="__span-87-8"><a id="__codelineno-87-8" name="__codelineno-87-8"></a><a href="#__codelineno-87-8"><span class="linenos" data-linenos=" 8 "></span></a><span class="w">        </span><span class="k">else</span><span class="w"> </span><span class="n">q</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">d</span><span class="p">;</span>
</span><span id="__span-87-9"><a id="__codelineno-87-9" name="__codelineno-87-9"></a><a href="#__codelineno-87-9"><span class="linenos" data-linenos=" 9 "></span></a><span class="w">    </span><span class="k">end</span>
</span><span id="__span-87-10"><a id="__codelineno-87-10" name="__codelineno-87-10"></a><a href="#__codelineno-87-10"><span class="linenos" data-linenos="10 "></span></a><span class="k">endmodule</span>
</span></code></pre></div></p>
<hr />
<h5 id="dff2">DFF(2)<a class="headerlink" href="#dff2" title="Anchor link to this section for reference">⚓︎</a></h5>
<p>Website: <a href="https://hdlbits.01xz.net/wiki/Exams/m2014_q4c" target="_blank">https://hdlbits.01xz.net/wiki/Exams/m2014_q4c</a></p>
<p>這題練習寫DFF with synchronous reset，跟上題不同的是，不用考慮reset的正緣觸發。
<div class="language-verilog highlight"><span class="filename">Verilog</span><pre><span></span><code><span id="__span-88-1"><a id="__codelineno-88-1" name="__codelineno-88-1"></a><a href="#__codelineno-88-1"><span class="linenos" data-linenos=" 1 "></span></a><span class="k">module</span><span class="w"> </span><span class="n">top_module</span><span class="w"> </span><span class="p">(</span>
</span><span id="__span-88-2"><a id="__codelineno-88-2" name="__codelineno-88-2"></a><a href="#__codelineno-88-2"><span class="linenos" data-linenos=" 2 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">clk</span><span class="p">,</span>
</span><span id="__span-88-3"><a id="__codelineno-88-3" name="__codelineno-88-3"></a><a href="#__codelineno-88-3"><span class="linenos" data-linenos=" 3 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">d</span><span class="p">,</span><span class="w"> </span>
</span><span id="__span-88-4"><a id="__codelineno-88-4" name="__codelineno-88-4"></a><a href="#__codelineno-88-4"><span class="linenos" data-linenos=" 4 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">r</span><span class="p">,</span><span class="w">   </span><span class="c1">// synchronous reset</span>
</span><span id="__span-88-5"><a id="__codelineno-88-5" name="__codelineno-88-5"></a><a href="#__codelineno-88-5"><span class="linenos" data-linenos=" 5 "></span></a><span class="w">    </span><span class="k">output</span><span class="w"> </span><span class="kt">reg</span><span class="w"> </span><span class="n">q</span><span class="p">);</span>
</span><span id="__span-88-6"><a id="__codelineno-88-6" name="__codelineno-88-6"></a><a href="#__codelineno-88-6"><span class="linenos" data-linenos=" 6 "></span></a><span class="w">    </span><span class="k">always</span><span class="p">@(</span><span class="k">posedge</span><span class="w"> </span><span class="n">clk</span><span class="p">)</span><span class="k">begin</span>
</span><span id="__span-88-7"><a id="__codelineno-88-7" name="__codelineno-88-7"></a><a href="#__codelineno-88-7"><span class="linenos" data-linenos=" 7 "></span></a><span class="w">        </span><span class="k">if</span><span class="p">(</span><span class="n">r</span><span class="p">)</span><span class="w"> </span><span class="n">q</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="mh">1</span><span class="mb">&#39;b0</span><span class="p">;</span>
</span><span id="__span-88-8"><a id="__codelineno-88-8" name="__codelineno-88-8"></a><a href="#__codelineno-88-8"><span class="linenos" data-linenos=" 8 "></span></a><span class="w">        </span><span class="k">else</span><span class="w"> </span><span class="n">q</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">d</span><span class="p">;</span>
</span><span id="__span-88-9"><a id="__codelineno-88-9" name="__codelineno-88-9"></a><a href="#__codelineno-88-9"><span class="linenos" data-linenos=" 9 "></span></a><span class="w">    </span><span class="k">end</span>
</span><span id="__span-88-10"><a id="__codelineno-88-10" name="__codelineno-88-10"></a><a href="#__codelineno-88-10"><span class="linenos" data-linenos="10 "></span></a><span class="k">endmodule</span>
</span></code></pre></div></p>
<hr />
<h5 id="dffgate">DFF+gate<a class="headerlink" href="#dffgate" title="Anchor link to this section for reference">⚓︎</a></h5>
<p>Website: <a href="https://hdlbits.01xz.net/wiki/Exams/m2014_q4d" target="_blank">https://hdlbits.01xz.net/wiki/Exams/m2014_q4d</a></p>
<p>這題練習寫DFF加上gate的填寫。
<div class="language-verilog highlight"><span class="filename">Verilog</span><pre><span></span><code><span id="__span-89-1"><a id="__codelineno-89-1" name="__codelineno-89-1"></a><a href="#__codelineno-89-1"><span class="linenos" data-linenos="1 "></span></a><span class="k">module</span><span class="w"> </span><span class="n">top_module</span><span class="w"> </span><span class="p">(</span>
</span><span id="__span-89-2"><a id="__codelineno-89-2" name="__codelineno-89-2"></a><a href="#__codelineno-89-2"><span class="linenos" data-linenos="2 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">clk</span><span class="p">,</span>
</span><span id="__span-89-3"><a id="__codelineno-89-3" name="__codelineno-89-3"></a><a href="#__codelineno-89-3"><span class="linenos" data-linenos="3 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">in</span><span class="p">,</span><span class="w"> </span>
</span><span id="__span-89-4"><a id="__codelineno-89-4" name="__codelineno-89-4"></a><a href="#__codelineno-89-4"><span class="linenos" data-linenos="4 "></span></a><span class="w">    </span><span class="k">output</span><span class="w"> </span><span class="kt">reg</span><span class="w"> </span><span class="n">out</span><span class="p">);</span>
</span><span id="__span-89-5"><a id="__codelineno-89-5" name="__codelineno-89-5"></a><a href="#__codelineno-89-5"><span class="linenos" data-linenos="5 "></span></a><span class="w">    </span><span class="k">always</span><span class="p">@(</span><span class="k">posedge</span><span class="w"> </span><span class="n">clk</span><span class="p">)</span><span class="k">begin</span>
</span><span id="__span-89-6"><a id="__codelineno-89-6" name="__codelineno-89-6"></a><a href="#__codelineno-89-6"><span class="linenos" data-linenos="6 "></span></a><span class="w">        </span><span class="n">out</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">out</span><span class="w"> </span><span class="o">^</span><span class="w"> </span><span class="n">in</span><span class="p">;</span>
</span><span id="__span-89-7"><a id="__codelineno-89-7" name="__codelineno-89-7"></a><a href="#__codelineno-89-7"><span class="linenos" data-linenos="7 "></span></a><span class="w">    </span><span class="k">end</span>
</span><span id="__span-89-8"><a id="__codelineno-89-8" name="__codelineno-89-8"></a><a href="#__codelineno-89-8"><span class="linenos" data-linenos="8 "></span></a><span class="k">endmodule</span>
</span></code></pre></div></p>
<hr />
<h5 id="mux-and-dff1">Mux and DFF(1)<a class="headerlink" href="#mux-and-dff1" title="Anchor link to this section for reference">⚓︎</a></h5>
<p>Website: <a href="https://hdlbits.01xz.net/wiki/Mt2015_muxdff" target="_blank">https://hdlbits.01xz.net/wiki/Mt2015_muxdff</a></p>
<p>這題練習一個DFF加上一個mux。
<div class="language-verilog highlight"><span class="filename">Verilog</span><pre><span></span><code><span id="__span-90-1"><a id="__codelineno-90-1" name="__codelineno-90-1"></a><a href="#__codelineno-90-1"><span class="linenos" data-linenos=" 1 "></span></a><span class="k">module</span><span class="w"> </span><span class="n">top_module</span><span class="w"> </span><span class="p">(</span>
</span><span id="__span-90-2"><a id="__codelineno-90-2" name="__codelineno-90-2"></a><a href="#__codelineno-90-2"><span class="linenos" data-linenos=" 2 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">clk</span><span class="p">,</span>
</span><span id="__span-90-3"><a id="__codelineno-90-3" name="__codelineno-90-3"></a><a href="#__codelineno-90-3"><span class="linenos" data-linenos=" 3 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">L</span><span class="p">,</span>
</span><span id="__span-90-4"><a id="__codelineno-90-4" name="__codelineno-90-4"></a><a href="#__codelineno-90-4"><span class="linenos" data-linenos=" 4 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">r_in</span><span class="p">,</span>
</span><span id="__span-90-5"><a id="__codelineno-90-5" name="__codelineno-90-5"></a><a href="#__codelineno-90-5"><span class="linenos" data-linenos=" 5 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">q_in</span><span class="p">,</span>
</span><span id="__span-90-6"><a id="__codelineno-90-6" name="__codelineno-90-6"></a><a href="#__codelineno-90-6"><span class="linenos" data-linenos=" 6 "></span></a><span class="w">    </span><span class="k">output</span><span class="w"> </span><span class="kt">reg</span><span class="w"> </span><span class="n">Q</span><span class="p">);</span>
</span><span id="__span-90-7"><a id="__codelineno-90-7" name="__codelineno-90-7"></a><a href="#__codelineno-90-7"><span class="linenos" data-linenos=" 7 "></span></a><span class="w">    </span><span class="k">always</span><span class="p">@(</span><span class="k">posedge</span><span class="w"> </span><span class="n">clk</span><span class="p">)</span><span class="k">begin</span>
</span><span id="__span-90-8"><a id="__codelineno-90-8" name="__codelineno-90-8"></a><a href="#__codelineno-90-8"><span class="linenos" data-linenos=" 8 "></span></a><span class="w">        </span><span class="n">Q</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">L</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="n">r_in</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">q_in</span><span class="p">;</span>
</span><span id="__span-90-9"><a id="__codelineno-90-9" name="__codelineno-90-9"></a><a href="#__codelineno-90-9"><span class="linenos" data-linenos=" 9 "></span></a><span class="w">    </span><span class="k">end</span>
</span><span id="__span-90-10"><a id="__codelineno-90-10" name="__codelineno-90-10"></a><a href="#__codelineno-90-10"><span class="linenos" data-linenos="10 "></span></a><span class="k">endmodule</span>
</span></code></pre></div></p>
<hr />
<h5 id="mux-and-dff2">Mux and DFF(2)<a class="headerlink" href="#mux-and-dff2" title="Anchor link to this section for reference">⚓︎</a></h5>
<p>Website: <a href="https://hdlbits.01xz.net/wiki/Exams/2014_q4a" target="_blank">https://hdlbits.01xz.net/wiki/Exams/2014_q4a</a></p>
<p>這題練習一個DFF加上超過1個gate，此時就可以考慮將combinational logic另外在sequential block外assign好。
<div class="language-verilog highlight"><span class="filename">Verilog</span><pre><span></span><code><span id="__span-91-1"><a id="__codelineno-91-1" name="__codelineno-91-1"></a><a href="#__codelineno-91-1"><span class="linenos" data-linenos=" 1 "></span></a><span class="k">module</span><span class="w"> </span><span class="n">top_module</span><span class="w"> </span><span class="p">(</span>
</span><span id="__span-91-2"><a id="__codelineno-91-2" name="__codelineno-91-2"></a><a href="#__codelineno-91-2"><span class="linenos" data-linenos=" 2 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">clk</span><span class="p">,</span>
</span><span id="__span-91-3"><a id="__codelineno-91-3" name="__codelineno-91-3"></a><a href="#__codelineno-91-3"><span class="linenos" data-linenos=" 3 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">w</span><span class="p">,</span><span class="w"> </span><span class="n">R</span><span class="p">,</span><span class="w"> </span><span class="n">E</span><span class="p">,</span><span class="w"> </span><span class="n">L</span><span class="p">,</span>
</span><span id="__span-91-4"><a id="__codelineno-91-4" name="__codelineno-91-4"></a><a href="#__codelineno-91-4"><span class="linenos" data-linenos=" 4 "></span></a><span class="w">    </span><span class="k">output</span><span class="w"> </span><span class="kt">reg</span><span class="w"> </span><span class="n">Q</span>
</span><span id="__span-91-5"><a id="__codelineno-91-5" name="__codelineno-91-5"></a><a href="#__codelineno-91-5"><span class="linenos" data-linenos=" 5 "></span></a><span class="p">);</span><span class="w">  </span>
</span><span id="__span-91-6"><a id="__codelineno-91-6" name="__codelineno-91-6"></a><a href="#__codelineno-91-6"><span class="linenos" data-linenos=" 6 "></span></a><span class="w">    </span><span class="kt">wire</span><span class="w"> </span><span class="n">q_in</span><span class="p">;</span>
</span><span id="__span-91-7"><a id="__codelineno-91-7" name="__codelineno-91-7"></a><a href="#__codelineno-91-7"><span class="linenos" data-linenos=" 7 "></span></a><span class="w">    </span><span class="k">assign</span><span class="w"> </span><span class="n">q_in</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">L</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="n">R</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="p">(</span><span class="n">E</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="n">w</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">Q</span><span class="p">);</span>
</span><span id="__span-91-8"><a id="__codelineno-91-8" name="__codelineno-91-8"></a><a href="#__codelineno-91-8"><span class="linenos" data-linenos=" 8 "></span></a><span class="w">    </span><span class="k">always</span><span class="p">@(</span><span class="k">posedge</span><span class="w"> </span><span class="n">clk</span><span class="p">)</span><span class="k">begin</span>
</span><span id="__span-91-9"><a id="__codelineno-91-9" name="__codelineno-91-9"></a><a href="#__codelineno-91-9"><span class="linenos" data-linenos=" 9 "></span></a><span class="w">        </span><span class="n">Q</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">q_in</span><span class="p">;</span>
</span><span id="__span-91-10"><a id="__codelineno-91-10" name="__codelineno-91-10"></a><a href="#__codelineno-91-10"><span class="linenos" data-linenos="10 "></span></a><span class="w">    </span><span class="k">end</span>
</span><span id="__span-91-11"><a id="__codelineno-91-11" name="__codelineno-91-11"></a><a href="#__codelineno-91-11"><span class="linenos" data-linenos="11 "></span></a><span class="k">endmodule</span>
</span></code></pre></div></p>
<hr />
<h5 id="dffs-and-gates">DFFs and gates<a class="headerlink" href="#dffs-and-gates" title="Anchor link to this section for reference">⚓︎</a></h5>
<p>Website: <a href="https://hdlbits.01xz.net/wiki/Exams/ece241_2014_q4" target="_blank">https://hdlbits.01xz.net/wiki/Exams/ece241_2014_q4</a></p>
<p>這題只是寫3個DFF。
<div class="language-verilog highlight"><span class="filename">Verilog</span><pre><span></span><code><span id="__span-92-1"><a id="__codelineno-92-1" name="__codelineno-92-1"></a><a href="#__codelineno-92-1"><span class="linenos" data-linenos=" 1 "></span></a><span class="k">module</span><span class="w"> </span><span class="n">top_module</span><span class="w"> </span><span class="p">(</span>
</span><span id="__span-92-2"><a id="__codelineno-92-2" name="__codelineno-92-2"></a><a href="#__codelineno-92-2"><span class="linenos" data-linenos=" 2 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">clk</span><span class="p">,</span>
</span><span id="__span-92-3"><a id="__codelineno-92-3" name="__codelineno-92-3"></a><a href="#__codelineno-92-3"><span class="linenos" data-linenos=" 3 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">x</span><span class="p">,</span>
</span><span id="__span-92-4"><a id="__codelineno-92-4" name="__codelineno-92-4"></a><a href="#__codelineno-92-4"><span class="linenos" data-linenos=" 4 "></span></a><span class="w">    </span><span class="k">output</span><span class="w"> </span><span class="n">z</span>
</span><span id="__span-92-5"><a id="__codelineno-92-5" name="__codelineno-92-5"></a><a href="#__codelineno-92-5"><span class="linenos" data-linenos=" 5 "></span></a><span class="p">);</span><span class="w"> </span>
</span><span id="__span-92-6"><a id="__codelineno-92-6" name="__codelineno-92-6"></a><a href="#__codelineno-92-6"><span class="linenos" data-linenos=" 6 "></span></a><span class="w">    </span><span class="kt">reg</span><span class="w"> </span><span class="n">q1</span><span class="p">,</span><span class="n">q2</span><span class="p">,</span><span class="n">q3</span><span class="p">;</span>
</span><span id="__span-92-7"><a id="__codelineno-92-7" name="__codelineno-92-7"></a><a href="#__codelineno-92-7"><span class="linenos" data-linenos=" 7 "></span></a><span class="w">    </span><span class="k">assign</span><span class="w"> </span><span class="n">z</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">~</span><span class="p">(</span><span class="n">q1</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">q2</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">q3</span><span class="p">);</span>
</span><span id="__span-92-8"><a id="__codelineno-92-8" name="__codelineno-92-8"></a><a href="#__codelineno-92-8"><span class="linenos" data-linenos=" 8 "></span></a><span class="w">    </span><span class="k">always</span><span class="p">@(</span><span class="k">posedge</span><span class="w"> </span><span class="n">clk</span><span class="p">)</span><span class="k">begin</span>
</span><span id="__span-92-9"><a id="__codelineno-92-9" name="__codelineno-92-9"></a><a href="#__codelineno-92-9"><span class="linenos" data-linenos=" 9 "></span></a><span class="w">        </span><span class="n">q1</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">q1</span><span class="w"> </span><span class="o">^</span><span class="w"> </span><span class="n">x</span><span class="p">;</span>
</span><span id="__span-92-10"><a id="__codelineno-92-10" name="__codelineno-92-10"></a><a href="#__codelineno-92-10"><span class="linenos" data-linenos="10 "></span></a><span class="w">        </span><span class="n">q2</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="o">~</span><span class="n">q2</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="n">x</span><span class="p">;</span>
</span><span id="__span-92-11"><a id="__codelineno-92-11" name="__codelineno-92-11"></a><a href="#__codelineno-92-11"><span class="linenos" data-linenos="11 "></span></a><span class="w">        </span><span class="n">q3</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="o">~</span><span class="n">q3</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">x</span><span class="p">;</span>
</span><span id="__span-92-12"><a id="__codelineno-92-12" name="__codelineno-92-12"></a><a href="#__codelineno-92-12"><span class="linenos" data-linenos="12 "></span></a><span class="w">    </span><span class="k">end</span>
</span><span id="__span-92-13"><a id="__codelineno-92-13" name="__codelineno-92-13"></a><a href="#__codelineno-92-13"><span class="linenos" data-linenos="13 "></span></a><span class="k">endmodule</span>
</span></code></pre></div></p>
<hr />
<h5 id="create-circuit-from-truth-table">Create circuit from truth table<a class="headerlink" href="#create-circuit-from-truth-table" title="Anchor link to this section for reference">⚓︎</a></h5>
<p>Website: <a href="https://hdlbits.01xz.net/wiki/Exams/ece241_2013_q7" target="_blank">https://hdlbits.01xz.net/wiki/Exams/ece241_2013_q7</a></p>
<p>這題練習寫JK-FF。
<div class="language-verilog highlight"><span class="filename">Verilog</span><pre><span></span><code><span id="__span-93-1"><a id="__codelineno-93-1" name="__codelineno-93-1"></a><a href="#__codelineno-93-1"><span class="linenos" data-linenos=" 1 "></span></a><span class="k">module</span><span class="w"> </span><span class="n">top_module</span><span class="w"> </span><span class="p">(</span>
</span><span id="__span-93-2"><a id="__codelineno-93-2" name="__codelineno-93-2"></a><a href="#__codelineno-93-2"><span class="linenos" data-linenos=" 2 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">clk</span><span class="p">,</span>
</span><span id="__span-93-3"><a id="__codelineno-93-3" name="__codelineno-93-3"></a><a href="#__codelineno-93-3"><span class="linenos" data-linenos=" 3 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">j</span><span class="p">,</span>
</span><span id="__span-93-4"><a id="__codelineno-93-4" name="__codelineno-93-4"></a><a href="#__codelineno-93-4"><span class="linenos" data-linenos=" 4 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">k</span><span class="p">,</span>
</span><span id="__span-93-5"><a id="__codelineno-93-5" name="__codelineno-93-5"></a><a href="#__codelineno-93-5"><span class="linenos" data-linenos=" 5 "></span></a><span class="w">    </span><span class="k">output</span><span class="w"> </span><span class="kt">reg</span><span class="w"> </span><span class="n">Q</span><span class="p">);</span><span class="w"> </span>
</span><span id="__span-93-6"><a id="__codelineno-93-6" name="__codelineno-93-6"></a><a href="#__codelineno-93-6"><span class="linenos" data-linenos=" 6 "></span></a><span class="w">    </span><span class="k">always</span><span class="w"> </span><span class="p">@(</span><span class="k">posedge</span><span class="w"> </span><span class="n">clk</span><span class="p">)</span><span class="k">begin</span>
</span><span id="__span-93-7"><a id="__codelineno-93-7" name="__codelineno-93-7"></a><a href="#__codelineno-93-7"><span class="linenos" data-linenos=" 7 "></span></a><span class="w">        </span><span class="k">case</span><span class="p">({</span><span class="n">j</span><span class="p">,</span><span class="n">k</span><span class="p">})</span>
</span><span id="__span-93-8"><a id="__codelineno-93-8" name="__codelineno-93-8"></a><a href="#__codelineno-93-8"><span class="linenos" data-linenos=" 8 "></span></a><span class="w">            </span><span class="mh">2</span><span class="mb">&#39;b00</span><span class="o">:</span><span class="w"> </span><span class="n">Q</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">Q</span><span class="p">;</span>
</span><span id="__span-93-9"><a id="__codelineno-93-9" name="__codelineno-93-9"></a><a href="#__codelineno-93-9"><span class="linenos" data-linenos=" 9 "></span></a><span class="w">            </span><span class="mh">2</span><span class="mb">&#39;b01</span><span class="o">:</span><span class="w"> </span><span class="n">Q</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="mh">1</span><span class="mb">&#39;b0</span><span class="p">;</span>
</span><span id="__span-93-10"><a id="__codelineno-93-10" name="__codelineno-93-10"></a><a href="#__codelineno-93-10"><span class="linenos" data-linenos="10 "></span></a><span class="w">            </span><span class="mh">2</span><span class="mb">&#39;b10</span><span class="o">:</span><span class="w"> </span><span class="n">Q</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="mh">1</span><span class="mb">&#39;b1</span><span class="p">;</span>
</span><span id="__span-93-11"><a id="__codelineno-93-11" name="__codelineno-93-11"></a><a href="#__codelineno-93-11"><span class="linenos" data-linenos="11 "></span></a><span class="w">            </span><span class="mh">2</span><span class="mb">&#39;b11</span><span class="o">:</span><span class="w"> </span><span class="n">Q</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="o">~</span><span class="n">Q</span><span class="p">;</span>
</span><span id="__span-93-12"><a id="__codelineno-93-12" name="__codelineno-93-12"></a><a href="#__codelineno-93-12"><span class="linenos" data-linenos="12 "></span></a><span class="w">        </span><span class="k">endcase</span>
</span><span id="__span-93-13"><a id="__codelineno-93-13" name="__codelineno-93-13"></a><a href="#__codelineno-93-13"><span class="linenos" data-linenos="13 "></span></a><span class="w">    </span><span class="k">end</span>
</span><span id="__span-93-14"><a id="__codelineno-93-14" name="__codelineno-93-14"></a><a href="#__codelineno-93-14"><span class="linenos" data-linenos="14 "></span></a><span class="k">endmodule</span>
</span></code></pre></div></p>
<hr />
<h5 id="detect-an-edge">Detect an edge<a class="headerlink" href="#detect-an-edge" title="Anchor link to this section for reference">⚓︎</a></h5>
<p>Website: <a href="https://hdlbits.01xz.net/wiki/Edgedetect" target="_blank">https://hdlbits.01xz.net/wiki/Edgedetect</a></p>
<p>這題練習寫edge detection，為了比較上個clk的輸入，要多開一個dff存。
<div class="language-verilog highlight"><span class="filename">Verilog</span><pre><span></span><code><span id="__span-94-1"><a id="__codelineno-94-1" name="__codelineno-94-1"></a><a href="#__codelineno-94-1"><span class="linenos" data-linenos=" 1 "></span></a><span class="k">module</span><span class="w"> </span><span class="n">top_module</span><span class="w"> </span><span class="p">(</span>
</span><span id="__span-94-2"><a id="__codelineno-94-2" name="__codelineno-94-2"></a><a href="#__codelineno-94-2"><span class="linenos" data-linenos=" 2 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">clk</span><span class="p">,</span>
</span><span id="__span-94-3"><a id="__codelineno-94-3" name="__codelineno-94-3"></a><a href="#__codelineno-94-3"><span class="linenos" data-linenos=" 3 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="p">[</span><span class="mh">7</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">in</span><span class="p">,</span>
</span><span id="__span-94-4"><a id="__codelineno-94-4" name="__codelineno-94-4"></a><a href="#__codelineno-94-4"><span class="linenos" data-linenos=" 4 "></span></a><span class="w">    </span><span class="k">output</span><span class="w"> </span><span class="kt">reg</span><span class="w"> </span><span class="p">[</span><span class="mh">7</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">pedge</span>
</span><span id="__span-94-5"><a id="__codelineno-94-5" name="__codelineno-94-5"></a><a href="#__codelineno-94-5"><span class="linenos" data-linenos=" 5 "></span></a><span class="p">);</span>
</span><span id="__span-94-6"><a id="__codelineno-94-6" name="__codelineno-94-6"></a><a href="#__codelineno-94-6"><span class="linenos" data-linenos=" 6 "></span></a><span class="w">    </span><span class="kt">reg</span><span class="w"> </span><span class="p">[</span><span class="mh">7</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">in_prev</span><span class="p">;</span>
</span><span id="__span-94-7"><a id="__codelineno-94-7" name="__codelineno-94-7"></a><a href="#__codelineno-94-7"><span class="linenos" data-linenos=" 7 "></span></a><span class="w">    </span><span class="k">always</span><span class="p">@(</span><span class="k">posedge</span><span class="w"> </span><span class="n">clk</span><span class="p">)</span><span class="k">begin</span>
</span><span id="__span-94-8"><a id="__codelineno-94-8" name="__codelineno-94-8"></a><a href="#__codelineno-94-8"><span class="linenos" data-linenos=" 8 "></span></a><span class="w">        </span><span class="n">in_prev</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">in</span><span class="p">;</span>
</span><span id="__span-94-9"><a id="__codelineno-94-9" name="__codelineno-94-9"></a><a href="#__codelineno-94-9"><span class="linenos" data-linenos=" 9 "></span></a><span class="w">        </span><span class="n">pedge</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="o">~</span><span class="n">in_prev</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="n">in</span><span class="p">;</span>
</span><span id="__span-94-10"><a id="__codelineno-94-10" name="__codelineno-94-10"></a><a href="#__codelineno-94-10"><span class="linenos" data-linenos="10 "></span></a><span class="w">    </span><span class="k">end</span>
</span><span id="__span-94-11"><a id="__codelineno-94-11" name="__codelineno-94-11"></a><a href="#__codelineno-94-11"><span class="linenos" data-linenos="11 "></span></a><span class="k">endmodule</span>
</span></code></pre></div></p>
<hr />
<h5 id="detect-both-edges">Detect both edges<a class="headerlink" href="#detect-both-edges" title="Anchor link to this section for reference">⚓︎</a></h5>
<p>Website: <a href="https://hdlbits.01xz.net/wiki/Edgedetect2" target="_blank">https://hdlbits.01xz.net/wiki/Edgedetect2</a></p>
<p>這題練習寫edge detection，跟上題不同的是，要同時判斷0變1和1變0。
<div class="language-verilog highlight"><span class="filename">Verilog</span><pre><span></span><code><span id="__span-95-1"><a id="__codelineno-95-1" name="__codelineno-95-1"></a><a href="#__codelineno-95-1"><span class="linenos" data-linenos=" 1 "></span></a><span class="k">module</span><span class="w"> </span><span class="n">top_module</span><span class="w"> </span><span class="p">(</span>
</span><span id="__span-95-2"><a id="__codelineno-95-2" name="__codelineno-95-2"></a><a href="#__codelineno-95-2"><span class="linenos" data-linenos=" 2 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">clk</span><span class="p">,</span>
</span><span id="__span-95-3"><a id="__codelineno-95-3" name="__codelineno-95-3"></a><a href="#__codelineno-95-3"><span class="linenos" data-linenos=" 3 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="p">[</span><span class="mh">7</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">in</span><span class="p">,</span>
</span><span id="__span-95-4"><a id="__codelineno-95-4" name="__codelineno-95-4"></a><a href="#__codelineno-95-4"><span class="linenos" data-linenos=" 4 "></span></a><span class="w">    </span><span class="k">output</span><span class="w"> </span><span class="kt">reg</span><span class="w"> </span><span class="p">[</span><span class="mh">7</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">anyedge</span>
</span><span id="__span-95-5"><a id="__codelineno-95-5" name="__codelineno-95-5"></a><a href="#__codelineno-95-5"><span class="linenos" data-linenos=" 5 "></span></a><span class="p">);</span>
</span><span id="__span-95-6"><a id="__codelineno-95-6" name="__codelineno-95-6"></a><a href="#__codelineno-95-6"><span class="linenos" data-linenos=" 6 "></span></a><span class="w">    </span><span class="kt">reg</span><span class="w"> </span><span class="p">[</span><span class="mh">7</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">in_prev</span><span class="p">;</span>
</span><span id="__span-95-7"><a id="__codelineno-95-7" name="__codelineno-95-7"></a><a href="#__codelineno-95-7"><span class="linenos" data-linenos=" 7 "></span></a><span class="w">    </span><span class="k">always</span><span class="p">@(</span><span class="k">posedge</span><span class="w"> </span><span class="n">clk</span><span class="p">)</span><span class="k">begin</span>
</span><span id="__span-95-8"><a id="__codelineno-95-8" name="__codelineno-95-8"></a><a href="#__codelineno-95-8"><span class="linenos" data-linenos=" 8 "></span></a><span class="w">        </span><span class="n">in_prev</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">in</span><span class="p">;</span>
</span><span id="__span-95-9"><a id="__codelineno-95-9" name="__codelineno-95-9"></a><a href="#__codelineno-95-9"><span class="linenos" data-linenos=" 9 "></span></a><span class="w">        </span><span class="n">anyedge</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">in</span><span class="w"> </span><span class="o">^</span><span class="w"> </span><span class="n">in_prev</span><span class="p">;</span>
</span><span id="__span-95-10"><a id="__codelineno-95-10" name="__codelineno-95-10"></a><a href="#__codelineno-95-10"><span class="linenos" data-linenos="10 "></span></a><span class="w">    </span><span class="k">end</span>
</span><span id="__span-95-11"><a id="__codelineno-95-11" name="__codelineno-95-11"></a><a href="#__codelineno-95-11"><span class="linenos" data-linenos="11 "></span></a><span class="k">endmodule</span>
</span></code></pre></div></p>
<hr />
<h5 id="edge-capture-register">Edge capture register<a class="headerlink" href="#edge-capture-register" title="Anchor link to this section for reference">⚓︎</a></h5>
<p>Website: <a href="https://hdlbits.01xz.net/wiki/Edgecapture" target="_blank">https://hdlbits.01xz.net/wiki/Edgecapture</a></p>
<p>這題最難的地方就是將edge detection變成edge capture，最簡單的做法就是多or上回合的output。
<div class="language-verilog highlight"><span class="filename">Verilog</span><pre><span></span><code><span id="__span-96-1"><a id="__codelineno-96-1" name="__codelineno-96-1"></a><a href="#__codelineno-96-1"><span class="linenos" data-linenos=" 1 "></span></a><span class="k">module</span><span class="w"> </span><span class="n">top_module</span><span class="w"> </span><span class="p">(</span>
</span><span id="__span-96-2"><a id="__codelineno-96-2" name="__codelineno-96-2"></a><a href="#__codelineno-96-2"><span class="linenos" data-linenos=" 2 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">clk</span><span class="p">,</span>
</span><span id="__span-96-3"><a id="__codelineno-96-3" name="__codelineno-96-3"></a><a href="#__codelineno-96-3"><span class="linenos" data-linenos=" 3 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">reset</span><span class="p">,</span>
</span><span id="__span-96-4"><a id="__codelineno-96-4" name="__codelineno-96-4"></a><a href="#__codelineno-96-4"><span class="linenos" data-linenos=" 4 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="p">[</span><span class="mh">31</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">in</span><span class="p">,</span>
</span><span id="__span-96-5"><a id="__codelineno-96-5" name="__codelineno-96-5"></a><a href="#__codelineno-96-5"><span class="linenos" data-linenos=" 5 "></span></a><span class="w">    </span><span class="k">output</span><span class="w"> </span><span class="kt">reg</span><span class="w"> </span><span class="p">[</span><span class="mh">31</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">out</span>
</span><span id="__span-96-6"><a id="__codelineno-96-6" name="__codelineno-96-6"></a><a href="#__codelineno-96-6"><span class="linenos" data-linenos=" 6 "></span></a><span class="p">);</span>
</span><span id="__span-96-7"><a id="__codelineno-96-7" name="__codelineno-96-7"></a><a href="#__codelineno-96-7"><span class="linenos" data-linenos=" 7 "></span></a><span class="w">    </span><span class="kt">reg</span><span class="w"> </span><span class="p">[</span><span class="mh">31</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">in_prev</span><span class="p">;</span>
</span><span id="__span-96-8"><a id="__codelineno-96-8" name="__codelineno-96-8"></a><a href="#__codelineno-96-8"><span class="linenos" data-linenos=" 8 "></span></a><span class="w">    </span><span class="k">always</span><span class="p">@(</span><span class="k">posedge</span><span class="w"> </span><span class="n">clk</span><span class="p">)</span><span class="k">begin</span>
</span><span id="__span-96-9"><a id="__codelineno-96-9" name="__codelineno-96-9"></a><a href="#__codelineno-96-9"><span class="linenos" data-linenos=" 9 "></span></a><span class="w">        </span><span class="n">in_prev</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">in</span><span class="p">;</span>
</span><span id="__span-96-10"><a id="__codelineno-96-10" name="__codelineno-96-10"></a><a href="#__codelineno-96-10"><span class="linenos" data-linenos="10 "></span></a><span class="w">        </span><span class="k">if</span><span class="p">(</span><span class="n">reset</span><span class="p">)</span>
</span><span id="__span-96-11"><a id="__codelineno-96-11" name="__codelineno-96-11"></a><a href="#__codelineno-96-11"><span class="linenos" data-linenos="11 "></span></a><span class="w">            </span><span class="n">out</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="mh">32&#39;h0000</span><span class="n">_0000</span><span class="p">;</span>
</span><span id="__span-96-12"><a id="__codelineno-96-12" name="__codelineno-96-12"></a><a href="#__codelineno-96-12"><span class="linenos" data-linenos="12 "></span></a><span class="w">        </span><span class="k">else</span><span class="w"> </span><span class="k">begin</span>
</span><span id="__span-96-13"><a id="__codelineno-96-13" name="__codelineno-96-13"></a><a href="#__codelineno-96-13"><span class="linenos" data-linenos="13 "></span></a><span class="w">            </span><span class="n">out</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="o">~</span><span class="n">in</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="n">in_prev</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">out</span><span class="p">;</span>
</span><span id="__span-96-14"><a id="__codelineno-96-14" name="__codelineno-96-14"></a><a href="#__codelineno-96-14"><span class="linenos" data-linenos="14 "></span></a><span class="w">        </span><span class="k">end</span>
</span><span id="__span-96-15"><a id="__codelineno-96-15" name="__codelineno-96-15"></a><a href="#__codelineno-96-15"><span class="linenos" data-linenos="15 "></span></a><span class="w">    </span><span class="k">end</span>
</span><span id="__span-96-16"><a id="__codelineno-96-16" name="__codelineno-96-16"></a><a href="#__codelineno-96-16"><span class="linenos" data-linenos="16 "></span></a><span class="k">endmodule</span>
</span></code></pre></div></p>
<hr />
<h5 id="dual-edge-triggered-flip-flop">Dual-edge triggered flip-flop<a class="headerlink" href="#dual-edge-triggered-flip-flop" title="Anchor link to this section for reference">⚓︎</a></h5>
<p>Website: <a href="https://hdlbits.01xz.net/wiki/Dualedge" target="_blank">https://hdlbits.01xz.net/wiki/Dualedge</a></p>
<p>這題我直接查解答，這個電路設計也太酷。
<div class="language-verilog highlight"><span class="filename">Verilog</span><pre><span></span><code><span id="__span-97-1"><a id="__codelineno-97-1" name="__codelineno-97-1"></a><a href="#__codelineno-97-1"><span class="linenos" data-linenos=" 1 "></span></a><span class="k">module</span><span class="w"> </span><span class="n">top_module</span><span class="w"> </span><span class="p">(</span>
</span><span id="__span-97-2"><a id="__codelineno-97-2" name="__codelineno-97-2"></a><a href="#__codelineno-97-2"><span class="linenos" data-linenos=" 2 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">clk</span><span class="p">,</span>
</span><span id="__span-97-3"><a id="__codelineno-97-3" name="__codelineno-97-3"></a><a href="#__codelineno-97-3"><span class="linenos" data-linenos=" 3 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">d</span><span class="p">,</span>
</span><span id="__span-97-4"><a id="__codelineno-97-4" name="__codelineno-97-4"></a><a href="#__codelineno-97-4"><span class="linenos" data-linenos=" 4 "></span></a><span class="w">    </span><span class="k">output</span><span class="w"> </span><span class="n">q</span>
</span><span id="__span-97-5"><a id="__codelineno-97-5" name="__codelineno-97-5"></a><a href="#__codelineno-97-5"><span class="linenos" data-linenos=" 5 "></span></a><span class="p">);</span>
</span><span id="__span-97-6"><a id="__codelineno-97-6" name="__codelineno-97-6"></a><a href="#__codelineno-97-6"><span class="linenos" data-linenos=" 6 "></span></a><span class="w">    </span><span class="c1">// Why does this work? </span>
</span><span id="__span-97-7"><a id="__codelineno-97-7" name="__codelineno-97-7"></a><a href="#__codelineno-97-7"><span class="linenos" data-linenos=" 7 "></span></a><span class="w">    </span><span class="c1">// After posedge clk, p changes to d^n. Thus q = (p^n) = (d^n^n) = d.</span>
</span><span id="__span-97-8"><a id="__codelineno-97-8" name="__codelineno-97-8"></a><a href="#__codelineno-97-8"><span class="linenos" data-linenos=" 8 "></span></a><span class="w">    </span><span class="c1">// After negedge clk, n changes to p^n. Thus q = (p^n) = (p^d^p) = d.</span>
</span><span id="__span-97-9"><a id="__codelineno-97-9" name="__codelineno-97-9"></a><a href="#__codelineno-97-9"><span class="linenos" data-linenos=" 9 "></span></a><span class="w">    </span><span class="kt">reg</span><span class="w"> </span><span class="n">r1</span><span class="p">,</span><span class="w"> </span><span class="n">r2</span><span class="p">;</span>
</span><span id="__span-97-10"><a id="__codelineno-97-10" name="__codelineno-97-10"></a><a href="#__codelineno-97-10"><span class="linenos" data-linenos="10 "></span></a><span class="w">    </span><span class="k">assign</span><span class="w"> </span><span class="n">q</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">r1</span><span class="w"> </span><span class="o">^</span><span class="w"> </span><span class="n">r2</span><span class="p">;</span>
</span><span id="__span-97-11"><a id="__codelineno-97-11" name="__codelineno-97-11"></a><a href="#__codelineno-97-11"><span class="linenos" data-linenos="11 "></span></a><span class="w">    </span><span class="k">always</span><span class="p">@(</span><span class="k">posedge</span><span class="w"> </span><span class="n">clk</span><span class="p">)</span><span class="w"> </span><span class="n">r1</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">r2</span><span class="w"> </span><span class="o">^</span><span class="w"> </span><span class="n">d</span><span class="p">;</span>
</span><span id="__span-97-12"><a id="__codelineno-97-12" name="__codelineno-97-12"></a><a href="#__codelineno-97-12"><span class="linenos" data-linenos="12 "></span></a><span class="w">    </span><span class="k">always</span><span class="p">@(</span><span class="k">negedge</span><span class="w"> </span><span class="n">clk</span><span class="p">)</span><span class="w"> </span><span class="n">r2</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">r1</span><span class="w"> </span><span class="o">^</span><span class="w"> </span><span class="n">d</span><span class="p">;</span>
</span><span id="__span-97-13"><a id="__codelineno-97-13" name="__codelineno-97-13"></a><a href="#__codelineno-97-13"><span class="linenos" data-linenos="13 "></span></a><span class="k">endmodule</span>
</span></code></pre></div></p>
<hr />
<h4 id="counters">Counters<a class="headerlink" href="#counters" title="Anchor link to this section for reference">⚓︎</a></h4>
<h5 id="four-bit-binary-counter">Four-bit binary counter<a class="headerlink" href="#four-bit-binary-counter" title="Anchor link to this section for reference">⚓︎</a></h5>
<p>Website: <a href="https://hdlbits.01xz.net/wiki/Count15" target="_blank">https://hdlbits.01xz.net/wiki/Count15</a></p>
<p>這題就是用always來計數。
<div class="language-verilog highlight"><span class="filename">Verilog</span><pre><span></span><code><span id="__span-98-1"><a id="__codelineno-98-1" name="__codelineno-98-1"></a><a href="#__codelineno-98-1"><span class="linenos" data-linenos="1 "></span></a><span class="k">module</span><span class="w"> </span><span class="n">top_module</span><span class="w"> </span><span class="p">(</span>
</span><span id="__span-98-2"><a id="__codelineno-98-2" name="__codelineno-98-2"></a><a href="#__codelineno-98-2"><span class="linenos" data-linenos="2 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">clk</span><span class="p">,</span>
</span><span id="__span-98-3"><a id="__codelineno-98-3" name="__codelineno-98-3"></a><a href="#__codelineno-98-3"><span class="linenos" data-linenos="3 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">reset</span><span class="p">,</span><span class="w">      </span><span class="c1">// Synchronous active-high reset</span>
</span><span id="__span-98-4"><a id="__codelineno-98-4" name="__codelineno-98-4"></a><a href="#__codelineno-98-4"><span class="linenos" data-linenos="4 "></span></a><span class="w">    </span><span class="k">output</span><span class="w"> </span><span class="kt">reg</span><span class="p">[</span><span class="mh">3</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">q</span><span class="p">);</span>
</span><span id="__span-98-5"><a id="__codelineno-98-5" name="__codelineno-98-5"></a><a href="#__codelineno-98-5"><span class="linenos" data-linenos="5 "></span></a><span class="w">    </span><span class="k">always</span><span class="p">@(</span><span class="k">posedge</span><span class="w"> </span><span class="n">clk</span><span class="p">)</span><span class="k">begin</span>
</span><span id="__span-98-6"><a id="__codelineno-98-6" name="__codelineno-98-6"></a><a href="#__codelineno-98-6"><span class="linenos" data-linenos="6 "></span></a><span class="w">        </span><span class="k">if</span><span class="p">(</span><span class="n">reset</span><span class="p">)</span><span class="w"> </span><span class="n">q</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="mh">4</span><span class="mb">&#39;b0000</span><span class="p">;</span>
</span><span id="__span-98-7"><a id="__codelineno-98-7" name="__codelineno-98-7"></a><a href="#__codelineno-98-7"><span class="linenos" data-linenos="7 "></span></a><span class="w">        </span><span class="k">else</span><span class="w"> </span><span class="n">q</span><span class="o">&lt;=</span><span class="w"> </span><span class="n">q</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mh">4</span><span class="mb">&#39;b0001</span><span class="p">;</span>
</span><span id="__span-98-8"><a id="__codelineno-98-8" name="__codelineno-98-8"></a><a href="#__codelineno-98-8"><span class="linenos" data-linenos="8 "></span></a><span class="w">    </span><span class="k">end</span>
</span><span id="__span-98-9"><a id="__codelineno-98-9" name="__codelineno-98-9"></a><a href="#__codelineno-98-9"><span class="linenos" data-linenos="9 "></span></a><span class="k">endmodule</span>
</span></code></pre></div></p>
<hr />
<h5 id="decade-counter">Decade counter<a class="headerlink" href="#decade-counter" title="Anchor link to this section for reference">⚓︎</a></h5>
<p>Website: <a href="https://hdlbits.01xz.net/wiki/Count10" target="_blank">https://hdlbits.01xz.net/wiki/Count10</a></p>
<p>這題就是用always來計數，只是數到9，多一個條件。
<div class="language-verilog highlight"><span class="filename">Verilog</span><pre><span></span><code><span id="__span-99-1"><a id="__codelineno-99-1" name="__codelineno-99-1"></a><a href="#__codelineno-99-1"><span class="linenos" data-linenos=" 1 "></span></a><span class="k">module</span><span class="w"> </span><span class="n">top_module</span><span class="w"> </span><span class="p">(</span>
</span><span id="__span-99-2"><a id="__codelineno-99-2" name="__codelineno-99-2"></a><a href="#__codelineno-99-2"><span class="linenos" data-linenos=" 2 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">clk</span><span class="p">,</span>
</span><span id="__span-99-3"><a id="__codelineno-99-3" name="__codelineno-99-3"></a><a href="#__codelineno-99-3"><span class="linenos" data-linenos=" 3 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">reset</span><span class="p">,</span><span class="w">        </span><span class="c1">// Synchronous active-high reset</span>
</span><span id="__span-99-4"><a id="__codelineno-99-4" name="__codelineno-99-4"></a><a href="#__codelineno-99-4"><span class="linenos" data-linenos=" 4 "></span></a><span class="w">    </span><span class="k">output</span><span class="w"> </span><span class="kt">reg</span><span class="p">[</span><span class="mh">3</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">q</span><span class="p">);</span>
</span><span id="__span-99-5"><a id="__codelineno-99-5" name="__codelineno-99-5"></a><a href="#__codelineno-99-5"><span class="linenos" data-linenos=" 5 "></span></a><span class="w">    </span><span class="k">always</span><span class="p">@(</span><span class="k">posedge</span><span class="w"> </span><span class="n">clk</span><span class="p">)</span><span class="k">begin</span>
</span><span id="__span-99-6"><a id="__codelineno-99-6" name="__codelineno-99-6"></a><a href="#__codelineno-99-6"><span class="linenos" data-linenos=" 6 "></span></a><span class="w">        </span><span class="k">if</span><span class="p">(</span><span class="n">reset</span><span class="p">)</span><span class="w"> </span><span class="n">q</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="mh">4</span><span class="mb">&#39;b0000</span><span class="p">;</span>
</span><span id="__span-99-7"><a id="__codelineno-99-7" name="__codelineno-99-7"></a><a href="#__codelineno-99-7"><span class="linenos" data-linenos=" 7 "></span></a><span class="w">        </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="p">(</span><span class="n">q</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mh">4</span><span class="mb">&#39;b1001</span><span class="p">)</span><span class="w"> </span><span class="n">q</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="mh">4</span><span class="mb">&#39;b0000</span><span class="p">;</span>
</span><span id="__span-99-8"><a id="__codelineno-99-8" name="__codelineno-99-8"></a><a href="#__codelineno-99-8"><span class="linenos" data-linenos=" 8 "></span></a><span class="w">        </span><span class="k">else</span><span class="w"> </span><span class="n">q</span><span class="o">&lt;=</span><span class="w"> </span><span class="n">q</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mh">4</span><span class="mb">&#39;b0001</span><span class="p">;</span>
</span><span id="__span-99-9"><a id="__codelineno-99-9" name="__codelineno-99-9"></a><a href="#__codelineno-99-9"><span class="linenos" data-linenos=" 9 "></span></a><span class="w">    </span><span class="k">end</span>
</span><span id="__span-99-10"><a id="__codelineno-99-10" name="__codelineno-99-10"></a><a href="#__codelineno-99-10"><span class="linenos" data-linenos="10 "></span></a><span class="k">endmodule</span>
</span></code></pre></div></p>
<hr />
<h5 id="decade-counter-again">Decade counter again<a class="headerlink" href="#decade-counter-again" title="Anchor link to this section for reference">⚓︎</a></h5>
<p>Website: <a href="https://hdlbits.01xz.net/wiki/Count1to10" target="_blank">https://hdlbits.01xz.net/wiki/Count1to10</a></p>
<p>這題就是用always來計數，只是變成從1數到10。
<div class="language-verilog highlight"><span class="filename">Verilog</span><pre><span></span><code><span id="__span-100-1"><a id="__codelineno-100-1" name="__codelineno-100-1"></a><a href="#__codelineno-100-1"><span class="linenos" data-linenos=" 1 "></span></a><span class="k">module</span><span class="w"> </span><span class="n">top_module</span><span class="w"> </span><span class="p">(</span>
</span><span id="__span-100-2"><a id="__codelineno-100-2" name="__codelineno-100-2"></a><a href="#__codelineno-100-2"><span class="linenos" data-linenos=" 2 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">clk</span><span class="p">,</span>
</span><span id="__span-100-3"><a id="__codelineno-100-3" name="__codelineno-100-3"></a><a href="#__codelineno-100-3"><span class="linenos" data-linenos=" 3 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">reset</span><span class="p">,</span>
</span><span id="__span-100-4"><a id="__codelineno-100-4" name="__codelineno-100-4"></a><a href="#__codelineno-100-4"><span class="linenos" data-linenos=" 4 "></span></a><span class="w">    </span><span class="k">output</span><span class="w"> </span><span class="kt">reg</span><span class="p">[</span><span class="mh">3</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">q</span><span class="p">);</span>
</span><span id="__span-100-5"><a id="__codelineno-100-5" name="__codelineno-100-5"></a><a href="#__codelineno-100-5"><span class="linenos" data-linenos=" 5 "></span></a><span class="w">    </span><span class="k">always</span><span class="p">@(</span><span class="k">posedge</span><span class="w"> </span><span class="n">clk</span><span class="p">)</span><span class="k">begin</span>
</span><span id="__span-100-6"><a id="__codelineno-100-6" name="__codelineno-100-6"></a><a href="#__codelineno-100-6"><span class="linenos" data-linenos=" 6 "></span></a><span class="w">        </span><span class="k">if</span><span class="p">(</span><span class="n">reset</span><span class="p">)</span><span class="w"> </span><span class="n">q</span><span class="w"> </span><span class="o">&lt;=</span><span class="mh">4</span><span class="mb">&#39;b0001</span><span class="p">;</span>
</span><span id="__span-100-7"><a id="__codelineno-100-7" name="__codelineno-100-7"></a><a href="#__codelineno-100-7"><span class="linenos" data-linenos=" 7 "></span></a><span class="w">        </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="p">(</span><span class="n">q</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mh">4</span><span class="mb">&#39;b1010</span><span class="p">)</span><span class="w"> </span><span class="n">q</span><span class="o">&lt;=</span><span class="mh">4</span><span class="mb">&#39;b0001</span><span class="p">;</span>
</span><span id="__span-100-8"><a id="__codelineno-100-8" name="__codelineno-100-8"></a><a href="#__codelineno-100-8"><span class="linenos" data-linenos=" 8 "></span></a><span class="w">        </span><span class="k">else</span><span class="w"> </span><span class="n">q</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">q</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mh">4</span><span class="mb">&#39;b0001</span><span class="p">;</span>
</span><span id="__span-100-9"><a id="__codelineno-100-9" name="__codelineno-100-9"></a><a href="#__codelineno-100-9"><span class="linenos" data-linenos=" 9 "></span></a><span class="w">    </span><span class="k">end</span>
</span><span id="__span-100-10"><a id="__codelineno-100-10" name="__codelineno-100-10"></a><a href="#__codelineno-100-10"><span class="linenos" data-linenos="10 "></span></a><span class="k">endmodule</span>
</span></code></pre></div></p>
<hr />
<h5 id="slow-decade-counter">Slow decade counter<a class="headerlink" href="#slow-decade-counter" title="Anchor link to this section for reference">⚓︎</a></h5>
<p>Website: <a href="https://hdlbits.01xz.net/wiki/Countslow" target="_blank">https://hdlbits.01xz.net/wiki/Countslow</a></p>
<p>這題跟上題差不多，只是變成用另一個輸入計數。
<div class="language-verilog highlight"><span class="filename">Verilog</span><pre><span></span><code><span id="__span-101-1"><a id="__codelineno-101-1" name="__codelineno-101-1"></a><a href="#__codelineno-101-1"><span class="linenos" data-linenos=" 1 "></span></a><span class="k">module</span><span class="w"> </span><span class="n">top_module</span><span class="w"> </span><span class="p">(</span>
</span><span id="__span-101-2"><a id="__codelineno-101-2" name="__codelineno-101-2"></a><a href="#__codelineno-101-2"><span class="linenos" data-linenos=" 2 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">clk</span><span class="p">,</span>
</span><span id="__span-101-3"><a id="__codelineno-101-3" name="__codelineno-101-3"></a><a href="#__codelineno-101-3"><span class="linenos" data-linenos=" 3 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">slowena</span><span class="p">,</span>
</span><span id="__span-101-4"><a id="__codelineno-101-4" name="__codelineno-101-4"></a><a href="#__codelineno-101-4"><span class="linenos" data-linenos=" 4 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">reset</span><span class="p">,</span>
</span><span id="__span-101-5"><a id="__codelineno-101-5" name="__codelineno-101-5"></a><a href="#__codelineno-101-5"><span class="linenos" data-linenos=" 5 "></span></a><span class="w">    </span><span class="k">output</span><span class="w"> </span><span class="kt">reg</span><span class="p">[</span><span class="mh">3</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">q</span><span class="p">);</span>
</span><span id="__span-101-6"><a id="__codelineno-101-6" name="__codelineno-101-6"></a><a href="#__codelineno-101-6"><span class="linenos" data-linenos=" 6 "></span></a><span class="w">    </span><span class="k">always</span><span class="p">@(</span><span class="k">posedge</span><span class="w"> </span><span class="n">clk</span><span class="p">)</span><span class="k">begin</span>
</span><span id="__span-101-7"><a id="__codelineno-101-7" name="__codelineno-101-7"></a><a href="#__codelineno-101-7"><span class="linenos" data-linenos=" 7 "></span></a><span class="w">        </span><span class="k">if</span><span class="p">(</span><span class="n">reset</span><span class="p">)</span><span class="w"> </span><span class="n">q</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="mh">4</span><span class="mb">&#39;b0000</span><span class="p">;</span>
</span><span id="__span-101-8"><a id="__codelineno-101-8" name="__codelineno-101-8"></a><a href="#__codelineno-101-8"><span class="linenos" data-linenos=" 8 "></span></a><span class="w">        </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="p">(</span><span class="n">slowena</span><span class="p">)</span><span class="k">begin</span>
</span><span id="__span-101-9"><a id="__codelineno-101-9" name="__codelineno-101-9"></a><a href="#__codelineno-101-9"><span class="linenos" data-linenos=" 9 "></span></a><span class="w">            </span><span class="k">if</span><span class="p">(</span><span class="n">q</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mh">4</span><span class="mb">&#39;b1001</span><span class="p">)</span><span class="w"> </span><span class="n">q</span><span class="o">&lt;=</span><span class="w"> </span><span class="mh">4</span><span class="mb">&#39;b0000</span><span class="p">;</span>
</span><span id="__span-101-10"><a id="__codelineno-101-10" name="__codelineno-101-10"></a><a href="#__codelineno-101-10"><span class="linenos" data-linenos="10 "></span></a><span class="w">            </span><span class="k">else</span><span class="w"> </span><span class="n">q</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">q</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mh">4</span><span class="mb">&#39;b0001</span><span class="p">;</span>
</span><span id="__span-101-11"><a id="__codelineno-101-11" name="__codelineno-101-11"></a><a href="#__codelineno-101-11"><span class="linenos" data-linenos="11 "></span></a><span class="w">        </span><span class="k">end</span>
</span><span id="__span-101-12"><a id="__codelineno-101-12" name="__codelineno-101-12"></a><a href="#__codelineno-101-12"><span class="linenos" data-linenos="12 "></span></a><span class="w">        </span><span class="k">else</span><span class="w"> </span><span class="n">q</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">q</span><span class="p">;</span>
</span><span id="__span-101-13"><a id="__codelineno-101-13" name="__codelineno-101-13"></a><a href="#__codelineno-101-13"><span class="linenos" data-linenos="13 "></span></a><span class="w">    </span><span class="k">end</span>
</span><span id="__span-101-14"><a id="__codelineno-101-14" name="__codelineno-101-14"></a><a href="#__codelineno-101-14"><span class="linenos" data-linenos="14 "></span></a><span class="k">endmodule</span>
</span></code></pre></div></p>
<hr />
<h5 id="counter-1-12">Counter 1-12<a class="headerlink" href="#counter-1-12" title="Anchor link to this section for reference">⚓︎</a></h5>
<p>Website: <a href="https://hdlbits.01xz.net/wiki/Exams/ece241_2014_q7a" target="_blank">https://hdlbits.01xz.net/wiki/Exams/ece241_2014_q7a</a></p>
<p>這題給了完整的計數器，然後要求外接控制reset和數到12。
<div class="language-verilog highlight"><span class="filename">Verilog</span><pre><span></span><code><span id="__span-102-1"><a id="__codelineno-102-1" name="__codelineno-102-1"></a><a href="#__codelineno-102-1"><span class="linenos" data-linenos=" 1 "></span></a><span class="k">module</span><span class="w"> </span><span class="n">top_module</span><span class="w"> </span><span class="p">(</span>
</span><span id="__span-102-2"><a id="__codelineno-102-2" name="__codelineno-102-2"></a><a href="#__codelineno-102-2"><span class="linenos" data-linenos=" 2 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">clk</span><span class="p">,</span>
</span><span id="__span-102-3"><a id="__codelineno-102-3" name="__codelineno-102-3"></a><a href="#__codelineno-102-3"><span class="linenos" data-linenos=" 3 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">reset</span><span class="p">,</span>
</span><span id="__span-102-4"><a id="__codelineno-102-4" name="__codelineno-102-4"></a><a href="#__codelineno-102-4"><span class="linenos" data-linenos=" 4 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">enable</span><span class="p">,</span>
</span><span id="__span-102-5"><a id="__codelineno-102-5" name="__codelineno-102-5"></a><a href="#__codelineno-102-5"><span class="linenos" data-linenos=" 5 "></span></a><span class="w">    </span><span class="k">output</span><span class="w"> </span><span class="p">[</span><span class="mh">3</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">Q</span><span class="p">,</span>
</span><span id="__span-102-6"><a id="__codelineno-102-6" name="__codelineno-102-6"></a><a href="#__codelineno-102-6"><span class="linenos" data-linenos=" 6 "></span></a><span class="w">    </span><span class="k">output</span><span class="w"> </span><span class="n">c_enable</span><span class="p">,</span>
</span><span id="__span-102-7"><a id="__codelineno-102-7" name="__codelineno-102-7"></a><a href="#__codelineno-102-7"><span class="linenos" data-linenos=" 7 "></span></a><span class="w">    </span><span class="k">output</span><span class="w"> </span><span class="n">c_load</span><span class="p">,</span>
</span><span id="__span-102-8"><a id="__codelineno-102-8" name="__codelineno-102-8"></a><a href="#__codelineno-102-8"><span class="linenos" data-linenos=" 8 "></span></a><span class="w">    </span><span class="k">output</span><span class="w"> </span><span class="p">[</span><span class="mh">3</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">c_d</span>
</span><span id="__span-102-9"><a id="__codelineno-102-9" name="__codelineno-102-9"></a><a href="#__codelineno-102-9"><span class="linenos" data-linenos=" 9 "></span></a><span class="p">);</span><span class="w"> </span><span class="c1">//</span>
</span><span id="__span-102-10"><a id="__codelineno-102-10" name="__codelineno-102-10"></a><a href="#__codelineno-102-10"><span class="linenos" data-linenos="10 "></span></a><span class="w">    </span><span class="k">assign</span><span class="w"> </span><span class="n">c_enable</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">enable</span><span class="p">;</span>
</span><span id="__span-102-11"><a id="__codelineno-102-11" name="__codelineno-102-11"></a><a href="#__codelineno-102-11"><span class="linenos" data-linenos="11 "></span></a><span class="w">    </span><span class="k">assign</span><span class="w"> </span><span class="n">c_load</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">reset</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="p">(</span><span class="n">enable</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="p">(</span><span class="n">Q</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mh">4</span><span class="mb">&#39;b1100</span><span class="p">));</span>
</span><span id="__span-102-12"><a id="__codelineno-102-12" name="__codelineno-102-12"></a><a href="#__codelineno-102-12"><span class="linenos" data-linenos="12 "></span></a><span class="w">    </span><span class="k">assign</span><span class="w"> </span><span class="n">c_d</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">4</span><span class="mb">&#39;b0001</span><span class="p">;</span>
</span><span id="__span-102-13"><a id="__codelineno-102-13" name="__codelineno-102-13"></a><a href="#__codelineno-102-13"><span class="linenos" data-linenos="13 "></span></a><span class="w">    </span><span class="n">count4</span><span class="w"> </span><span class="n">the_counter</span><span class="w"> </span><span class="p">(</span><span class="n">clk</span><span class="p">,</span><span class="w"> </span><span class="n">c_enable</span><span class="p">,</span><span class="w"> </span><span class="n">c_load</span><span class="p">,</span><span class="w"> </span><span class="n">c_d</span><span class="w"> </span><span class="p">,</span><span class="n">Q</span><span class="p">);</span>
</span><span id="__span-102-14"><a id="__codelineno-102-14" name="__codelineno-102-14"></a><a href="#__codelineno-102-14"><span class="linenos" data-linenos="14 "></span></a><span class="k">endmodule</span>
</span></code></pre></div></p>
<hr />
<h5 id="counter-1000">Counter 1000<a class="headerlink" href="#counter-1000" title="Anchor link to this section for reference">⚓︎</a></h5>
<p>Website: <a href="https://hdlbits.01xz.net/wiki/Exams/ece241_2014_q7b" target="_blank">https://hdlbits.01xz.net/wiki/Exams/ece241_2014_q7b</a></p>
<p>這題給了BCD counter，然後要連續接3個BCD counter數到1000。
<div class="language-verilog highlight"><span class="filename">Verilog</span><pre><span></span><code><span id="__span-103-1"><a id="__codelineno-103-1" name="__codelineno-103-1"></a><a href="#__codelineno-103-1"><span class="linenos" data-linenos=" 1 "></span></a><span class="k">module</span><span class="w"> </span><span class="n">top_module</span><span class="w"> </span><span class="p">(</span>
</span><span id="__span-103-2"><a id="__codelineno-103-2" name="__codelineno-103-2"></a><a href="#__codelineno-103-2"><span class="linenos" data-linenos=" 2 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">clk</span><span class="p">,</span>
</span><span id="__span-103-3"><a id="__codelineno-103-3" name="__codelineno-103-3"></a><a href="#__codelineno-103-3"><span class="linenos" data-linenos=" 3 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">reset</span><span class="p">,</span>
</span><span id="__span-103-4"><a id="__codelineno-103-4" name="__codelineno-103-4"></a><a href="#__codelineno-103-4"><span class="linenos" data-linenos=" 4 "></span></a><span class="w">    </span><span class="k">output</span><span class="w"> </span><span class="n">OneHertz</span><span class="p">,</span>
</span><span id="__span-103-5"><a id="__codelineno-103-5" name="__codelineno-103-5"></a><a href="#__codelineno-103-5"><span class="linenos" data-linenos=" 5 "></span></a><span class="w">    </span><span class="k">output</span><span class="w"> </span><span class="p">[</span><span class="mh">2</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">c_enable</span>
</span><span id="__span-103-6"><a id="__codelineno-103-6" name="__codelineno-103-6"></a><a href="#__codelineno-103-6"><span class="linenos" data-linenos=" 6 "></span></a><span class="p">);</span><span class="w"> </span><span class="c1">//</span>
</span><span id="__span-103-7"><a id="__codelineno-103-7" name="__codelineno-103-7"></a><a href="#__codelineno-103-7"><span class="linenos" data-linenos=" 7 "></span></a><span class="w">    </span><span class="kt">wire</span><span class="w"> </span><span class="p">[</span><span class="mh">3</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">one</span><span class="p">,</span><span class="w"> </span><span class="n">ten</span><span class="p">,</span><span class="w"> </span><span class="n">hundred</span><span class="p">;</span>
</span><span id="__span-103-8"><a id="__codelineno-103-8" name="__codelineno-103-8"></a><a href="#__codelineno-103-8"><span class="linenos" data-linenos=" 8 "></span></a><span class="w">    </span><span class="kt">wire</span><span class="w"> </span><span class="n">is_ten</span><span class="p">,</span><span class="w"> </span><span class="n">is_hundred</span><span class="p">;</span>
</span><span id="__span-103-9"><a id="__codelineno-103-9" name="__codelineno-103-9"></a><a href="#__codelineno-103-9"><span class="linenos" data-linenos=" 9 "></span></a><span class="w">    </span><span class="k">assign</span><span class="w"> </span><span class="n">is_ten</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">one</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mh">4</span><span class="mb">&#39;b1001</span><span class="p">);</span>
</span><span id="__span-103-10"><a id="__codelineno-103-10" name="__codelineno-103-10"></a><a href="#__codelineno-103-10"><span class="linenos" data-linenos="10 "></span></a><span class="w">    </span><span class="k">assign</span><span class="w"> </span><span class="n">is_hundred</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">is_ten</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="p">(</span><span class="n">ten</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mh">4</span><span class="mb">&#39;b1001</span><span class="p">);</span>
</span><span id="__span-103-11"><a id="__codelineno-103-11" name="__codelineno-103-11"></a><a href="#__codelineno-103-11"><span class="linenos" data-linenos="11 "></span></a><span class="w">    </span><span class="k">assign</span><span class="w"> </span><span class="n">c_enable</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="n">is_hundred</span><span class="p">,</span><span class="n">is_ten</span><span class="p">,</span><span class="mh">1</span><span class="mb">&#39;b1</span><span class="p">};</span>
</span><span id="__span-103-12"><a id="__codelineno-103-12" name="__codelineno-103-12"></a><a href="#__codelineno-103-12"><span class="linenos" data-linenos="12 "></span></a><span class="w">    </span><span class="k">assign</span><span class="w"> </span><span class="n">OneHertz</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">is_hundred</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="p">(</span><span class="n">hundred</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mh">4</span><span class="mb">&#39;b1001</span><span class="p">);</span>
</span><span id="__span-103-13"><a id="__codelineno-103-13" name="__codelineno-103-13"></a><a href="#__codelineno-103-13"><span class="linenos" data-linenos="13 "></span></a><span class="w">    </span><span class="n">bcdcount</span><span class="w"> </span><span class="n">counter0</span><span class="w"> </span><span class="p">(</span><span class="n">clk</span><span class="p">,</span><span class="w"> </span><span class="n">reset</span><span class="p">,</span><span class="w"> </span><span class="n">c_enable</span><span class="p">[</span><span class="mh">0</span><span class="p">],</span><span class="w"> </span><span class="n">one</span><span class="p">);</span>
</span><span id="__span-103-14"><a id="__codelineno-103-14" name="__codelineno-103-14"></a><a href="#__codelineno-103-14"><span class="linenos" data-linenos="14 "></span></a><span class="w">    </span><span class="n">bcdcount</span><span class="w"> </span><span class="n">counter1</span><span class="w"> </span><span class="p">(</span><span class="n">clk</span><span class="p">,</span><span class="w"> </span><span class="n">reset</span><span class="p">,</span><span class="w"> </span><span class="n">c_enable</span><span class="p">[</span><span class="mh">1</span><span class="p">],</span><span class="w"> </span><span class="n">ten</span><span class="p">);</span>
</span><span id="__span-103-15"><a id="__codelineno-103-15" name="__codelineno-103-15"></a><a href="#__codelineno-103-15"><span class="linenos" data-linenos="15 "></span></a><span class="w">    </span><span class="n">bcdcount</span><span class="w"> </span><span class="n">counter2</span><span class="w"> </span><span class="p">(</span><span class="n">clk</span><span class="p">,</span><span class="w"> </span><span class="n">reset</span><span class="p">,</span><span class="w"> </span><span class="n">c_enable</span><span class="p">[</span><span class="mh">2</span><span class="p">],</span><span class="w"> </span><span class="n">hundred</span><span class="p">);</span>
</span><span id="__span-103-16"><a id="__codelineno-103-16" name="__codelineno-103-16"></a><a href="#__codelineno-103-16"><span class="linenos" data-linenos="16 "></span></a><span class="k">endmodule</span>
</span></code></pre></div></p>
<hr />
<h5 id="4-digit-decimal-counter">4-digit decimal counter<a class="headerlink" href="#4-digit-decimal-counter" title="Anchor link to this section for reference">⚓︎</a></h5>
<p>Website: <a href="https://hdlbits.01xz.net/wiki/Countbcd" target="_blank">https://hdlbits.01xz.net/wiki/Countbcd</a></p>
<p>這題要自己刻一個BCD，然後要將4個BCD相接，數到9999。
<div class="language-verilog highlight"><span class="filename">Verilog</span><pre><span></span><code><span id="__span-104-1"><a id="__codelineno-104-1" name="__codelineno-104-1"></a><a href="#__codelineno-104-1"><span class="linenos" data-linenos=" 1 "></span></a><span class="k">module</span><span class="w"> </span><span class="n">top_module</span><span class="w"> </span><span class="p">(</span>
</span><span id="__span-104-2"><a id="__codelineno-104-2" name="__codelineno-104-2"></a><a href="#__codelineno-104-2"><span class="linenos" data-linenos=" 2 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">clk</span><span class="p">,</span>
</span><span id="__span-104-3"><a id="__codelineno-104-3" name="__codelineno-104-3"></a><a href="#__codelineno-104-3"><span class="linenos" data-linenos=" 3 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">reset</span><span class="p">,</span><span class="w">   </span><span class="c1">// Synchronous active-high reset</span>
</span><span id="__span-104-4"><a id="__codelineno-104-4" name="__codelineno-104-4"></a><a href="#__codelineno-104-4"><span class="linenos" data-linenos=" 4 "></span></a><span class="w">    </span><span class="k">output</span><span class="w"> </span><span class="p">[</span><span class="mh">3</span><span class="o">:</span><span class="mh">1</span><span class="p">]</span><span class="w"> </span><span class="n">ena</span><span class="p">,</span>
</span><span id="__span-104-5"><a id="__codelineno-104-5" name="__codelineno-104-5"></a><a href="#__codelineno-104-5"><span class="linenos" data-linenos=" 5 "></span></a><span class="w">    </span><span class="k">output</span><span class="w"> </span><span class="p">[</span><span class="mh">15</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">q</span><span class="p">);</span>
</span><span id="__span-104-6"><a id="__codelineno-104-6" name="__codelineno-104-6"></a><a href="#__codelineno-104-6"><span class="linenos" data-linenos=" 6 "></span></a><span class="w">    </span><span class="kt">wire</span><span class="w"> </span><span class="n">is_ten</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">is_hundred</span><span class="p">,</span><span class="w"> </span><span class="n">is_thousand</span><span class="p">;</span>
</span><span id="__span-104-7"><a id="__codelineno-104-7" name="__codelineno-104-7"></a><a href="#__codelineno-104-7"><span class="linenos" data-linenos=" 7 "></span></a><span class="w">    </span><span class="k">assign</span><span class="w"> </span><span class="n">is_ten</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">q</span><span class="p">[</span><span class="mh">3</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mh">4</span><span class="mb">&#39;b1001</span><span class="p">);</span>
</span><span id="__span-104-8"><a id="__codelineno-104-8" name="__codelineno-104-8"></a><a href="#__codelineno-104-8"><span class="linenos" data-linenos=" 8 "></span></a><span class="w">    </span><span class="k">assign</span><span class="w"> </span><span class="n">is_hundred</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">q</span><span class="p">[</span><span class="mh">7</span><span class="o">:</span><span class="mh">4</span><span class="p">]</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mh">4</span><span class="mb">&#39;b1001</span><span class="p">)</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="n">is_ten</span><span class="p">;</span>
</span><span id="__span-104-9"><a id="__codelineno-104-9" name="__codelineno-104-9"></a><a href="#__codelineno-104-9"><span class="linenos" data-linenos=" 9 "></span></a><span class="w">    </span><span class="k">assign</span><span class="w"> </span><span class="n">is_thousand</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">q</span><span class="p">[</span><span class="mh">11</span><span class="o">:</span><span class="mh">8</span><span class="p">]</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mh">4</span><span class="mb">&#39;b1001</span><span class="p">)</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="n">is_hundred</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="n">is_ten</span><span class="p">;</span>
</span><span id="__span-104-10"><a id="__codelineno-104-10" name="__codelineno-104-10"></a><a href="#__codelineno-104-10"><span class="linenos" data-linenos="10 "></span></a><span class="w">    </span><span class="k">assign</span><span class="w"> </span><span class="n">ena</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="n">is_thousand</span><span class="p">,</span><span class="w"> </span><span class="n">is_hundred</span><span class="p">,</span><span class="w"> </span><span class="n">is_ten</span><span class="p">};</span>
</span><span id="__span-104-11"><a id="__codelineno-104-11" name="__codelineno-104-11"></a><a href="#__codelineno-104-11"><span class="linenos" data-linenos="11 "></span></a><span class="w">    </span><span class="n">BCD</span><span class="w"> </span><span class="n">BCD0</span><span class="p">(.</span><span class="n">clk</span><span class="p">(</span><span class="n">clk</span><span class="p">),.</span><span class="n">reset</span><span class="p">(</span><span class="n">reset</span><span class="p">),.</span><span class="n">enable</span><span class="p">(</span><span class="w"> </span><span class="mh">1</span><span class="mb">&#39;b1</span><span class="w"> </span><span class="p">),.</span><span class="n">q</span><span class="p">(</span><span class="n">q</span><span class="p">[</span><span class="mh">3</span><span class="o">:</span><span class="mh">0</span><span class="p">]));</span>
</span><span id="__span-104-12"><a id="__codelineno-104-12" name="__codelineno-104-12"></a><a href="#__codelineno-104-12"><span class="linenos" data-linenos="12 "></span></a><span class="w">    </span><span class="n">BCD</span><span class="w"> </span><span class="n">BCD1</span><span class="p">(.</span><span class="n">clk</span><span class="p">(</span><span class="n">clk</span><span class="p">),.</span><span class="n">reset</span><span class="p">(</span><span class="n">reset</span><span class="p">),.</span><span class="n">enable</span><span class="p">(</span><span class="n">ena</span><span class="p">[</span><span class="mh">1</span><span class="p">]),.</span><span class="n">q</span><span class="p">(</span><span class="n">q</span><span class="p">[</span><span class="mh">7</span><span class="o">:</span><span class="mh">4</span><span class="p">]));</span>
</span><span id="__span-104-13"><a id="__codelineno-104-13" name="__codelineno-104-13"></a><a href="#__codelineno-104-13"><span class="linenos" data-linenos="13 "></span></a><span class="w">    </span><span class="n">BCD</span><span class="w"> </span><span class="n">BCD2</span><span class="p">(.</span><span class="n">clk</span><span class="p">(</span><span class="n">clk</span><span class="p">),.</span><span class="n">reset</span><span class="p">(</span><span class="n">reset</span><span class="p">),.</span><span class="n">enable</span><span class="p">(</span><span class="n">ena</span><span class="p">[</span><span class="mh">2</span><span class="p">]),.</span><span class="n">q</span><span class="p">(</span><span class="n">q</span><span class="p">[</span><span class="mh">11</span><span class="o">:</span><span class="mh">8</span><span class="p">]));</span>
</span><span id="__span-104-14"><a id="__codelineno-104-14" name="__codelineno-104-14"></a><a href="#__codelineno-104-14"><span class="linenos" data-linenos="14 "></span></a><span class="w">    </span><span class="n">BCD</span><span class="w"> </span><span class="n">BCD3</span><span class="p">(.</span><span class="n">clk</span><span class="p">(</span><span class="n">clk</span><span class="p">),.</span><span class="n">reset</span><span class="p">(</span><span class="n">reset</span><span class="p">),.</span><span class="n">enable</span><span class="p">(</span><span class="n">ena</span><span class="p">[</span><span class="mh">3</span><span class="p">]),.</span><span class="n">q</span><span class="p">(</span><span class="n">q</span><span class="p">[</span><span class="mh">15</span><span class="o">:</span><span class="mh">12</span><span class="p">]));</span>
</span><span id="__span-104-15"><a id="__codelineno-104-15" name="__codelineno-104-15"></a><a href="#__codelineno-104-15"><span class="linenos" data-linenos="15 "></span></a><span class="k">endmodule</span>
</span><span id="__span-104-16"><a id="__codelineno-104-16" name="__codelineno-104-16"></a><a href="#__codelineno-104-16"><span class="linenos" data-linenos="16 "></span></a>
</span><span id="__span-104-17"><a id="__codelineno-104-17" name="__codelineno-104-17"></a><a href="#__codelineno-104-17"><span class="linenos" data-linenos="17 "></span></a><span class="k">module</span><span class="w"> </span><span class="n">BCD</span><span class="p">(</span>
</span><span id="__span-104-18"><a id="__codelineno-104-18" name="__codelineno-104-18"></a><a href="#__codelineno-104-18"><span class="linenos" data-linenos="18 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">clk</span><span class="p">,</span>
</span><span id="__span-104-19"><a id="__codelineno-104-19" name="__codelineno-104-19"></a><a href="#__codelineno-104-19"><span class="linenos" data-linenos="19 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">reset</span><span class="p">,</span>
</span><span id="__span-104-20"><a id="__codelineno-104-20" name="__codelineno-104-20"></a><a href="#__codelineno-104-20"><span class="linenos" data-linenos="20 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">enable</span><span class="p">,</span>
</span><span id="__span-104-21"><a id="__codelineno-104-21" name="__codelineno-104-21"></a><a href="#__codelineno-104-21"><span class="linenos" data-linenos="21 "></span></a><span class="w">    </span><span class="k">output</span><span class="w"> </span><span class="kt">reg</span><span class="w"> </span><span class="p">[</span><span class="mh">4</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">q</span><span class="p">);</span>
</span><span id="__span-104-22"><a id="__codelineno-104-22" name="__codelineno-104-22"></a><a href="#__codelineno-104-22"><span class="linenos" data-linenos="22 "></span></a><span class="w">    </span><span class="k">always</span><span class="p">@(</span><span class="k">posedge</span><span class="w"> </span><span class="n">clk</span><span class="p">)</span><span class="k">begin</span>
</span><span id="__span-104-23"><a id="__codelineno-104-23" name="__codelineno-104-23"></a><a href="#__codelineno-104-23"><span class="linenos" data-linenos="23 "></span></a><span class="w">        </span><span class="k">if</span><span class="p">(</span><span class="n">reset</span><span class="p">)</span><span class="w"> </span><span class="n">q</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="mh">4</span><span class="mb">&#39;b0000</span><span class="p">;</span>
</span><span id="__span-104-24"><a id="__codelineno-104-24" name="__codelineno-104-24"></a><a href="#__codelineno-104-24"><span class="linenos" data-linenos="24 "></span></a><span class="w">        </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="p">(</span><span class="n">enable</span><span class="p">)</span><span class="k">begin</span>
</span><span id="__span-104-25"><a id="__codelineno-104-25" name="__codelineno-104-25"></a><a href="#__codelineno-104-25"><span class="linenos" data-linenos="25 "></span></a><span class="w">            </span><span class="k">if</span><span class="p">(</span><span class="n">q</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mh">4</span><span class="mb">&#39;b1001</span><span class="p">)</span><span class="w"> </span><span class="n">q</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="mh">4</span><span class="mb">&#39;b0000</span><span class="p">;</span>
</span><span id="__span-104-26"><a id="__codelineno-104-26" name="__codelineno-104-26"></a><a href="#__codelineno-104-26"><span class="linenos" data-linenos="26 "></span></a><span class="w">            </span><span class="k">else</span><span class="w"> </span><span class="n">q</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">q</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mh">4</span><span class="mb">&#39;b0001</span><span class="p">;</span>
</span><span id="__span-104-27"><a id="__codelineno-104-27" name="__codelineno-104-27"></a><a href="#__codelineno-104-27"><span class="linenos" data-linenos="27 "></span></a><span class="w">        </span><span class="k">end</span>
</span><span id="__span-104-28"><a id="__codelineno-104-28" name="__codelineno-104-28"></a><a href="#__codelineno-104-28"><span class="linenos" data-linenos="28 "></span></a><span class="w">        </span><span class="k">else</span><span class="w"> </span><span class="n">q</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">q</span><span class="p">;</span>
</span><span id="__span-104-29"><a id="__codelineno-104-29" name="__codelineno-104-29"></a><a href="#__codelineno-104-29"><span class="linenos" data-linenos="29 "></span></a><span class="w">    </span><span class="k">end</span>
</span><span id="__span-104-30"><a id="__codelineno-104-30" name="__codelineno-104-30"></a><a href="#__codelineno-104-30"><span class="linenos" data-linenos="30 "></span></a><span class="k">endmodule</span>
</span></code></pre></div></p>
<hr />
<h5 id="12-hour-clock">12-hour clock<a class="headerlink" href="#12-hour-clock" title="Anchor link to this section for reference">⚓︎</a></h5>
<p>Website: <a href="https://hdlbits.01xz.net/wiki/Count_clock" target="_blank">https://hdlbits.01xz.net/wiki/Count_clock</a></p>
<p>這題刻一個時鐘，算是目前刷題第一次要寫很多程式。
<div class="language-verilog highlight"><span class="filename">Verilog</span><pre><span></span><code><span id="__span-105-1"><a id="__codelineno-105-1" name="__codelineno-105-1"></a><a href="#__codelineno-105-1"><span class="linenos" data-linenos="  1 "></span></a><span class="k">module</span><span class="w"> </span><span class="n">top_module</span><span class="p">(</span>
</span><span id="__span-105-2"><a id="__codelineno-105-2" name="__codelineno-105-2"></a><a href="#__codelineno-105-2"><span class="linenos" data-linenos="  2 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">clk</span><span class="p">,</span>
</span><span id="__span-105-3"><a id="__codelineno-105-3" name="__codelineno-105-3"></a><a href="#__codelineno-105-3"><span class="linenos" data-linenos="  3 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">reset</span><span class="p">,</span>
</span><span id="__span-105-4"><a id="__codelineno-105-4" name="__codelineno-105-4"></a><a href="#__codelineno-105-4"><span class="linenos" data-linenos="  4 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">ena</span><span class="p">,</span>
</span><span id="__span-105-5"><a id="__codelineno-105-5" name="__codelineno-105-5"></a><a href="#__codelineno-105-5"><span class="linenos" data-linenos="  5 "></span></a><span class="w">    </span><span class="k">output</span><span class="w"> </span><span class="n">pm</span><span class="p">,</span>
</span><span id="__span-105-6"><a id="__codelineno-105-6" name="__codelineno-105-6"></a><a href="#__codelineno-105-6"><span class="linenos" data-linenos="  6 "></span></a><span class="w">    </span><span class="k">output</span><span class="w"> </span><span class="p">[</span><span class="mh">7</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">hh</span><span class="p">,</span>
</span><span id="__span-105-7"><a id="__codelineno-105-7" name="__codelineno-105-7"></a><a href="#__codelineno-105-7"><span class="linenos" data-linenos="  7 "></span></a><span class="w">    </span><span class="k">output</span><span class="w"> </span><span class="p">[</span><span class="mh">7</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">mm</span><span class="p">,</span>
</span><span id="__span-105-8"><a id="__codelineno-105-8" name="__codelineno-105-8"></a><a href="#__codelineno-105-8"><span class="linenos" data-linenos="  8 "></span></a><span class="w">    </span><span class="k">output</span><span class="w"> </span><span class="p">[</span><span class="mh">7</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">ss</span><span class="p">);</span>
</span><span id="__span-105-9"><a id="__codelineno-105-9" name="__codelineno-105-9"></a><a href="#__codelineno-105-9"><span class="linenos" data-linenos="  9 "></span></a>
</span><span id="__span-105-10"><a id="__codelineno-105-10" name="__codelineno-105-10"></a><a href="#__codelineno-105-10"><span class="linenos" data-linenos=" 10 "></span></a><span class="w">    </span><span class="kt">wire</span><span class="w"> </span><span class="n">enas2</span><span class="p">,</span><span class="n">enam1</span><span class="p">,</span><span class="n">enam2</span><span class="p">,</span><span class="n">enah1</span><span class="p">,</span><span class="n">enah2</span><span class="p">,</span><span class="n">enapm</span><span class="p">,</span><span class="n">ld</span><span class="p">;</span>
</span><span id="__span-105-11"><a id="__codelineno-105-11" name="__codelineno-105-11"></a><a href="#__codelineno-105-11"><span class="linenos" data-linenos=" 11 "></span></a><span class="w">    </span><span class="n">BCD_zero_to_nine</span><span class="w"> </span><span class="n">s1</span><span class="p">(</span><span class="w"> </span><span class="p">.</span><span class="n">clk</span><span class="p">(</span><span class="n">clk</span><span class="p">),</span><span class="w"> </span><span class="p">.</span><span class="n">reset</span><span class="p">(</span><span class="n">reset</span><span class="p">),</span><span class="w"> </span><span class="p">.</span><span class="n">enable</span><span class="p">(</span><span class="n">ena</span><span class="p">),</span><span class="w"> </span><span class="p">.</span><span class="n">q</span><span class="p">(</span><span class="n">ss</span><span class="p">[</span><span class="mh">3</span><span class="o">:</span><span class="mh">0</span><span class="p">]));</span>
</span><span id="__span-105-12"><a id="__codelineno-105-12" name="__codelineno-105-12"></a><a href="#__codelineno-105-12"><span class="linenos" data-linenos=" 12 "></span></a>
</span><span id="__span-105-13"><a id="__codelineno-105-13" name="__codelineno-105-13"></a><a href="#__codelineno-105-13"><span class="linenos" data-linenos=" 13 "></span></a><span class="w">    </span><span class="k">assign</span><span class="w"> </span><span class="n">enas2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ena</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="p">(</span><span class="n">ss</span><span class="p">[</span><span class="mh">3</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mh">4</span><span class="mb">&#39;b1001</span><span class="p">);</span>
</span><span id="__span-105-14"><a id="__codelineno-105-14" name="__codelineno-105-14"></a><a href="#__codelineno-105-14"><span class="linenos" data-linenos=" 14 "></span></a><span class="w">    </span><span class="n">BCD_zero_to_six</span><span class="w"> </span><span class="n">s2</span><span class="p">(</span><span class="w"> </span><span class="p">.</span><span class="n">clk</span><span class="p">(</span><span class="n">clk</span><span class="p">),</span><span class="w"> </span><span class="p">.</span><span class="n">reset</span><span class="p">(</span><span class="n">reset</span><span class="p">),</span><span class="w"> </span><span class="p">.</span><span class="n">enable</span><span class="p">(</span><span class="n">enas2</span><span class="p">),</span><span class="w"> </span><span class="p">.</span><span class="n">q</span><span class="p">(</span><span class="n">ss</span><span class="p">[</span><span class="mh">7</span><span class="o">:</span><span class="mh">4</span><span class="p">]));</span>
</span><span id="__span-105-15"><a id="__codelineno-105-15" name="__codelineno-105-15"></a><a href="#__codelineno-105-15"><span class="linenos" data-linenos=" 15 "></span></a>
</span><span id="__span-105-16"><a id="__codelineno-105-16" name="__codelineno-105-16"></a><a href="#__codelineno-105-16"><span class="linenos" data-linenos=" 16 "></span></a><span class="w">    </span><span class="k">assign</span><span class="w"> </span><span class="n">enam1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">enas2</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="p">(</span><span class="n">ss</span><span class="p">[</span><span class="mh">7</span><span class="o">:</span><span class="mh">4</span><span class="p">]</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mh">4</span><span class="mb">&#39;b0101</span><span class="p">);</span>
</span><span id="__span-105-17"><a id="__codelineno-105-17" name="__codelineno-105-17"></a><a href="#__codelineno-105-17"><span class="linenos" data-linenos=" 17 "></span></a><span class="w">    </span><span class="n">BCD_zero_to_nine</span><span class="w"> </span><span class="n">m1</span><span class="p">(</span><span class="w"> </span><span class="p">.</span><span class="n">clk</span><span class="p">(</span><span class="n">clk</span><span class="p">),</span><span class="w"> </span><span class="p">.</span><span class="n">reset</span><span class="p">(</span><span class="n">reset</span><span class="p">),</span><span class="w"> </span><span class="p">.</span><span class="n">enable</span><span class="p">(</span><span class="n">enam1</span><span class="p">),</span><span class="w"> </span><span class="p">.</span><span class="n">q</span><span class="p">(</span><span class="n">mm</span><span class="p">[</span><span class="mh">3</span><span class="o">:</span><span class="mh">0</span><span class="p">]));</span>
</span><span id="__span-105-18"><a id="__codelineno-105-18" name="__codelineno-105-18"></a><a href="#__codelineno-105-18"><span class="linenos" data-linenos=" 18 "></span></a>
</span><span id="__span-105-19"><a id="__codelineno-105-19" name="__codelineno-105-19"></a><a href="#__codelineno-105-19"><span class="linenos" data-linenos=" 19 "></span></a><span class="w">    </span><span class="k">assign</span><span class="w"> </span><span class="n">enam2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">enam1</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="p">(</span><span class="n">mm</span><span class="p">[</span><span class="mh">3</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mh">4</span><span class="mb">&#39;b1001</span><span class="p">);</span>
</span><span id="__span-105-20"><a id="__codelineno-105-20" name="__codelineno-105-20"></a><a href="#__codelineno-105-20"><span class="linenos" data-linenos=" 20 "></span></a><span class="w">    </span><span class="n">BCD_zero_to_six</span><span class="w"> </span><span class="n">m2</span><span class="p">(</span><span class="w"> </span><span class="p">.</span><span class="n">clk</span><span class="p">(</span><span class="n">clk</span><span class="p">),</span><span class="w"> </span><span class="p">.</span><span class="n">reset</span><span class="p">(</span><span class="n">reset</span><span class="p">),</span><span class="w"> </span><span class="p">.</span><span class="n">enable</span><span class="p">(</span><span class="n">enam2</span><span class="p">),</span><span class="w"> </span><span class="p">.</span><span class="n">q</span><span class="p">(</span><span class="n">mm</span><span class="p">[</span><span class="mh">7</span><span class="o">:</span><span class="mh">4</span><span class="p">]));</span><span class="w">    </span>
</span><span id="__span-105-21"><a id="__codelineno-105-21" name="__codelineno-105-21"></a><a href="#__codelineno-105-21"><span class="linenos" data-linenos=" 21 "></span></a>
</span><span id="__span-105-22"><a id="__codelineno-105-22" name="__codelineno-105-22"></a><a href="#__codelineno-105-22"><span class="linenos" data-linenos=" 22 "></span></a><span class="w">    </span><span class="k">assign</span><span class="w"> </span><span class="n">enah1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">enam2</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="p">(</span><span class="n">mm</span><span class="p">[</span><span class="mh">7</span><span class="o">:</span><span class="mh">4</span><span class="p">]</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mh">4</span><span class="mb">&#39;b0101</span><span class="p">);</span>
</span><span id="__span-105-23"><a id="__codelineno-105-23" name="__codelineno-105-23"></a><a href="#__codelineno-105-23"><span class="linenos" data-linenos=" 23 "></span></a><span class="w">    </span><span class="k">assign</span><span class="w"> </span><span class="n">ld</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">enah1</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="p">(</span><span class="n">hh</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mh">8</span><span class="mb">&#39;b0001</span><span class="n">_0010</span><span class="p">);</span><span class="w">    </span>
</span><span id="__span-105-24"><a id="__codelineno-105-24" name="__codelineno-105-24"></a><a href="#__codelineno-105-24"><span class="linenos" data-linenos=" 24 "></span></a><span class="w">    </span><span class="n">BCD_zero_to_nine_wload</span><span class="w"> </span><span class="n">h1</span><span class="p">(</span><span class="w"> </span><span class="p">.</span><span class="n">clk</span><span class="p">(</span><span class="n">clk</span><span class="p">),</span><span class="w"> </span><span class="p">.</span><span class="n">reset</span><span class="p">(</span><span class="n">reset</span><span class="p">),</span><span class="w"> </span><span class="p">.</span><span class="n">enable</span><span class="p">(</span><span class="n">enah1</span><span class="p">),</span><span class="w"> </span><span class="p">.</span><span class="n">load</span><span class="p">(</span><span class="n">ld</span><span class="p">),</span><span class="w"> </span><span class="p">.</span><span class="n">q</span><span class="p">(</span><span class="n">hh</span><span class="p">[</span><span class="mh">3</span><span class="o">:</span><span class="mh">0</span><span class="p">]));</span>
</span><span id="__span-105-25"><a id="__codelineno-105-25" name="__codelineno-105-25"></a><a href="#__codelineno-105-25"><span class="linenos" data-linenos=" 25 "></span></a>
</span><span id="__span-105-26"><a id="__codelineno-105-26" name="__codelineno-105-26"></a><a href="#__codelineno-105-26"><span class="linenos" data-linenos=" 26 "></span></a><span class="w">    </span><span class="k">assign</span><span class="w"> </span><span class="n">enah2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">enah1</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="p">(</span><span class="n">hh</span><span class="p">[</span><span class="mh">3</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mh">4</span><span class="mb">&#39;b1001</span><span class="p">))</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">ld</span><span class="p">;</span>
</span><span id="__span-105-27"><a id="__codelineno-105-27" name="__codelineno-105-27"></a><a href="#__codelineno-105-27"><span class="linenos" data-linenos=" 27 "></span></a><span class="w">    </span><span class="n">BCD_zero_to_one_wload</span><span class="w"> </span><span class="n">h2</span><span class="p">(</span><span class="w"> </span><span class="p">.</span><span class="n">clk</span><span class="p">(</span><span class="n">clk</span><span class="p">),</span><span class="w"> </span><span class="p">.</span><span class="n">reset</span><span class="p">(</span><span class="n">reset</span><span class="p">),</span><span class="w"> </span><span class="p">.</span><span class="n">enable</span><span class="p">(</span><span class="n">enah2</span><span class="p">),</span><span class="w"> </span><span class="p">.</span><span class="n">load</span><span class="p">(</span><span class="n">ld</span><span class="p">),</span><span class="w"> </span><span class="p">.</span><span class="n">q</span><span class="p">(</span><span class="n">hh</span><span class="p">[</span><span class="mh">7</span><span class="o">:</span><span class="mh">4</span><span class="p">]));</span>
</span><span id="__span-105-28"><a id="__codelineno-105-28" name="__codelineno-105-28"></a><a href="#__codelineno-105-28"><span class="linenos" data-linenos=" 28 "></span></a>
</span><span id="__span-105-29"><a id="__codelineno-105-29" name="__codelineno-105-29"></a><a href="#__codelineno-105-29"><span class="linenos" data-linenos=" 29 "></span></a><span class="w">    </span><span class="k">assign</span><span class="w"> </span><span class="n">enapm</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">enah1</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="p">(</span><span class="n">hh</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mh">8</span><span class="mb">&#39;b0001</span><span class="n">_0001</span><span class="p">);</span>
</span><span id="__span-105-30"><a id="__codelineno-105-30" name="__codelineno-105-30"></a><a href="#__codelineno-105-30"><span class="linenos" data-linenos=" 30 "></span></a><span class="w">    </span><span class="n">PM</span><span class="w"> </span><span class="n">is_pm</span><span class="p">(</span><span class="w"> </span><span class="p">.</span><span class="n">clk</span><span class="p">(</span><span class="n">clk</span><span class="p">),</span><span class="w"> </span><span class="p">.</span><span class="n">reset</span><span class="p">(</span><span class="n">reset</span><span class="p">),</span><span class="w"> </span><span class="p">.</span><span class="n">enable</span><span class="p">(</span><span class="n">enapm</span><span class="p">),</span><span class="w"> </span><span class="p">.</span><span class="n">pm</span><span class="p">(</span><span class="n">pm</span><span class="p">));</span>
</span><span id="__span-105-31"><a id="__codelineno-105-31" name="__codelineno-105-31"></a><a href="#__codelineno-105-31"><span class="linenos" data-linenos=" 31 "></span></a><span class="k">endmodule</span>
</span><span id="__span-105-32"><a id="__codelineno-105-32" name="__codelineno-105-32"></a><a href="#__codelineno-105-32"><span class="linenos" data-linenos=" 32 "></span></a>
</span><span id="__span-105-33"><a id="__codelineno-105-33" name="__codelineno-105-33"></a><a href="#__codelineno-105-33"><span class="linenos" data-linenos=" 33 "></span></a><span class="k">module</span><span class="w"> </span><span class="n">BCD_zero_to_nine</span><span class="p">(</span>
</span><span id="__span-105-34"><a id="__codelineno-105-34" name="__codelineno-105-34"></a><a href="#__codelineno-105-34"><span class="linenos" data-linenos=" 34 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">clk</span><span class="p">,</span>
</span><span id="__span-105-35"><a id="__codelineno-105-35" name="__codelineno-105-35"></a><a href="#__codelineno-105-35"><span class="linenos" data-linenos=" 35 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">reset</span><span class="p">,</span>
</span><span id="__span-105-36"><a id="__codelineno-105-36" name="__codelineno-105-36"></a><a href="#__codelineno-105-36"><span class="linenos" data-linenos=" 36 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">enable</span><span class="p">,</span>
</span><span id="__span-105-37"><a id="__codelineno-105-37" name="__codelineno-105-37"></a><a href="#__codelineno-105-37"><span class="linenos" data-linenos=" 37 "></span></a><span class="w">    </span><span class="k">output</span><span class="w"> </span><span class="kt">reg</span><span class="w"> </span><span class="p">[</span><span class="mh">3</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="n">q</span><span class="p">);</span>
</span><span id="__span-105-38"><a id="__codelineno-105-38" name="__codelineno-105-38"></a><a href="#__codelineno-105-38"><span class="linenos" data-linenos=" 38 "></span></a><span class="w">    </span><span class="k">always</span><span class="p">@(</span><span class="k">posedge</span><span class="w"> </span><span class="n">clk</span><span class="p">)</span><span class="k">begin</span>
</span><span id="__span-105-39"><a id="__codelineno-105-39" name="__codelineno-105-39"></a><a href="#__codelineno-105-39"><span class="linenos" data-linenos=" 39 "></span></a><span class="w">        </span><span class="k">if</span><span class="p">(</span><span class="n">reset</span><span class="p">)</span><span class="w"> </span><span class="n">q</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="mh">4</span><span class="mb">&#39;b0000</span><span class="p">;</span>
</span><span id="__span-105-40"><a id="__codelineno-105-40" name="__codelineno-105-40"></a><a href="#__codelineno-105-40"><span class="linenos" data-linenos=" 40 "></span></a><span class="w">        </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="p">(</span><span class="n">enable</span><span class="p">)</span><span class="k">begin</span>
</span><span id="__span-105-41"><a id="__codelineno-105-41" name="__codelineno-105-41"></a><a href="#__codelineno-105-41"><span class="linenos" data-linenos=" 41 "></span></a><span class="w">            </span><span class="k">if</span><span class="p">(</span><span class="n">q</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mh">4</span><span class="mb">&#39;b1001</span><span class="p">)</span><span class="w"> </span><span class="n">q</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="mh">4</span><span class="mb">&#39;b0000</span><span class="p">;</span>
</span><span id="__span-105-42"><a id="__codelineno-105-42" name="__codelineno-105-42"></a><a href="#__codelineno-105-42"><span class="linenos" data-linenos=" 42 "></span></a><span class="w">            </span><span class="k">else</span><span class="w"> </span><span class="n">q</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">q</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mh">4</span><span class="mb">&#39;b0001</span><span class="p">;</span>
</span><span id="__span-105-43"><a id="__codelineno-105-43" name="__codelineno-105-43"></a><a href="#__codelineno-105-43"><span class="linenos" data-linenos=" 43 "></span></a><span class="w">        </span><span class="k">end</span>
</span><span id="__span-105-44"><a id="__codelineno-105-44" name="__codelineno-105-44"></a><a href="#__codelineno-105-44"><span class="linenos" data-linenos=" 44 "></span></a><span class="w">        </span><span class="k">else</span><span class="w"> </span><span class="n">q</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">q</span><span class="p">;</span>
</span><span id="__span-105-45"><a id="__codelineno-105-45" name="__codelineno-105-45"></a><a href="#__codelineno-105-45"><span class="linenos" data-linenos=" 45 "></span></a><span class="w">    </span><span class="k">end</span>
</span><span id="__span-105-46"><a id="__codelineno-105-46" name="__codelineno-105-46"></a><a href="#__codelineno-105-46"><span class="linenos" data-linenos=" 46 "></span></a><span class="k">endmodule</span>
</span><span id="__span-105-47"><a id="__codelineno-105-47" name="__codelineno-105-47"></a><a href="#__codelineno-105-47"><span class="linenos" data-linenos=" 47 "></span></a>
</span><span id="__span-105-48"><a id="__codelineno-105-48" name="__codelineno-105-48"></a><a href="#__codelineno-105-48"><span class="linenos" data-linenos=" 48 "></span></a><span class="k">module</span><span class="w"> </span><span class="n">BCD_zero_to_six</span><span class="p">(</span>
</span><span id="__span-105-49"><a id="__codelineno-105-49" name="__codelineno-105-49"></a><a href="#__codelineno-105-49"><span class="linenos" data-linenos=" 49 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">clk</span><span class="p">,</span>
</span><span id="__span-105-50"><a id="__codelineno-105-50" name="__codelineno-105-50"></a><a href="#__codelineno-105-50"><span class="linenos" data-linenos=" 50 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">reset</span><span class="p">,</span>
</span><span id="__span-105-51"><a id="__codelineno-105-51" name="__codelineno-105-51"></a><a href="#__codelineno-105-51"><span class="linenos" data-linenos=" 51 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">enable</span><span class="p">,</span>
</span><span id="__span-105-52"><a id="__codelineno-105-52" name="__codelineno-105-52"></a><a href="#__codelineno-105-52"><span class="linenos" data-linenos=" 52 "></span></a><span class="w">    </span><span class="k">output</span><span class="w"> </span><span class="kt">reg</span><span class="w"> </span><span class="p">[</span><span class="mh">3</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="n">q</span><span class="p">);</span>
</span><span id="__span-105-53"><a id="__codelineno-105-53" name="__codelineno-105-53"></a><a href="#__codelineno-105-53"><span class="linenos" data-linenos=" 53 "></span></a><span class="w">    </span><span class="k">always</span><span class="p">@(</span><span class="k">posedge</span><span class="w"> </span><span class="n">clk</span><span class="p">)</span><span class="k">begin</span>
</span><span id="__span-105-54"><a id="__codelineno-105-54" name="__codelineno-105-54"></a><a href="#__codelineno-105-54"><span class="linenos" data-linenos=" 54 "></span></a><span class="w">        </span><span class="k">if</span><span class="p">(</span><span class="n">reset</span><span class="p">)</span><span class="w"> </span><span class="n">q</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="mh">4</span><span class="mb">&#39;b0000</span><span class="p">;</span>
</span><span id="__span-105-55"><a id="__codelineno-105-55" name="__codelineno-105-55"></a><a href="#__codelineno-105-55"><span class="linenos" data-linenos=" 55 "></span></a><span class="w">        </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="p">(</span><span class="n">enable</span><span class="p">)</span><span class="k">begin</span>
</span><span id="__span-105-56"><a id="__codelineno-105-56" name="__codelineno-105-56"></a><a href="#__codelineno-105-56"><span class="linenos" data-linenos=" 56 "></span></a><span class="w">            </span><span class="k">if</span><span class="p">(</span><span class="n">q</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mh">4</span><span class="mb">&#39;b0101</span><span class="p">)</span><span class="w"> </span><span class="n">q</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="mh">4</span><span class="mb">&#39;b0000</span><span class="p">;</span>
</span><span id="__span-105-57"><a id="__codelineno-105-57" name="__codelineno-105-57"></a><a href="#__codelineno-105-57"><span class="linenos" data-linenos=" 57 "></span></a><span class="w">            </span><span class="k">else</span><span class="w"> </span><span class="n">q</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">q</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mh">4</span><span class="mb">&#39;b0001</span><span class="p">;</span>
</span><span id="__span-105-58"><a id="__codelineno-105-58" name="__codelineno-105-58"></a><a href="#__codelineno-105-58"><span class="linenos" data-linenos=" 58 "></span></a><span class="w">        </span><span class="k">end</span>
</span><span id="__span-105-59"><a id="__codelineno-105-59" name="__codelineno-105-59"></a><a href="#__codelineno-105-59"><span class="linenos" data-linenos=" 59 "></span></a><span class="w">        </span><span class="k">else</span><span class="w"> </span><span class="n">q</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">q</span><span class="p">;</span>
</span><span id="__span-105-60"><a id="__codelineno-105-60" name="__codelineno-105-60"></a><a href="#__codelineno-105-60"><span class="linenos" data-linenos=" 60 "></span></a><span class="w">    </span><span class="k">end</span>
</span><span id="__span-105-61"><a id="__codelineno-105-61" name="__codelineno-105-61"></a><a href="#__codelineno-105-61"><span class="linenos" data-linenos=" 61 "></span></a><span class="k">endmodule</span>
</span><span id="__span-105-62"><a id="__codelineno-105-62" name="__codelineno-105-62"></a><a href="#__codelineno-105-62"><span class="linenos" data-linenos=" 62 "></span></a>
</span><span id="__span-105-63"><a id="__codelineno-105-63" name="__codelineno-105-63"></a><a href="#__codelineno-105-63"><span class="linenos" data-linenos=" 63 "></span></a><span class="k">module</span><span class="w"> </span><span class="n">BCD_zero_to_nine_wload</span><span class="p">(</span>
</span><span id="__span-105-64"><a id="__codelineno-105-64" name="__codelineno-105-64"></a><a href="#__codelineno-105-64"><span class="linenos" data-linenos=" 64 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">clk</span><span class="p">,</span>
</span><span id="__span-105-65"><a id="__codelineno-105-65" name="__codelineno-105-65"></a><a href="#__codelineno-105-65"><span class="linenos" data-linenos=" 65 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">reset</span><span class="p">,</span>
</span><span id="__span-105-66"><a id="__codelineno-105-66" name="__codelineno-105-66"></a><a href="#__codelineno-105-66"><span class="linenos" data-linenos=" 66 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">enable</span><span class="p">,</span>
</span><span id="__span-105-67"><a id="__codelineno-105-67" name="__codelineno-105-67"></a><a href="#__codelineno-105-67"><span class="linenos" data-linenos=" 67 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">load</span><span class="p">,</span>
</span><span id="__span-105-68"><a id="__codelineno-105-68" name="__codelineno-105-68"></a><a href="#__codelineno-105-68"><span class="linenos" data-linenos=" 68 "></span></a><span class="w">    </span><span class="k">output</span><span class="w"> </span><span class="kt">reg</span><span class="w"> </span><span class="p">[</span><span class="mh">3</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="n">q</span><span class="p">);</span>
</span><span id="__span-105-69"><a id="__codelineno-105-69" name="__codelineno-105-69"></a><a href="#__codelineno-105-69"><span class="linenos" data-linenos=" 69 "></span></a><span class="w">    </span><span class="k">always</span><span class="p">@(</span><span class="k">posedge</span><span class="w"> </span><span class="n">clk</span><span class="p">)</span><span class="k">begin</span>
</span><span id="__span-105-70"><a id="__codelineno-105-70" name="__codelineno-105-70"></a><a href="#__codelineno-105-70"><span class="linenos" data-linenos=" 70 "></span></a><span class="w">        </span><span class="k">if</span><span class="p">(</span><span class="n">reset</span><span class="p">)</span><span class="w"> </span><span class="n">q</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="mh">4</span><span class="mb">&#39;b0010</span><span class="p">;</span>
</span><span id="__span-105-71"><a id="__codelineno-105-71" name="__codelineno-105-71"></a><a href="#__codelineno-105-71"><span class="linenos" data-linenos=" 71 "></span></a><span class="w">        </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="p">(</span><span class="n">enable</span><span class="p">)</span><span class="k">begin</span>
</span><span id="__span-105-72"><a id="__codelineno-105-72" name="__codelineno-105-72"></a><a href="#__codelineno-105-72"><span class="linenos" data-linenos=" 72 "></span></a><span class="w">            </span><span class="k">if</span><span class="p">(</span><span class="n">load</span><span class="p">)</span><span class="w"> </span><span class="n">q</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="mh">4</span><span class="mb">&#39;b0001</span><span class="p">;</span>
</span><span id="__span-105-73"><a id="__codelineno-105-73" name="__codelineno-105-73"></a><a href="#__codelineno-105-73"><span class="linenos" data-linenos=" 73 "></span></a><span class="w">            </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="p">(</span><span class="n">q</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mh">4</span><span class="mb">&#39;b1001</span><span class="p">)</span><span class="w"> </span><span class="n">q</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="mh">4</span><span class="mb">&#39;b0000</span><span class="p">;</span>
</span><span id="__span-105-74"><a id="__codelineno-105-74" name="__codelineno-105-74"></a><a href="#__codelineno-105-74"><span class="linenos" data-linenos=" 74 "></span></a><span class="w">            </span><span class="k">else</span><span class="w"> </span><span class="n">q</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">q</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mh">4</span><span class="mb">&#39;b0001</span><span class="p">;</span>
</span><span id="__span-105-75"><a id="__codelineno-105-75" name="__codelineno-105-75"></a><a href="#__codelineno-105-75"><span class="linenos" data-linenos=" 75 "></span></a><span class="w">        </span><span class="k">end</span>
</span><span id="__span-105-76"><a id="__codelineno-105-76" name="__codelineno-105-76"></a><a href="#__codelineno-105-76"><span class="linenos" data-linenos=" 76 "></span></a><span class="w">        </span><span class="k">else</span><span class="w"> </span><span class="n">q</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">q</span><span class="p">;</span>
</span><span id="__span-105-77"><a id="__codelineno-105-77" name="__codelineno-105-77"></a><a href="#__codelineno-105-77"><span class="linenos" data-linenos=" 77 "></span></a><span class="w">    </span><span class="k">end</span>
</span><span id="__span-105-78"><a id="__codelineno-105-78" name="__codelineno-105-78"></a><a href="#__codelineno-105-78"><span class="linenos" data-linenos=" 78 "></span></a><span class="k">endmodule</span>
</span><span id="__span-105-79"><a id="__codelineno-105-79" name="__codelineno-105-79"></a><a href="#__codelineno-105-79"><span class="linenos" data-linenos=" 79 "></span></a>
</span><span id="__span-105-80"><a id="__codelineno-105-80" name="__codelineno-105-80"></a><a href="#__codelineno-105-80"><span class="linenos" data-linenos=" 80 "></span></a><span class="k">module</span><span class="w"> </span><span class="n">BCD_zero_to_one_wload</span><span class="p">(</span>
</span><span id="__span-105-81"><a id="__codelineno-105-81" name="__codelineno-105-81"></a><a href="#__codelineno-105-81"><span class="linenos" data-linenos=" 81 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">clk</span><span class="p">,</span>
</span><span id="__span-105-82"><a id="__codelineno-105-82" name="__codelineno-105-82"></a><a href="#__codelineno-105-82"><span class="linenos" data-linenos=" 82 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">reset</span><span class="p">,</span>
</span><span id="__span-105-83"><a id="__codelineno-105-83" name="__codelineno-105-83"></a><a href="#__codelineno-105-83"><span class="linenos" data-linenos=" 83 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">enable</span><span class="p">,</span>
</span><span id="__span-105-84"><a id="__codelineno-105-84" name="__codelineno-105-84"></a><a href="#__codelineno-105-84"><span class="linenos" data-linenos=" 84 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">load</span><span class="p">,</span>
</span><span id="__span-105-85"><a id="__codelineno-105-85" name="__codelineno-105-85"></a><a href="#__codelineno-105-85"><span class="linenos" data-linenos=" 85 "></span></a><span class="w">    </span><span class="k">output</span><span class="w"> </span><span class="kt">reg</span><span class="w"> </span><span class="p">[</span><span class="mh">3</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="n">q</span><span class="p">);</span>
</span><span id="__span-105-86"><a id="__codelineno-105-86" name="__codelineno-105-86"></a><a href="#__codelineno-105-86"><span class="linenos" data-linenos=" 86 "></span></a><span class="w">    </span><span class="k">always</span><span class="p">@(</span><span class="k">posedge</span><span class="w"> </span><span class="n">clk</span><span class="p">)</span><span class="k">begin</span>
</span><span id="__span-105-87"><a id="__codelineno-105-87" name="__codelineno-105-87"></a><a href="#__codelineno-105-87"><span class="linenos" data-linenos=" 87 "></span></a><span class="w">        </span><span class="k">if</span><span class="p">(</span><span class="n">reset</span><span class="p">)</span><span class="w"> </span><span class="n">q</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="mh">4</span><span class="mb">&#39;b0001</span><span class="p">;</span>
</span><span id="__span-105-88"><a id="__codelineno-105-88" name="__codelineno-105-88"></a><a href="#__codelineno-105-88"><span class="linenos" data-linenos=" 88 "></span></a><span class="w">        </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="p">(</span><span class="n">enable</span><span class="p">)</span><span class="k">begin</span>
</span><span id="__span-105-89"><a id="__codelineno-105-89" name="__codelineno-105-89"></a><a href="#__codelineno-105-89"><span class="linenos" data-linenos=" 89 "></span></a><span class="w">            </span><span class="k">if</span><span class="p">(</span><span class="n">load</span><span class="p">)</span><span class="w"> </span><span class="n">q</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="mh">4</span><span class="mb">&#39;b0000</span><span class="p">;</span>
</span><span id="__span-105-90"><a id="__codelineno-105-90" name="__codelineno-105-90"></a><a href="#__codelineno-105-90"><span class="linenos" data-linenos=" 90 "></span></a><span class="w">            </span><span class="k">else</span><span class="w"> </span><span class="n">q</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">q</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mh">4</span><span class="mb">&#39;b0001</span><span class="p">;</span>
</span><span id="__span-105-91"><a id="__codelineno-105-91" name="__codelineno-105-91"></a><a href="#__codelineno-105-91"><span class="linenos" data-linenos=" 91 "></span></a><span class="w">        </span><span class="k">end</span>
</span><span id="__span-105-92"><a id="__codelineno-105-92" name="__codelineno-105-92"></a><a href="#__codelineno-105-92"><span class="linenos" data-linenos=" 92 "></span></a><span class="w">        </span><span class="k">else</span><span class="w"> </span><span class="n">q</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">q</span><span class="p">;</span>
</span><span id="__span-105-93"><a id="__codelineno-105-93" name="__codelineno-105-93"></a><a href="#__codelineno-105-93"><span class="linenos" data-linenos=" 93 "></span></a><span class="w">    </span><span class="k">end</span>
</span><span id="__span-105-94"><a id="__codelineno-105-94" name="__codelineno-105-94"></a><a href="#__codelineno-105-94"><span class="linenos" data-linenos=" 94 "></span></a><span class="k">endmodule</span>
</span><span id="__span-105-95"><a id="__codelineno-105-95" name="__codelineno-105-95"></a><a href="#__codelineno-105-95"><span class="linenos" data-linenos=" 95 "></span></a>
</span><span id="__span-105-96"><a id="__codelineno-105-96" name="__codelineno-105-96"></a><a href="#__codelineno-105-96"><span class="linenos" data-linenos=" 96 "></span></a><span class="k">module</span><span class="w"> </span><span class="n">PM</span><span class="p">(</span>
</span><span id="__span-105-97"><a id="__codelineno-105-97" name="__codelineno-105-97"></a><a href="#__codelineno-105-97"><span class="linenos" data-linenos=" 97 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">clk</span><span class="p">,</span>
</span><span id="__span-105-98"><a id="__codelineno-105-98" name="__codelineno-105-98"></a><a href="#__codelineno-105-98"><span class="linenos" data-linenos=" 98 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">reset</span><span class="p">,</span>
</span><span id="__span-105-99"><a id="__codelineno-105-99" name="__codelineno-105-99"></a><a href="#__codelineno-105-99"><span class="linenos" data-linenos=" 99 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">enable</span><span class="p">,</span>
</span><span id="__span-105-100"><a id="__codelineno-105-100" name="__codelineno-105-100"></a><a href="#__codelineno-105-100"><span class="linenos" data-linenos="100 "></span></a><span class="w">    </span><span class="k">output</span><span class="w"> </span><span class="kt">reg</span><span class="w"> </span><span class="n">pm</span><span class="p">);</span>
</span><span id="__span-105-101"><a id="__codelineno-105-101" name="__codelineno-105-101"></a><a href="#__codelineno-105-101"><span class="linenos" data-linenos="101 "></span></a><span class="w">    </span><span class="k">always</span><span class="p">@(</span><span class="k">posedge</span><span class="w"> </span><span class="n">clk</span><span class="p">)</span><span class="k">begin</span>
</span><span id="__span-105-102"><a id="__codelineno-105-102" name="__codelineno-105-102"></a><a href="#__codelineno-105-102"><span class="linenos" data-linenos="102 "></span></a><span class="w">        </span><span class="k">if</span><span class="p">(</span><span class="n">reset</span><span class="p">)</span><span class="w"> </span><span class="n">pm</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="mh">1</span><span class="mb">&#39;b0</span><span class="p">;</span>
</span><span id="__span-105-103"><a id="__codelineno-105-103" name="__codelineno-105-103"></a><a href="#__codelineno-105-103"><span class="linenos" data-linenos="103 "></span></a><span class="w">        </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="p">(</span><span class="n">enable</span><span class="p">)</span><span class="w"> </span><span class="n">pm</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">pm</span><span class="w"> </span><span class="o">^</span><span class="w"> </span><span class="mh">1</span><span class="mb">&#39;b1</span><span class="p">;</span>
</span><span id="__span-105-104"><a id="__codelineno-105-104" name="__codelineno-105-104"></a><a href="#__codelineno-105-104"><span class="linenos" data-linenos="104 "></span></a><span class="w">        </span><span class="k">else</span><span class="w"> </span><span class="n">pm</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">pm</span><span class="p">;</span>
</span><span id="__span-105-105"><a id="__codelineno-105-105" name="__codelineno-105-105"></a><a href="#__codelineno-105-105"><span class="linenos" data-linenos="105 "></span></a><span class="w">    </span><span class="k">end</span>
</span><span id="__span-105-106"><a id="__codelineno-105-106" name="__codelineno-105-106"></a><a href="#__codelineno-105-106"><span class="linenos" data-linenos="106 "></span></a><span class="k">endmodule</span>
</span></code></pre></div></p>
<hr />
<h4 id="shift-registers">Shift Registers<a class="headerlink" href="#shift-registers" title="Anchor link to this section for reference">⚓︎</a></h4>
<h5 id="4-bit-shift-register">4-bit shift register<a class="headerlink" href="#4-bit-shift-register" title="Anchor link to this section for reference">⚓︎</a></h5>
<p>Website: <a href="https://hdlbits.01xz.net/wiki/Shift4" target="_blank">https://hdlbits.01xz.net/wiki/Shift4</a></p>
<p>這題就是寫個shift register，唯一要注意的是load優先級比enable大。
<div class="language-verilog highlight"><span class="filename">Verilog</span><pre><span></span><code><span id="__span-106-1"><a id="__codelineno-106-1" name="__codelineno-106-1"></a><a href="#__codelineno-106-1"><span class="linenos" data-linenos=" 1 "></span></a><span class="k">module</span><span class="w"> </span><span class="n">top_module</span><span class="p">(</span>
</span><span id="__span-106-2"><a id="__codelineno-106-2" name="__codelineno-106-2"></a><a href="#__codelineno-106-2"><span class="linenos" data-linenos=" 2 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">clk</span><span class="p">,</span>
</span><span id="__span-106-3"><a id="__codelineno-106-3" name="__codelineno-106-3"></a><a href="#__codelineno-106-3"><span class="linenos" data-linenos=" 3 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">areset</span><span class="p">,</span><span class="w">  </span><span class="c1">// async active-high reset to zero</span>
</span><span id="__span-106-4"><a id="__codelineno-106-4" name="__codelineno-106-4"></a><a href="#__codelineno-106-4"><span class="linenos" data-linenos=" 4 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">load</span><span class="p">,</span>
</span><span id="__span-106-5"><a id="__codelineno-106-5" name="__codelineno-106-5"></a><a href="#__codelineno-106-5"><span class="linenos" data-linenos=" 5 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">ena</span><span class="p">,</span>
</span><span id="__span-106-6"><a id="__codelineno-106-6" name="__codelineno-106-6"></a><a href="#__codelineno-106-6"><span class="linenos" data-linenos=" 6 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="p">[</span><span class="mh">3</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">data</span><span class="p">,</span>
</span><span id="__span-106-7"><a id="__codelineno-106-7" name="__codelineno-106-7"></a><a href="#__codelineno-106-7"><span class="linenos" data-linenos=" 7 "></span></a><span class="w">    </span><span class="k">output</span><span class="w"> </span><span class="kt">reg</span><span class="w"> </span><span class="p">[</span><span class="mh">3</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">q</span><span class="p">);</span><span class="w"> </span>
</span><span id="__span-106-8"><a id="__codelineno-106-8" name="__codelineno-106-8"></a><a href="#__codelineno-106-8"><span class="linenos" data-linenos=" 8 "></span></a><span class="w">    </span><span class="k">always</span><span class="p">@(</span><span class="k">posedge</span><span class="w"> </span><span class="n">clk</span><span class="p">,</span><span class="w"> </span><span class="k">posedge</span><span class="w"> </span><span class="n">areset</span><span class="p">)</span><span class="k">begin</span>
</span><span id="__span-106-9"><a id="__codelineno-106-9" name="__codelineno-106-9"></a><a href="#__codelineno-106-9"><span class="linenos" data-linenos=" 9 "></span></a><span class="w">        </span><span class="k">if</span><span class="p">(</span><span class="n">areset</span><span class="p">)</span><span class="w"> </span><span class="n">q</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="mh">4</span><span class="mb">&#39;b0000</span><span class="p">;</span>
</span><span id="__span-106-10"><a id="__codelineno-106-10" name="__codelineno-106-10"></a><a href="#__codelineno-106-10"><span class="linenos" data-linenos="10 "></span></a><span class="w">        </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="p">(</span><span class="n">load</span><span class="p">)</span><span class="w"> </span><span class="n">q</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">data</span><span class="p">;</span>
</span><span id="__span-106-11"><a id="__codelineno-106-11" name="__codelineno-106-11"></a><a href="#__codelineno-106-11"><span class="linenos" data-linenos="11 "></span></a><span class="w">        </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="p">(</span><span class="n">ena</span><span class="p">)</span><span class="w"> </span><span class="n">q</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">q</span><span class="w"> </span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="mh">1</span><span class="p">;</span>
</span><span id="__span-106-12"><a id="__codelineno-106-12" name="__codelineno-106-12"></a><a href="#__codelineno-106-12"><span class="linenos" data-linenos="12 "></span></a><span class="w">        </span><span class="k">else</span><span class="w"> </span><span class="n">q</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">q</span><span class="p">;</span>
</span><span id="__span-106-13"><a id="__codelineno-106-13" name="__codelineno-106-13"></a><a href="#__codelineno-106-13"><span class="linenos" data-linenos="13 "></span></a><span class="w">    </span><span class="k">end</span>
</span><span id="__span-106-14"><a id="__codelineno-106-14" name="__codelineno-106-14"></a><a href="#__codelineno-106-14"><span class="linenos" data-linenos="14 "></span></a><span class="k">endmodule</span>
</span></code></pre></div></p>
<hr />
<h5 id="leftright-rotator">Left/right rotator<a class="headerlink" href="#leftright-rotator" title="Anchor link to this section for reference">⚓︎</a></h5>
<p>Website: <a href="https://hdlbits.01xz.net/wiki/Rotate100" target="_blank">https://hdlbits.01xz.net/wiki/Rotate100</a></p>
<p>這題就是寫個rotator，可以使用concatenation來實現rotate。
<div class="language-verilog highlight"><span class="filename">Verilog</span><pre><span></span><code><span id="__span-107-1"><a id="__codelineno-107-1" name="__codelineno-107-1"></a><a href="#__codelineno-107-1"><span class="linenos" data-linenos=" 1 "></span></a><span class="k">module</span><span class="w"> </span><span class="n">top_module</span><span class="p">(</span>
</span><span id="__span-107-2"><a id="__codelineno-107-2" name="__codelineno-107-2"></a><a href="#__codelineno-107-2"><span class="linenos" data-linenos=" 2 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">clk</span><span class="p">,</span>
</span><span id="__span-107-3"><a id="__codelineno-107-3" name="__codelineno-107-3"></a><a href="#__codelineno-107-3"><span class="linenos" data-linenos=" 3 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">load</span><span class="p">,</span>
</span><span id="__span-107-4"><a id="__codelineno-107-4" name="__codelineno-107-4"></a><a href="#__codelineno-107-4"><span class="linenos" data-linenos=" 4 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="p">[</span><span class="mh">1</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">ena</span><span class="p">,</span>
</span><span id="__span-107-5"><a id="__codelineno-107-5" name="__codelineno-107-5"></a><a href="#__codelineno-107-5"><span class="linenos" data-linenos=" 5 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="p">[</span><span class="mh">99</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">data</span><span class="p">,</span>
</span><span id="__span-107-6"><a id="__codelineno-107-6" name="__codelineno-107-6"></a><a href="#__codelineno-107-6"><span class="linenos" data-linenos=" 6 "></span></a><span class="w">    </span><span class="k">output</span><span class="w"> </span><span class="kt">reg</span><span class="w"> </span><span class="p">[</span><span class="mh">99</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">q</span><span class="p">);</span><span class="w"> </span>
</span><span id="__span-107-7"><a id="__codelineno-107-7" name="__codelineno-107-7"></a><a href="#__codelineno-107-7"><span class="linenos" data-linenos=" 7 "></span></a><span class="w">    </span><span class="k">always</span><span class="p">@(</span><span class="k">posedge</span><span class="w"> </span><span class="n">clk</span><span class="p">)</span><span class="k">begin</span>
</span><span id="__span-107-8"><a id="__codelineno-107-8" name="__codelineno-107-8"></a><a href="#__codelineno-107-8"><span class="linenos" data-linenos=" 8 "></span></a><span class="w">        </span><span class="k">if</span><span class="p">(</span><span class="n">load</span><span class="p">)</span><span class="w"> </span><span class="n">q</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">data</span><span class="p">;</span>
</span><span id="__span-107-9"><a id="__codelineno-107-9" name="__codelineno-107-9"></a><a href="#__codelineno-107-9"><span class="linenos" data-linenos=" 9 "></span></a><span class="w">        </span><span class="k">else</span><span class="w"> </span><span class="k">begin</span>
</span><span id="__span-107-10"><a id="__codelineno-107-10" name="__codelineno-107-10"></a><a href="#__codelineno-107-10"><span class="linenos" data-linenos="10 "></span></a><span class="w">            </span><span class="k">case</span><span class="p">(</span><span class="n">ena</span><span class="p">)</span>
</span><span id="__span-107-11"><a id="__codelineno-107-11" name="__codelineno-107-11"></a><a href="#__codelineno-107-11"><span class="linenos" data-linenos="11 "></span></a><span class="w">                </span><span class="mh">2</span><span class="mb">&#39;b00</span><span class="o">:</span><span class="w"> </span><span class="n">q</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">q</span><span class="p">;</span>
</span><span id="__span-107-12"><a id="__codelineno-107-12" name="__codelineno-107-12"></a><a href="#__codelineno-107-12"><span class="linenos" data-linenos="12 "></span></a><span class="w">                </span><span class="mh">2</span><span class="mb">&#39;b01</span><span class="o">:</span><span class="w"> </span><span class="n">q</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">q</span><span class="p">[</span><span class="mh">0</span><span class="p">],</span><span class="w"> </span><span class="n">q</span><span class="p">[</span><span class="mh">99</span><span class="o">:</span><span class="mh">1</span><span class="p">]};</span>
</span><span id="__span-107-13"><a id="__codelineno-107-13" name="__codelineno-107-13"></a><a href="#__codelineno-107-13"><span class="linenos" data-linenos="13 "></span></a><span class="w">                </span><span class="mh">2</span><span class="mb">&#39;b10</span><span class="o">:</span><span class="w"> </span><span class="n">q</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">q</span><span class="p">[</span><span class="mh">98</span><span class="o">:</span><span class="mh">0</span><span class="p">],</span><span class="w"> </span><span class="n">q</span><span class="p">[</span><span class="mh">99</span><span class="p">]};</span>
</span><span id="__span-107-14"><a id="__codelineno-107-14" name="__codelineno-107-14"></a><a href="#__codelineno-107-14"><span class="linenos" data-linenos="14 "></span></a><span class="w">                </span><span class="mh">2</span><span class="mb">&#39;b11</span><span class="o">:</span><span class="w"> </span><span class="n">q</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">q</span><span class="p">;</span>
</span><span id="__span-107-15"><a id="__codelineno-107-15" name="__codelineno-107-15"></a><a href="#__codelineno-107-15"><span class="linenos" data-linenos="15 "></span></a><span class="w">            </span><span class="k">endcase</span>
</span><span id="__span-107-16"><a id="__codelineno-107-16" name="__codelineno-107-16"></a><a href="#__codelineno-107-16"><span class="linenos" data-linenos="16 "></span></a><span class="w">        </span><span class="k">end</span>
</span><span id="__span-107-17"><a id="__codelineno-107-17" name="__codelineno-107-17"></a><a href="#__codelineno-107-17"><span class="linenos" data-linenos="17 "></span></a><span class="w">    </span><span class="k">end</span>
</span><span id="__span-107-18"><a id="__codelineno-107-18" name="__codelineno-107-18"></a><a href="#__codelineno-107-18"><span class="linenos" data-linenos="18 "></span></a><span class="k">endmodule</span>
</span></code></pre></div></p>
<hr />
<h5 id="leftright-arithmetic-shift-by-1-or-8">Left/right arithmetic shift by 1 or 8<a class="headerlink" href="#leftright-arithmetic-shift-by-1-or-8" title="Anchor link to this section for reference">⚓︎</a></h5>
<p>Website: <a href="https://hdlbits.01xz.net/wiki/Shift18" target="_blank">https://hdlbits.01xz.net/wiki/Shift18</a></p>
<p>這題實作arithmetic shift，需注意的是arithmetic shift往右位移時，高位要用補數補位。
<div class="language-verilog highlight"><span class="filename">Verilog</span><pre><span></span><code><span id="__span-108-1"><a id="__codelineno-108-1" name="__codelineno-108-1"></a><a href="#__codelineno-108-1"><span class="linenos" data-linenos=" 1 "></span></a><span class="k">module</span><span class="w"> </span><span class="n">top_module</span><span class="p">(</span>
</span><span id="__span-108-2"><a id="__codelineno-108-2" name="__codelineno-108-2"></a><a href="#__codelineno-108-2"><span class="linenos" data-linenos=" 2 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">clk</span><span class="p">,</span>
</span><span id="__span-108-3"><a id="__codelineno-108-3" name="__codelineno-108-3"></a><a href="#__codelineno-108-3"><span class="linenos" data-linenos=" 3 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">load</span><span class="p">,</span>
</span><span id="__span-108-4"><a id="__codelineno-108-4" name="__codelineno-108-4"></a><a href="#__codelineno-108-4"><span class="linenos" data-linenos=" 4 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">ena</span><span class="p">,</span>
</span><span id="__span-108-5"><a id="__codelineno-108-5" name="__codelineno-108-5"></a><a href="#__codelineno-108-5"><span class="linenos" data-linenos=" 5 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="p">[</span><span class="mh">1</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">amount</span><span class="p">,</span>
</span><span id="__span-108-6"><a id="__codelineno-108-6" name="__codelineno-108-6"></a><a href="#__codelineno-108-6"><span class="linenos" data-linenos=" 6 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="p">[</span><span class="mh">63</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">data</span><span class="p">,</span>
</span><span id="__span-108-7"><a id="__codelineno-108-7" name="__codelineno-108-7"></a><a href="#__codelineno-108-7"><span class="linenos" data-linenos=" 7 "></span></a><span class="w">    </span><span class="k">output</span><span class="w"> </span><span class="kt">reg</span><span class="w"> </span><span class="p">[</span><span class="mh">63</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">q</span><span class="p">);</span><span class="w"> </span>
</span><span id="__span-108-8"><a id="__codelineno-108-8" name="__codelineno-108-8"></a><a href="#__codelineno-108-8"><span class="linenos" data-linenos=" 8 "></span></a><span class="w">    </span><span class="k">always</span><span class="p">@(</span><span class="k">posedge</span><span class="w"> </span><span class="n">clk</span><span class="p">)</span><span class="k">begin</span>
</span><span id="__span-108-9"><a id="__codelineno-108-9" name="__codelineno-108-9"></a><a href="#__codelineno-108-9"><span class="linenos" data-linenos=" 9 "></span></a><span class="w">        </span><span class="k">if</span><span class="p">(</span><span class="n">load</span><span class="p">)</span><span class="w"> </span><span class="n">q</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">data</span><span class="p">;</span>
</span><span id="__span-108-10"><a id="__codelineno-108-10" name="__codelineno-108-10"></a><a href="#__codelineno-108-10"><span class="linenos" data-linenos="10 "></span></a><span class="w">        </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="p">(</span><span class="n">ena</span><span class="p">)</span><span class="k">begin</span>
</span><span id="__span-108-11"><a id="__codelineno-108-11" name="__codelineno-108-11"></a><a href="#__codelineno-108-11"><span class="linenos" data-linenos="11 "></span></a><span class="w">            </span><span class="k">case</span><span class="p">(</span><span class="n">amount</span><span class="p">)</span>
</span><span id="__span-108-12"><a id="__codelineno-108-12" name="__codelineno-108-12"></a><a href="#__codelineno-108-12"><span class="linenos" data-linenos="12 "></span></a><span class="w">                </span><span class="mh">2</span><span class="mb">&#39;b00</span><span class="o">:</span><span class="w"> </span><span class="n">q</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="p">{</span><span class="n">q</span><span class="p">[</span><span class="mh">62</span><span class="o">:</span><span class="mh">0</span><span class="p">],</span><span class="w"> </span><span class="mh">1</span><span class="mb">&#39;b0</span><span class="p">};</span>
</span><span id="__span-108-13"><a id="__codelineno-108-13" name="__codelineno-108-13"></a><a href="#__codelineno-108-13"><span class="linenos" data-linenos="13 "></span></a><span class="w">                </span><span class="mh">2</span><span class="mb">&#39;b01</span><span class="o">:</span><span class="w"> </span><span class="n">q</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="p">{</span><span class="n">q</span><span class="p">[</span><span class="mh">55</span><span class="o">:</span><span class="mh">0</span><span class="p">],</span><span class="mh">8</span><span class="mb">&#39;b0000</span><span class="n">_0000</span><span class="p">};</span>
</span><span id="__span-108-14"><a id="__codelineno-108-14" name="__codelineno-108-14"></a><a href="#__codelineno-108-14"><span class="linenos" data-linenos="14 "></span></a><span class="w">                </span><span class="mh">2</span><span class="mb">&#39;b10</span><span class="o">:</span><span class="w"> </span><span class="n">q</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="p">{</span><span class="n">q</span><span class="p">[</span><span class="mh">63</span><span class="p">],</span><span class="n">q</span><span class="p">[</span><span class="mh">63</span><span class="o">:</span><span class="mh">1</span><span class="p">]};</span>
</span><span id="__span-108-15"><a id="__codelineno-108-15" name="__codelineno-108-15"></a><a href="#__codelineno-108-15"><span class="linenos" data-linenos="15 "></span></a><span class="w">                </span><span class="mh">2</span><span class="mb">&#39;b11</span><span class="o">:</span><span class="w"> </span><span class="n">q</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="p">{{</span><span class="mh">8</span><span class="p">{</span><span class="n">q</span><span class="p">[</span><span class="mh">63</span><span class="p">]}},</span><span class="n">q</span><span class="p">[</span><span class="mh">63</span><span class="o">:</span><span class="mh">8</span><span class="p">]};</span>
</span><span id="__span-108-16"><a id="__codelineno-108-16" name="__codelineno-108-16"></a><a href="#__codelineno-108-16"><span class="linenos" data-linenos="16 "></span></a><span class="w">            </span><span class="k">endcase</span>
</span><span id="__span-108-17"><a id="__codelineno-108-17" name="__codelineno-108-17"></a><a href="#__codelineno-108-17"><span class="linenos" data-linenos="17 "></span></a><span class="w">        </span><span class="k">end</span>
</span><span id="__span-108-18"><a id="__codelineno-108-18" name="__codelineno-108-18"></a><a href="#__codelineno-108-18"><span class="linenos" data-linenos="18 "></span></a><span class="w">        </span><span class="k">else</span><span class="w"> </span><span class="n">q</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">q</span><span class="p">;</span>
</span><span id="__span-108-19"><a id="__codelineno-108-19" name="__codelineno-108-19"></a><a href="#__codelineno-108-19"><span class="linenos" data-linenos="19 "></span></a><span class="w">    </span><span class="k">end</span>
</span><span id="__span-108-20"><a id="__codelineno-108-20" name="__codelineno-108-20"></a><a href="#__codelineno-108-20"><span class="linenos" data-linenos="20 "></span></a><span class="k">endmodule</span>
</span></code></pre></div></p>
<hr />
<h5 id="5-bit-lfsr">5-bit LFSR<a class="headerlink" href="#5-bit-lfsr" title="Anchor link to this section for reference">⚓︎</a></h5>
<p>Website: <a href="https://hdlbits.01xz.net/wiki/Lfsr5" target="_blank">https://hdlbits.01xz.net/wiki/Lfsr5</a></p>
<p>這題實作LFSR。
<div class="language-verilog highlight"><span class="filename">Verilog</span><pre><span></span><code><span id="__span-109-1"><a id="__codelineno-109-1" name="__codelineno-109-1"></a><a href="#__codelineno-109-1"><span class="linenos" data-linenos=" 1 "></span></a><span class="k">module</span><span class="w"> </span><span class="n">top_module</span><span class="p">(</span>
</span><span id="__span-109-2"><a id="__codelineno-109-2" name="__codelineno-109-2"></a><a href="#__codelineno-109-2"><span class="linenos" data-linenos=" 2 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">clk</span><span class="p">,</span>
</span><span id="__span-109-3"><a id="__codelineno-109-3" name="__codelineno-109-3"></a><a href="#__codelineno-109-3"><span class="linenos" data-linenos=" 3 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">reset</span><span class="p">,</span><span class="w">    </span><span class="c1">// Active-high synchronous reset to 5&#39;h1</span>
</span><span id="__span-109-4"><a id="__codelineno-109-4" name="__codelineno-109-4"></a><a href="#__codelineno-109-4"><span class="linenos" data-linenos=" 4 "></span></a><span class="w">    </span><span class="k">output</span><span class="w"> </span><span class="kt">reg</span><span class="w"> </span><span class="p">[</span><span class="mh">4</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">q</span>
</span><span id="__span-109-5"><a id="__codelineno-109-5" name="__codelineno-109-5"></a><a href="#__codelineno-109-5"><span class="linenos" data-linenos=" 5 "></span></a><span class="p">);</span><span class="w"> </span>
</span><span id="__span-109-6"><a id="__codelineno-109-6" name="__codelineno-109-6"></a><a href="#__codelineno-109-6"><span class="linenos" data-linenos=" 6 "></span></a><span class="w">    </span><span class="k">always</span><span class="p">@(</span><span class="k">posedge</span><span class="w"> </span><span class="n">clk</span><span class="p">)</span><span class="k">begin</span>
</span><span id="__span-109-7"><a id="__codelineno-109-7" name="__codelineno-109-7"></a><a href="#__codelineno-109-7"><span class="linenos" data-linenos=" 7 "></span></a><span class="w">        </span><span class="k">if</span><span class="p">(</span><span class="n">reset</span><span class="p">)</span><span class="w"> </span><span class="n">q</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="mh">5</span><span class="mb">&#39;b00001</span><span class="p">;</span>
</span><span id="__span-109-8"><a id="__codelineno-109-8" name="__codelineno-109-8"></a><a href="#__codelineno-109-8"><span class="linenos" data-linenos=" 8 "></span></a><span class="w">        </span><span class="k">else</span><span class="w"> </span><span class="n">q</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="p">{</span><span class="n">q</span><span class="p">[</span><span class="mh">0</span><span class="p">],</span><span class="n">q</span><span class="p">[</span><span class="mh">4</span><span class="p">],</span><span class="n">q</span><span class="p">[</span><span class="mh">3</span><span class="p">]</span><span class="w"> </span><span class="o">^</span><span class="w"> </span><span class="n">q</span><span class="p">[</span><span class="mh">0</span><span class="p">],</span><span class="n">q</span><span class="p">[</span><span class="mh">2</span><span class="o">:</span><span class="mh">1</span><span class="p">]};</span>
</span><span id="__span-109-9"><a id="__codelineno-109-9" name="__codelineno-109-9"></a><a href="#__codelineno-109-9"><span class="linenos" data-linenos=" 9 "></span></a><span class="w">    </span><span class="k">end</span>
</span><span id="__span-109-10"><a id="__codelineno-109-10" name="__codelineno-109-10"></a><a href="#__codelineno-109-10"><span class="linenos" data-linenos="10 "></span></a><span class="k">endmodule</span>
</span></code></pre></div></p>
<hr />
<h5 id="3-bit-lfsr">3-bit LFSR<a class="headerlink" href="#3-bit-lfsr" title="Anchor link to this section for reference">⚓︎</a></h5>
<p>Website: <a href="https://hdlbits.01xz.net/wiki/Mt2015_lfsr" target="_blank">https://hdlbits.01xz.net/wiki/Mt2015_lfsr</a></p>
<p>這題跟上題一樣實作LFSR。
<div class="language-verilog highlight"><span class="filename">Verilog</span><pre><span></span><code><span id="__span-110-1"><a id="__codelineno-110-1" name="__codelineno-110-1"></a><a href="#__codelineno-110-1"><span class="linenos" data-linenos="1 "></span></a><span class="k">module</span><span class="w"> </span><span class="n">top_module</span><span class="w"> </span><span class="p">(</span>
</span><span id="__span-110-2"><a id="__codelineno-110-2" name="__codelineno-110-2"></a><a href="#__codelineno-110-2"><span class="linenos" data-linenos="2 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="p">[</span><span class="mh">2</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">SW</span><span class="p">,</span><span class="w">      </span><span class="c1">// R</span>
</span><span id="__span-110-3"><a id="__codelineno-110-3" name="__codelineno-110-3"></a><a href="#__codelineno-110-3"><span class="linenos" data-linenos="3 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="p">[</span><span class="mh">1</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">KEY</span><span class="p">,</span><span class="w">     </span><span class="c1">// L and clk</span>
</span><span id="__span-110-4"><a id="__codelineno-110-4" name="__codelineno-110-4"></a><a href="#__codelineno-110-4"><span class="linenos" data-linenos="4 "></span></a><span class="w">    </span><span class="k">output</span><span class="w"> </span><span class="p">[</span><span class="mh">2</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">LEDR</span><span class="p">);</span><span class="w">  </span><span class="c1">// Q</span>
</span><span id="__span-110-5"><a id="__codelineno-110-5" name="__codelineno-110-5"></a><a href="#__codelineno-110-5"><span class="linenos" data-linenos="5 "></span></a>
</span><span id="__span-110-6"><a id="__codelineno-110-6" name="__codelineno-110-6"></a><a href="#__codelineno-110-6"><span class="linenos" data-linenos="6 "></span></a><span class="w">    </span><span class="k">always</span><span class="p">@(</span><span class="k">posedge</span><span class="w"> </span><span class="n">KEY</span><span class="p">[</span><span class="mh">0</span><span class="p">])</span><span class="k">begin</span>
</span><span id="__span-110-7"><a id="__codelineno-110-7" name="__codelineno-110-7"></a><a href="#__codelineno-110-7"><span class="linenos" data-linenos="7 "></span></a><span class="w">        </span><span class="n">LEDR</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">KEY</span><span class="p">[</span><span class="mh">1</span><span class="p">]</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="nl">SW:</span><span class="w"> </span><span class="p">{</span><span class="n">LEDR</span><span class="p">[</span><span class="mh">1</span><span class="p">]</span><span class="o">^</span><span class="n">LEDR</span><span class="p">[</span><span class="mh">2</span><span class="p">],</span><span class="n">LEDR</span><span class="p">[</span><span class="mh">0</span><span class="p">],</span><span class="n">LEDR</span><span class="p">[</span><span class="mh">2</span><span class="p">]};</span>
</span><span id="__span-110-8"><a id="__codelineno-110-8" name="__codelineno-110-8"></a><a href="#__codelineno-110-8"><span class="linenos" data-linenos="8 "></span></a><span class="w">    </span><span class="k">end</span>
</span><span id="__span-110-9"><a id="__codelineno-110-9" name="__codelineno-110-9"></a><a href="#__codelineno-110-9"><span class="linenos" data-linenos="9 "></span></a><span class="k">endmodule</span>
</span></code></pre></div></p>
<hr />
<h5 id="32-bit-lfsr">32-bit LFSR<a class="headerlink" href="#32-bit-lfsr" title="Anchor link to this section for reference">⚓︎</a></h5>
<p>Website: <a href="https://hdlbits.01xz.net/wiki/Lfsr32" target="_blank">https://hdlbits.01xz.net/wiki/Lfsr32</a></p>
<p>這題還是實作LFSR，taps的意思是指在對應的output放上<code>xor q[0]</code>，像說taps at 1意思就是<code>q[1] ^ q[0]</code>。
<div class="language-verilog highlight"><span class="filename">Verilog</span><pre><span></span><code><span id="__span-111-1"><a id="__codelineno-111-1" name="__codelineno-111-1"></a><a href="#__codelineno-111-1"><span class="linenos" data-linenos=" 1 "></span></a><span class="k">module</span><span class="w"> </span><span class="n">top_module</span><span class="p">(</span>
</span><span id="__span-111-2"><a id="__codelineno-111-2" name="__codelineno-111-2"></a><a href="#__codelineno-111-2"><span class="linenos" data-linenos=" 2 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">clk</span><span class="p">,</span>
</span><span id="__span-111-3"><a id="__codelineno-111-3" name="__codelineno-111-3"></a><a href="#__codelineno-111-3"><span class="linenos" data-linenos=" 3 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">reset</span><span class="p">,</span><span class="w">    </span><span class="c1">// Active-high synchronous reset to 32&#39;h1</span>
</span><span id="__span-111-4"><a id="__codelineno-111-4" name="__codelineno-111-4"></a><a href="#__codelineno-111-4"><span class="linenos" data-linenos=" 4 "></span></a><span class="w">    </span><span class="k">output</span><span class="w"> </span><span class="kt">reg</span><span class="w"> </span><span class="p">[</span><span class="mh">31</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">q</span>
</span><span id="__span-111-5"><a id="__codelineno-111-5" name="__codelineno-111-5"></a><a href="#__codelineno-111-5"><span class="linenos" data-linenos=" 5 "></span></a><span class="p">);</span><span class="w"> </span>
</span><span id="__span-111-6"><a id="__codelineno-111-6" name="__codelineno-111-6"></a><a href="#__codelineno-111-6"><span class="linenos" data-linenos=" 6 "></span></a><span class="w">    </span><span class="k">always</span><span class="p">@(</span><span class="k">posedge</span><span class="w"> </span><span class="n">clk</span><span class="p">)</span><span class="k">begin</span>
</span><span id="__span-111-7"><a id="__codelineno-111-7" name="__codelineno-111-7"></a><a href="#__codelineno-111-7"><span class="linenos" data-linenos=" 7 "></span></a><span class="w">        </span><span class="k">if</span><span class="p">(</span><span class="n">reset</span><span class="p">)</span><span class="w"> </span><span class="n">q</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="mh">32&#39;h1</span><span class="p">;</span>
</span><span id="__span-111-8"><a id="__codelineno-111-8" name="__codelineno-111-8"></a><a href="#__codelineno-111-8"><span class="linenos" data-linenos=" 8 "></span></a><span class="w">        </span><span class="k">else</span><span class="w"> </span><span class="n">q</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="p">{</span><span class="n">q</span><span class="p">[</span><span class="mh">0</span><span class="p">],</span><span class="n">q</span><span class="p">[</span><span class="mh">31</span><span class="o">:</span><span class="mh">23</span><span class="p">],</span><span class="n">q</span><span class="p">[</span><span class="mh">22</span><span class="p">]</span><span class="o">^</span><span class="n">q</span><span class="p">[</span><span class="mh">0</span><span class="p">],</span><span class="n">q</span><span class="p">[</span><span class="mh">21</span><span class="o">:</span><span class="mh">3</span><span class="p">],</span><span class="n">q</span><span class="p">[</span><span class="mh">2</span><span class="p">]</span><span class="o">^</span><span class="n">q</span><span class="p">[</span><span class="mh">0</span><span class="p">],</span><span class="n">q</span><span class="p">[</span><span class="mh">1</span><span class="p">]</span><span class="o">^</span><span class="n">q</span><span class="p">[</span><span class="mh">0</span><span class="p">]};</span>
</span><span id="__span-111-9"><a id="__codelineno-111-9" name="__codelineno-111-9"></a><a href="#__codelineno-111-9"><span class="linenos" data-linenos=" 9 "></span></a><span class="w">    </span><span class="k">end</span>
</span><span id="__span-111-10"><a id="__codelineno-111-10" name="__codelineno-111-10"></a><a href="#__codelineno-111-10"><span class="linenos" data-linenos="10 "></span></a><span class="k">endmodule</span>
</span></code></pre></div></p>
<hr />
<h5 id="shift-register1">Shift register(1)<a class="headerlink" href="#shift-register1" title="Anchor link to this section for reference">⚓︎</a></h5>
<p>Website: <a href="https://hdlbits.01xz.net/wiki/Exams/m2014_q4k" target="_blank">https://hdlbits.01xz.net/wiki/Exams/m2014_q4k</a></p>
<p>這題單純練習pipeline怎麼切，總之就是多開幾個reg。
<div class="language-verilog highlight"><span class="filename">Verilog</span><pre><span></span><code><span id="__span-112-1"><a id="__codelineno-112-1" name="__codelineno-112-1"></a><a href="#__codelineno-112-1"><span class="linenos" data-linenos=" 1 "></span></a><span class="k">module</span><span class="w"> </span><span class="n">top_module</span><span class="w"> </span><span class="p">(</span>
</span><span id="__span-112-2"><a id="__codelineno-112-2" name="__codelineno-112-2"></a><a href="#__codelineno-112-2"><span class="linenos" data-linenos=" 2 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">clk</span><span class="p">,</span>
</span><span id="__span-112-3"><a id="__codelineno-112-3" name="__codelineno-112-3"></a><a href="#__codelineno-112-3"><span class="linenos" data-linenos=" 3 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">resetn</span><span class="p">,</span><span class="w">   </span><span class="c1">// synchronous reset</span>
</span><span id="__span-112-4"><a id="__codelineno-112-4" name="__codelineno-112-4"></a><a href="#__codelineno-112-4"><span class="linenos" data-linenos=" 4 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">in</span><span class="p">,</span>
</span><span id="__span-112-5"><a id="__codelineno-112-5" name="__codelineno-112-5"></a><a href="#__codelineno-112-5"><span class="linenos" data-linenos=" 5 "></span></a><span class="w">    </span><span class="k">output</span><span class="w"> </span><span class="kt">reg</span><span class="w"> </span><span class="n">out</span><span class="p">);</span>
</span><span id="__span-112-6"><a id="__codelineno-112-6" name="__codelineno-112-6"></a><a href="#__codelineno-112-6"><span class="linenos" data-linenos=" 6 "></span></a><span class="w">    </span><span class="kt">reg</span><span class="w"> </span><span class="n">q1</span><span class="p">,</span><span class="w"> </span><span class="n">q2</span><span class="p">,</span><span class="w"> </span><span class="n">q3</span><span class="p">;</span>
</span><span id="__span-112-7"><a id="__codelineno-112-7" name="__codelineno-112-7"></a><a href="#__codelineno-112-7"><span class="linenos" data-linenos=" 7 "></span></a><span class="w">    </span><span class="k">always</span><span class="p">@(</span><span class="k">posedge</span><span class="w"> </span><span class="n">clk</span><span class="p">)</span><span class="k">begin</span>
</span><span id="__span-112-8"><a id="__codelineno-112-8" name="__codelineno-112-8"></a><a href="#__codelineno-112-8"><span class="linenos" data-linenos=" 8 "></span></a><span class="w">        </span><span class="k">if</span><span class="p">(</span><span class="o">~</span><span class="n">resetn</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="n">q1</span><span class="p">,</span><span class="n">q2</span><span class="p">,</span><span class="n">q3</span><span class="p">,</span><span class="n">out</span><span class="p">}</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="mh">4</span><span class="mb">&#39;b0000</span><span class="p">;</span>
</span><span id="__span-112-9"><a id="__codelineno-112-9" name="__codelineno-112-9"></a><a href="#__codelineno-112-9"><span class="linenos" data-linenos=" 9 "></span></a><span class="w">        </span><span class="k">else</span><span class="w"> </span><span class="p">{</span><span class="n">q1</span><span class="p">,</span><span class="n">q2</span><span class="p">,</span><span class="n">q3</span><span class="p">,</span><span class="n">out</span><span class="p">}</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="p">{</span><span class="n">in</span><span class="p">,</span><span class="n">q1</span><span class="p">,</span><span class="n">q2</span><span class="p">,</span><span class="n">q3</span><span class="p">};</span>
</span><span id="__span-112-10"><a id="__codelineno-112-10" name="__codelineno-112-10"></a><a href="#__codelineno-112-10"><span class="linenos" data-linenos="10 "></span></a><span class="w">    </span><span class="k">end</span>
</span><span id="__span-112-11"><a id="__codelineno-112-11" name="__codelineno-112-11"></a><a href="#__codelineno-112-11"><span class="linenos" data-linenos="11 "></span></a><span class="k">endmodule</span>
</span></code></pre></div></p>
<hr />
<h5 id="shift-register2">Shift register(2)<a class="headerlink" href="#shift-register2" title="Anchor link to this section for reference">⚓︎</a></h5>
<p>Website: <a href="https://hdlbits.01xz.net/wiki/Exams/2014_q4b" target="_blank">https://hdlbits.01xz.net/wiki/Exams/2014_q4b</a></p>
<p>這題單純練習寫一個module，然後接成pipeline。
<div class="language-verilog highlight"><span class="filename">Verilog</span><pre><span></span><code><span id="__span-113-1"><a id="__codelineno-113-1" name="__codelineno-113-1"></a><a href="#__codelineno-113-1"><span class="linenos" data-linenos=" 1 "></span></a><span class="k">module</span><span class="w"> </span><span class="n">top_module</span><span class="w"> </span><span class="p">(</span>
</span><span id="__span-113-2"><a id="__codelineno-113-2" name="__codelineno-113-2"></a><a href="#__codelineno-113-2"><span class="linenos" data-linenos=" 2 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="p">[</span><span class="mh">3</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">SW</span><span class="p">,</span>
</span><span id="__span-113-3"><a id="__codelineno-113-3" name="__codelineno-113-3"></a><a href="#__codelineno-113-3"><span class="linenos" data-linenos=" 3 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="p">[</span><span class="mh">3</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">KEY</span><span class="p">,</span>
</span><span id="__span-113-4"><a id="__codelineno-113-4" name="__codelineno-113-4"></a><a href="#__codelineno-113-4"><span class="linenos" data-linenos=" 4 "></span></a><span class="w">    </span><span class="k">output</span><span class="w"> </span><span class="p">[</span><span class="mh">3</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">LEDR</span>
</span><span id="__span-113-5"><a id="__codelineno-113-5" name="__codelineno-113-5"></a><a href="#__codelineno-113-5"><span class="linenos" data-linenos=" 5 "></span></a><span class="p">);</span><span class="w"> </span><span class="c1">//</span>
</span><span id="__span-113-6"><a id="__codelineno-113-6" name="__codelineno-113-6"></a><a href="#__codelineno-113-6"><span class="linenos" data-linenos=" 6 "></span></a><span class="w">    </span><span class="n">MUXDFF</span><span class="w"> </span><span class="n">ff0</span><span class="p">(</span><span class="w"> </span><span class="p">.</span><span class="n">E</span><span class="p">(</span><span class="n">KEY</span><span class="p">[</span><span class="mh">1</span><span class="p">]),</span><span class="w"> </span><span class="p">.</span><span class="n">clk</span><span class="p">(</span><span class="n">KEY</span><span class="p">[</span><span class="mh">0</span><span class="p">]),</span><span class="w"> </span><span class="p">.</span><span class="n">L</span><span class="p">(</span><span class="n">KEY</span><span class="p">[</span><span class="mh">2</span><span class="p">]),</span><span class="w"> </span><span class="p">.</span><span class="n">w</span><span class="p">(</span><span class="n">LEDR</span><span class="p">[</span><span class="mh">1</span><span class="p">]),</span><span class="w"> </span><span class="p">.</span><span class="n">R</span><span class="p">(</span><span class="n">SW</span><span class="p">[</span><span class="mh">0</span><span class="p">]),</span><span class="w"> </span><span class="p">.</span><span class="n">q</span><span class="p">(</span><span class="n">LEDR</span><span class="p">[</span><span class="mh">0</span><span class="p">]));</span>
</span><span id="__span-113-7"><a id="__codelineno-113-7" name="__codelineno-113-7"></a><a href="#__codelineno-113-7"><span class="linenos" data-linenos=" 7 "></span></a><span class="w">    </span><span class="n">MUXDFF</span><span class="w"> </span><span class="n">ff1</span><span class="p">(</span><span class="w"> </span><span class="p">.</span><span class="n">E</span><span class="p">(</span><span class="n">KEY</span><span class="p">[</span><span class="mh">1</span><span class="p">]),</span><span class="w"> </span><span class="p">.</span><span class="n">clk</span><span class="p">(</span><span class="n">KEY</span><span class="p">[</span><span class="mh">0</span><span class="p">]),</span><span class="w"> </span><span class="p">.</span><span class="n">L</span><span class="p">(</span><span class="n">KEY</span><span class="p">[</span><span class="mh">2</span><span class="p">]),</span><span class="w"> </span><span class="p">.</span><span class="n">w</span><span class="p">(</span><span class="n">LEDR</span><span class="p">[</span><span class="mh">2</span><span class="p">]),</span><span class="w"> </span><span class="p">.</span><span class="n">R</span><span class="p">(</span><span class="n">SW</span><span class="p">[</span><span class="mh">1</span><span class="p">]),</span><span class="w"> </span><span class="p">.</span><span class="n">q</span><span class="p">(</span><span class="n">LEDR</span><span class="p">[</span><span class="mh">1</span><span class="p">]));</span>
</span><span id="__span-113-8"><a id="__codelineno-113-8" name="__codelineno-113-8"></a><a href="#__codelineno-113-8"><span class="linenos" data-linenos=" 8 "></span></a><span class="w">    </span><span class="n">MUXDFF</span><span class="w"> </span><span class="n">ff2</span><span class="p">(</span><span class="w"> </span><span class="p">.</span><span class="n">E</span><span class="p">(</span><span class="n">KEY</span><span class="p">[</span><span class="mh">1</span><span class="p">]),</span><span class="w"> </span><span class="p">.</span><span class="n">clk</span><span class="p">(</span><span class="n">KEY</span><span class="p">[</span><span class="mh">0</span><span class="p">]),</span><span class="w"> </span><span class="p">.</span><span class="n">L</span><span class="p">(</span><span class="n">KEY</span><span class="p">[</span><span class="mh">2</span><span class="p">]),</span><span class="w"> </span><span class="p">.</span><span class="n">w</span><span class="p">(</span><span class="n">LEDR</span><span class="p">[</span><span class="mh">3</span><span class="p">]),</span><span class="w"> </span><span class="p">.</span><span class="n">R</span><span class="p">(</span><span class="n">SW</span><span class="p">[</span><span class="mh">2</span><span class="p">]),</span><span class="w"> </span><span class="p">.</span><span class="n">q</span><span class="p">(</span><span class="n">LEDR</span><span class="p">[</span><span class="mh">2</span><span class="p">]));</span>
</span><span id="__span-113-9"><a id="__codelineno-113-9" name="__codelineno-113-9"></a><a href="#__codelineno-113-9"><span class="linenos" data-linenos=" 9 "></span></a><span class="w">    </span><span class="n">MUXDFF</span><span class="w"> </span><span class="n">ff3</span><span class="p">(</span><span class="w"> </span><span class="p">.</span><span class="n">E</span><span class="p">(</span><span class="n">KEY</span><span class="p">[</span><span class="mh">1</span><span class="p">]),</span><span class="w"> </span><span class="p">.</span><span class="n">clk</span><span class="p">(</span><span class="n">KEY</span><span class="p">[</span><span class="mh">0</span><span class="p">]),</span><span class="w"> </span><span class="p">.</span><span class="n">L</span><span class="p">(</span><span class="n">KEY</span><span class="p">[</span><span class="mh">2</span><span class="p">]),</span><span class="w"> </span><span class="p">.</span><span class="n">w</span><span class="p">(</span><span class="n">KEY</span><span class="p">[</span><span class="mh">3</span><span class="p">]),</span><span class="w"> </span><span class="p">.</span><span class="n">R</span><span class="p">(</span><span class="n">SW</span><span class="p">[</span><span class="mh">3</span><span class="p">]),</span><span class="w"> </span><span class="p">.</span><span class="n">q</span><span class="p">(</span><span class="n">LEDR</span><span class="p">[</span><span class="mh">3</span><span class="p">]));</span>
</span><span id="__span-113-10"><a id="__codelineno-113-10" name="__codelineno-113-10"></a><a href="#__codelineno-113-10"><span class="linenos" data-linenos="10 "></span></a><span class="k">endmodule</span>
</span><span id="__span-113-11"><a id="__codelineno-113-11" name="__codelineno-113-11"></a><a href="#__codelineno-113-11"><span class="linenos" data-linenos="11 "></span></a>
</span><span id="__span-113-12"><a id="__codelineno-113-12" name="__codelineno-113-12"></a><a href="#__codelineno-113-12"><span class="linenos" data-linenos="12 "></span></a><span class="k">module</span><span class="w"> </span><span class="n">MUXDFF</span><span class="w"> </span><span class="p">(</span>
</span><span id="__span-113-13"><a id="__codelineno-113-13" name="__codelineno-113-13"></a><a href="#__codelineno-113-13"><span class="linenos" data-linenos="13 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">E</span><span class="p">,</span>
</span><span id="__span-113-14"><a id="__codelineno-113-14" name="__codelineno-113-14"></a><a href="#__codelineno-113-14"><span class="linenos" data-linenos="14 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">clk</span><span class="p">,</span>
</span><span id="__span-113-15"><a id="__codelineno-113-15" name="__codelineno-113-15"></a><a href="#__codelineno-113-15"><span class="linenos" data-linenos="15 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">L</span><span class="p">,</span>
</span><span id="__span-113-16"><a id="__codelineno-113-16" name="__codelineno-113-16"></a><a href="#__codelineno-113-16"><span class="linenos" data-linenos="16 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">w</span><span class="p">,</span>
</span><span id="__span-113-17"><a id="__codelineno-113-17" name="__codelineno-113-17"></a><a href="#__codelineno-113-17"><span class="linenos" data-linenos="17 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">R</span><span class="p">,</span>
</span><span id="__span-113-18"><a id="__codelineno-113-18" name="__codelineno-113-18"></a><a href="#__codelineno-113-18"><span class="linenos" data-linenos="18 "></span></a><span class="w">    </span><span class="k">output</span><span class="w"> </span><span class="n">q</span><span class="p">);</span>
</span><span id="__span-113-19"><a id="__codelineno-113-19" name="__codelineno-113-19"></a><a href="#__codelineno-113-19"><span class="linenos" data-linenos="19 "></span></a><span class="w">    </span><span class="k">always</span><span class="p">@(</span><span class="k">posedge</span><span class="w"> </span><span class="n">clk</span><span class="p">)</span><span class="k">begin</span>
</span><span id="__span-113-20"><a id="__codelineno-113-20" name="__codelineno-113-20"></a><a href="#__codelineno-113-20"><span class="linenos" data-linenos="20 "></span></a><span class="w">        </span><span class="k">case</span><span class="p">({</span><span class="n">L</span><span class="p">,</span><span class="n">E</span><span class="p">})</span>
</span><span id="__span-113-21"><a id="__codelineno-113-21" name="__codelineno-113-21"></a><a href="#__codelineno-113-21"><span class="linenos" data-linenos="21 "></span></a><span class="w">            </span><span class="mh">2</span><span class="mb">&#39;b00</span><span class="o">:</span><span class="w"> </span><span class="n">q</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">q</span><span class="p">;</span>
</span><span id="__span-113-22"><a id="__codelineno-113-22" name="__codelineno-113-22"></a><a href="#__codelineno-113-22"><span class="linenos" data-linenos="22 "></span></a><span class="w">            </span><span class="mh">2</span><span class="mb">&#39;b01</span><span class="o">:</span><span class="w"> </span><span class="n">q</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">w</span><span class="p">;</span>
</span><span id="__span-113-23"><a id="__codelineno-113-23" name="__codelineno-113-23"></a><a href="#__codelineno-113-23"><span class="linenos" data-linenos="23 "></span></a><span class="w">            </span><span class="k">default</span><span class="o">:</span><span class="w"> </span><span class="n">q</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">R</span><span class="p">;</span>
</span><span id="__span-113-24"><a id="__codelineno-113-24" name="__codelineno-113-24"></a><a href="#__codelineno-113-24"><span class="linenos" data-linenos="24 "></span></a><span class="w">        </span><span class="k">endcase</span>
</span><span id="__span-113-25"><a id="__codelineno-113-25" name="__codelineno-113-25"></a><a href="#__codelineno-113-25"><span class="linenos" data-linenos="25 "></span></a><span class="w">    </span><span class="k">end</span>
</span><span id="__span-113-26"><a id="__codelineno-113-26" name="__codelineno-113-26"></a><a href="#__codelineno-113-26"><span class="linenos" data-linenos="26 "></span></a><span class="k">endmodule</span>
</span></code></pre></div></p>
<hr />
<h5 id="3-input-lut">3-input LUT<a class="headerlink" href="#3-input-lut" title="Anchor link to this section for reference">⚓︎</a></h5>
<p>Website: <a href="https://hdlbits.01xz.net/wiki/Exams/ece241_2013_q12" target="_blank">https://hdlbits.01xz.net/wiki/Exams/ece241_2013_q12</a></p>
<p>這題單純練習寫一個shift register和multiplexer。
<div class="language-verilog highlight"><span class="filename">Verilog</span><pre><span></span><code><span id="__span-114-1"><a id="__codelineno-114-1" name="__codelineno-114-1"></a><a href="#__codelineno-114-1"><span class="linenos" data-linenos=" 1 "></span></a><span class="k">module</span><span class="w"> </span><span class="n">top_module</span><span class="w"> </span><span class="p">(</span>
</span><span id="__span-114-2"><a id="__codelineno-114-2" name="__codelineno-114-2"></a><a href="#__codelineno-114-2"><span class="linenos" data-linenos=" 2 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">clk</span><span class="p">,</span>
</span><span id="__span-114-3"><a id="__codelineno-114-3" name="__codelineno-114-3"></a><a href="#__codelineno-114-3"><span class="linenos" data-linenos=" 3 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">enable</span><span class="p">,</span>
</span><span id="__span-114-4"><a id="__codelineno-114-4" name="__codelineno-114-4"></a><a href="#__codelineno-114-4"><span class="linenos" data-linenos=" 4 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">S</span><span class="p">,</span>
</span><span id="__span-114-5"><a id="__codelineno-114-5" name="__codelineno-114-5"></a><a href="#__codelineno-114-5"><span class="linenos" data-linenos=" 5 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">A</span><span class="p">,</span><span class="w"> </span><span class="n">B</span><span class="p">,</span><span class="w"> </span><span class="n">C</span><span class="p">,</span>
</span><span id="__span-114-6"><a id="__codelineno-114-6" name="__codelineno-114-6"></a><a href="#__codelineno-114-6"><span class="linenos" data-linenos=" 6 "></span></a><span class="w">    </span><span class="k">output</span><span class="w"> </span><span class="kt">reg</span><span class="w"> </span><span class="n">Z</span><span class="w"> </span><span class="p">);</span><span class="w"> </span>
</span><span id="__span-114-7"><a id="__codelineno-114-7" name="__codelineno-114-7"></a><a href="#__codelineno-114-7"><span class="linenos" data-linenos=" 7 "></span></a><span class="w">    </span><span class="kt">reg</span><span class="w"> </span><span class="p">[</span><span class="mh">7</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">Q</span><span class="p">;</span>
</span><span id="__span-114-8"><a id="__codelineno-114-8" name="__codelineno-114-8"></a><a href="#__codelineno-114-8"><span class="linenos" data-linenos=" 8 "></span></a><span class="w">    </span><span class="k">always</span><span class="p">@(</span><span class="k">posedge</span><span class="w"> </span><span class="n">clk</span><span class="p">)</span><span class="k">begin</span>
</span><span id="__span-114-9"><a id="__codelineno-114-9" name="__codelineno-114-9"></a><a href="#__codelineno-114-9"><span class="linenos" data-linenos=" 9 "></span></a><span class="w">        </span><span class="k">if</span><span class="p">(</span><span class="n">enable</span><span class="p">)</span><span class="w"> </span><span class="n">Q</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="p">{</span><span class="n">Q</span><span class="p">[</span><span class="mh">6</span><span class="o">:</span><span class="mh">0</span><span class="p">],</span><span class="n">S</span><span class="p">};</span>
</span><span id="__span-114-10"><a id="__codelineno-114-10" name="__codelineno-114-10"></a><a href="#__codelineno-114-10"><span class="linenos" data-linenos="10 "></span></a><span class="w">        </span><span class="k">else</span><span class="w"> </span><span class="n">Q</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">Q</span><span class="p">;</span>
</span><span id="__span-114-11"><a id="__codelineno-114-11" name="__codelineno-114-11"></a><a href="#__codelineno-114-11"><span class="linenos" data-linenos="11 "></span></a><span class="w">    </span><span class="k">end</span>
</span><span id="__span-114-12"><a id="__codelineno-114-12" name="__codelineno-114-12"></a><a href="#__codelineno-114-12"><span class="linenos" data-linenos="12 "></span></a><span class="w">    </span><span class="k">assign</span><span class="w"> </span><span class="n">Z</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Q</span><span class="p">[{</span><span class="n">A</span><span class="p">,</span><span class="n">B</span><span class="p">,</span><span class="n">C</span><span class="p">}];</span>
</span><span id="__span-114-13"><a id="__codelineno-114-13" name="__codelineno-114-13"></a><a href="#__codelineno-114-13"><span class="linenos" data-linenos="13 "></span></a><span class="k">endmodule</span>
</span></code></pre></div></p>
<hr />
<h4 id="more-circuits">More Circuits<a class="headerlink" href="#more-circuits" title="Anchor link to this section for reference">⚓︎</a></h4>
<h5 id="rule-90">Rule 90<a class="headerlink" href="#rule-90" title="Anchor link to this section for reference">⚓︎</a></h5>
<p>Website: <a href="https://hdlbits.01xz.net/wiki/Rule90" target="_blank">https://hdlbits.01xz.net/wiki/Rule90</a></p>
<p>這題單純練習concatenation的使用。
<div class="language-verilog highlight"><span class="filename">Verilog</span><pre><span></span><code><span id="__span-115-1"><a id="__codelineno-115-1" name="__codelineno-115-1"></a><a href="#__codelineno-115-1"><span class="linenos" data-linenos=" 1 "></span></a><span class="k">module</span><span class="w"> </span><span class="n">top_module</span><span class="p">(</span>
</span><span id="__span-115-2"><a id="__codelineno-115-2" name="__codelineno-115-2"></a><a href="#__codelineno-115-2"><span class="linenos" data-linenos=" 2 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">clk</span><span class="p">,</span>
</span><span id="__span-115-3"><a id="__codelineno-115-3" name="__codelineno-115-3"></a><a href="#__codelineno-115-3"><span class="linenos" data-linenos=" 3 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">load</span><span class="p">,</span>
</span><span id="__span-115-4"><a id="__codelineno-115-4" name="__codelineno-115-4"></a><a href="#__codelineno-115-4"><span class="linenos" data-linenos=" 4 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="p">[</span><span class="mh">511</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">data</span><span class="p">,</span>
</span><span id="__span-115-5"><a id="__codelineno-115-5" name="__codelineno-115-5"></a><a href="#__codelineno-115-5"><span class="linenos" data-linenos=" 5 "></span></a><span class="w">    </span><span class="k">output</span><span class="w"> </span><span class="kt">reg</span><span class="w"> </span><span class="p">[</span><span class="mh">511</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">q</span><span class="w"> </span><span class="p">);</span><span class="w"> </span>
</span><span id="__span-115-6"><a id="__codelineno-115-6" name="__codelineno-115-6"></a><a href="#__codelineno-115-6"><span class="linenos" data-linenos=" 6 "></span></a><span class="w">    </span><span class="k">always</span><span class="w"> </span><span class="p">@(</span><span class="k">posedge</span><span class="w"> </span><span class="n">clk</span><span class="p">)</span><span class="k">begin</span>
</span><span id="__span-115-7"><a id="__codelineno-115-7" name="__codelineno-115-7"></a><a href="#__codelineno-115-7"><span class="linenos" data-linenos=" 7 "></span></a><span class="w">        </span><span class="k">if</span><span class="p">(</span><span class="n">load</span><span class="p">)</span><span class="w"> </span><span class="n">q</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">data</span><span class="p">;</span>
</span><span id="__span-115-8"><a id="__codelineno-115-8" name="__codelineno-115-8"></a><a href="#__codelineno-115-8"><span class="linenos" data-linenos=" 8 "></span></a><span class="w">        </span><span class="k">else</span><span class="w"> </span><span class="n">q</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="p">{</span><span class="mh">1</span><span class="mb">&#39;b0</span><span class="p">,</span><span class="n">q</span><span class="p">[</span><span class="mh">511</span><span class="o">:</span><span class="mh">1</span><span class="p">]}</span><span class="w"> </span><span class="o">^</span><span class="w"> </span><span class="p">{</span><span class="n">q</span><span class="p">[</span><span class="mh">510</span><span class="o">:</span><span class="mh">0</span><span class="p">],</span><span class="mh">1</span><span class="mb">&#39;b0</span><span class="p">};</span>
</span><span id="__span-115-9"><a id="__codelineno-115-9" name="__codelineno-115-9"></a><a href="#__codelineno-115-9"><span class="linenos" data-linenos=" 9 "></span></a><span class="w">    </span><span class="k">end</span>
</span><span id="__span-115-10"><a id="__codelineno-115-10" name="__codelineno-115-10"></a><a href="#__codelineno-115-10"><span class="linenos" data-linenos="10 "></span></a><span class="k">endmodule</span>
</span></code></pre></div></p>
<hr />
<h5 id="rule-110">Rule 110<a class="headerlink" href="#rule-110" title="Anchor link to this section for reference">⚓︎</a></h5>
<p>Website: <a href="https://hdlbits.01xz.net/wiki/Rule110" target="_blank">https://hdlbits.01xz.net/wiki/Rule110</a></p>
<p>這題單純練習concatenation的使用，跟上題不同的是，這題有點卡諾圖化簡的感覺。
<div class="language-verilog highlight"><span class="filename">Verilog</span><pre><span></span><code><span id="__span-116-1"><a id="__codelineno-116-1" name="__codelineno-116-1"></a><a href="#__codelineno-116-1"><span class="linenos" data-linenos=" 1 "></span></a><span class="k">module</span><span class="w"> </span><span class="n">top_module</span><span class="p">(</span>
</span><span id="__span-116-2"><a id="__codelineno-116-2" name="__codelineno-116-2"></a><a href="#__codelineno-116-2"><span class="linenos" data-linenos=" 2 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">clk</span><span class="p">,</span>
</span><span id="__span-116-3"><a id="__codelineno-116-3" name="__codelineno-116-3"></a><a href="#__codelineno-116-3"><span class="linenos" data-linenos=" 3 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">load</span><span class="p">,</span>
</span><span id="__span-116-4"><a id="__codelineno-116-4" name="__codelineno-116-4"></a><a href="#__codelineno-116-4"><span class="linenos" data-linenos=" 4 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="p">[</span><span class="mh">511</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">data</span><span class="p">,</span>
</span><span id="__span-116-5"><a id="__codelineno-116-5" name="__codelineno-116-5"></a><a href="#__codelineno-116-5"><span class="linenos" data-linenos=" 5 "></span></a><span class="w">    </span><span class="k">output</span><span class="w"> </span><span class="kt">reg</span><span class="w"> </span><span class="p">[</span><span class="mh">511</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">q</span>
</span><span id="__span-116-6"><a id="__codelineno-116-6" name="__codelineno-116-6"></a><a href="#__codelineno-116-6"><span class="linenos" data-linenos=" 6 "></span></a><span class="p">);</span><span class="w"> </span>
</span><span id="__span-116-7"><a id="__codelineno-116-7" name="__codelineno-116-7"></a><a href="#__codelineno-116-7"><span class="linenos" data-linenos=" 7 "></span></a><span class="w">    </span><span class="k">always</span><span class="p">@(</span><span class="k">posedge</span><span class="w"> </span><span class="n">clk</span><span class="p">)</span><span class="k">begin</span>
</span><span id="__span-116-8"><a id="__codelineno-116-8" name="__codelineno-116-8"></a><a href="#__codelineno-116-8"><span class="linenos" data-linenos=" 8 "></span></a><span class="w">        </span><span class="k">if</span><span class="p">(</span><span class="n">load</span><span class="p">)</span><span class="w"> </span><span class="n">q</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">data</span><span class="p">;</span>
</span><span id="__span-116-9"><a id="__codelineno-116-9" name="__codelineno-116-9"></a><a href="#__codelineno-116-9"><span class="linenos" data-linenos=" 9 "></span></a><span class="w">        </span><span class="k">else</span><span class="w"> </span><span class="n">q</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="p">(</span><span class="n">q</span><span class="w"> </span><span class="o">^</span><span class="w"> </span><span class="p">{</span><span class="n">q</span><span class="p">[</span><span class="mh">510</span><span class="o">:</span><span class="mh">0</span><span class="p">],</span><span class="mh">1</span><span class="mb">&#39;b0</span><span class="p">})</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="p">(</span><span class="o">~</span><span class="p">{</span><span class="mh">1</span><span class="mb">&#39;b0</span><span class="p">,</span><span class="n">q</span><span class="p">[</span><span class="mh">511</span><span class="o">:</span><span class="mh">1</span><span class="p">]}</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="n">q</span><span class="p">);</span>
</span><span id="__span-116-10"><a id="__codelineno-116-10" name="__codelineno-116-10"></a><a href="#__codelineno-116-10"><span class="linenos" data-linenos="10 "></span></a><span class="w">    </span><span class="k">end</span>
</span><span id="__span-116-11"><a id="__codelineno-116-11" name="__codelineno-116-11"></a><a href="#__codelineno-116-11"><span class="linenos" data-linenos="11 "></span></a><span class="k">endmodule</span>
</span></code></pre></div></p>
<hr />
<h5 id="conways-game-of-life-16x16">Conway's Game of Life 16x16<a class="headerlink" href="#conways-game-of-life-16x16" title="Anchor link to this section for reference">⚓︎</a></h5>
<p>Website: <a href="https://hdlbits.01xz.net/wiki/Conwaylife" target="_blank">https://hdlbits.01xz.net/wiki/Conwaylife</a></p>
<p>這題練習使用for迴圈，還有debug的耐心。
<div class="language-verilog highlight"><span class="filename">Verilog</span><pre><span></span><code><span id="__span-117-1"><a id="__codelineno-117-1" name="__codelineno-117-1"></a><a href="#__codelineno-117-1"><span class="linenos" data-linenos=" 1 "></span></a><span class="k">module</span><span class="w"> </span><span class="n">top_module</span><span class="p">(</span>
</span><span id="__span-117-2"><a id="__codelineno-117-2" name="__codelineno-117-2"></a><a href="#__codelineno-117-2"><span class="linenos" data-linenos=" 2 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">clk</span><span class="p">,</span>
</span><span id="__span-117-3"><a id="__codelineno-117-3" name="__codelineno-117-3"></a><a href="#__codelineno-117-3"><span class="linenos" data-linenos=" 3 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">load</span><span class="p">,</span>
</span><span id="__span-117-4"><a id="__codelineno-117-4" name="__codelineno-117-4"></a><a href="#__codelineno-117-4"><span class="linenos" data-linenos=" 4 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="p">[</span><span class="mh">255</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">data</span><span class="p">,</span>
</span><span id="__span-117-5"><a id="__codelineno-117-5" name="__codelineno-117-5"></a><a href="#__codelineno-117-5"><span class="linenos" data-linenos=" 5 "></span></a><span class="w">    </span><span class="k">output</span><span class="w"> </span><span class="kt">reg</span><span class="w"> </span><span class="p">[</span><span class="mh">255</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">q</span><span class="w"> </span><span class="p">);</span>
</span><span id="__span-117-6"><a id="__codelineno-117-6" name="__codelineno-117-6"></a><a href="#__codelineno-117-6"><span class="linenos" data-linenos=" 6 "></span></a><span class="w">    </span><span class="kt">reg</span><span class="w"> </span><span class="p">[</span><span class="mh">255</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">next_q</span><span class="p">;</span>
</span><span id="__span-117-7"><a id="__codelineno-117-7" name="__codelineno-117-7"></a><a href="#__codelineno-117-7"><span class="linenos" data-linenos=" 7 "></span></a><span class="w">    </span><span class="kt">reg</span><span class="w"> </span><span class="p">[</span><span class="mh">323</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">q_padding</span><span class="p">;</span>
</span><span id="__span-117-8"><a id="__codelineno-117-8" name="__codelineno-117-8"></a><a href="#__codelineno-117-8"><span class="linenos" data-linenos=" 8 "></span></a><span class="w">    </span><span class="kt">reg</span><span class="w"> </span><span class="p">[</span><span class="mh">3</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">answer</span><span class="p">[</span><span class="mh">255</span><span class="o">:</span><span class="mh">0</span><span class="p">];</span>
</span><span id="__span-117-9"><a id="__codelineno-117-9" name="__codelineno-117-9"></a><a href="#__codelineno-117-9"><span class="linenos" data-linenos=" 9 "></span></a><span class="w">    </span><span class="k">integer</span><span class="w"> </span><span class="n">i</span><span class="p">,</span><span class="n">j</span><span class="p">;</span>
</span><span id="__span-117-10"><a id="__codelineno-117-10" name="__codelineno-117-10"></a><a href="#__codelineno-117-10"><span class="linenos" data-linenos="10 "></span></a>
</span><span id="__span-117-11"><a id="__codelineno-117-11" name="__codelineno-117-11"></a><a href="#__codelineno-117-11"><span class="linenos" data-linenos="11 "></span></a><span class="w">    </span><span class="k">always</span><span class="p">@(</span><span class="o">*</span><span class="p">)</span><span class="k">begin</span>
</span><span id="__span-117-12"><a id="__codelineno-117-12" name="__codelineno-117-12"></a><a href="#__codelineno-117-12"><span class="linenos" data-linenos="12 "></span></a><span class="w">        </span><span class="c1">//update q_padding</span>
</span><span id="__span-117-13"><a id="__codelineno-117-13" name="__codelineno-117-13"></a><a href="#__codelineno-117-13"><span class="linenos" data-linenos="13 "></span></a><span class="w">        </span><span class="n">q_padding</span><span class="p">[</span><span class="mh">17</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="n">q</span><span class="p">[</span><span class="mh">240</span><span class="p">],</span><span class="n">q</span><span class="p">[</span><span class="mh">255</span><span class="o">:</span><span class="mh">240</span><span class="p">],</span><span class="n">q</span><span class="p">[</span><span class="mh">255</span><span class="p">]};</span>
</span><span id="__span-117-14"><a id="__codelineno-117-14" name="__codelineno-117-14"></a><a href="#__codelineno-117-14"><span class="linenos" data-linenos="14 "></span></a><span class="w">        </span><span class="n">q_padding</span><span class="p">[</span><span class="mh">323</span><span class="o">:</span><span class="mh">306</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="n">q</span><span class="p">[</span><span class="mh">0</span><span class="p">],</span><span class="n">q</span><span class="p">[</span><span class="mh">15</span><span class="o">:</span><span class="mh">0</span><span class="p">],</span><span class="n">q</span><span class="p">[</span><span class="mh">15</span><span class="p">]};</span>
</span><span id="__span-117-15"><a id="__codelineno-117-15" name="__codelineno-117-15"></a><a href="#__codelineno-117-15"><span class="linenos" data-linenos="15 "></span></a><span class="w">        </span><span class="k">for</span><span class="p">(</span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">1</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mh">17</span><span class="w"> </span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span><span class="k">begin</span>
</span><span id="__span-117-16"><a id="__codelineno-117-16" name="__codelineno-117-16"></a><a href="#__codelineno-117-16"><span class="linenos" data-linenos="16 "></span></a><span class="w">            </span><span class="n">q_padding</span><span class="p">[</span><span class="n">i</span><span class="o">*</span><span class="mh">18</span><span class="w"> </span><span class="o">+:</span><span class="w"> </span><span class="mh">18</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="n">q</span><span class="p">[(</span><span class="n">i</span><span class="o">-</span><span class="mh">1</span><span class="p">)</span><span class="o">*</span><span class="mh">16</span><span class="p">],</span><span class="n">q</span><span class="p">[(</span><span class="n">i</span><span class="o">-</span><span class="mh">1</span><span class="p">)</span><span class="o">*</span><span class="mh">16</span><span class="w"> </span><span class="o">+:</span><span class="w"> </span><span class="mh">16</span><span class="p">],</span><span class="n">q</span><span class="p">[</span><span class="n">i</span><span class="o">*</span><span class="mh">16</span><span class="o">-</span><span class="mh">1</span><span class="p">]};</span>
</span><span id="__span-117-17"><a id="__codelineno-117-17" name="__codelineno-117-17"></a><a href="#__codelineno-117-17"><span class="linenos" data-linenos="17 "></span></a><span class="w">        </span><span class="k">end</span>
</span><span id="__span-117-18"><a id="__codelineno-117-18" name="__codelineno-117-18"></a><a href="#__codelineno-117-18"><span class="linenos" data-linenos="18 "></span></a><span class="w">        </span><span class="c1">//calculate</span>
</span><span id="__span-117-19"><a id="__codelineno-117-19" name="__codelineno-117-19"></a><a href="#__codelineno-117-19"><span class="linenos" data-linenos="19 "></span></a><span class="w">        </span><span class="k">for</span><span class="p">(</span><span class="n">i</span><span class="o">=</span><span class="mh">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">&lt;</span><span class="mh">16</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span><span class="k">begin</span>
</span><span id="__span-117-20"><a id="__codelineno-117-20" name="__codelineno-117-20"></a><a href="#__codelineno-117-20"><span class="linenos" data-linenos="20 "></span></a><span class="w">            </span><span class="k">for</span><span class="p">(</span><span class="n">j</span><span class="o">=</span><span class="mh">0</span><span class="p">;</span><span class="w"> </span><span class="n">j</span><span class="o">&lt;</span><span class="mh">16</span><span class="p">;</span><span class="w"> </span><span class="n">j</span><span class="o">++</span><span class="p">)</span><span class="k">begin</span>
</span><span id="__span-117-21"><a id="__codelineno-117-21" name="__codelineno-117-21"></a><a href="#__codelineno-117-21"><span class="linenos" data-linenos="21 "></span></a><span class="w">                </span><span class="c1">//center is q_padding[18*(i+1)+(j+1)]</span>
</span><span id="__span-117-22"><a id="__codelineno-117-22" name="__codelineno-117-22"></a><a href="#__codelineno-117-22"><span class="linenos" data-linenos="22 "></span></a><span class="w">                </span><span class="n">answer</span><span class="p">[</span><span class="mh">16</span><span class="o">*</span><span class="n">i</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">j</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">q_padding</span><span class="p">[</span><span class="mh">18</span><span class="o">*</span><span class="n">i</span><span class="o">+</span><span class="p">(</span><span class="n">j</span><span class="w">  </span><span class="p">)]</span><span class="w"> </span><span class="o">+</span>
</span><span id="__span-117-23"><a id="__codelineno-117-23" name="__codelineno-117-23"></a><a href="#__codelineno-117-23"><span class="linenos" data-linenos="23 "></span></a><span class="w">                         </span><span class="n">q_padding</span><span class="p">[</span><span class="mh">18</span><span class="o">*</span><span class="n">i</span><span class="o">+</span><span class="p">(</span><span class="n">j</span><span class="o">+</span><span class="mh">1</span><span class="p">)]</span><span class="w"> </span><span class="o">+</span>
</span><span id="__span-117-24"><a id="__codelineno-117-24" name="__codelineno-117-24"></a><a href="#__codelineno-117-24"><span class="linenos" data-linenos="24 "></span></a><span class="w">                         </span><span class="n">q_padding</span><span class="p">[</span><span class="mh">18</span><span class="o">*</span><span class="n">i</span><span class="o">+</span><span class="p">(</span><span class="n">j</span><span class="o">+</span><span class="mh">2</span><span class="p">)]</span><span class="w"> </span><span class="o">+</span>
</span><span id="__span-117-25"><a id="__codelineno-117-25" name="__codelineno-117-25"></a><a href="#__codelineno-117-25"><span class="linenos" data-linenos="25 "></span></a><span class="w">                         </span><span class="n">q_padding</span><span class="p">[</span><span class="mh">18</span><span class="o">*</span><span class="p">(</span><span class="n">i</span><span class="o">+</span><span class="mh">1</span><span class="p">)</span><span class="o">+</span><span class="p">(</span><span class="n">j</span><span class="w">  </span><span class="p">)]</span><span class="w"> </span><span class="o">+</span>
</span><span id="__span-117-26"><a id="__codelineno-117-26" name="__codelineno-117-26"></a><a href="#__codelineno-117-26"><span class="linenos" data-linenos="26 "></span></a><span class="w">                         </span><span class="n">q_padding</span><span class="p">[</span><span class="mh">18</span><span class="o">*</span><span class="p">(</span><span class="n">i</span><span class="o">+</span><span class="mh">1</span><span class="p">)</span><span class="o">+</span><span class="p">(</span><span class="n">j</span><span class="o">+</span><span class="mh">2</span><span class="p">)]</span><span class="w"> </span><span class="o">+</span>
</span><span id="__span-117-27"><a id="__codelineno-117-27" name="__codelineno-117-27"></a><a href="#__codelineno-117-27"><span class="linenos" data-linenos="27 "></span></a><span class="w">                         </span><span class="n">q_padding</span><span class="p">[</span><span class="mh">18</span><span class="o">*</span><span class="p">(</span><span class="n">i</span><span class="o">+</span><span class="mh">2</span><span class="p">)</span><span class="o">+</span><span class="p">(</span><span class="n">j</span><span class="w">  </span><span class="p">)]</span><span class="w"> </span><span class="o">+</span>
</span><span id="__span-117-28"><a id="__codelineno-117-28" name="__codelineno-117-28"></a><a href="#__codelineno-117-28"><span class="linenos" data-linenos="28 "></span></a><span class="w">                         </span><span class="n">q_padding</span><span class="p">[</span><span class="mh">18</span><span class="o">*</span><span class="p">(</span><span class="n">i</span><span class="o">+</span><span class="mh">2</span><span class="p">)</span><span class="o">+</span><span class="p">(</span><span class="n">j</span><span class="o">+</span><span class="mh">1</span><span class="p">)]</span><span class="w"> </span><span class="o">+</span>
</span><span id="__span-117-29"><a id="__codelineno-117-29" name="__codelineno-117-29"></a><a href="#__codelineno-117-29"><span class="linenos" data-linenos="29 "></span></a><span class="w">                         </span><span class="n">q_padding</span><span class="p">[</span><span class="mh">18</span><span class="o">*</span><span class="p">(</span><span class="n">i</span><span class="o">+</span><span class="mh">2</span><span class="p">)</span><span class="o">+</span><span class="p">(</span><span class="n">j</span><span class="o">+</span><span class="mh">2</span><span class="p">)];</span><span class="w">                </span>
</span><span id="__span-117-30"><a id="__codelineno-117-30" name="__codelineno-117-30"></a><a href="#__codelineno-117-30"><span class="linenos" data-linenos="30 "></span></a><span class="w">                </span><span class="k">case</span><span class="p">(</span><span class="n">answer</span><span class="p">[</span><span class="mh">16</span><span class="o">*</span><span class="n">i</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">j</span><span class="p">])</span>
</span><span id="__span-117-31"><a id="__codelineno-117-31" name="__codelineno-117-31"></a><a href="#__codelineno-117-31"><span class="linenos" data-linenos="31 "></span></a><span class="w">                    </span><span class="mh">4</span><span class="mb">&#39;b0011</span><span class="o">:</span><span class="w"> </span><span class="n">next_q</span><span class="p">[</span><span class="mh">16</span><span class="o">*</span><span class="n">i</span><span class="o">+</span><span class="n">j</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">1</span><span class="mb">&#39;b1</span><span class="p">;</span>
</span><span id="__span-117-32"><a id="__codelineno-117-32" name="__codelineno-117-32"></a><a href="#__codelineno-117-32"><span class="linenos" data-linenos="32 "></span></a><span class="w">                    </span><span class="mh">4</span><span class="mb">&#39;b0010</span><span class="o">:</span><span class="w"> </span><span class="n">next_q</span><span class="p">[</span><span class="mh">16</span><span class="o">*</span><span class="n">i</span><span class="o">+</span><span class="n">j</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">q</span><span class="p">[</span><span class="mh">16</span><span class="o">*</span><span class="n">i</span><span class="o">+</span><span class="n">j</span><span class="p">];</span>
</span><span id="__span-117-33"><a id="__codelineno-117-33" name="__codelineno-117-33"></a><a href="#__codelineno-117-33"><span class="linenos" data-linenos="33 "></span></a><span class="w">                    </span><span class="k">default</span><span class="o">:</span><span class="w"> </span><span class="n">next_q</span><span class="p">[</span><span class="mh">16</span><span class="o">*</span><span class="n">i</span><span class="o">+</span><span class="n">j</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">1</span><span class="mb">&#39;b0</span><span class="p">;</span>
</span><span id="__span-117-34"><a id="__codelineno-117-34" name="__codelineno-117-34"></a><a href="#__codelineno-117-34"><span class="linenos" data-linenos="34 "></span></a><span class="w">                </span><span class="k">endcase</span>
</span><span id="__span-117-35"><a id="__codelineno-117-35" name="__codelineno-117-35"></a><a href="#__codelineno-117-35"><span class="linenos" data-linenos="35 "></span></a><span class="w">            </span><span class="k">end</span>
</span><span id="__span-117-36"><a id="__codelineno-117-36" name="__codelineno-117-36"></a><a href="#__codelineno-117-36"><span class="linenos" data-linenos="36 "></span></a><span class="w">        </span><span class="k">end</span>
</span><span id="__span-117-37"><a id="__codelineno-117-37" name="__codelineno-117-37"></a><a href="#__codelineno-117-37"><span class="linenos" data-linenos="37 "></span></a><span class="w">    </span><span class="k">end</span>
</span><span id="__span-117-38"><a id="__codelineno-117-38" name="__codelineno-117-38"></a><a href="#__codelineno-117-38"><span class="linenos" data-linenos="38 "></span></a>
</span><span id="__span-117-39"><a id="__codelineno-117-39" name="__codelineno-117-39"></a><a href="#__codelineno-117-39"><span class="linenos" data-linenos="39 "></span></a><span class="w">    </span><span class="k">always</span><span class="p">@(</span><span class="k">posedge</span><span class="w"> </span><span class="n">clk</span><span class="p">)</span><span class="k">begin</span>
</span><span id="__span-117-40"><a id="__codelineno-117-40" name="__codelineno-117-40"></a><a href="#__codelineno-117-40"><span class="linenos" data-linenos="40 "></span></a><span class="w">        </span><span class="k">if</span><span class="p">(</span><span class="n">load</span><span class="p">)</span><span class="w"> </span><span class="n">q</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">data</span><span class="p">;</span>
</span><span id="__span-117-41"><a id="__codelineno-117-41" name="__codelineno-117-41"></a><a href="#__codelineno-117-41"><span class="linenos" data-linenos="41 "></span></a><span class="w">        </span><span class="k">else</span><span class="w"> </span><span class="n">q</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">next_q</span><span class="p">;</span>
</span><span id="__span-117-42"><a id="__codelineno-117-42" name="__codelineno-117-42"></a><a href="#__codelineno-117-42"><span class="linenos" data-linenos="42 "></span></a><span class="w">    </span><span class="k">end</span>
</span><span id="__span-117-43"><a id="__codelineno-117-43" name="__codelineno-117-43"></a><a href="#__codelineno-117-43"><span class="linenos" data-linenos="43 "></span></a><span class="k">endmodule</span>
</span></code></pre></div></p>
<hr />
<h4 id="finite-state-machines">Finite State Machines<a class="headerlink" href="#finite-state-machines" title="Anchor link to this section for reference">⚓︎</a></h4>
<h5 id="simple-fsm-1-asynchronous-reset">Simple FSM 1 (asynchronous reset)<a class="headerlink" href="#simple-fsm-1-asynchronous-reset" title="Anchor link to this section for reference">⚓︎</a></h5>
<p>Website: <a href="https://hdlbits.01xz.net/wiki/Fsm1" target="_blank">https://hdlbits.01xz.net/wiki/Fsm1</a></p>
<p>這題寫個FSM，可以進一步化簡。
<div class="language-verilog highlight"><span class="filename">Verilog</span><pre><span></span><code><span id="__span-118-1"><a id="__codelineno-118-1" name="__codelineno-118-1"></a><a href="#__codelineno-118-1"><span class="linenos" data-linenos=" 1 "></span></a><span class="k">module</span><span class="w"> </span><span class="n">top_module</span><span class="p">(</span>
</span><span id="__span-118-2"><a id="__codelineno-118-2" name="__codelineno-118-2"></a><a href="#__codelineno-118-2"><span class="linenos" data-linenos=" 2 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">clk</span><span class="p">,</span>
</span><span id="__span-118-3"><a id="__codelineno-118-3" name="__codelineno-118-3"></a><a href="#__codelineno-118-3"><span class="linenos" data-linenos=" 3 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">areset</span><span class="p">,</span><span class="w">    </span><span class="c1">// Asynchronous reset to state B</span>
</span><span id="__span-118-4"><a id="__codelineno-118-4" name="__codelineno-118-4"></a><a href="#__codelineno-118-4"><span class="linenos" data-linenos=" 4 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">in</span><span class="p">,</span>
</span><span id="__span-118-5"><a id="__codelineno-118-5" name="__codelineno-118-5"></a><a href="#__codelineno-118-5"><span class="linenos" data-linenos=" 5 "></span></a><span class="w">    </span><span class="k">output</span><span class="w"> </span><span class="n">out</span><span class="p">);</span><span class="c1">//  </span>
</span><span id="__span-118-6"><a id="__codelineno-118-6" name="__codelineno-118-6"></a><a href="#__codelineno-118-6"><span class="linenos" data-linenos=" 6 "></span></a>
</span><span id="__span-118-7"><a id="__codelineno-118-7" name="__codelineno-118-7"></a><a href="#__codelineno-118-7"><span class="linenos" data-linenos=" 7 "></span></a><span class="w">    </span><span class="k">parameter</span><span class="w"> </span><span class="n">A</span><span class="o">=</span><span class="mh">0</span><span class="p">,</span><span class="w"> </span><span class="n">B</span><span class="o">=</span><span class="mh">1</span><span class="p">;</span><span class="w"> </span>
</span><span id="__span-118-8"><a id="__codelineno-118-8" name="__codelineno-118-8"></a><a href="#__codelineno-118-8"><span class="linenos" data-linenos=" 8 "></span></a><span class="w">    </span><span class="kt">reg</span><span class="w"> </span><span class="n">state</span><span class="p">;</span>
</span><span id="__span-118-9"><a id="__codelineno-118-9" name="__codelineno-118-9"></a><a href="#__codelineno-118-9"><span class="linenos" data-linenos=" 9 "></span></a>
</span><span id="__span-118-10"><a id="__codelineno-118-10" name="__codelineno-118-10"></a><a href="#__codelineno-118-10"><span class="linenos" data-linenos="10 "></span></a><span class="w">    </span><span class="k">always</span><span class="w"> </span><span class="p">@(</span><span class="k">posedge</span><span class="w"> </span><span class="n">clk</span><span class="p">,</span><span class="w"> </span><span class="k">posedge</span><span class="w"> </span><span class="n">areset</span><span class="p">)</span><span class="w"> </span><span class="k">begin</span><span class="w">    </span><span class="c1">// This is a sequential always block</span>
</span><span id="__span-118-11"><a id="__codelineno-118-11" name="__codelineno-118-11"></a><a href="#__codelineno-118-11"><span class="linenos" data-linenos="11 "></span></a><span class="w">        </span><span class="c1">// State flip-flops with asynchronous reset</span>
</span><span id="__span-118-12"><a id="__codelineno-118-12" name="__codelineno-118-12"></a><a href="#__codelineno-118-12"><span class="linenos" data-linenos="12 "></span></a><span class="w">        </span><span class="k">if</span><span class="p">(</span><span class="n">areset</span><span class="p">)</span><span class="w"> </span><span class="n">state</span><span class="w"> </span><span class="o">&lt;=</span><span class="w">  </span><span class="n">B</span><span class="p">;</span>
</span><span id="__span-118-13"><a id="__codelineno-118-13" name="__codelineno-118-13"></a><a href="#__codelineno-118-13"><span class="linenos" data-linenos="13 "></span></a><span class="w">        </span><span class="k">else</span><span class="w"> </span><span class="k">begin</span>
</span><span id="__span-118-14"><a id="__codelineno-118-14" name="__codelineno-118-14"></a><a href="#__codelineno-118-14"><span class="linenos" data-linenos="14 "></span></a><span class="w">            </span><span class="n">state</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="o">~</span><span class="p">(</span><span class="n">state</span><span class="w"> </span><span class="o">^</span><span class="w"> </span><span class="n">in</span><span class="p">);</span>
</span><span id="__span-118-15"><a id="__codelineno-118-15" name="__codelineno-118-15"></a><a href="#__codelineno-118-15"><span class="linenos" data-linenos="15 "></span></a><span class="w">        </span><span class="k">end</span>
</span><span id="__span-118-16"><a id="__codelineno-118-16" name="__codelineno-118-16"></a><a href="#__codelineno-118-16"><span class="linenos" data-linenos="16 "></span></a><span class="w">    </span><span class="k">end</span>
</span><span id="__span-118-17"><a id="__codelineno-118-17" name="__codelineno-118-17"></a><a href="#__codelineno-118-17"><span class="linenos" data-linenos="17 "></span></a>
</span><span id="__span-118-18"><a id="__codelineno-118-18" name="__codelineno-118-18"></a><a href="#__codelineno-118-18"><span class="linenos" data-linenos="18 "></span></a><span class="w">    </span><span class="c1">// Output logic</span>
</span><span id="__span-118-19"><a id="__codelineno-118-19" name="__codelineno-118-19"></a><a href="#__codelineno-118-19"><span class="linenos" data-linenos="19 "></span></a><span class="w">    </span><span class="k">assign</span><span class="w"> </span><span class="n">out</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">state</span><span class="p">;</span>
</span><span id="__span-118-20"><a id="__codelineno-118-20" name="__codelineno-118-20"></a><a href="#__codelineno-118-20"><span class="linenos" data-linenos="20 "></span></a><span class="k">endmodule</span>
</span></code></pre></div></p>
<hr />
<h5 id="simple-fsm-1-synchronous-reset">Simple FSM 1 (synchronous reset)<a class="headerlink" href="#simple-fsm-1-synchronous-reset" title="Anchor link to this section for reference">⚓︎</a></h5>
<p>Website: <a href="https://hdlbits.01xz.net/wiki/Fsm1s" target="_blank">https://hdlbits.01xz.net/wiki/Fsm1s</a></p>
<p>這題寫個FSM，跟上一題只差在Synchronous reset，這題練習正常寫FSM。
<div class="language-verilog highlight"><span class="filename">Verilog</span><pre><span></span><code><span id="__span-119-1"><a id="__codelineno-119-1" name="__codelineno-119-1"></a><a href="#__codelineno-119-1"><span class="linenos" data-linenos=" 1 "></span></a><span class="c1">// Note the Verilog-1995 module declaration syntax here:</span>
</span><span id="__span-119-2"><a id="__codelineno-119-2" name="__codelineno-119-2"></a><a href="#__codelineno-119-2"><span class="linenos" data-linenos=" 2 "></span></a><span class="k">module</span><span class="w"> </span><span class="n">top_module</span><span class="p">(</span><span class="n">clk</span><span class="p">,</span><span class="w"> </span><span class="n">reset</span><span class="p">,</span><span class="w"> </span><span class="n">in</span><span class="p">,</span><span class="w"> </span><span class="n">out</span><span class="p">);</span>
</span><span id="__span-119-3"><a id="__codelineno-119-3" name="__codelineno-119-3"></a><a href="#__codelineno-119-3"><span class="linenos" data-linenos=" 3 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">clk</span><span class="p">;</span>
</span><span id="__span-119-4"><a id="__codelineno-119-4" name="__codelineno-119-4"></a><a href="#__codelineno-119-4"><span class="linenos" data-linenos=" 4 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">reset</span><span class="p">;</span><span class="w">    </span><span class="c1">// Synchronous reset to state B</span>
</span><span id="__span-119-5"><a id="__codelineno-119-5" name="__codelineno-119-5"></a><a href="#__codelineno-119-5"><span class="linenos" data-linenos=" 5 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">in</span><span class="p">;</span>
</span><span id="__span-119-6"><a id="__codelineno-119-6" name="__codelineno-119-6"></a><a href="#__codelineno-119-6"><span class="linenos" data-linenos=" 6 "></span></a><span class="w">    </span><span class="k">output</span><span class="w"> </span><span class="n">out</span><span class="p">;</span>
</span><span id="__span-119-7"><a id="__codelineno-119-7" name="__codelineno-119-7"></a><a href="#__codelineno-119-7"><span class="linenos" data-linenos=" 7 "></span></a>
</span><span id="__span-119-8"><a id="__codelineno-119-8" name="__codelineno-119-8"></a><a href="#__codelineno-119-8"><span class="linenos" data-linenos=" 8 "></span></a><span class="w">    </span><span class="c1">// Fill in state name declarations</span>
</span><span id="__span-119-9"><a id="__codelineno-119-9" name="__codelineno-119-9"></a><a href="#__codelineno-119-9"><span class="linenos" data-linenos=" 9 "></span></a>
</span><span id="__span-119-10"><a id="__codelineno-119-10" name="__codelineno-119-10"></a><a href="#__codelineno-119-10"><span class="linenos" data-linenos="10 "></span></a><span class="w">    </span><span class="kt">reg</span><span class="w"> </span><span class="n">present_state</span><span class="p">,</span><span class="w"> </span><span class="n">next_state</span><span class="p">;</span>
</span><span id="__span-119-11"><a id="__codelineno-119-11" name="__codelineno-119-11"></a><a href="#__codelineno-119-11"><span class="linenos" data-linenos="11 "></span></a>
</span><span id="__span-119-12"><a id="__codelineno-119-12" name="__codelineno-119-12"></a><a href="#__codelineno-119-12"><span class="linenos" data-linenos="12 "></span></a><span class="w">    </span><span class="k">always</span><span class="p">@(</span><span class="o">*</span><span class="p">)</span><span class="k">begin</span>
</span><span id="__span-119-13"><a id="__codelineno-119-13" name="__codelineno-119-13"></a><a href="#__codelineno-119-13"><span class="linenos" data-linenos="13 "></span></a><span class="w">        </span><span class="k">case</span><span class="p">(</span><span class="n">present_state</span><span class="p">)</span>
</span><span id="__span-119-14"><a id="__codelineno-119-14" name="__codelineno-119-14"></a><a href="#__codelineno-119-14"><span class="linenos" data-linenos="14 "></span></a><span class="w">            </span><span class="mh">1</span><span class="mb">&#39;b0</span><span class="o">:</span><span class="w"> </span><span class="n">next_state</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">in</span><span class="o">?</span><span class="w"> </span><span class="mh">1</span><span class="mb">&#39;b0</span><span class="o">:</span><span class="w"> </span><span class="mh">1</span><span class="mb">&#39;b1</span><span class="p">;</span>
</span><span id="__span-119-15"><a id="__codelineno-119-15" name="__codelineno-119-15"></a><a href="#__codelineno-119-15"><span class="linenos" data-linenos="15 "></span></a><span class="w">            </span><span class="mh">1</span><span class="mb">&#39;b1</span><span class="o">:</span><span class="w"> </span><span class="n">next_state</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">in</span><span class="o">?</span><span class="w"> </span><span class="mh">1</span><span class="mb">&#39;b1</span><span class="o">:</span><span class="w"> </span><span class="mh">1</span><span class="mb">&#39;b0</span><span class="p">;</span>
</span><span id="__span-119-16"><a id="__codelineno-119-16" name="__codelineno-119-16"></a><a href="#__codelineno-119-16"><span class="linenos" data-linenos="16 "></span></a><span class="w">        </span><span class="k">endcase</span>
</span><span id="__span-119-17"><a id="__codelineno-119-17" name="__codelineno-119-17"></a><a href="#__codelineno-119-17"><span class="linenos" data-linenos="17 "></span></a><span class="w">    </span><span class="k">end</span>
</span><span id="__span-119-18"><a id="__codelineno-119-18" name="__codelineno-119-18"></a><a href="#__codelineno-119-18"><span class="linenos" data-linenos="18 "></span></a>
</span><span id="__span-119-19"><a id="__codelineno-119-19" name="__codelineno-119-19"></a><a href="#__codelineno-119-19"><span class="linenos" data-linenos="19 "></span></a><span class="w">    </span><span class="k">always</span><span class="w"> </span><span class="p">@(</span><span class="k">posedge</span><span class="w"> </span><span class="n">clk</span><span class="p">)</span><span class="w"> </span><span class="k">begin</span>
</span><span id="__span-119-20"><a id="__codelineno-119-20" name="__codelineno-119-20"></a><a href="#__codelineno-119-20"><span class="linenos" data-linenos="20 "></span></a><span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">reset</span><span class="p">)</span><span class="n">present_state</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="mh">1</span><span class="mb">&#39;b1</span><span class="p">;</span>
</span><span id="__span-119-21"><a id="__codelineno-119-21" name="__codelineno-119-21"></a><a href="#__codelineno-119-21"><span class="linenos" data-linenos="21 "></span></a><span class="w">        </span><span class="k">else</span><span class="w"> </span><span class="n">present_state</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">next_state</span><span class="p">;</span>
</span><span id="__span-119-22"><a id="__codelineno-119-22" name="__codelineno-119-22"></a><a href="#__codelineno-119-22"><span class="linenos" data-linenos="22 "></span></a><span class="w">    </span><span class="k">end</span>
</span><span id="__span-119-23"><a id="__codelineno-119-23" name="__codelineno-119-23"></a><a href="#__codelineno-119-23"><span class="linenos" data-linenos="23 "></span></a><span class="w">    </span><span class="k">assign</span><span class="w"> </span><span class="n">out</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">present_state</span><span class="p">;</span>
</span><span id="__span-119-24"><a id="__codelineno-119-24" name="__codelineno-119-24"></a><a href="#__codelineno-119-24"><span class="linenos" data-linenos="24 "></span></a><span class="k">endmodule</span>
</span></code></pre></div></p>
<hr />
<h5 id="simple-fsm-2-asynchronous-reset">Simple FSM 2 (asynchronous reset)<a class="headerlink" href="#simple-fsm-2-asynchronous-reset" title="Anchor link to this section for reference">⚓︎</a></h5>
<p>Website: <a href="https://hdlbits.01xz.net/wiki/Fsm2" target="_blank">https://hdlbits.01xz.net/wiki/Fsm2</a></p>
<p>這題寫個FSM，跟上上一題只差在邏輯有點差異。
<div class="language-verilog highlight"><span class="filename">Verilog</span><pre><span></span><code><span id="__span-120-1"><a id="__codelineno-120-1" name="__codelineno-120-1"></a><a href="#__codelineno-120-1"><span class="linenos" data-linenos=" 1 "></span></a><span class="k">module</span><span class="w"> </span><span class="n">top_module</span><span class="p">(</span>
</span><span id="__span-120-2"><a id="__codelineno-120-2" name="__codelineno-120-2"></a><a href="#__codelineno-120-2"><span class="linenos" data-linenos=" 2 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">clk</span><span class="p">,</span>
</span><span id="__span-120-3"><a id="__codelineno-120-3" name="__codelineno-120-3"></a><a href="#__codelineno-120-3"><span class="linenos" data-linenos=" 3 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">areset</span><span class="p">,</span><span class="w">    </span><span class="c1">// Asynchronous reset to OFF</span>
</span><span id="__span-120-4"><a id="__codelineno-120-4" name="__codelineno-120-4"></a><a href="#__codelineno-120-4"><span class="linenos" data-linenos=" 4 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">j</span><span class="p">,</span>
</span><span id="__span-120-5"><a id="__codelineno-120-5" name="__codelineno-120-5"></a><a href="#__codelineno-120-5"><span class="linenos" data-linenos=" 5 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">k</span><span class="p">,</span>
</span><span id="__span-120-6"><a id="__codelineno-120-6" name="__codelineno-120-6"></a><a href="#__codelineno-120-6"><span class="linenos" data-linenos=" 6 "></span></a><span class="w">    </span><span class="k">output</span><span class="w"> </span><span class="n">out</span><span class="p">);</span><span class="w"> </span><span class="c1">//  </span>
</span><span id="__span-120-7"><a id="__codelineno-120-7" name="__codelineno-120-7"></a><a href="#__codelineno-120-7"><span class="linenos" data-linenos=" 7 "></span></a>
</span><span id="__span-120-8"><a id="__codelineno-120-8" name="__codelineno-120-8"></a><a href="#__codelineno-120-8"><span class="linenos" data-linenos=" 8 "></span></a><span class="w">    </span><span class="kt">reg</span><span class="w"> </span><span class="n">state</span><span class="p">,</span><span class="w"> </span><span class="n">next_state</span><span class="p">;</span>
</span><span id="__span-120-9"><a id="__codelineno-120-9" name="__codelineno-120-9"></a><a href="#__codelineno-120-9"><span class="linenos" data-linenos=" 9 "></span></a>
</span><span id="__span-120-10"><a id="__codelineno-120-10" name="__codelineno-120-10"></a><a href="#__codelineno-120-10"><span class="linenos" data-linenos="10 "></span></a><span class="w">    </span><span class="k">always</span><span class="w"> </span><span class="p">@(</span><span class="o">*</span><span class="p">)</span><span class="w"> </span><span class="k">begin</span>
</span><span id="__span-120-11"><a id="__codelineno-120-11" name="__codelineno-120-11"></a><a href="#__codelineno-120-11"><span class="linenos" data-linenos="11 "></span></a><span class="w">        </span><span class="c1">// State transition logic</span>
</span><span id="__span-120-12"><a id="__codelineno-120-12" name="__codelineno-120-12"></a><a href="#__codelineno-120-12"><span class="linenos" data-linenos="12 "></span></a><span class="w">        </span><span class="k">case</span><span class="p">(</span><span class="n">state</span><span class="p">)</span>
</span><span id="__span-120-13"><a id="__codelineno-120-13" name="__codelineno-120-13"></a><a href="#__codelineno-120-13"><span class="linenos" data-linenos="13 "></span></a><span class="w">            </span><span class="mh">1</span><span class="mb">&#39;b1</span><span class="o">:</span><span class="w"> </span><span class="n">next_state</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">k</span><span class="o">?</span><span class="w"> </span><span class="mh">1</span><span class="mb">&#39;b0</span><span class="o">:</span><span class="w"> </span><span class="mh">1</span><span class="mb">&#39;b1</span><span class="p">;</span>
</span><span id="__span-120-14"><a id="__codelineno-120-14" name="__codelineno-120-14"></a><a href="#__codelineno-120-14"><span class="linenos" data-linenos="14 "></span></a><span class="w">            </span><span class="mh">1</span><span class="mb">&#39;b0</span><span class="o">:</span><span class="w"> </span><span class="n">next_state</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">j</span><span class="o">?</span><span class="w"> </span><span class="mh">1</span><span class="mb">&#39;b1</span><span class="o">:</span><span class="w"> </span><span class="mh">1</span><span class="mb">&#39;b0</span><span class="p">;</span>
</span><span id="__span-120-15"><a id="__codelineno-120-15" name="__codelineno-120-15"></a><a href="#__codelineno-120-15"><span class="linenos" data-linenos="15 "></span></a><span class="w">        </span><span class="k">endcase</span>
</span><span id="__span-120-16"><a id="__codelineno-120-16" name="__codelineno-120-16"></a><a href="#__codelineno-120-16"><span class="linenos" data-linenos="16 "></span></a><span class="w">    </span><span class="k">end</span>
</span><span id="__span-120-17"><a id="__codelineno-120-17" name="__codelineno-120-17"></a><a href="#__codelineno-120-17"><span class="linenos" data-linenos="17 "></span></a>
</span><span id="__span-120-18"><a id="__codelineno-120-18" name="__codelineno-120-18"></a><a href="#__codelineno-120-18"><span class="linenos" data-linenos="18 "></span></a><span class="w">    </span><span class="k">always</span><span class="w"> </span><span class="p">@(</span><span class="k">posedge</span><span class="w"> </span><span class="n">clk</span><span class="p">,</span><span class="w"> </span><span class="k">posedge</span><span class="w"> </span><span class="n">areset</span><span class="p">)</span><span class="w"> </span><span class="k">begin</span>
</span><span id="__span-120-19"><a id="__codelineno-120-19" name="__codelineno-120-19"></a><a href="#__codelineno-120-19"><span class="linenos" data-linenos="19 "></span></a><span class="w">        </span><span class="c1">// State flip-flops with asynchronous reset</span>
</span><span id="__span-120-20"><a id="__codelineno-120-20" name="__codelineno-120-20"></a><a href="#__codelineno-120-20"><span class="linenos" data-linenos="20 "></span></a><span class="w">        </span><span class="k">if</span><span class="p">(</span><span class="n">areset</span><span class="p">)</span><span class="w"> </span><span class="n">state</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="mh">1</span><span class="mb">&#39;b0</span><span class="p">;</span>
</span><span id="__span-120-21"><a id="__codelineno-120-21" name="__codelineno-120-21"></a><a href="#__codelineno-120-21"><span class="linenos" data-linenos="21 "></span></a><span class="w">        </span><span class="k">else</span><span class="w"> </span><span class="n">state</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">next_state</span><span class="p">;</span>
</span><span id="__span-120-22"><a id="__codelineno-120-22" name="__codelineno-120-22"></a><a href="#__codelineno-120-22"><span class="linenos" data-linenos="22 "></span></a><span class="w">    </span><span class="k">end</span>
</span><span id="__span-120-23"><a id="__codelineno-120-23" name="__codelineno-120-23"></a><a href="#__codelineno-120-23"><span class="linenos" data-linenos="23 "></span></a>
</span><span id="__span-120-24"><a id="__codelineno-120-24" name="__codelineno-120-24"></a><a href="#__codelineno-120-24"><span class="linenos" data-linenos="24 "></span></a><span class="w">    </span><span class="c1">// Output logic</span>
</span><span id="__span-120-25"><a id="__codelineno-120-25" name="__codelineno-120-25"></a><a href="#__codelineno-120-25"><span class="linenos" data-linenos="25 "></span></a><span class="w">    </span><span class="k">assign</span><span class="w"> </span><span class="n">out</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">state</span><span class="p">;</span>
</span><span id="__span-120-26"><a id="__codelineno-120-26" name="__codelineno-120-26"></a><a href="#__codelineno-120-26"><span class="linenos" data-linenos="26 "></span></a><span class="k">endmodule</span>
</span></code></pre></div></p>
<hr />
<h5 id="simple-fsm-2-synchronous-reset">Simple FSM 2 (synchronous reset)<a class="headerlink" href="#simple-fsm-2-synchronous-reset" title="Anchor link to this section for reference">⚓︎</a></h5>
<p>Website: <a href="https://hdlbits.01xz.net/wiki/Fsm2s" target="_blank">https://hdlbits.01xz.net/wiki/Fsm2s</a></p>
<p>這題寫個FSM，跟上一題只差在Synchronous reset，這題練習正常寫FSM。
<div class="language-verilog highlight"><span class="filename">Verilog</span><pre><span></span><code><span id="__span-121-1"><a id="__codelineno-121-1" name="__codelineno-121-1"></a><a href="#__codelineno-121-1"><span class="linenos" data-linenos=" 1 "></span></a><span class="k">module</span><span class="w"> </span><span class="n">top_module</span><span class="p">(</span>
</span><span id="__span-121-2"><a id="__codelineno-121-2" name="__codelineno-121-2"></a><a href="#__codelineno-121-2"><span class="linenos" data-linenos=" 2 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">clk</span><span class="p">,</span>
</span><span id="__span-121-3"><a id="__codelineno-121-3" name="__codelineno-121-3"></a><a href="#__codelineno-121-3"><span class="linenos" data-linenos=" 3 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">reset</span><span class="p">,</span><span class="w">    </span><span class="c1">// Synchronous reset to OFF</span>
</span><span id="__span-121-4"><a id="__codelineno-121-4" name="__codelineno-121-4"></a><a href="#__codelineno-121-4"><span class="linenos" data-linenos=" 4 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">j</span><span class="p">,</span>
</span><span id="__span-121-5"><a id="__codelineno-121-5" name="__codelineno-121-5"></a><a href="#__codelineno-121-5"><span class="linenos" data-linenos=" 5 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">k</span><span class="p">,</span>
</span><span id="__span-121-6"><a id="__codelineno-121-6" name="__codelineno-121-6"></a><a href="#__codelineno-121-6"><span class="linenos" data-linenos=" 6 "></span></a><span class="w">    </span><span class="k">output</span><span class="w"> </span><span class="n">out</span><span class="p">);</span><span class="w"> </span><span class="c1">//  </span>
</span><span id="__span-121-7"><a id="__codelineno-121-7" name="__codelineno-121-7"></a><a href="#__codelineno-121-7"><span class="linenos" data-linenos=" 7 "></span></a>
</span><span id="__span-121-8"><a id="__codelineno-121-8" name="__codelineno-121-8"></a><a href="#__codelineno-121-8"><span class="linenos" data-linenos=" 8 "></span></a><span class="w">    </span><span class="kt">reg</span><span class="w"> </span><span class="n">state</span><span class="p">,</span><span class="w"> </span><span class="n">next_state</span><span class="p">;</span>
</span><span id="__span-121-9"><a id="__codelineno-121-9" name="__codelineno-121-9"></a><a href="#__codelineno-121-9"><span class="linenos" data-linenos=" 9 "></span></a>
</span><span id="__span-121-10"><a id="__codelineno-121-10" name="__codelineno-121-10"></a><a href="#__codelineno-121-10"><span class="linenos" data-linenos="10 "></span></a><span class="w">    </span><span class="k">always</span><span class="w"> </span><span class="p">@(</span><span class="o">*</span><span class="p">)</span><span class="w"> </span><span class="k">begin</span>
</span><span id="__span-121-11"><a id="__codelineno-121-11" name="__codelineno-121-11"></a><a href="#__codelineno-121-11"><span class="linenos" data-linenos="11 "></span></a><span class="w">        </span><span class="c1">// State transition logic</span>
</span><span id="__span-121-12"><a id="__codelineno-121-12" name="__codelineno-121-12"></a><a href="#__codelineno-121-12"><span class="linenos" data-linenos="12 "></span></a><span class="w">        </span><span class="k">case</span><span class="p">(</span><span class="n">state</span><span class="p">)</span>
</span><span id="__span-121-13"><a id="__codelineno-121-13" name="__codelineno-121-13"></a><a href="#__codelineno-121-13"><span class="linenos" data-linenos="13 "></span></a><span class="w">            </span><span class="mh">1</span><span class="mb">&#39;b1</span><span class="o">:</span><span class="w"> </span><span class="n">next_state</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">k</span><span class="o">?</span><span class="w"> </span><span class="mh">1</span><span class="mb">&#39;b0</span><span class="o">:</span><span class="w"> </span><span class="mh">1</span><span class="mb">&#39;b1</span><span class="p">;</span>
</span><span id="__span-121-14"><a id="__codelineno-121-14" name="__codelineno-121-14"></a><a href="#__codelineno-121-14"><span class="linenos" data-linenos="14 "></span></a><span class="w">            </span><span class="mh">1</span><span class="mb">&#39;b0</span><span class="o">:</span><span class="w"> </span><span class="n">next_state</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">j</span><span class="o">?</span><span class="w"> </span><span class="mh">1</span><span class="mb">&#39;b1</span><span class="o">:</span><span class="w"> </span><span class="mh">1</span><span class="mb">&#39;b0</span><span class="p">;</span>
</span><span id="__span-121-15"><a id="__codelineno-121-15" name="__codelineno-121-15"></a><a href="#__codelineno-121-15"><span class="linenos" data-linenos="15 "></span></a><span class="w">        </span><span class="k">endcase</span>
</span><span id="__span-121-16"><a id="__codelineno-121-16" name="__codelineno-121-16"></a><a href="#__codelineno-121-16"><span class="linenos" data-linenos="16 "></span></a><span class="w">    </span><span class="k">end</span>
</span><span id="__span-121-17"><a id="__codelineno-121-17" name="__codelineno-121-17"></a><a href="#__codelineno-121-17"><span class="linenos" data-linenos="17 "></span></a>
</span><span id="__span-121-18"><a id="__codelineno-121-18" name="__codelineno-121-18"></a><a href="#__codelineno-121-18"><span class="linenos" data-linenos="18 "></span></a><span class="w">    </span><span class="k">always</span><span class="w"> </span><span class="p">@(</span><span class="k">posedge</span><span class="w"> </span><span class="n">clk</span><span class="p">)</span><span class="w"> </span><span class="k">begin</span>
</span><span id="__span-121-19"><a id="__codelineno-121-19" name="__codelineno-121-19"></a><a href="#__codelineno-121-19"><span class="linenos" data-linenos="19 "></span></a><span class="w">        </span><span class="c1">// State flip-flops with synchronous reset</span>
</span><span id="__span-121-20"><a id="__codelineno-121-20" name="__codelineno-121-20"></a><a href="#__codelineno-121-20"><span class="linenos" data-linenos="20 "></span></a><span class="w">        </span><span class="k">if</span><span class="p">(</span><span class="n">reset</span><span class="p">)</span><span class="w"> </span><span class="n">state</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="mh">1</span><span class="mb">&#39;b0</span><span class="p">;</span>
</span><span id="__span-121-21"><a id="__codelineno-121-21" name="__codelineno-121-21"></a><a href="#__codelineno-121-21"><span class="linenos" data-linenos="21 "></span></a><span class="w">        </span><span class="k">else</span><span class="w"> </span><span class="n">state</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">next_state</span><span class="p">;</span>
</span><span id="__span-121-22"><a id="__codelineno-121-22" name="__codelineno-121-22"></a><a href="#__codelineno-121-22"><span class="linenos" data-linenos="22 "></span></a><span class="w">    </span><span class="k">end</span>
</span><span id="__span-121-23"><a id="__codelineno-121-23" name="__codelineno-121-23"></a><a href="#__codelineno-121-23"><span class="linenos" data-linenos="23 "></span></a>
</span><span id="__span-121-24"><a id="__codelineno-121-24" name="__codelineno-121-24"></a><a href="#__codelineno-121-24"><span class="linenos" data-linenos="24 "></span></a><span class="w">    </span><span class="c1">// Output logic</span>
</span><span id="__span-121-25"><a id="__codelineno-121-25" name="__codelineno-121-25"></a><a href="#__codelineno-121-25"><span class="linenos" data-linenos="25 "></span></a><span class="w">    </span><span class="k">assign</span><span class="w"> </span><span class="n">out</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">state</span><span class="p">;</span>
</span><span id="__span-121-26"><a id="__codelineno-121-26" name="__codelineno-121-26"></a><a href="#__codelineno-121-26"><span class="linenos" data-linenos="26 "></span></a><span class="k">endmodule</span>
</span></code></pre></div></p>
<hr />
<h5 id="simple-state-transitions-3">Simple state transitions 3<a class="headerlink" href="#simple-state-transitions-3" title="Anchor link to this section for reference">⚓︎</a></h5>
<p>Website: <a href="https://hdlbits.01xz.net/wiki/Fsm3comb" target="_blank">https://hdlbits.01xz.net/wiki/Fsm3comb</a></p>
<p>這題寫個FSM，只是不需要處理clock。
<div class="language-verilog highlight"><span class="filename">Verilog</span><pre><span></span><code><span id="__span-122-1"><a id="__codelineno-122-1" name="__codelineno-122-1"></a><a href="#__codelineno-122-1"><span class="linenos" data-linenos=" 1 "></span></a><span class="k">module</span><span class="w"> </span><span class="n">top_module</span><span class="p">(</span>
</span><span id="__span-122-2"><a id="__codelineno-122-2" name="__codelineno-122-2"></a><a href="#__codelineno-122-2"><span class="linenos" data-linenos=" 2 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">in</span><span class="p">,</span>
</span><span id="__span-122-3"><a id="__codelineno-122-3" name="__codelineno-122-3"></a><a href="#__codelineno-122-3"><span class="linenos" data-linenos=" 3 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="p">[</span><span class="mh">1</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">state</span><span class="p">,</span>
</span><span id="__span-122-4"><a id="__codelineno-122-4" name="__codelineno-122-4"></a><a href="#__codelineno-122-4"><span class="linenos" data-linenos=" 4 "></span></a><span class="w">    </span><span class="k">output</span><span class="w"> </span><span class="p">[</span><span class="mh">1</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">next_state</span><span class="p">,</span>
</span><span id="__span-122-5"><a id="__codelineno-122-5" name="__codelineno-122-5"></a><a href="#__codelineno-122-5"><span class="linenos" data-linenos=" 5 "></span></a><span class="w">    </span><span class="k">output</span><span class="w"> </span><span class="n">out</span><span class="p">);</span><span class="w"> </span><span class="c1">//</span>
</span><span id="__span-122-6"><a id="__codelineno-122-6" name="__codelineno-122-6"></a><a href="#__codelineno-122-6"><span class="linenos" data-linenos=" 6 "></span></a>
</span><span id="__span-122-7"><a id="__codelineno-122-7" name="__codelineno-122-7"></a><a href="#__codelineno-122-7"><span class="linenos" data-linenos=" 7 "></span></a><span class="w">    </span><span class="c1">//parameter A=0, B=1, C=2, D=3;</span>
</span><span id="__span-122-8"><a id="__codelineno-122-8" name="__codelineno-122-8"></a><a href="#__codelineno-122-8"><span class="linenos" data-linenos=" 8 "></span></a>
</span><span id="__span-122-9"><a id="__codelineno-122-9" name="__codelineno-122-9"></a><a href="#__codelineno-122-9"><span class="linenos" data-linenos=" 9 "></span></a><span class="w">    </span><span class="c1">// State transition logic: next_state = f(state, in)</span>
</span><span id="__span-122-10"><a id="__codelineno-122-10" name="__codelineno-122-10"></a><a href="#__codelineno-122-10"><span class="linenos" data-linenos="10 "></span></a><span class="w">    </span><span class="k">always</span><span class="p">@(</span><span class="o">*</span><span class="p">)</span><span class="k">begin</span>
</span><span id="__span-122-11"><a id="__codelineno-122-11" name="__codelineno-122-11"></a><a href="#__codelineno-122-11"><span class="linenos" data-linenos="11 "></span></a><span class="w">        </span><span class="k">case</span><span class="p">(</span><span class="n">state</span><span class="p">)</span>
</span><span id="__span-122-12"><a id="__codelineno-122-12" name="__codelineno-122-12"></a><a href="#__codelineno-122-12"><span class="linenos" data-linenos="12 "></span></a><span class="w">            </span><span class="mh">2</span><span class="mb">&#39;b00</span><span class="o">:</span><span class="w"> </span><span class="n">next_state</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">in</span><span class="o">?</span><span class="w"> </span><span class="mh">2</span><span class="mb">&#39;b01</span><span class="o">:</span><span class="w"> </span><span class="mh">2</span><span class="mb">&#39;b00</span><span class="p">;</span>
</span><span id="__span-122-13"><a id="__codelineno-122-13" name="__codelineno-122-13"></a><a href="#__codelineno-122-13"><span class="linenos" data-linenos="13 "></span></a><span class="w">            </span><span class="mh">2</span><span class="mb">&#39;b01</span><span class="o">:</span><span class="w"> </span><span class="n">next_state</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">in</span><span class="o">?</span><span class="w"> </span><span class="mh">2</span><span class="mb">&#39;b01</span><span class="o">:</span><span class="w"> </span><span class="mh">2</span><span class="mb">&#39;b10</span><span class="p">;</span>
</span><span id="__span-122-14"><a id="__codelineno-122-14" name="__codelineno-122-14"></a><a href="#__codelineno-122-14"><span class="linenos" data-linenos="14 "></span></a><span class="w">            </span><span class="mh">2</span><span class="mb">&#39;b10</span><span class="o">:</span><span class="w"> </span><span class="n">next_state</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">in</span><span class="o">?</span><span class="w"> </span><span class="mh">2</span><span class="mb">&#39;b11</span><span class="o">:</span><span class="w"> </span><span class="mh">2</span><span class="mb">&#39;b00</span><span class="p">;</span>
</span><span id="__span-122-15"><a id="__codelineno-122-15" name="__codelineno-122-15"></a><a href="#__codelineno-122-15"><span class="linenos" data-linenos="15 "></span></a><span class="w">            </span><span class="mh">2</span><span class="mb">&#39;b11</span><span class="o">:</span><span class="w"> </span><span class="n">next_state</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">in</span><span class="o">?</span><span class="w"> </span><span class="mh">2</span><span class="mb">&#39;b01</span><span class="o">:</span><span class="w"> </span><span class="mh">2</span><span class="mb">&#39;b10</span><span class="p">;</span>
</span><span id="__span-122-16"><a id="__codelineno-122-16" name="__codelineno-122-16"></a><a href="#__codelineno-122-16"><span class="linenos" data-linenos="16 "></span></a><span class="w">        </span><span class="k">endcase</span>
</span><span id="__span-122-17"><a id="__codelineno-122-17" name="__codelineno-122-17"></a><a href="#__codelineno-122-17"><span class="linenos" data-linenos="17 "></span></a><span class="w">    </span><span class="k">end</span>
</span><span id="__span-122-18"><a id="__codelineno-122-18" name="__codelineno-122-18"></a><a href="#__codelineno-122-18"><span class="linenos" data-linenos="18 "></span></a>
</span><span id="__span-122-19"><a id="__codelineno-122-19" name="__codelineno-122-19"></a><a href="#__codelineno-122-19"><span class="linenos" data-linenos="19 "></span></a><span class="w">    </span><span class="c1">// Output logic:  out = f(state) for a Moore state machine</span>
</span><span id="__span-122-20"><a id="__codelineno-122-20" name="__codelineno-122-20"></a><a href="#__codelineno-122-20"><span class="linenos" data-linenos="20 "></span></a><span class="w">    </span><span class="k">assign</span><span class="w"> </span><span class="n">out</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">&amp;</span><span class="n">state</span><span class="p">;</span>
</span><span id="__span-122-21"><a id="__codelineno-122-21" name="__codelineno-122-21"></a><a href="#__codelineno-122-21"><span class="linenos" data-linenos="21 "></span></a><span class="k">endmodule</span>
</span></code></pre></div></p>
<hr />
<h5 id="simple-one-hot-state-transitions-3">Simple one-hot state transitions 3<a class="headerlink" href="#simple-one-hot-state-transitions-3" title="Anchor link to this section for reference">⚓︎</a></h5>
<p>Website: <a href="https://hdlbits.01xz.net/wiki/Fsm3onehot" target="_blank">https://hdlbits.01xz.net/wiki/Fsm3onehot</a></p>
<p>這題state是one-hot vector，要求transition table用assign寫，滿特別的。
<div class="language-verilog highlight"><span class="filename">Verilog</span><pre><span></span><code><span id="__span-123-1"><a id="__codelineno-123-1" name="__codelineno-123-1"></a><a href="#__codelineno-123-1"><span class="linenos" data-linenos=" 1 "></span></a><span class="k">module</span><span class="w"> </span><span class="n">top_module</span><span class="p">(</span>
</span><span id="__span-123-2"><a id="__codelineno-123-2" name="__codelineno-123-2"></a><a href="#__codelineno-123-2"><span class="linenos" data-linenos=" 2 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">in</span><span class="p">,</span>
</span><span id="__span-123-3"><a id="__codelineno-123-3" name="__codelineno-123-3"></a><a href="#__codelineno-123-3"><span class="linenos" data-linenos=" 3 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="p">[</span><span class="mh">3</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">state</span><span class="p">,</span>
</span><span id="__span-123-4"><a id="__codelineno-123-4" name="__codelineno-123-4"></a><a href="#__codelineno-123-4"><span class="linenos" data-linenos=" 4 "></span></a><span class="w">    </span><span class="k">output</span><span class="w"> </span><span class="p">[</span><span class="mh">3</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">next_state</span><span class="p">,</span>
</span><span id="__span-123-5"><a id="__codelineno-123-5" name="__codelineno-123-5"></a><a href="#__codelineno-123-5"><span class="linenos" data-linenos=" 5 "></span></a><span class="w">    </span><span class="k">output</span><span class="w"> </span><span class="n">out</span><span class="p">);</span><span class="w"> </span><span class="c1">//</span>
</span><span id="__span-123-6"><a id="__codelineno-123-6" name="__codelineno-123-6"></a><a href="#__codelineno-123-6"><span class="linenos" data-linenos=" 6 "></span></a>
</span><span id="__span-123-7"><a id="__codelineno-123-7" name="__codelineno-123-7"></a><a href="#__codelineno-123-7"><span class="linenos" data-linenos=" 7 "></span></a><span class="w">    </span><span class="k">parameter</span><span class="w"> </span><span class="n">A</span><span class="o">=</span><span class="mh">0</span><span class="p">,</span><span class="w"> </span><span class="n">B</span><span class="o">=</span><span class="mh">1</span><span class="p">,</span><span class="w"> </span><span class="n">C</span><span class="o">=</span><span class="mh">2</span><span class="p">,</span><span class="w"> </span><span class="n">D</span><span class="o">=</span><span class="mh">3</span><span class="p">;</span>
</span><span id="__span-123-8"><a id="__codelineno-123-8" name="__codelineno-123-8"></a><a href="#__codelineno-123-8"><span class="linenos" data-linenos=" 8 "></span></a>
</span><span id="__span-123-9"><a id="__codelineno-123-9" name="__codelineno-123-9"></a><a href="#__codelineno-123-9"><span class="linenos" data-linenos=" 9 "></span></a><span class="w">    </span><span class="c1">// State transition logic: Derive an equation for each state flip-flop.</span>
</span><span id="__span-123-10"><a id="__codelineno-123-10" name="__codelineno-123-10"></a><a href="#__codelineno-123-10"><span class="linenos" data-linenos="10 "></span></a><span class="w">    </span><span class="k">assign</span><span class="w"> </span><span class="n">next_state</span><span class="p">[</span><span class="n">A</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">~</span><span class="n">in</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="p">(</span><span class="n">state</span><span class="p">[</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">state</span><span class="p">[</span><span class="mh">2</span><span class="p">]);</span>
</span><span id="__span-123-11"><a id="__codelineno-123-11" name="__codelineno-123-11"></a><a href="#__codelineno-123-11"><span class="linenos" data-linenos="11 "></span></a><span class="w">    </span><span class="k">assign</span><span class="w"> </span><span class="n">next_state</span><span class="p">[</span><span class="n">B</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">in</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="p">(</span><span class="n">state</span><span class="p">[</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">state</span><span class="p">[</span><span class="mh">1</span><span class="p">]</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">state</span><span class="p">[</span><span class="mh">3</span><span class="p">]);</span>
</span><span id="__span-123-12"><a id="__codelineno-123-12" name="__codelineno-123-12"></a><a href="#__codelineno-123-12"><span class="linenos" data-linenos="12 "></span></a><span class="w">    </span><span class="k">assign</span><span class="w"> </span><span class="n">next_state</span><span class="p">[</span><span class="n">C</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">~</span><span class="n">in</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="p">(</span><span class="n">state</span><span class="p">[</span><span class="mh">1</span><span class="p">]</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">state</span><span class="p">[</span><span class="mh">3</span><span class="p">]);</span>
</span><span id="__span-123-13"><a id="__codelineno-123-13" name="__codelineno-123-13"></a><a href="#__codelineno-123-13"><span class="linenos" data-linenos="13 "></span></a><span class="w">    </span><span class="k">assign</span><span class="w"> </span><span class="n">next_state</span><span class="p">[</span><span class="n">D</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">in</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="p">(</span><span class="n">state</span><span class="p">[</span><span class="mh">2</span><span class="p">]);</span>
</span><span id="__span-123-14"><a id="__codelineno-123-14" name="__codelineno-123-14"></a><a href="#__codelineno-123-14"><span class="linenos" data-linenos="14 "></span></a>
</span><span id="__span-123-15"><a id="__codelineno-123-15" name="__codelineno-123-15"></a><a href="#__codelineno-123-15"><span class="linenos" data-linenos="15 "></span></a><span class="w">    </span><span class="c1">// Output logic: </span>
</span><span id="__span-123-16"><a id="__codelineno-123-16" name="__codelineno-123-16"></a><a href="#__codelineno-123-16"><span class="linenos" data-linenos="16 "></span></a><span class="w">    </span><span class="k">assign</span><span class="w"> </span><span class="n">out</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">state</span><span class="p">[</span><span class="mh">3</span><span class="p">];</span>
</span><span id="__span-123-17"><a id="__codelineno-123-17" name="__codelineno-123-17"></a><a href="#__codelineno-123-17"><span class="linenos" data-linenos="17 "></span></a>
</span><span id="__span-123-18"><a id="__codelineno-123-18" name="__codelineno-123-18"></a><a href="#__codelineno-123-18"><span class="linenos" data-linenos="18 "></span></a><span class="k">endmodule</span>
</span></code></pre></div></p>
<hr />
<h5 id="simple-fsm-3-asynchronous-reset">Simple FSM 3 (asynchronous reset)<a class="headerlink" href="#simple-fsm-3-asynchronous-reset" title="Anchor link to this section for reference">⚓︎</a></h5>
<p>Website: <a href="https://hdlbits.01xz.net/wiki/Fsm3" target="_blank">https://hdlbits.01xz.net/wiki/Fsm3</a></p>
<p>這題寫FSM，照著寫就結束了。
<div class="language-verilog highlight"><span class="filename">Verilog</span><pre><span></span><code><span id="__span-124-1"><a id="__codelineno-124-1" name="__codelineno-124-1"></a><a href="#__codelineno-124-1"><span class="linenos" data-linenos=" 1 "></span></a><span class="k">module</span><span class="w"> </span><span class="n">top_module</span><span class="p">(</span>
</span><span id="__span-124-2"><a id="__codelineno-124-2" name="__codelineno-124-2"></a><a href="#__codelineno-124-2"><span class="linenos" data-linenos=" 2 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">clk</span><span class="p">,</span>
</span><span id="__span-124-3"><a id="__codelineno-124-3" name="__codelineno-124-3"></a><a href="#__codelineno-124-3"><span class="linenos" data-linenos=" 3 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">in</span><span class="p">,</span>
</span><span id="__span-124-4"><a id="__codelineno-124-4" name="__codelineno-124-4"></a><a href="#__codelineno-124-4"><span class="linenos" data-linenos=" 4 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">areset</span><span class="p">,</span>
</span><span id="__span-124-5"><a id="__codelineno-124-5" name="__codelineno-124-5"></a><a href="#__codelineno-124-5"><span class="linenos" data-linenos=" 5 "></span></a><span class="w">    </span><span class="k">output</span><span class="w"> </span><span class="n">out</span><span class="p">);</span><span class="w"> </span><span class="c1">//</span>
</span><span id="__span-124-6"><a id="__codelineno-124-6" name="__codelineno-124-6"></a><a href="#__codelineno-124-6"><span class="linenos" data-linenos=" 6 "></span></a>
</span><span id="__span-124-7"><a id="__codelineno-124-7" name="__codelineno-124-7"></a><a href="#__codelineno-124-7"><span class="linenos" data-linenos=" 7 "></span></a><span class="w">    </span><span class="c1">// State transition logic</span>
</span><span id="__span-124-8"><a id="__codelineno-124-8" name="__codelineno-124-8"></a><a href="#__codelineno-124-8"><span class="linenos" data-linenos=" 8 "></span></a><span class="w">    </span><span class="kt">reg</span><span class="w"> </span><span class="p">[</span><span class="mh">1</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">state</span><span class="p">,</span><span class="w"> </span><span class="n">next_state</span><span class="p">;</span>
</span><span id="__span-124-9"><a id="__codelineno-124-9" name="__codelineno-124-9"></a><a href="#__codelineno-124-9"><span class="linenos" data-linenos=" 9 "></span></a><span class="w">    </span><span class="k">always</span><span class="p">@(</span><span class="o">*</span><span class="p">)</span><span class="k">begin</span>
</span><span id="__span-124-10"><a id="__codelineno-124-10" name="__codelineno-124-10"></a><a href="#__codelineno-124-10"><span class="linenos" data-linenos="10 "></span></a><span class="w">        </span><span class="k">case</span><span class="p">(</span><span class="n">state</span><span class="p">)</span>
</span><span id="__span-124-11"><a id="__codelineno-124-11" name="__codelineno-124-11"></a><a href="#__codelineno-124-11"><span class="linenos" data-linenos="11 "></span></a><span class="w">            </span><span class="mh">2</span><span class="mb">&#39;b00</span><span class="o">:</span><span class="w"> </span><span class="n">next_state</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">in</span><span class="o">?</span><span class="w"> </span><span class="mh">2</span><span class="mb">&#39;b01</span><span class="o">:</span><span class="w"> </span><span class="mh">2</span><span class="mb">&#39;b00</span><span class="p">;</span>
</span><span id="__span-124-12"><a id="__codelineno-124-12" name="__codelineno-124-12"></a><a href="#__codelineno-124-12"><span class="linenos" data-linenos="12 "></span></a><span class="w">            </span><span class="mh">2</span><span class="mb">&#39;b01</span><span class="o">:</span><span class="w"> </span><span class="n">next_state</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">in</span><span class="o">?</span><span class="w"> </span><span class="mh">2</span><span class="mb">&#39;b01</span><span class="o">:</span><span class="w"> </span><span class="mh">2</span><span class="mb">&#39;b10</span><span class="p">;</span>
</span><span id="__span-124-13"><a id="__codelineno-124-13" name="__codelineno-124-13"></a><a href="#__codelineno-124-13"><span class="linenos" data-linenos="13 "></span></a><span class="w">            </span><span class="mh">2</span><span class="mb">&#39;b10</span><span class="o">:</span><span class="w"> </span><span class="n">next_state</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">in</span><span class="o">?</span><span class="w"> </span><span class="mh">2</span><span class="mb">&#39;b11</span><span class="o">:</span><span class="w"> </span><span class="mh">2</span><span class="mb">&#39;b00</span><span class="p">;</span>
</span><span id="__span-124-14"><a id="__codelineno-124-14" name="__codelineno-124-14"></a><a href="#__codelineno-124-14"><span class="linenos" data-linenos="14 "></span></a><span class="w">            </span><span class="mh">2</span><span class="mb">&#39;b11</span><span class="o">:</span><span class="w"> </span><span class="n">next_state</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">in</span><span class="o">?</span><span class="w"> </span><span class="mh">2</span><span class="mb">&#39;b01</span><span class="o">:</span><span class="w"> </span><span class="mh">2</span><span class="mb">&#39;b10</span><span class="p">;</span>
</span><span id="__span-124-15"><a id="__codelineno-124-15" name="__codelineno-124-15"></a><a href="#__codelineno-124-15"><span class="linenos" data-linenos="15 "></span></a><span class="w">        </span><span class="k">endcase</span>
</span><span id="__span-124-16"><a id="__codelineno-124-16" name="__codelineno-124-16"></a><a href="#__codelineno-124-16"><span class="linenos" data-linenos="16 "></span></a><span class="w">    </span><span class="k">end</span>
</span><span id="__span-124-17"><a id="__codelineno-124-17" name="__codelineno-124-17"></a><a href="#__codelineno-124-17"><span class="linenos" data-linenos="17 "></span></a><span class="w">    </span><span class="c1">// State flip-flops with asynchronous reset</span>
</span><span id="__span-124-18"><a id="__codelineno-124-18" name="__codelineno-124-18"></a><a href="#__codelineno-124-18"><span class="linenos" data-linenos="18 "></span></a><span class="w">    </span><span class="k">always</span><span class="p">@(</span><span class="k">posedge</span><span class="w"> </span><span class="n">clk</span><span class="p">,</span><span class="w"> </span><span class="k">posedge</span><span class="w"> </span><span class="n">areset</span><span class="p">)</span><span class="k">begin</span>
</span><span id="__span-124-19"><a id="__codelineno-124-19" name="__codelineno-124-19"></a><a href="#__codelineno-124-19"><span class="linenos" data-linenos="19 "></span></a><span class="w">        </span><span class="k">if</span><span class="p">(</span><span class="n">areset</span><span class="p">)</span><span class="w"> </span><span class="n">state</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="mh">2</span><span class="mb">&#39;b00</span><span class="p">;</span>
</span><span id="__span-124-20"><a id="__codelineno-124-20" name="__codelineno-124-20"></a><a href="#__codelineno-124-20"><span class="linenos" data-linenos="20 "></span></a><span class="w">        </span><span class="k">else</span><span class="w"> </span><span class="n">state</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">next_state</span><span class="p">;</span>
</span><span id="__span-124-21"><a id="__codelineno-124-21" name="__codelineno-124-21"></a><a href="#__codelineno-124-21"><span class="linenos" data-linenos="21 "></span></a><span class="w">    </span><span class="k">end</span>
</span><span id="__span-124-22"><a id="__codelineno-124-22" name="__codelineno-124-22"></a><a href="#__codelineno-124-22"><span class="linenos" data-linenos="22 "></span></a><span class="w">    </span><span class="c1">// Output logic</span>
</span><span id="__span-124-23"><a id="__codelineno-124-23" name="__codelineno-124-23"></a><a href="#__codelineno-124-23"><span class="linenos" data-linenos="23 "></span></a><span class="w">    </span><span class="k">assign</span><span class="w"> </span><span class="n">out</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">&amp;</span><span class="n">state</span><span class="p">;</span>
</span><span id="__span-124-24"><a id="__codelineno-124-24" name="__codelineno-124-24"></a><a href="#__codelineno-124-24"><span class="linenos" data-linenos="24 "></span></a><span class="k">endmodule</span>
</span></code></pre></div></p>
<hr />
<h5 id="simple-fsm-3-synchronous-reset">Simple FSM 3 (synchronous reset)<a class="headerlink" href="#simple-fsm-3-synchronous-reset" title="Anchor link to this section for reference">⚓︎</a></h5>
<p>Website: <a href="https://hdlbits.01xz.net/wiki/Fsm3s" target="_blank">https://hdlbits.01xz.net/wiki/Fsm3s</a></p>
<p>這題寫FSM，照著寫就結束了，跟上題相比，就是把改成synchronous reset。
<div class="language-verilog highlight"><span class="filename">Verilog</span><pre><span></span><code><span id="__span-125-1"><a id="__codelineno-125-1" name="__codelineno-125-1"></a><a href="#__codelineno-125-1"><span class="linenos" data-linenos=" 1 "></span></a><span class="k">module</span><span class="w"> </span><span class="n">top_module</span><span class="p">(</span>
</span><span id="__span-125-2"><a id="__codelineno-125-2" name="__codelineno-125-2"></a><a href="#__codelineno-125-2"><span class="linenos" data-linenos=" 2 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">clk</span><span class="p">,</span>
</span><span id="__span-125-3"><a id="__codelineno-125-3" name="__codelineno-125-3"></a><a href="#__codelineno-125-3"><span class="linenos" data-linenos=" 3 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">in</span><span class="p">,</span>
</span><span id="__span-125-4"><a id="__codelineno-125-4" name="__codelineno-125-4"></a><a href="#__codelineno-125-4"><span class="linenos" data-linenos=" 4 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">reset</span><span class="p">,</span>
</span><span id="__span-125-5"><a id="__codelineno-125-5" name="__codelineno-125-5"></a><a href="#__codelineno-125-5"><span class="linenos" data-linenos=" 5 "></span></a><span class="w">    </span><span class="k">output</span><span class="w"> </span><span class="n">out</span><span class="p">);</span><span class="w"> </span><span class="c1">//</span>
</span><span id="__span-125-6"><a id="__codelineno-125-6" name="__codelineno-125-6"></a><a href="#__codelineno-125-6"><span class="linenos" data-linenos=" 6 "></span></a>
</span><span id="__span-125-7"><a id="__codelineno-125-7" name="__codelineno-125-7"></a><a href="#__codelineno-125-7"><span class="linenos" data-linenos=" 7 "></span></a><span class="w">    </span><span class="c1">// State transition logic</span>
</span><span id="__span-125-8"><a id="__codelineno-125-8" name="__codelineno-125-8"></a><a href="#__codelineno-125-8"><span class="linenos" data-linenos=" 8 "></span></a><span class="w">    </span><span class="kt">reg</span><span class="w"> </span><span class="p">[</span><span class="mh">1</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">state</span><span class="p">,</span><span class="w"> </span><span class="n">next_state</span><span class="p">;</span>
</span><span id="__span-125-9"><a id="__codelineno-125-9" name="__codelineno-125-9"></a><a href="#__codelineno-125-9"><span class="linenos" data-linenos=" 9 "></span></a><span class="w">    </span><span class="k">always</span><span class="p">@(</span><span class="o">*</span><span class="p">)</span><span class="k">begin</span>
</span><span id="__span-125-10"><a id="__codelineno-125-10" name="__codelineno-125-10"></a><a href="#__codelineno-125-10"><span class="linenos" data-linenos="10 "></span></a><span class="w">        </span><span class="k">case</span><span class="p">(</span><span class="n">state</span><span class="p">)</span>
</span><span id="__span-125-11"><a id="__codelineno-125-11" name="__codelineno-125-11"></a><a href="#__codelineno-125-11"><span class="linenos" data-linenos="11 "></span></a><span class="w">            </span><span class="mh">2</span><span class="mb">&#39;b00</span><span class="o">:</span><span class="w"> </span><span class="n">next_state</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">in</span><span class="o">?</span><span class="w"> </span><span class="mh">2</span><span class="mb">&#39;b01</span><span class="o">:</span><span class="w"> </span><span class="mh">2</span><span class="mb">&#39;b00</span><span class="p">;</span>
</span><span id="__span-125-12"><a id="__codelineno-125-12" name="__codelineno-125-12"></a><a href="#__codelineno-125-12"><span class="linenos" data-linenos="12 "></span></a><span class="w">            </span><span class="mh">2</span><span class="mb">&#39;b01</span><span class="o">:</span><span class="w"> </span><span class="n">next_state</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">in</span><span class="o">?</span><span class="w"> </span><span class="mh">2</span><span class="mb">&#39;b01</span><span class="o">:</span><span class="w"> </span><span class="mh">2</span><span class="mb">&#39;b10</span><span class="p">;</span>
</span><span id="__span-125-13"><a id="__codelineno-125-13" name="__codelineno-125-13"></a><a href="#__codelineno-125-13"><span class="linenos" data-linenos="13 "></span></a><span class="w">            </span><span class="mh">2</span><span class="mb">&#39;b10</span><span class="o">:</span><span class="w"> </span><span class="n">next_state</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">in</span><span class="o">?</span><span class="w"> </span><span class="mh">2</span><span class="mb">&#39;b11</span><span class="o">:</span><span class="w"> </span><span class="mh">2</span><span class="mb">&#39;b00</span><span class="p">;</span>
</span><span id="__span-125-14"><a id="__codelineno-125-14" name="__codelineno-125-14"></a><a href="#__codelineno-125-14"><span class="linenos" data-linenos="14 "></span></a><span class="w">            </span><span class="mh">2</span><span class="mb">&#39;b11</span><span class="o">:</span><span class="w"> </span><span class="n">next_state</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">in</span><span class="o">?</span><span class="w"> </span><span class="mh">2</span><span class="mb">&#39;b01</span><span class="o">:</span><span class="w"> </span><span class="mh">2</span><span class="mb">&#39;b10</span><span class="p">;</span>
</span><span id="__span-125-15"><a id="__codelineno-125-15" name="__codelineno-125-15"></a><a href="#__codelineno-125-15"><span class="linenos" data-linenos="15 "></span></a><span class="w">        </span><span class="k">endcase</span>
</span><span id="__span-125-16"><a id="__codelineno-125-16" name="__codelineno-125-16"></a><a href="#__codelineno-125-16"><span class="linenos" data-linenos="16 "></span></a><span class="w">    </span><span class="k">end</span>
</span><span id="__span-125-17"><a id="__codelineno-125-17" name="__codelineno-125-17"></a><a href="#__codelineno-125-17"><span class="linenos" data-linenos="17 "></span></a><span class="w">    </span><span class="c1">// State flip-flops with synchronous reset</span>
</span><span id="__span-125-18"><a id="__codelineno-125-18" name="__codelineno-125-18"></a><a href="#__codelineno-125-18"><span class="linenos" data-linenos="18 "></span></a><span class="w">    </span><span class="k">always</span><span class="p">@(</span><span class="k">posedge</span><span class="w"> </span><span class="n">clk</span><span class="p">)</span><span class="k">begin</span>
</span><span id="__span-125-19"><a id="__codelineno-125-19" name="__codelineno-125-19"></a><a href="#__codelineno-125-19"><span class="linenos" data-linenos="19 "></span></a><span class="w">        </span><span class="k">if</span><span class="p">(</span><span class="n">reset</span><span class="p">)</span><span class="w"> </span><span class="n">state</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="mh">2</span><span class="mb">&#39;b00</span><span class="p">;</span>
</span><span id="__span-125-20"><a id="__codelineno-125-20" name="__codelineno-125-20"></a><a href="#__codelineno-125-20"><span class="linenos" data-linenos="20 "></span></a><span class="w">        </span><span class="k">else</span><span class="w"> </span><span class="n">state</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">next_state</span><span class="p">;</span>
</span><span id="__span-125-21"><a id="__codelineno-125-21" name="__codelineno-125-21"></a><a href="#__codelineno-125-21"><span class="linenos" data-linenos="21 "></span></a><span class="w">    </span><span class="k">end</span>
</span><span id="__span-125-22"><a id="__codelineno-125-22" name="__codelineno-125-22"></a><a href="#__codelineno-125-22"><span class="linenos" data-linenos="22 "></span></a><span class="w">    </span><span class="c1">// Output logic</span>
</span><span id="__span-125-23"><a id="__codelineno-125-23" name="__codelineno-125-23"></a><a href="#__codelineno-125-23"><span class="linenos" data-linenos="23 "></span></a><span class="w">    </span><span class="k">assign</span><span class="w"> </span><span class="n">out</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">&amp;</span><span class="n">state</span><span class="p">;</span>
</span><span id="__span-125-24"><a id="__codelineno-125-24" name="__codelineno-125-24"></a><a href="#__codelineno-125-24"><span class="linenos" data-linenos="24 "></span></a><span class="k">endmodule</span>
</span></code></pre></div></p>
<hr />
<h5 id="design-a-moore-fsm">Design a Moore FSM<a class="headerlink" href="#design-a-moore-fsm" title="Anchor link to this section for reference">⚓︎</a></h5>
<p>Website: <a href="https://hdlbits.01xz.net/wiki/Exams/ece241_2013_q4" target="_blank">https://hdlbits.01xz.net/wiki/Exams/ece241_2013_q4</a></p>
<p>這題考閱讀，照著題意接FSM。
<div class="language-verilog highlight"><span class="filename">Verilog</span><pre><span></span><code><span id="__span-126-1"><a id="__codelineno-126-1" name="__codelineno-126-1"></a><a href="#__codelineno-126-1"><span class="linenos" data-linenos=" 1 "></span></a><span class="k">module</span><span class="w"> </span><span class="n">top_module</span><span class="w"> </span><span class="p">(</span>
</span><span id="__span-126-2"><a id="__codelineno-126-2" name="__codelineno-126-2"></a><a href="#__codelineno-126-2"><span class="linenos" data-linenos=" 2 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">clk</span><span class="p">,</span>
</span><span id="__span-126-3"><a id="__codelineno-126-3" name="__codelineno-126-3"></a><a href="#__codelineno-126-3"><span class="linenos" data-linenos=" 3 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">reset</span><span class="p">,</span>
</span><span id="__span-126-4"><a id="__codelineno-126-4" name="__codelineno-126-4"></a><a href="#__codelineno-126-4"><span class="linenos" data-linenos=" 4 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="p">[</span><span class="mh">3</span><span class="o">:</span><span class="mh">1</span><span class="p">]</span><span class="w"> </span><span class="n">s</span><span class="p">,</span>
</span><span id="__span-126-5"><a id="__codelineno-126-5" name="__codelineno-126-5"></a><a href="#__codelineno-126-5"><span class="linenos" data-linenos=" 5 "></span></a><span class="w">    </span><span class="k">output</span><span class="w"> </span><span class="n">fr3</span><span class="p">,</span>
</span><span id="__span-126-6"><a id="__codelineno-126-6" name="__codelineno-126-6"></a><a href="#__codelineno-126-6"><span class="linenos" data-linenos=" 6 "></span></a><span class="w">    </span><span class="k">output</span><span class="w"> </span><span class="n">fr2</span><span class="p">,</span>
</span><span id="__span-126-7"><a id="__codelineno-126-7" name="__codelineno-126-7"></a><a href="#__codelineno-126-7"><span class="linenos" data-linenos=" 7 "></span></a><span class="w">    </span><span class="k">output</span><span class="w"> </span><span class="n">fr1</span><span class="p">,</span>
</span><span id="__span-126-8"><a id="__codelineno-126-8" name="__codelineno-126-8"></a><a href="#__codelineno-126-8"><span class="linenos" data-linenos=" 8 "></span></a><span class="w">    </span><span class="k">output</span><span class="w"> </span><span class="n">dfr</span>
</span><span id="__span-126-9"><a id="__codelineno-126-9" name="__codelineno-126-9"></a><a href="#__codelineno-126-9"><span class="linenos" data-linenos=" 9 "></span></a><span class="p">);</span><span class="w"> </span>
</span><span id="__span-126-10"><a id="__codelineno-126-10" name="__codelineno-126-10"></a><a href="#__codelineno-126-10"><span class="linenos" data-linenos="10 "></span></a><span class="w">    </span><span class="kt">reg</span><span class="w"> </span><span class="p">[</span><span class="mh">1</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="n">state</span><span class="p">,</span><span class="w"> </span><span class="n">next_state</span><span class="p">;</span>
</span><span id="__span-126-11"><a id="__codelineno-126-11" name="__codelineno-126-11"></a><a href="#__codelineno-126-11"><span class="linenos" data-linenos="11 "></span></a><span class="w">    </span><span class="k">assign</span><span class="w"> </span><span class="n">next_state</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="n">s</span><span class="p">[</span><span class="mh">2</span><span class="p">],</span><span class="o">~</span><span class="p">(</span><span class="n">s</span><span class="p">[</span><span class="mh">3</span><span class="p">]</span><span class="o">^</span><span class="n">s</span><span class="p">[</span><span class="mh">2</span><span class="p">])</span><span class="o">&amp;</span><span class="n">s</span><span class="p">[</span><span class="mh">1</span><span class="p">]};</span>
</span><span id="__span-126-12"><a id="__codelineno-126-12" name="__codelineno-126-12"></a><a href="#__codelineno-126-12"><span class="linenos" data-linenos="12 "></span></a>
</span><span id="__span-126-13"><a id="__codelineno-126-13" name="__codelineno-126-13"></a><a href="#__codelineno-126-13"><span class="linenos" data-linenos="13 "></span></a><span class="w">    </span><span class="k">always</span><span class="p">@(</span><span class="k">posedge</span><span class="w"> </span><span class="n">clk</span><span class="p">)</span><span class="k">begin</span>
</span><span id="__span-126-14"><a id="__codelineno-126-14" name="__codelineno-126-14"></a><a href="#__codelineno-126-14"><span class="linenos" data-linenos="14 "></span></a><span class="w">        </span><span class="k">if</span><span class="p">(</span><span class="n">reset</span><span class="p">)</span><span class="w"> </span><span class="n">state</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="mh">2</span><span class="mb">&#39;b00</span><span class="p">;</span>
</span><span id="__span-126-15"><a id="__codelineno-126-15" name="__codelineno-126-15"></a><a href="#__codelineno-126-15"><span class="linenos" data-linenos="15 "></span></a><span class="w">        </span><span class="k">else</span><span class="w"> </span><span class="n">state</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">next_state</span><span class="p">;</span>
</span><span id="__span-126-16"><a id="__codelineno-126-16" name="__codelineno-126-16"></a><a href="#__codelineno-126-16"><span class="linenos" data-linenos="16 "></span></a><span class="w">    </span><span class="k">end</span>
</span><span id="__span-126-17"><a id="__codelineno-126-17" name="__codelineno-126-17"></a><a href="#__codelineno-126-17"><span class="linenos" data-linenos="17 "></span></a>
</span><span id="__span-126-18"><a id="__codelineno-126-18" name="__codelineno-126-18"></a><a href="#__codelineno-126-18"><span class="linenos" data-linenos="18 "></span></a><span class="w">    </span><span class="k">always</span><span class="p">@(</span><span class="o">*</span><span class="p">)</span><span class="k">begin</span>
</span><span id="__span-126-19"><a id="__codelineno-126-19" name="__codelineno-126-19"></a><a href="#__codelineno-126-19"><span class="linenos" data-linenos="19 "></span></a><span class="w">        </span><span class="k">case</span><span class="p">(</span><span class="n">state</span><span class="p">)</span>
</span><span id="__span-126-20"><a id="__codelineno-126-20" name="__codelineno-126-20"></a><a href="#__codelineno-126-20"><span class="linenos" data-linenos="20 "></span></a><span class="w">            </span><span class="mh">2</span><span class="mb">&#39;b00</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="n">fr3</span><span class="p">,</span><span class="n">fr2</span><span class="p">,</span><span class="n">fr1</span><span class="p">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">3</span><span class="mb">&#39;b111</span><span class="p">;</span>
</span><span id="__span-126-21"><a id="__codelineno-126-21" name="__codelineno-126-21"></a><a href="#__codelineno-126-21"><span class="linenos" data-linenos="21 "></span></a><span class="w">            </span><span class="mh">2</span><span class="mb">&#39;b01</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="n">fr3</span><span class="p">,</span><span class="n">fr2</span><span class="p">,</span><span class="n">fr1</span><span class="p">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">3</span><span class="mb">&#39;b011</span><span class="p">;</span>
</span><span id="__span-126-22"><a id="__codelineno-126-22" name="__codelineno-126-22"></a><a href="#__codelineno-126-22"><span class="linenos" data-linenos="22 "></span></a><span class="w">            </span><span class="mh">2</span><span class="mb">&#39;b10</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="n">fr3</span><span class="p">,</span><span class="n">fr2</span><span class="p">,</span><span class="n">fr1</span><span class="p">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">3</span><span class="mb">&#39;b001</span><span class="p">;</span>
</span><span id="__span-126-23"><a id="__codelineno-126-23" name="__codelineno-126-23"></a><a href="#__codelineno-126-23"><span class="linenos" data-linenos="23 "></span></a><span class="w">            </span><span class="mh">2</span><span class="mb">&#39;b11</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="n">fr3</span><span class="p">,</span><span class="n">fr2</span><span class="p">,</span><span class="n">fr1</span><span class="p">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">3</span><span class="mb">&#39;b000</span><span class="p">;</span>
</span><span id="__span-126-24"><a id="__codelineno-126-24" name="__codelineno-126-24"></a><a href="#__codelineno-126-24"><span class="linenos" data-linenos="24 "></span></a><span class="w">        </span><span class="k">endcase</span>
</span><span id="__span-126-25"><a id="__codelineno-126-25" name="__codelineno-126-25"></a><a href="#__codelineno-126-25"><span class="linenos" data-linenos="25 "></span></a><span class="w">    </span><span class="k">end</span>
</span><span id="__span-126-26"><a id="__codelineno-126-26" name="__codelineno-126-26"></a><a href="#__codelineno-126-26"><span class="linenos" data-linenos="26 "></span></a>
</span><span id="__span-126-27"><a id="__codelineno-126-27" name="__codelineno-126-27"></a><a href="#__codelineno-126-27"><span class="linenos" data-linenos="27 "></span></a><span class="w">    </span><span class="k">always</span><span class="p">@(</span><span class="k">posedge</span><span class="w"> </span><span class="n">clk</span><span class="p">)</span><span class="k">begin</span>
</span><span id="__span-126-28"><a id="__codelineno-126-28" name="__codelineno-126-28"></a><a href="#__codelineno-126-28"><span class="linenos" data-linenos="28 "></span></a><span class="w">        </span><span class="k">if</span><span class="p">(</span><span class="n">reset</span><span class="p">)</span><span class="w"> </span><span class="n">dfr</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="mh">1</span><span class="mb">&#39;b1</span><span class="p">;</span>
</span><span id="__span-126-29"><a id="__codelineno-126-29" name="__codelineno-126-29"></a><a href="#__codelineno-126-29"><span class="linenos" data-linenos="29 "></span></a><span class="w">        </span><span class="k">else</span><span class="w"> </span><span class="k">begin</span>
</span><span id="__span-126-30"><a id="__codelineno-126-30" name="__codelineno-126-30"></a><a href="#__codelineno-126-30"><span class="linenos" data-linenos="30 "></span></a><span class="w">            </span><span class="k">if</span><span class="p">(</span><span class="n">state</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="n">next_state</span><span class="p">)</span><span class="w"> </span><span class="n">dfr</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="mh">1</span><span class="mb">&#39;b1</span><span class="p">;</span>
</span><span id="__span-126-31"><a id="__codelineno-126-31" name="__codelineno-126-31"></a><a href="#__codelineno-126-31"><span class="linenos" data-linenos="31 "></span></a><span class="w">            </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="p">(</span><span class="n">state</span><span class="o">==</span><span class="w"> </span><span class="n">next_state</span><span class="p">)</span><span class="w"> </span><span class="n">dfr</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">dfr</span><span class="p">;</span>
</span><span id="__span-126-32"><a id="__codelineno-126-32" name="__codelineno-126-32"></a><a href="#__codelineno-126-32"><span class="linenos" data-linenos="32 "></span></a><span class="w">            </span><span class="k">else</span><span class="w"> </span><span class="n">dfr</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="mh">1</span><span class="mb">&#39;b0</span><span class="p">;</span>
</span><span id="__span-126-33"><a id="__codelineno-126-33" name="__codelineno-126-33"></a><a href="#__codelineno-126-33"><span class="linenos" data-linenos="33 "></span></a><span class="w">        </span><span class="k">end</span>
</span><span id="__span-126-34"><a id="__codelineno-126-34" name="__codelineno-126-34"></a><a href="#__codelineno-126-34"><span class="linenos" data-linenos="34 "></span></a><span class="w">    </span><span class="k">end</span>
</span><span id="__span-126-35"><a id="__codelineno-126-35" name="__codelineno-126-35"></a><a href="#__codelineno-126-35"><span class="linenos" data-linenos="35 "></span></a><span class="k">endmodule</span>
</span></code></pre></div></p>
<hr />
<h5 id="lemmings-1">Lemmings 1<a class="headerlink" href="#lemmings-1" title="Anchor link to this section for reference">⚓︎</a></h5>
<p>Website: <a href="https://hdlbits.01xz.net/wiki/Lemmings1" target="_blank">https://hdlbits.01xz.net/wiki/Lemmings1</a></p>
<p>這題透過FSM實作遊戲的原理。
<div class="language-verilog highlight"><span class="filename">Verilog</span><pre><span></span><code><span id="__span-127-1"><a id="__codelineno-127-1" name="__codelineno-127-1"></a><a href="#__codelineno-127-1"><span class="linenos" data-linenos=" 1 "></span></a><span class="k">module</span><span class="w"> </span><span class="n">top_module</span><span class="p">(</span>
</span><span id="__span-127-2"><a id="__codelineno-127-2" name="__codelineno-127-2"></a><a href="#__codelineno-127-2"><span class="linenos" data-linenos=" 2 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">clk</span><span class="p">,</span>
</span><span id="__span-127-3"><a id="__codelineno-127-3" name="__codelineno-127-3"></a><a href="#__codelineno-127-3"><span class="linenos" data-linenos=" 3 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">areset</span><span class="p">,</span><span class="w">    </span><span class="c1">// Freshly brainwashed Lemmings walk left.</span>
</span><span id="__span-127-4"><a id="__codelineno-127-4" name="__codelineno-127-4"></a><a href="#__codelineno-127-4"><span class="linenos" data-linenos=" 4 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">bump_left</span><span class="p">,</span>
</span><span id="__span-127-5"><a id="__codelineno-127-5" name="__codelineno-127-5"></a><a href="#__codelineno-127-5"><span class="linenos" data-linenos=" 5 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">bump_right</span><span class="p">,</span>
</span><span id="__span-127-6"><a id="__codelineno-127-6" name="__codelineno-127-6"></a><a href="#__codelineno-127-6"><span class="linenos" data-linenos=" 6 "></span></a><span class="w">    </span><span class="k">output</span><span class="w"> </span><span class="n">walk_left</span><span class="p">,</span>
</span><span id="__span-127-7"><a id="__codelineno-127-7" name="__codelineno-127-7"></a><a href="#__codelineno-127-7"><span class="linenos" data-linenos=" 7 "></span></a><span class="w">    </span><span class="k">output</span><span class="w"> </span><span class="n">walk_right</span><span class="p">);</span><span class="w"> </span><span class="c1">//  </span>
</span><span id="__span-127-8"><a id="__codelineno-127-8" name="__codelineno-127-8"></a><a href="#__codelineno-127-8"><span class="linenos" data-linenos=" 8 "></span></a>
</span><span id="__span-127-9"><a id="__codelineno-127-9" name="__codelineno-127-9"></a><a href="#__codelineno-127-9"><span class="linenos" data-linenos=" 9 "></span></a><span class="w">    </span><span class="c1">// parameter LEFT=1, RIGHT=0, ...</span>
</span><span id="__span-127-10"><a id="__codelineno-127-10" name="__codelineno-127-10"></a><a href="#__codelineno-127-10"><span class="linenos" data-linenos="10 "></span></a><span class="w">    </span><span class="kt">reg</span><span class="w"> </span><span class="n">state</span><span class="p">,</span><span class="w"> </span><span class="n">next_state</span><span class="p">;</span>
</span><span id="__span-127-11"><a id="__codelineno-127-11" name="__codelineno-127-11"></a><a href="#__codelineno-127-11"><span class="linenos" data-linenos="11 "></span></a>
</span><span id="__span-127-12"><a id="__codelineno-127-12" name="__codelineno-127-12"></a><a href="#__codelineno-127-12"><span class="linenos" data-linenos="12 "></span></a><span class="w">    </span><span class="k">always</span><span class="w"> </span><span class="p">@(</span><span class="o">*</span><span class="p">)</span><span class="w"> </span><span class="k">begin</span>
</span><span id="__span-127-13"><a id="__codelineno-127-13" name="__codelineno-127-13"></a><a href="#__codelineno-127-13"><span class="linenos" data-linenos="13 "></span></a><span class="w">        </span><span class="c1">// State transition logic</span>
</span><span id="__span-127-14"><a id="__codelineno-127-14" name="__codelineno-127-14"></a><a href="#__codelineno-127-14"><span class="linenos" data-linenos="14 "></span></a><span class="w">        </span><span class="k">case</span><span class="p">(</span><span class="n">state</span><span class="p">)</span>
</span><span id="__span-127-15"><a id="__codelineno-127-15" name="__codelineno-127-15"></a><a href="#__codelineno-127-15"><span class="linenos" data-linenos="15 "></span></a><span class="w">            </span><span class="mh">1</span><span class="mb">&#39;b0</span><span class="o">:</span><span class="w"> </span><span class="n">next_state</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">bump_right</span><span class="o">?</span><span class="w"> </span><span class="mh">1</span><span class="mb">&#39;b1</span><span class="o">:</span><span class="w"> </span><span class="mh">1</span><span class="mb">&#39;b0</span><span class="p">;</span>
</span><span id="__span-127-16"><a id="__codelineno-127-16" name="__codelineno-127-16"></a><a href="#__codelineno-127-16"><span class="linenos" data-linenos="16 "></span></a><span class="w">            </span><span class="mh">1</span><span class="mb">&#39;b1</span><span class="o">:</span><span class="w"> </span><span class="n">next_state</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">bump_left</span><span class="o">?</span><span class="w">  </span><span class="mh">1</span><span class="mb">&#39;b0</span><span class="o">:</span><span class="w"> </span><span class="mh">1</span><span class="mb">&#39;b1</span><span class="p">;</span>
</span><span id="__span-127-17"><a id="__codelineno-127-17" name="__codelineno-127-17"></a><a href="#__codelineno-127-17"><span class="linenos" data-linenos="17 "></span></a><span class="w">        </span><span class="k">endcase</span>
</span><span id="__span-127-18"><a id="__codelineno-127-18" name="__codelineno-127-18"></a><a href="#__codelineno-127-18"><span class="linenos" data-linenos="18 "></span></a><span class="w">    </span><span class="k">end</span>
</span><span id="__span-127-19"><a id="__codelineno-127-19" name="__codelineno-127-19"></a><a href="#__codelineno-127-19"><span class="linenos" data-linenos="19 "></span></a>
</span><span id="__span-127-20"><a id="__codelineno-127-20" name="__codelineno-127-20"></a><a href="#__codelineno-127-20"><span class="linenos" data-linenos="20 "></span></a><span class="w">    </span><span class="k">always</span><span class="w"> </span><span class="p">@(</span><span class="k">posedge</span><span class="w"> </span><span class="n">clk</span><span class="p">,</span><span class="w"> </span><span class="k">posedge</span><span class="w"> </span><span class="n">areset</span><span class="p">)</span><span class="w"> </span><span class="k">begin</span>
</span><span id="__span-127-21"><a id="__codelineno-127-21" name="__codelineno-127-21"></a><a href="#__codelineno-127-21"><span class="linenos" data-linenos="21 "></span></a><span class="w">        </span><span class="c1">// State flip-flops with asynchronous reset</span>
</span><span id="__span-127-22"><a id="__codelineno-127-22" name="__codelineno-127-22"></a><a href="#__codelineno-127-22"><span class="linenos" data-linenos="22 "></span></a><span class="w">        </span><span class="k">if</span><span class="p">(</span><span class="n">areset</span><span class="p">)</span><span class="w"> </span><span class="n">state</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="mh">1</span><span class="mb">&#39;b1</span><span class="p">;</span>
</span><span id="__span-127-23"><a id="__codelineno-127-23" name="__codelineno-127-23"></a><a href="#__codelineno-127-23"><span class="linenos" data-linenos="23 "></span></a><span class="w">        </span><span class="k">else</span><span class="w"> </span><span class="n">state</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">next_state</span><span class="p">;</span>
</span><span id="__span-127-24"><a id="__codelineno-127-24" name="__codelineno-127-24"></a><a href="#__codelineno-127-24"><span class="linenos" data-linenos="24 "></span></a><span class="w">    </span><span class="k">end</span>
</span><span id="__span-127-25"><a id="__codelineno-127-25" name="__codelineno-127-25"></a><a href="#__codelineno-127-25"><span class="linenos" data-linenos="25 "></span></a>
</span><span id="__span-127-26"><a id="__codelineno-127-26" name="__codelineno-127-26"></a><a href="#__codelineno-127-26"><span class="linenos" data-linenos="26 "></span></a><span class="w">    </span><span class="c1">// Output logic</span>
</span><span id="__span-127-27"><a id="__codelineno-127-27" name="__codelineno-127-27"></a><a href="#__codelineno-127-27"><span class="linenos" data-linenos="27 "></span></a><span class="w">    </span><span class="k">assign</span><span class="w"> </span><span class="n">walk_left</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">state</span><span class="p">;</span>
</span><span id="__span-127-28"><a id="__codelineno-127-28" name="__codelineno-127-28"></a><a href="#__codelineno-127-28"><span class="linenos" data-linenos="28 "></span></a><span class="w">    </span><span class="k">assign</span><span class="w"> </span><span class="n">walk_right</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">~</span><span class="n">state</span><span class="p">;</span>
</span><span id="__span-127-29"><a id="__codelineno-127-29" name="__codelineno-127-29"></a><a href="#__codelineno-127-29"><span class="linenos" data-linenos="29 "></span></a><span class="k">endmodule</span>
</span></code></pre></div></p>
<hr />
<h5 id="lemmings-2">Lemmings 2<a class="headerlink" href="#lemmings-2" title="Anchor link to this section for reference">⚓︎</a></h5>
<p>Website: <a href="https://hdlbits.01xz.net/wiki/Lemmings2" target="_blank">https://hdlbits.01xz.net/wiki/Lemmings2</a></p>
<p>這題是上題的延伸，主要是bump的條件要多寫。
<div class="language-verilog highlight"><span class="filename">Verilog</span><pre><span></span><code><span id="__span-128-1"><a id="__codelineno-128-1" name="__codelineno-128-1"></a><a href="#__codelineno-128-1"><span class="linenos" data-linenos=" 1 "></span></a><span class="k">module</span><span class="w"> </span><span class="n">top_module</span><span class="p">(</span>
</span><span id="__span-128-2"><a id="__codelineno-128-2" name="__codelineno-128-2"></a><a href="#__codelineno-128-2"><span class="linenos" data-linenos=" 2 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">clk</span><span class="p">,</span>
</span><span id="__span-128-3"><a id="__codelineno-128-3" name="__codelineno-128-3"></a><a href="#__codelineno-128-3"><span class="linenos" data-linenos=" 3 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">areset</span><span class="p">,</span><span class="w">    </span><span class="c1">// Freshly brainwashed Lemmings walk left.</span>
</span><span id="__span-128-4"><a id="__codelineno-128-4" name="__codelineno-128-4"></a><a href="#__codelineno-128-4"><span class="linenos" data-linenos=" 4 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">bump_left</span><span class="p">,</span>
</span><span id="__span-128-5"><a id="__codelineno-128-5" name="__codelineno-128-5"></a><a href="#__codelineno-128-5"><span class="linenos" data-linenos=" 5 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">bump_right</span><span class="p">,</span>
</span><span id="__span-128-6"><a id="__codelineno-128-6" name="__codelineno-128-6"></a><a href="#__codelineno-128-6"><span class="linenos" data-linenos=" 6 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">ground</span><span class="p">,</span>
</span><span id="__span-128-7"><a id="__codelineno-128-7" name="__codelineno-128-7"></a><a href="#__codelineno-128-7"><span class="linenos" data-linenos=" 7 "></span></a><span class="w">    </span><span class="k">output</span><span class="w"> </span><span class="n">walk_left</span><span class="p">,</span>
</span><span id="__span-128-8"><a id="__codelineno-128-8" name="__codelineno-128-8"></a><a href="#__codelineno-128-8"><span class="linenos" data-linenos=" 8 "></span></a><span class="w">    </span><span class="k">output</span><span class="w"> </span><span class="n">walk_right</span><span class="p">,</span>
</span><span id="__span-128-9"><a id="__codelineno-128-9" name="__codelineno-128-9"></a><a href="#__codelineno-128-9"><span class="linenos" data-linenos=" 9 "></span></a><span class="w">    </span><span class="k">output</span><span class="w"> </span><span class="n">aaah</span><span class="w"> </span><span class="p">);</span><span class="w"> </span>
</span><span id="__span-128-10"><a id="__codelineno-128-10" name="__codelineno-128-10"></a><a href="#__codelineno-128-10"><span class="linenos" data-linenos="10 "></span></a><span class="w">    </span><span class="c1">//0 right_fall, 1 left_fall, 2 right, 3 left</span>
</span><span id="__span-128-11"><a id="__codelineno-128-11" name="__codelineno-128-11"></a><a href="#__codelineno-128-11"><span class="linenos" data-linenos="11 "></span></a><span class="w">    </span><span class="kt">reg</span><span class="w"> </span><span class="p">[</span><span class="mh">1</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="n">state</span><span class="p">,</span><span class="n">next_state</span><span class="p">;</span>
</span><span id="__span-128-12"><a id="__codelineno-128-12" name="__codelineno-128-12"></a><a href="#__codelineno-128-12"><span class="linenos" data-linenos="12 "></span></a>
</span><span id="__span-128-13"><a id="__codelineno-128-13" name="__codelineno-128-13"></a><a href="#__codelineno-128-13"><span class="linenos" data-linenos="13 "></span></a><span class="w">    </span><span class="k">always</span><span class="p">@(</span><span class="o">*</span><span class="p">)</span><span class="k">begin</span>
</span><span id="__span-128-14"><a id="__codelineno-128-14" name="__codelineno-128-14"></a><a href="#__codelineno-128-14"><span class="linenos" data-linenos="14 "></span></a><span class="w">        </span><span class="k">if</span><span class="p">(</span><span class="o">~</span><span class="n">ground</span><span class="p">)</span><span class="w"> </span><span class="n">next_state</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="mh">1</span><span class="mb">&#39;b0</span><span class="p">,</span><span class="n">state</span><span class="p">[</span><span class="mh">0</span><span class="p">]};</span>
</span><span id="__span-128-15"><a id="__codelineno-128-15" name="__codelineno-128-15"></a><a href="#__codelineno-128-15"><span class="linenos" data-linenos="15 "></span></a><span class="w">        </span><span class="k">else</span><span class="w"> </span><span class="k">begin</span>
</span><span id="__span-128-16"><a id="__codelineno-128-16" name="__codelineno-128-16"></a><a href="#__codelineno-128-16"><span class="linenos" data-linenos="16 "></span></a><span class="w">            </span><span class="k">case</span><span class="p">(</span><span class="n">state</span><span class="p">)</span>
</span><span id="__span-128-17"><a id="__codelineno-128-17" name="__codelineno-128-17"></a><a href="#__codelineno-128-17"><span class="linenos" data-linenos="17 "></span></a><span class="w">                </span><span class="mh">2</span><span class="mb">&#39;b00</span><span class="o">:</span><span class="w"> </span><span class="n">next_state</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">2</span><span class="mb">&#39;b10</span><span class="p">;</span>
</span><span id="__span-128-18"><a id="__codelineno-128-18" name="__codelineno-128-18"></a><a href="#__codelineno-128-18"><span class="linenos" data-linenos="18 "></span></a><span class="w">                </span><span class="mh">2</span><span class="mb">&#39;b01</span><span class="o">:</span><span class="w"> </span><span class="n">next_state</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">2</span><span class="mb">&#39;b11</span><span class="p">;</span>
</span><span id="__span-128-19"><a id="__codelineno-128-19" name="__codelineno-128-19"></a><a href="#__codelineno-128-19"><span class="linenos" data-linenos="19 "></span></a><span class="w">                </span><span class="mh">2</span><span class="mb">&#39;b10</span><span class="o">:</span><span class="w"> </span><span class="n">next_state</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">bump_right</span><span class="o">?</span><span class="w"> </span><span class="mh">2</span><span class="mb">&#39;b11</span><span class="o">:</span><span class="w"> </span><span class="mh">2</span><span class="mb">&#39;b10</span><span class="p">;</span>
</span><span id="__span-128-20"><a id="__codelineno-128-20" name="__codelineno-128-20"></a><a href="#__codelineno-128-20"><span class="linenos" data-linenos="20 "></span></a><span class="w">                </span><span class="mh">2</span><span class="mb">&#39;b11</span><span class="o">:</span><span class="w"> </span><span class="n">next_state</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">bump_left</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="mh">2</span><span class="mb">&#39;b10</span><span class="o">:</span><span class="w"> </span><span class="mh">2</span><span class="mb">&#39;b11</span><span class="p">;</span>
</span><span id="__span-128-21"><a id="__codelineno-128-21" name="__codelineno-128-21"></a><a href="#__codelineno-128-21"><span class="linenos" data-linenos="21 "></span></a><span class="w">            </span><span class="k">endcase</span>
</span><span id="__span-128-22"><a id="__codelineno-128-22" name="__codelineno-128-22"></a><a href="#__codelineno-128-22"><span class="linenos" data-linenos="22 "></span></a><span class="w">        </span><span class="k">end</span>
</span><span id="__span-128-23"><a id="__codelineno-128-23" name="__codelineno-128-23"></a><a href="#__codelineno-128-23"><span class="linenos" data-linenos="23 "></span></a><span class="w">    </span><span class="k">end</span>
</span><span id="__span-128-24"><a id="__codelineno-128-24" name="__codelineno-128-24"></a><a href="#__codelineno-128-24"><span class="linenos" data-linenos="24 "></span></a>
</span><span id="__span-128-25"><a id="__codelineno-128-25" name="__codelineno-128-25"></a><a href="#__codelineno-128-25"><span class="linenos" data-linenos="25 "></span></a><span class="w">    </span><span class="k">always</span><span class="p">@(</span><span class="k">posedge</span><span class="w"> </span><span class="n">clk</span><span class="p">,</span><span class="k">posedge</span><span class="w"> </span><span class="n">areset</span><span class="p">)</span><span class="k">begin</span>
</span><span id="__span-128-26"><a id="__codelineno-128-26" name="__codelineno-128-26"></a><a href="#__codelineno-128-26"><span class="linenos" data-linenos="26 "></span></a><span class="w">        </span><span class="k">if</span><span class="p">(</span><span class="n">areset</span><span class="p">)</span><span class="w"> </span><span class="n">state</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="mh">2</span><span class="mb">&#39;b11</span><span class="p">;</span>
</span><span id="__span-128-27"><a id="__codelineno-128-27" name="__codelineno-128-27"></a><a href="#__codelineno-128-27"><span class="linenos" data-linenos="27 "></span></a><span class="w">        </span><span class="k">else</span><span class="w"> </span><span class="n">state</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">next_state</span><span class="p">;</span>
</span><span id="__span-128-28"><a id="__codelineno-128-28" name="__codelineno-128-28"></a><a href="#__codelineno-128-28"><span class="linenos" data-linenos="28 "></span></a><span class="w">    </span><span class="k">end</span>
</span><span id="__span-128-29"><a id="__codelineno-128-29" name="__codelineno-128-29"></a><a href="#__codelineno-128-29"><span class="linenos" data-linenos="29 "></span></a>
</span><span id="__span-128-30"><a id="__codelineno-128-30" name="__codelineno-128-30"></a><a href="#__codelineno-128-30"><span class="linenos" data-linenos="30 "></span></a><span class="w">    </span><span class="k">assign</span><span class="w"> </span><span class="n">walk_left</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">&amp;</span><span class="n">state</span><span class="p">;</span>
</span><span id="__span-128-31"><a id="__codelineno-128-31" name="__codelineno-128-31"></a><a href="#__codelineno-128-31"><span class="linenos" data-linenos="31 "></span></a><span class="w">    </span><span class="k">assign</span><span class="w"> </span><span class="n">walk_right</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">state</span><span class="p">[</span><span class="mh">1</span><span class="p">]</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="o">~</span><span class="n">state</span><span class="p">[</span><span class="mh">0</span><span class="p">];</span>
</span><span id="__span-128-32"><a id="__codelineno-128-32" name="__codelineno-128-32"></a><a href="#__codelineno-128-32"><span class="linenos" data-linenos="32 "></span></a><span class="w">    </span><span class="k">assign</span><span class="w"> </span><span class="n">aaah</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">~</span><span class="n">state</span><span class="p">[</span><span class="mh">1</span><span class="p">];</span>
</span><span id="__span-128-33"><a id="__codelineno-128-33" name="__codelineno-128-33"></a><a href="#__codelineno-128-33"><span class="linenos" data-linenos="33 "></span></a><span class="k">endmodule</span>
</span></code></pre></div></p>
<hr />
<h5 id="lemmings-3">Lemmings 3<a class="headerlink" href="#lemmings-3" title="Anchor link to this section for reference">⚓︎</a></h5>
<p>Website: <a href="https://hdlbits.01xz.net/wiki/Lemmings3" target="_blank">https://hdlbits.01xz.net/wiki/Lemmings3</a></p>
<p>這題是上題的延伸，主要是dig的條件要多寫，然後如果照著fsm格式寫應該會快樂不少。
<div class="language-verilog highlight"><span class="filename">Verilog</span><pre><span></span><code><span id="__span-129-1"><a id="__codelineno-129-1" name="__codelineno-129-1"></a><a href="#__codelineno-129-1"><span class="linenos" data-linenos=" 1 "></span></a><span class="k">module</span><span class="w"> </span><span class="n">top_module</span><span class="p">(</span>
</span><span id="__span-129-2"><a id="__codelineno-129-2" name="__codelineno-129-2"></a><a href="#__codelineno-129-2"><span class="linenos" data-linenos=" 2 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">clk</span><span class="p">,</span>
</span><span id="__span-129-3"><a id="__codelineno-129-3" name="__codelineno-129-3"></a><a href="#__codelineno-129-3"><span class="linenos" data-linenos=" 3 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">areset</span><span class="p">,</span><span class="w">    </span><span class="c1">// Freshly brainwashed Lemmings walk left.</span>
</span><span id="__span-129-4"><a id="__codelineno-129-4" name="__codelineno-129-4"></a><a href="#__codelineno-129-4"><span class="linenos" data-linenos=" 4 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">bump_left</span><span class="p">,</span>
</span><span id="__span-129-5"><a id="__codelineno-129-5" name="__codelineno-129-5"></a><a href="#__codelineno-129-5"><span class="linenos" data-linenos=" 5 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">bump_right</span><span class="p">,</span>
</span><span id="__span-129-6"><a id="__codelineno-129-6" name="__codelineno-129-6"></a><a href="#__codelineno-129-6"><span class="linenos" data-linenos=" 6 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">ground</span><span class="p">,</span>
</span><span id="__span-129-7"><a id="__codelineno-129-7" name="__codelineno-129-7"></a><a href="#__codelineno-129-7"><span class="linenos" data-linenos=" 7 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">dig</span><span class="p">,</span>
</span><span id="__span-129-8"><a id="__codelineno-129-8" name="__codelineno-129-8"></a><a href="#__codelineno-129-8"><span class="linenos" data-linenos=" 8 "></span></a><span class="w">    </span><span class="k">output</span><span class="w"> </span><span class="n">walk_left</span><span class="p">,</span>
</span><span id="__span-129-9"><a id="__codelineno-129-9" name="__codelineno-129-9"></a><a href="#__codelineno-129-9"><span class="linenos" data-linenos=" 9 "></span></a><span class="w">    </span><span class="k">output</span><span class="w"> </span><span class="n">walk_right</span><span class="p">,</span>
</span><span id="__span-129-10"><a id="__codelineno-129-10" name="__codelineno-129-10"></a><a href="#__codelineno-129-10"><span class="linenos" data-linenos="10 "></span></a><span class="w">    </span><span class="k">output</span><span class="w"> </span><span class="n">aaah</span><span class="p">,</span>
</span><span id="__span-129-11"><a id="__codelineno-129-11" name="__codelineno-129-11"></a><a href="#__codelineno-129-11"><span class="linenos" data-linenos="11 "></span></a><span class="w">    </span><span class="k">output</span><span class="w"> </span><span class="n">digging</span><span class="w"> </span><span class="p">);</span><span class="w"> </span>
</span><span id="__span-129-12"><a id="__codelineno-129-12" name="__codelineno-129-12"></a><a href="#__codelineno-129-12"><span class="linenos" data-linenos="12 "></span></a><span class="w">    </span><span class="c1">//right 3&#39;b000, left 3&#39;b001, bump right 3&#39;b010, bump left 3&#39;b011, dig right 3&#39;b100, dig left 3&#39;b101</span>
</span><span id="__span-129-13"><a id="__codelineno-129-13" name="__codelineno-129-13"></a><a href="#__codelineno-129-13"><span class="linenos" data-linenos="13 "></span></a><span class="w">    </span><span class="kt">reg</span><span class="w"> </span><span class="p">[</span><span class="mh">2</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">state</span><span class="p">,</span><span class="n">next_state</span><span class="p">;</span>
</span><span id="__span-129-14"><a id="__codelineno-129-14" name="__codelineno-129-14"></a><a href="#__codelineno-129-14"><span class="linenos" data-linenos="14 "></span></a>
</span><span id="__span-129-15"><a id="__codelineno-129-15" name="__codelineno-129-15"></a><a href="#__codelineno-129-15"><span class="linenos" data-linenos="15 "></span></a><span class="w">    </span><span class="k">always</span><span class="p">@(</span><span class="o">*</span><span class="p">)</span><span class="k">begin</span>
</span><span id="__span-129-16"><a id="__codelineno-129-16" name="__codelineno-129-16"></a><a href="#__codelineno-129-16"><span class="linenos" data-linenos="16 "></span></a><span class="w">        </span><span class="k">case</span><span class="p">(</span><span class="n">state</span><span class="p">)</span>
</span><span id="__span-129-17"><a id="__codelineno-129-17" name="__codelineno-129-17"></a><a href="#__codelineno-129-17"><span class="linenos" data-linenos="17 "></span></a><span class="w">            </span><span class="mh">3</span><span class="mb">&#39;b000</span><span class="o">:</span><span class="w"> </span><span class="n">next_state</span><span class="o">=</span><span class="w"> </span><span class="n">ground</span><span class="o">?</span><span class="w"> </span><span class="p">(</span><span class="n">dig</span><span class="o">?</span><span class="w"> </span><span class="mh">3</span><span class="mb">&#39;b100</span><span class="o">:</span><span class="w"> </span><span class="p">(</span><span class="n">bump_right</span><span class="o">?</span><span class="w"> </span><span class="mh">3</span><span class="mb">&#39;b001</span><span class="o">:</span><span class="mh">3</span><span class="mb">&#39;b000</span><span class="p">))</span><span class="o">:</span><span class="w"> </span><span class="mh">3</span><span class="mb">&#39;b010</span><span class="p">;</span>
</span><span id="__span-129-18"><a id="__codelineno-129-18" name="__codelineno-129-18"></a><a href="#__codelineno-129-18"><span class="linenos" data-linenos="18 "></span></a><span class="w">            </span><span class="mh">3</span><span class="mb">&#39;b001</span><span class="o">:</span><span class="w"> </span><span class="n">next_state</span><span class="o">=</span><span class="w"> </span><span class="n">ground</span><span class="o">?</span><span class="w"> </span><span class="p">(</span><span class="n">dig</span><span class="o">?</span><span class="w"> </span><span class="mh">3</span><span class="mb">&#39;b101</span><span class="o">:</span><span class="w"> </span><span class="p">(</span><span class="n">bump_left</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="mh">3</span><span class="mb">&#39;b000</span><span class="o">:</span><span class="mh">3</span><span class="mb">&#39;b001</span><span class="p">))</span><span class="o">:</span><span class="w"> </span><span class="mh">3</span><span class="mb">&#39;b011</span><span class="p">;</span>
</span><span id="__span-129-19"><a id="__codelineno-129-19" name="__codelineno-129-19"></a><a href="#__codelineno-129-19"><span class="linenos" data-linenos="19 "></span></a><span class="w">            </span><span class="mh">3</span><span class="mb">&#39;b010</span><span class="o">:</span><span class="w"> </span><span class="n">next_state</span><span class="o">=</span><span class="w"> </span><span class="n">ground</span><span class="o">?</span><span class="w"> </span><span class="mh">3</span><span class="mb">&#39;b000</span><span class="o">:</span><span class="w"> </span><span class="mh">3</span><span class="mb">&#39;b010</span><span class="p">;</span>
</span><span id="__span-129-20"><a id="__codelineno-129-20" name="__codelineno-129-20"></a><a href="#__codelineno-129-20"><span class="linenos" data-linenos="20 "></span></a><span class="w">            </span><span class="mh">3</span><span class="mb">&#39;b011</span><span class="o">:</span><span class="w"> </span><span class="n">next_state</span><span class="o">=</span><span class="w"> </span><span class="n">ground</span><span class="o">?</span><span class="w"> </span><span class="mh">3</span><span class="mb">&#39;b001</span><span class="o">:</span><span class="w"> </span><span class="mh">3</span><span class="mb">&#39;b011</span><span class="p">;</span>
</span><span id="__span-129-21"><a id="__codelineno-129-21" name="__codelineno-129-21"></a><a href="#__codelineno-129-21"><span class="linenos" data-linenos="21 "></span></a><span class="w">            </span><span class="mh">3</span><span class="mb">&#39;b100</span><span class="o">:</span><span class="w"> </span><span class="n">next_state</span><span class="o">=</span><span class="w"> </span><span class="n">ground</span><span class="o">?</span><span class="w"> </span><span class="mh">3</span><span class="mb">&#39;b100</span><span class="o">:</span><span class="w"> </span><span class="mh">3</span><span class="mb">&#39;b010</span><span class="p">;</span>
</span><span id="__span-129-22"><a id="__codelineno-129-22" name="__codelineno-129-22"></a><a href="#__codelineno-129-22"><span class="linenos" data-linenos="22 "></span></a><span class="w">            </span><span class="mh">3</span><span class="mb">&#39;b101</span><span class="o">:</span><span class="w"> </span><span class="n">next_state</span><span class="o">=</span><span class="w"> </span><span class="n">ground</span><span class="o">?</span><span class="w"> </span><span class="mh">3</span><span class="mb">&#39;b101</span><span class="o">:</span><span class="w"> </span><span class="mh">3</span><span class="mb">&#39;b011</span><span class="p">;</span>
</span><span id="__span-129-23"><a id="__codelineno-129-23" name="__codelineno-129-23"></a><a href="#__codelineno-129-23"><span class="linenos" data-linenos="23 "></span></a><span class="w">            </span><span class="k">default</span><span class="o">:</span><span class="w"> </span><span class="n">next_state</span><span class="o">=</span><span class="w"> </span><span class="mh">3</span><span class="p">&#39;</span><span class="n">bxxx</span><span class="p">;</span>
</span><span id="__span-129-24"><a id="__codelineno-129-24" name="__codelineno-129-24"></a><a href="#__codelineno-129-24"><span class="linenos" data-linenos="24 "></span></a><span class="w">        </span><span class="k">endcase</span>
</span><span id="__span-129-25"><a id="__codelineno-129-25" name="__codelineno-129-25"></a><a href="#__codelineno-129-25"><span class="linenos" data-linenos="25 "></span></a><span class="w">    </span><span class="k">end</span>
</span><span id="__span-129-26"><a id="__codelineno-129-26" name="__codelineno-129-26"></a><a href="#__codelineno-129-26"><span class="linenos" data-linenos="26 "></span></a>
</span><span id="__span-129-27"><a id="__codelineno-129-27" name="__codelineno-129-27"></a><a href="#__codelineno-129-27"><span class="linenos" data-linenos="27 "></span></a><span class="w">    </span><span class="k">always</span><span class="p">@(</span><span class="k">posedge</span><span class="w"> </span><span class="n">clk</span><span class="p">,</span><span class="k">posedge</span><span class="w"> </span><span class="n">areset</span><span class="p">)</span><span class="k">begin</span>
</span><span id="__span-129-28"><a id="__codelineno-129-28" name="__codelineno-129-28"></a><a href="#__codelineno-129-28"><span class="linenos" data-linenos="28 "></span></a><span class="w">        </span><span class="k">if</span><span class="p">(</span><span class="n">areset</span><span class="p">)</span><span class="w"> </span><span class="n">state</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="mh">3</span><span class="mb">&#39;b001</span><span class="p">;</span>
</span><span id="__span-129-29"><a id="__codelineno-129-29" name="__codelineno-129-29"></a><a href="#__codelineno-129-29"><span class="linenos" data-linenos="29 "></span></a><span class="w">        </span><span class="k">else</span><span class="w"> </span><span class="n">state</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">next_state</span><span class="p">;</span>
</span><span id="__span-129-30"><a id="__codelineno-129-30" name="__codelineno-129-30"></a><a href="#__codelineno-129-30"><span class="linenos" data-linenos="30 "></span></a><span class="w">    </span><span class="k">end</span>
</span><span id="__span-129-31"><a id="__codelineno-129-31" name="__codelineno-129-31"></a><a href="#__codelineno-129-31"><span class="linenos" data-linenos="31 "></span></a>
</span><span id="__span-129-32"><a id="__codelineno-129-32" name="__codelineno-129-32"></a><a href="#__codelineno-129-32"><span class="linenos" data-linenos="32 "></span></a><span class="w">    </span><span class="k">assign</span><span class="w"> </span><span class="n">walk_left</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">~</span><span class="n">state</span><span class="p">[</span><span class="mh">2</span><span class="p">]</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="o">~</span><span class="n">state</span><span class="p">[</span><span class="mh">1</span><span class="p">]</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="n">state</span><span class="p">[</span><span class="mh">0</span><span class="p">];</span>
</span><span id="__span-129-33"><a id="__codelineno-129-33" name="__codelineno-129-33"></a><a href="#__codelineno-129-33"><span class="linenos" data-linenos="33 "></span></a><span class="w">    </span><span class="k">assign</span><span class="w"> </span><span class="n">walk_right</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">&amp;</span><span class="p">(</span><span class="o">~</span><span class="n">state</span><span class="p">);</span>
</span><span id="__span-129-34"><a id="__codelineno-129-34" name="__codelineno-129-34"></a><a href="#__codelineno-129-34"><span class="linenos" data-linenos="34 "></span></a><span class="w">    </span><span class="k">assign</span><span class="w"> </span><span class="n">aaah</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">~</span><span class="n">state</span><span class="p">[</span><span class="mh">2</span><span class="p">]</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="n">state</span><span class="p">[</span><span class="mh">1</span><span class="p">];</span>
</span><span id="__span-129-35"><a id="__codelineno-129-35" name="__codelineno-129-35"></a><a href="#__codelineno-129-35"><span class="linenos" data-linenos="35 "></span></a><span class="w">    </span><span class="k">assign</span><span class="w"> </span><span class="n">digging</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">state</span><span class="p">[</span><span class="mh">2</span><span class="p">];</span>
</span><span id="__span-129-36"><a id="__codelineno-129-36" name="__codelineno-129-36"></a><a href="#__codelineno-129-36"><span class="linenos" data-linenos="36 "></span></a><span class="k">endmodule</span>
</span></code></pre></div></p>
<hr />
<h5 id="lemmings-4">Lemmings 4<a class="headerlink" href="#lemmings-4" title="Anchor link to this section for reference">⚓︎</a></h5>
<p>Website: <a href="https://hdlbits.01xz.net/wiki/Lemmings4" target="_blank">https://hdlbits.01xz.net/wiki/Lemmings4</a></p>
<p>這題是上題的延伸，也是FSM和counter的結合，這裡只需要注意counter在sequential的logic不要寫錯了，我當時把<code>if(~next_state[2] &amp; next_state[1])</code>寫成<code>if(~state[2] &amp; state[1])</code>，一直少算一回合。
<div class="language-verilog highlight"><span class="filename">Verilog</span><pre><span></span><code><span id="__span-130-1"><a id="__codelineno-130-1" name="__codelineno-130-1"></a><a href="#__codelineno-130-1"><span class="linenos" data-linenos=" 1 "></span></a><span class="k">module</span><span class="w"> </span><span class="n">top_module</span><span class="p">(</span>
</span><span id="__span-130-2"><a id="__codelineno-130-2" name="__codelineno-130-2"></a><a href="#__codelineno-130-2"><span class="linenos" data-linenos=" 2 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">clk</span><span class="p">,</span>
</span><span id="__span-130-3"><a id="__codelineno-130-3" name="__codelineno-130-3"></a><a href="#__codelineno-130-3"><span class="linenos" data-linenos=" 3 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">areset</span><span class="p">,</span><span class="w">    </span><span class="c1">// Freshly brainwashed Lemmings walk left.</span>
</span><span id="__span-130-4"><a id="__codelineno-130-4" name="__codelineno-130-4"></a><a href="#__codelineno-130-4"><span class="linenos" data-linenos=" 4 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">bump_left</span><span class="p">,</span>
</span><span id="__span-130-5"><a id="__codelineno-130-5" name="__codelineno-130-5"></a><a href="#__codelineno-130-5"><span class="linenos" data-linenos=" 5 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">bump_right</span><span class="p">,</span>
</span><span id="__span-130-6"><a id="__codelineno-130-6" name="__codelineno-130-6"></a><a href="#__codelineno-130-6"><span class="linenos" data-linenos=" 6 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">ground</span><span class="p">,</span>
</span><span id="__span-130-7"><a id="__codelineno-130-7" name="__codelineno-130-7"></a><a href="#__codelineno-130-7"><span class="linenos" data-linenos=" 7 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">dig</span><span class="p">,</span>
</span><span id="__span-130-8"><a id="__codelineno-130-8" name="__codelineno-130-8"></a><a href="#__codelineno-130-8"><span class="linenos" data-linenos=" 8 "></span></a><span class="w">    </span><span class="k">output</span><span class="w"> </span><span class="n">walk_left</span><span class="p">,</span>
</span><span id="__span-130-9"><a id="__codelineno-130-9" name="__codelineno-130-9"></a><a href="#__codelineno-130-9"><span class="linenos" data-linenos=" 9 "></span></a><span class="w">    </span><span class="k">output</span><span class="w"> </span><span class="n">walk_right</span><span class="p">,</span>
</span><span id="__span-130-10"><a id="__codelineno-130-10" name="__codelineno-130-10"></a><a href="#__codelineno-130-10"><span class="linenos" data-linenos="10 "></span></a><span class="w">    </span><span class="k">output</span><span class="w"> </span><span class="n">aaah</span><span class="p">,</span>
</span><span id="__span-130-11"><a id="__codelineno-130-11" name="__codelineno-130-11"></a><a href="#__codelineno-130-11"><span class="linenos" data-linenos="11 "></span></a><span class="w">    </span><span class="k">output</span><span class="w"> </span><span class="n">digging</span><span class="w"> </span><span class="p">);</span><span class="w"> </span>
</span><span id="__span-130-12"><a id="__codelineno-130-12" name="__codelineno-130-12"></a><a href="#__codelineno-130-12"><span class="linenos" data-linenos="12 "></span></a><span class="w">    </span><span class="c1">//right 3&#39;b000, left 3&#39;b001, bump right 3&#39;b010, bump left 3&#39;b011, dig right 3&#39;b100, dig left 3&#39;b101,splatter 3&#39;b110</span>
</span><span id="__span-130-13"><a id="__codelineno-130-13" name="__codelineno-130-13"></a><a href="#__codelineno-130-13"><span class="linenos" data-linenos="13 "></span></a><span class="w">    </span><span class="kt">reg</span><span class="w"> </span><span class="p">[</span><span class="mh">2</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">state</span><span class="p">,</span><span class="n">next_state</span><span class="p">;</span>
</span><span id="__span-130-14"><a id="__codelineno-130-14" name="__codelineno-130-14"></a><a href="#__codelineno-130-14"><span class="linenos" data-linenos="14 "></span></a><span class="w">    </span><span class="kt">reg</span><span class="w"> </span><span class="p">[</span><span class="mh">7</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">count</span><span class="p">;</span>
</span><span id="__span-130-15"><a id="__codelineno-130-15" name="__codelineno-130-15"></a><a href="#__codelineno-130-15"><span class="linenos" data-linenos="15 "></span></a>
</span><span id="__span-130-16"><a id="__codelineno-130-16" name="__codelineno-130-16"></a><a href="#__codelineno-130-16"><span class="linenos" data-linenos="16 "></span></a><span class="w">    </span><span class="k">always</span><span class="p">@(</span><span class="o">*</span><span class="p">)</span><span class="k">begin</span>
</span><span id="__span-130-17"><a id="__codelineno-130-17" name="__codelineno-130-17"></a><a href="#__codelineno-130-17"><span class="linenos" data-linenos="17 "></span></a><span class="w">        </span><span class="k">case</span><span class="p">(</span><span class="n">state</span><span class="p">)</span>
</span><span id="__span-130-18"><a id="__codelineno-130-18" name="__codelineno-130-18"></a><a href="#__codelineno-130-18"><span class="linenos" data-linenos="18 "></span></a><span class="w">            </span><span class="mh">3</span><span class="mb">&#39;b000</span><span class="o">:</span><span class="w"> </span><span class="n">next_state</span><span class="o">=</span><span class="w"> </span><span class="n">ground</span><span class="o">?</span><span class="w"> </span><span class="p">(</span><span class="n">dig</span><span class="o">?</span><span class="w"> </span><span class="mh">3</span><span class="mb">&#39;b100</span><span class="o">:</span><span class="w"> </span><span class="p">(</span><span class="n">bump_right</span><span class="o">?</span><span class="w"> </span><span class="mh">3</span><span class="mb">&#39;b001</span><span class="o">:</span><span class="mh">3</span><span class="mb">&#39;b000</span><span class="p">))</span><span class="o">:</span><span class="w"> </span><span class="mh">3</span><span class="mb">&#39;b010</span><span class="p">;</span>
</span><span id="__span-130-19"><a id="__codelineno-130-19" name="__codelineno-130-19"></a><a href="#__codelineno-130-19"><span class="linenos" data-linenos="19 "></span></a><span class="w">            </span><span class="mh">3</span><span class="mb">&#39;b001</span><span class="o">:</span><span class="w"> </span><span class="n">next_state</span><span class="o">=</span><span class="w"> </span><span class="n">ground</span><span class="o">?</span><span class="w"> </span><span class="p">(</span><span class="n">dig</span><span class="o">?</span><span class="w"> </span><span class="mh">3</span><span class="mb">&#39;b101</span><span class="o">:</span><span class="w"> </span><span class="p">(</span><span class="n">bump_left</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="mh">3</span><span class="mb">&#39;b000</span><span class="o">:</span><span class="mh">3</span><span class="mb">&#39;b001</span><span class="p">))</span><span class="o">:</span><span class="w"> </span><span class="mh">3</span><span class="mb">&#39;b011</span><span class="p">;</span>
</span><span id="__span-130-20"><a id="__codelineno-130-20" name="__codelineno-130-20"></a><a href="#__codelineno-130-20"><span class="linenos" data-linenos="20 "></span></a><span class="w">            </span><span class="mh">3</span><span class="mb">&#39;b010</span><span class="o">:</span><span class="w"> </span><span class="n">next_state</span><span class="o">=</span><span class="w"> </span><span class="n">ground</span><span class="o">?</span><span class="w"> </span><span class="p">((</span><span class="n">count</span><span class="o">&gt;</span><span class="mh">8</span><span class="mi">&#39;d20</span><span class="p">)</span><span class="o">?</span><span class="w"> </span><span class="mh">3</span><span class="mb">&#39;b110</span><span class="o">:</span><span class="w"> </span><span class="mh">3</span><span class="mb">&#39;b000</span><span class="p">)</span><span class="o">:</span><span class="w"> </span><span class="mh">3</span><span class="mb">&#39;b010</span><span class="p">;</span>
</span><span id="__span-130-21"><a id="__codelineno-130-21" name="__codelineno-130-21"></a><a href="#__codelineno-130-21"><span class="linenos" data-linenos="21 "></span></a><span class="w">            </span><span class="mh">3</span><span class="mb">&#39;b011</span><span class="o">:</span><span class="w"> </span><span class="n">next_state</span><span class="o">=</span><span class="w"> </span><span class="n">ground</span><span class="o">?</span><span class="w"> </span><span class="p">((</span><span class="n">count</span><span class="o">&gt;</span><span class="mh">8</span><span class="mi">&#39;d20</span><span class="p">)</span><span class="o">?</span><span class="w"> </span><span class="mh">3</span><span class="mb">&#39;b110</span><span class="o">:</span><span class="w"> </span><span class="mh">3</span><span class="mb">&#39;b001</span><span class="p">)</span><span class="o">:</span><span class="w"> </span><span class="mh">3</span><span class="mb">&#39;b011</span><span class="p">;</span>
</span><span id="__span-130-22"><a id="__codelineno-130-22" name="__codelineno-130-22"></a><a href="#__codelineno-130-22"><span class="linenos" data-linenos="22 "></span></a><span class="w">            </span><span class="mh">3</span><span class="mb">&#39;b100</span><span class="o">:</span><span class="w"> </span><span class="n">next_state</span><span class="o">=</span><span class="w"> </span><span class="n">ground</span><span class="o">?</span><span class="w"> </span><span class="mh">3</span><span class="mb">&#39;b100</span><span class="o">:</span><span class="w"> </span><span class="mh">3</span><span class="mb">&#39;b010</span><span class="p">;</span>
</span><span id="__span-130-23"><a id="__codelineno-130-23" name="__codelineno-130-23"></a><a href="#__codelineno-130-23"><span class="linenos" data-linenos="23 "></span></a><span class="w">            </span><span class="mh">3</span><span class="mb">&#39;b101</span><span class="o">:</span><span class="w"> </span><span class="n">next_state</span><span class="o">=</span><span class="w"> </span><span class="n">ground</span><span class="o">?</span><span class="w"> </span><span class="mh">3</span><span class="mb">&#39;b101</span><span class="o">:</span><span class="w"> </span><span class="mh">3</span><span class="mb">&#39;b011</span><span class="p">;</span>
</span><span id="__span-130-24"><a id="__codelineno-130-24" name="__codelineno-130-24"></a><a href="#__codelineno-130-24"><span class="linenos" data-linenos="24 "></span></a><span class="w">            </span><span class="mh">3</span><span class="mb">&#39;b110</span><span class="o">:</span><span class="w"> </span><span class="n">next_state</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">3</span><span class="mb">&#39;b110</span><span class="p">;</span>
</span><span id="__span-130-25"><a id="__codelineno-130-25" name="__codelineno-130-25"></a><a href="#__codelineno-130-25"><span class="linenos" data-linenos="25 "></span></a><span class="w">            </span><span class="k">default</span><span class="o">:</span><span class="w"> </span><span class="n">next_state</span><span class="o">=</span><span class="w"> </span><span class="mh">3</span><span class="p">&#39;</span><span class="n">bxxx</span><span class="p">;</span>
</span><span id="__span-130-26"><a id="__codelineno-130-26" name="__codelineno-130-26"></a><a href="#__codelineno-130-26"><span class="linenos" data-linenos="26 "></span></a><span class="w">        </span><span class="k">endcase</span>
</span><span id="__span-130-27"><a id="__codelineno-130-27" name="__codelineno-130-27"></a><a href="#__codelineno-130-27"><span class="linenos" data-linenos="27 "></span></a><span class="w">    </span><span class="k">end</span>
</span><span id="__span-130-28"><a id="__codelineno-130-28" name="__codelineno-130-28"></a><a href="#__codelineno-130-28"><span class="linenos" data-linenos="28 "></span></a>
</span><span id="__span-130-29"><a id="__codelineno-130-29" name="__codelineno-130-29"></a><a href="#__codelineno-130-29"><span class="linenos" data-linenos="29 "></span></a><span class="w">    </span><span class="k">always</span><span class="p">@(</span><span class="k">posedge</span><span class="w"> </span><span class="n">clk</span><span class="p">,</span><span class="k">posedge</span><span class="w"> </span><span class="n">areset</span><span class="p">)</span><span class="k">begin</span>
</span><span id="__span-130-30"><a id="__codelineno-130-30" name="__codelineno-130-30"></a><a href="#__codelineno-130-30"><span class="linenos" data-linenos="30 "></span></a><span class="w">        </span><span class="k">if</span><span class="p">(</span><span class="n">areset</span><span class="p">)</span><span class="k">begin</span>
</span><span id="__span-130-31"><a id="__codelineno-130-31" name="__codelineno-130-31"></a><a href="#__codelineno-130-31"><span class="linenos" data-linenos="31 "></span></a><span class="w">            </span><span class="n">state</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="mh">3</span><span class="mb">&#39;b001</span><span class="p">;</span>
</span><span id="__span-130-32"><a id="__codelineno-130-32" name="__codelineno-130-32"></a><a href="#__codelineno-130-32"><span class="linenos" data-linenos="32 "></span></a><span class="w">            </span><span class="n">count</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="mh">8</span><span class="mi">&#39;d0</span><span class="p">;</span>
</span><span id="__span-130-33"><a id="__codelineno-130-33" name="__codelineno-130-33"></a><a href="#__codelineno-130-33"><span class="linenos" data-linenos="33 "></span></a><span class="w">        </span><span class="k">end</span>
</span><span id="__span-130-34"><a id="__codelineno-130-34" name="__codelineno-130-34"></a><a href="#__codelineno-130-34"><span class="linenos" data-linenos="34 "></span></a><span class="w">        </span><span class="k">else</span><span class="w"> </span><span class="k">begin</span>
</span><span id="__span-130-35"><a id="__codelineno-130-35" name="__codelineno-130-35"></a><a href="#__codelineno-130-35"><span class="linenos" data-linenos="35 "></span></a><span class="w">            </span><span class="n">state</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">next_state</span><span class="p">;</span>
</span><span id="__span-130-36"><a id="__codelineno-130-36" name="__codelineno-130-36"></a><a href="#__codelineno-130-36"><span class="linenos" data-linenos="36 "></span></a><span class="w">            </span><span class="k">if</span><span class="p">(</span><span class="o">~</span><span class="n">next_state</span><span class="p">[</span><span class="mh">2</span><span class="p">]</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="n">next_state</span><span class="p">[</span><span class="mh">1</span><span class="p">])</span>
</span><span id="__span-130-37"><a id="__codelineno-130-37" name="__codelineno-130-37"></a><a href="#__codelineno-130-37"><span class="linenos" data-linenos="37 "></span></a><span class="w">                </span><span class="n">count</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">count</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mh">8</span><span class="mi">&#39;d1</span><span class="p">;</span>
</span><span id="__span-130-38"><a id="__codelineno-130-38" name="__codelineno-130-38"></a><a href="#__codelineno-130-38"><span class="linenos" data-linenos="38 "></span></a><span class="w">            </span><span class="k">else</span>
</span><span id="__span-130-39"><a id="__codelineno-130-39" name="__codelineno-130-39"></a><a href="#__codelineno-130-39"><span class="linenos" data-linenos="39 "></span></a><span class="w">                </span><span class="n">count</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="mh">8</span><span class="mi">&#39;d0</span><span class="p">;</span>
</span><span id="__span-130-40"><a id="__codelineno-130-40" name="__codelineno-130-40"></a><a href="#__codelineno-130-40"><span class="linenos" data-linenos="40 "></span></a><span class="w">        </span><span class="k">end</span>
</span><span id="__span-130-41"><a id="__codelineno-130-41" name="__codelineno-130-41"></a><a href="#__codelineno-130-41"><span class="linenos" data-linenos="41 "></span></a><span class="w">    </span><span class="k">end</span>
</span><span id="__span-130-42"><a id="__codelineno-130-42" name="__codelineno-130-42"></a><a href="#__codelineno-130-42"><span class="linenos" data-linenos="42 "></span></a>
</span><span id="__span-130-43"><a id="__codelineno-130-43" name="__codelineno-130-43"></a><a href="#__codelineno-130-43"><span class="linenos" data-linenos="43 "></span></a><span class="w">    </span><span class="k">assign</span><span class="w"> </span><span class="n">walk_left</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">~</span><span class="n">state</span><span class="p">[</span><span class="mh">2</span><span class="p">]</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="o">~</span><span class="n">state</span><span class="p">[</span><span class="mh">1</span><span class="p">]</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="n">state</span><span class="p">[</span><span class="mh">0</span><span class="p">];</span>
</span><span id="__span-130-44"><a id="__codelineno-130-44" name="__codelineno-130-44"></a><a href="#__codelineno-130-44"><span class="linenos" data-linenos="44 "></span></a><span class="w">    </span><span class="k">assign</span><span class="w"> </span><span class="n">walk_right</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">&amp;</span><span class="p">(</span><span class="o">~</span><span class="n">state</span><span class="p">);</span>
</span><span id="__span-130-45"><a id="__codelineno-130-45" name="__codelineno-130-45"></a><a href="#__codelineno-130-45"><span class="linenos" data-linenos="45 "></span></a><span class="w">    </span><span class="k">assign</span><span class="w"> </span><span class="n">aaah</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">~</span><span class="n">state</span><span class="p">[</span><span class="mh">2</span><span class="p">]</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="n">state</span><span class="p">[</span><span class="mh">1</span><span class="p">];</span>
</span><span id="__span-130-46"><a id="__codelineno-130-46" name="__codelineno-130-46"></a><a href="#__codelineno-130-46"><span class="linenos" data-linenos="46 "></span></a><span class="w">    </span><span class="k">assign</span><span class="w"> </span><span class="n">digging</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">state</span><span class="p">[</span><span class="mh">2</span><span class="p">]</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="o">~</span><span class="n">state</span><span class="p">[</span><span class="mh">1</span><span class="p">];</span>
</span><span id="__span-130-47"><a id="__codelineno-130-47" name="__codelineno-130-47"></a><a href="#__codelineno-130-47"><span class="linenos" data-linenos="47 "></span></a><span class="k">endmodule</span>
</span></code></pre></div></p>
<hr />
<h5 id="one-hot-fsm">One-hot FSM<a class="headerlink" href="#one-hot-fsm" title="Anchor link to this section for reference">⚓︎</a></h5>
<p>Website: <a href="https://hdlbits.01xz.net/wiki/Fsm_onehot" target="_blank">https://hdlbits.01xz.net/wiki/Fsm_onehot</a></p>
<p>這題不用寫DFF，而且又是one hot vector，所以很適合用assign來寫完transition logic。
<div class="language-verilog highlight"><span class="filename">Verilog</span><pre><span></span><code><span id="__span-131-1"><a id="__codelineno-131-1" name="__codelineno-131-1"></a><a href="#__codelineno-131-1"><span class="linenos" data-linenos=" 1 "></span></a><span class="k">module</span><span class="w"> </span><span class="n">top_module</span><span class="p">(</span>
</span><span id="__span-131-2"><a id="__codelineno-131-2" name="__codelineno-131-2"></a><a href="#__codelineno-131-2"><span class="linenos" data-linenos=" 2 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">in</span><span class="p">,</span>
</span><span id="__span-131-3"><a id="__codelineno-131-3" name="__codelineno-131-3"></a><a href="#__codelineno-131-3"><span class="linenos" data-linenos=" 3 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="p">[</span><span class="mh">9</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">state</span><span class="p">,</span>
</span><span id="__span-131-4"><a id="__codelineno-131-4" name="__codelineno-131-4"></a><a href="#__codelineno-131-4"><span class="linenos" data-linenos=" 4 "></span></a><span class="w">    </span><span class="k">output</span><span class="w"> </span><span class="p">[</span><span class="mh">9</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">next_state</span><span class="p">,</span>
</span><span id="__span-131-5"><a id="__codelineno-131-5" name="__codelineno-131-5"></a><a href="#__codelineno-131-5"><span class="linenos" data-linenos=" 5 "></span></a><span class="w">    </span><span class="k">output</span><span class="w"> </span><span class="n">out1</span><span class="p">,</span>
</span><span id="__span-131-6"><a id="__codelineno-131-6" name="__codelineno-131-6"></a><a href="#__codelineno-131-6"><span class="linenos" data-linenos=" 6 "></span></a><span class="w">    </span><span class="k">output</span><span class="w"> </span><span class="n">out2</span><span class="p">);</span>
</span><span id="__span-131-7"><a id="__codelineno-131-7" name="__codelineno-131-7"></a><a href="#__codelineno-131-7"><span class="linenos" data-linenos=" 7 "></span></a><span class="w">    </span><span class="c1">//next state</span>
</span><span id="__span-131-8"><a id="__codelineno-131-8" name="__codelineno-131-8"></a><a href="#__codelineno-131-8"><span class="linenos" data-linenos=" 8 "></span></a><span class="w">    </span><span class="k">assign</span><span class="w"> </span><span class="n">next_state</span><span class="p">[</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">~</span><span class="n">in</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="p">(</span><span class="n">state</span><span class="p">[</span><span class="mh">0</span><span class="p">]</span><span class="o">|</span><span class="w"> </span><span class="n">state</span><span class="p">[</span><span class="mh">1</span><span class="p">]</span><span class="o">|</span><span class="w">  </span><span class="n">state</span><span class="p">[</span><span class="mh">2</span><span class="p">]</span><span class="o">|</span><span class="w"> </span><span class="n">state</span><span class="p">[</span><span class="mh">3</span><span class="p">]</span><span class="o">|</span><span class="w">  </span><span class="n">state</span><span class="p">[</span><span class="mh">4</span><span class="p">]</span><span class="o">|</span><span class="w"> </span><span class="n">state</span><span class="p">[</span><span class="mh">7</span><span class="p">]</span><span class="o">|</span><span class="w"> </span><span class="n">state</span><span class="p">[</span><span class="mh">8</span><span class="p">]</span><span class="o">|</span><span class="w"> </span><span class="n">state</span><span class="p">[</span><span class="mh">9</span><span class="p">]);</span>
</span><span id="__span-131-9"><a id="__codelineno-131-9" name="__codelineno-131-9"></a><a href="#__codelineno-131-9"><span class="linenos" data-linenos=" 9 "></span></a><span class="w">    </span><span class="k">assign</span><span class="w"> </span><span class="n">next_state</span><span class="p">[</span><span class="mh">1</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">in</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="p">(</span><span class="n">state</span><span class="p">[</span><span class="mh">0</span><span class="p">]</span><span class="o">|</span><span class="w"> </span><span class="n">state</span><span class="p">[</span><span class="mh">8</span><span class="p">]</span><span class="o">|</span><span class="w"> </span><span class="n">state</span><span class="p">[</span><span class="mh">9</span><span class="p">]);</span>
</span><span id="__span-131-10"><a id="__codelineno-131-10" name="__codelineno-131-10"></a><a href="#__codelineno-131-10"><span class="linenos" data-linenos="10 "></span></a><span class="w">    </span><span class="k">assign</span><span class="w"> </span><span class="n">next_state</span><span class="p">[</span><span class="mh">2</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">in</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="n">state</span><span class="p">[</span><span class="mh">1</span><span class="p">];</span>
</span><span id="__span-131-11"><a id="__codelineno-131-11" name="__codelineno-131-11"></a><a href="#__codelineno-131-11"><span class="linenos" data-linenos="11 "></span></a><span class="w">    </span><span class="k">assign</span><span class="w"> </span><span class="n">next_state</span><span class="p">[</span><span class="mh">3</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">in</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="n">state</span><span class="p">[</span><span class="mh">2</span><span class="p">];</span>
</span><span id="__span-131-12"><a id="__codelineno-131-12" name="__codelineno-131-12"></a><a href="#__codelineno-131-12"><span class="linenos" data-linenos="12 "></span></a><span class="w">    </span><span class="k">assign</span><span class="w"> </span><span class="n">next_state</span><span class="p">[</span><span class="mh">4</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">in</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="n">state</span><span class="p">[</span><span class="mh">3</span><span class="p">];</span>
</span><span id="__span-131-13"><a id="__codelineno-131-13" name="__codelineno-131-13"></a><a href="#__codelineno-131-13"><span class="linenos" data-linenos="13 "></span></a><span class="w">    </span><span class="k">assign</span><span class="w"> </span><span class="n">next_state</span><span class="p">[</span><span class="mh">5</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">in</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="n">state</span><span class="p">[</span><span class="mh">4</span><span class="p">];</span>
</span><span id="__span-131-14"><a id="__codelineno-131-14" name="__codelineno-131-14"></a><a href="#__codelineno-131-14"><span class="linenos" data-linenos="14 "></span></a><span class="w">    </span><span class="k">assign</span><span class="w"> </span><span class="n">next_state</span><span class="p">[</span><span class="mh">6</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">in</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="n">state</span><span class="p">[</span><span class="mh">5</span><span class="p">];</span>
</span><span id="__span-131-15"><a id="__codelineno-131-15" name="__codelineno-131-15"></a><a href="#__codelineno-131-15"><span class="linenos" data-linenos="15 "></span></a><span class="w">    </span><span class="k">assign</span><span class="w"> </span><span class="n">next_state</span><span class="p">[</span><span class="mh">7</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">in</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="p">(</span><span class="n">state</span><span class="p">[</span><span class="mh">6</span><span class="p">]</span><span class="o">|</span><span class="w"> </span><span class="n">state</span><span class="p">[</span><span class="mh">7</span><span class="p">]);</span>
</span><span id="__span-131-16"><a id="__codelineno-131-16" name="__codelineno-131-16"></a><a href="#__codelineno-131-16"><span class="linenos" data-linenos="16 "></span></a><span class="w">    </span><span class="k">assign</span><span class="w"> </span><span class="n">next_state</span><span class="p">[</span><span class="mh">8</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">~</span><span class="n">in</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="n">state</span><span class="p">[</span><span class="mh">5</span><span class="p">];</span>
</span><span id="__span-131-17"><a id="__codelineno-131-17" name="__codelineno-131-17"></a><a href="#__codelineno-131-17"><span class="linenos" data-linenos="17 "></span></a><span class="w">    </span><span class="k">assign</span><span class="w"> </span><span class="n">next_state</span><span class="p">[</span><span class="mh">9</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">~</span><span class="n">in</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="n">state</span><span class="p">[</span><span class="mh">6</span><span class="p">];</span>
</span><span id="__span-131-18"><a id="__codelineno-131-18" name="__codelineno-131-18"></a><a href="#__codelineno-131-18"><span class="linenos" data-linenos="18 "></span></a><span class="w">    </span><span class="c1">//out</span>
</span><span id="__span-131-19"><a id="__codelineno-131-19" name="__codelineno-131-19"></a><a href="#__codelineno-131-19"><span class="linenos" data-linenos="19 "></span></a><span class="w">    </span><span class="k">assign</span><span class="w"> </span><span class="n">out1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">state</span><span class="p">[</span><span class="mh">8</span><span class="p">]</span><span class="o">|</span><span class="w"> </span><span class="n">state</span><span class="p">[</span><span class="mh">9</span><span class="p">];</span>
</span><span id="__span-131-20"><a id="__codelineno-131-20" name="__codelineno-131-20"></a><a href="#__codelineno-131-20"><span class="linenos" data-linenos="20 "></span></a><span class="w">    </span><span class="k">assign</span><span class="w"> </span><span class="n">out2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">state</span><span class="p">[</span><span class="mh">7</span><span class="p">]</span><span class="o">|</span><span class="w"> </span><span class="n">state</span><span class="p">[</span><span class="mh">9</span><span class="p">];</span>
</span><span id="__span-131-21"><a id="__codelineno-131-21" name="__codelineno-131-21"></a><a href="#__codelineno-131-21"><span class="linenos" data-linenos="21 "></span></a><span class="k">endmodule</span>
</span></code></pre></div></p>
<hr />
<h5 id="ps2-packet-parser">PS/2 packet parser<a class="headerlink" href="#ps2-packet-parser" title="Anchor link to this section for reference">⚓︎</a></h5>
<p>Website: <a href="https://hdlbits.01xz.net/wiki/Fsm_ps2" target="_blank">https://hdlbits.01xz.net/wiki/Fsm_ps2</a></p>
<p>這題有點edge detection的感覺，或許可以開3個reg存前3回合的輸入，不過用FSM可以更理想的省空間。
<div class="language-verilog highlight"><span class="filename">Verilog</span><pre><span></span><code><span id="__span-132-1"><a id="__codelineno-132-1" name="__codelineno-132-1"></a><a href="#__codelineno-132-1"><span class="linenos" data-linenos=" 1 "></span></a><span class="k">module</span><span class="w"> </span><span class="n">top_module</span><span class="p">(</span>
</span><span id="__span-132-2"><a id="__codelineno-132-2" name="__codelineno-132-2"></a><a href="#__codelineno-132-2"><span class="linenos" data-linenos=" 2 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">clk</span><span class="p">,</span>
</span><span id="__span-132-3"><a id="__codelineno-132-3" name="__codelineno-132-3"></a><a href="#__codelineno-132-3"><span class="linenos" data-linenos=" 3 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="p">[</span><span class="mh">7</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">in</span><span class="p">,</span>
</span><span id="__span-132-4"><a id="__codelineno-132-4" name="__codelineno-132-4"></a><a href="#__codelineno-132-4"><span class="linenos" data-linenos=" 4 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">reset</span><span class="p">,</span><span class="w">    </span><span class="c1">// Synchronous reset</span>
</span><span id="__span-132-5"><a id="__codelineno-132-5" name="__codelineno-132-5"></a><a href="#__codelineno-132-5"><span class="linenos" data-linenos=" 5 "></span></a><span class="w">    </span><span class="k">output</span><span class="w"> </span><span class="n">done</span><span class="p">);</span><span class="w"> </span><span class="c1">//</span>
</span><span id="__span-132-6"><a id="__codelineno-132-6" name="__codelineno-132-6"></a><a href="#__codelineno-132-6"><span class="linenos" data-linenos=" 6 "></span></a><span class="w">    </span><span class="c1">//2&#39;b00 -&gt; reset</span>
</span><span id="__span-132-7"><a id="__codelineno-132-7" name="__codelineno-132-7"></a><a href="#__codelineno-132-7"><span class="linenos" data-linenos=" 7 "></span></a><span class="w">    </span><span class="c1">//2&#39;b01 -&gt; get the 1xx</span>
</span><span id="__span-132-8"><a id="__codelineno-132-8" name="__codelineno-132-8"></a><a href="#__codelineno-132-8"><span class="linenos" data-linenos=" 8 "></span></a><span class="w">    </span><span class="c1">//2&#39;b11 -&gt; output done = 1</span>
</span><span id="__span-132-9"><a id="__codelineno-132-9" name="__codelineno-132-9"></a><a href="#__codelineno-132-9"><span class="linenos" data-linenos=" 9 "></span></a><span class="w">    </span><span class="kt">reg</span><span class="w"> </span><span class="p">[</span><span class="mh">1</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="n">state</span><span class="p">,</span><span class="w"> </span><span class="n">next_state</span><span class="p">;</span>
</span><span id="__span-132-10"><a id="__codelineno-132-10" name="__codelineno-132-10"></a><a href="#__codelineno-132-10"><span class="linenos" data-linenos="10 "></span></a><span class="w">    </span><span class="c1">// State transition logic (combinational)</span>
</span><span id="__span-132-11"><a id="__codelineno-132-11" name="__codelineno-132-11"></a><a href="#__codelineno-132-11"><span class="linenos" data-linenos="11 "></span></a><span class="w">    </span><span class="k">always</span><span class="p">@(</span><span class="o">*</span><span class="p">)</span><span class="k">begin</span>
</span><span id="__span-132-12"><a id="__codelineno-132-12" name="__codelineno-132-12"></a><a href="#__codelineno-132-12"><span class="linenos" data-linenos="12 "></span></a><span class="w">        </span><span class="k">case</span><span class="p">(</span><span class="n">state</span><span class="p">)</span>
</span><span id="__span-132-13"><a id="__codelineno-132-13" name="__codelineno-132-13"></a><a href="#__codelineno-132-13"><span class="linenos" data-linenos="13 "></span></a><span class="w">            </span><span class="mh">2</span><span class="mb">&#39;b00</span><span class="o">:</span><span class="w"> </span><span class="n">next_state</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">in</span><span class="p">[</span><span class="mh">3</span><span class="p">]</span><span class="o">?</span><span class="w"> </span><span class="mh">2</span><span class="mb">&#39;b01</span><span class="o">:</span><span class="w"> </span><span class="mh">2</span><span class="mb">&#39;b00</span><span class="p">;</span>
</span><span id="__span-132-14"><a id="__codelineno-132-14" name="__codelineno-132-14"></a><a href="#__codelineno-132-14"><span class="linenos" data-linenos="14 "></span></a><span class="w">            </span><span class="mh">2</span><span class="mb">&#39;b01</span><span class="o">:</span><span class="w"> </span><span class="n">next_state</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">2</span><span class="mb">&#39;b10</span><span class="p">;</span>
</span><span id="__span-132-15"><a id="__codelineno-132-15" name="__codelineno-132-15"></a><a href="#__codelineno-132-15"><span class="linenos" data-linenos="15 "></span></a><span class="w">            </span><span class="mh">2</span><span class="mb">&#39;b10</span><span class="o">:</span><span class="w"> </span><span class="n">next_state</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">2</span><span class="mb">&#39;b11</span><span class="p">;</span>
</span><span id="__span-132-16"><a id="__codelineno-132-16" name="__codelineno-132-16"></a><a href="#__codelineno-132-16"><span class="linenos" data-linenos="16 "></span></a><span class="w">            </span><span class="mh">2</span><span class="mb">&#39;b11</span><span class="o">:</span><span class="w"> </span><span class="n">next_state</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">in</span><span class="p">[</span><span class="mh">3</span><span class="p">]</span><span class="o">?</span><span class="w"> </span><span class="mh">2</span><span class="mb">&#39;b01</span><span class="o">:</span><span class="w"> </span><span class="mh">2</span><span class="mb">&#39;b00</span><span class="p">;</span>
</span><span id="__span-132-17"><a id="__codelineno-132-17" name="__codelineno-132-17"></a><a href="#__codelineno-132-17"><span class="linenos" data-linenos="17 "></span></a><span class="w">        </span><span class="k">endcase</span>
</span><span id="__span-132-18"><a id="__codelineno-132-18" name="__codelineno-132-18"></a><a href="#__codelineno-132-18"><span class="linenos" data-linenos="18 "></span></a><span class="w">    </span><span class="k">end</span>
</span><span id="__span-132-19"><a id="__codelineno-132-19" name="__codelineno-132-19"></a><a href="#__codelineno-132-19"><span class="linenos" data-linenos="19 "></span></a><span class="w">    </span><span class="c1">// State flip-flops (sequential)</span>
</span><span id="__span-132-20"><a id="__codelineno-132-20" name="__codelineno-132-20"></a><a href="#__codelineno-132-20"><span class="linenos" data-linenos="20 "></span></a><span class="w">    </span><span class="k">always</span><span class="p">@(</span><span class="k">posedge</span><span class="w"> </span><span class="n">clk</span><span class="p">)</span><span class="k">begin</span>
</span><span id="__span-132-21"><a id="__codelineno-132-21" name="__codelineno-132-21"></a><a href="#__codelineno-132-21"><span class="linenos" data-linenos="21 "></span></a><span class="w">        </span><span class="k">if</span><span class="p">(</span><span class="n">reset</span><span class="p">)</span><span class="w"> </span><span class="n">state</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="mh">2</span><span class="mb">&#39;b00</span><span class="p">;</span><span class="c1">//reset</span>
</span><span id="__span-132-22"><a id="__codelineno-132-22" name="__codelineno-132-22"></a><a href="#__codelineno-132-22"><span class="linenos" data-linenos="22 "></span></a><span class="w">        </span><span class="k">else</span><span class="w"> </span><span class="n">state</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">next_state</span><span class="p">;</span>
</span><span id="__span-132-23"><a id="__codelineno-132-23" name="__codelineno-132-23"></a><a href="#__codelineno-132-23"><span class="linenos" data-linenos="23 "></span></a><span class="w">    </span><span class="k">end</span>
</span><span id="__span-132-24"><a id="__codelineno-132-24" name="__codelineno-132-24"></a><a href="#__codelineno-132-24"><span class="linenos" data-linenos="24 "></span></a><span class="w">    </span><span class="c1">// Output logic</span>
</span><span id="__span-132-25"><a id="__codelineno-132-25" name="__codelineno-132-25"></a><a href="#__codelineno-132-25"><span class="linenos" data-linenos="25 "></span></a><span class="w">    </span><span class="k">assign</span><span class="w"> </span><span class="n">done</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">state</span><span class="p">[</span><span class="mh">1</span><span class="p">]</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="n">state</span><span class="w"> </span><span class="p">[</span><span class="mh">0</span><span class="p">];</span><span class="c1">//done when state== 2&#39;b11</span>
</span><span id="__span-132-26"><a id="__codelineno-132-26" name="__codelineno-132-26"></a><a href="#__codelineno-132-26"><span class="linenos" data-linenos="26 "></span></a><span class="k">endmodule</span>
</span></code></pre></div></p>
<hr />
<h5 id="ps2-packet-parser-and-datapath">PS/2 packet parser and datapath<a class="headerlink" href="#ps2-packet-parser-and-datapath" title="Anchor link to this section for reference">⚓︎</a></h5>
<p>Website: <a href="https://hdlbits.01xz.net/wiki/Fsm_ps2data" target="_blank">https://hdlbits.01xz.net/wiki/Fsm_ps2data</a></p>
<p>這題延續上題，就只是開個datapath來存過往資料。
<div class="language-verilog highlight"><span class="filename">Verilog</span><pre><span></span><code><span id="__span-133-1"><a id="__codelineno-133-1" name="__codelineno-133-1"></a><a href="#__codelineno-133-1"><span class="linenos" data-linenos=" 1 "></span></a><span class="k">module</span><span class="w"> </span><span class="n">top_module</span><span class="p">(</span>
</span><span id="__span-133-2"><a id="__codelineno-133-2" name="__codelineno-133-2"></a><a href="#__codelineno-133-2"><span class="linenos" data-linenos=" 2 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">clk</span><span class="p">,</span>
</span><span id="__span-133-3"><a id="__codelineno-133-3" name="__codelineno-133-3"></a><a href="#__codelineno-133-3"><span class="linenos" data-linenos=" 3 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="p">[</span><span class="mh">7</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">in</span><span class="p">,</span>
</span><span id="__span-133-4"><a id="__codelineno-133-4" name="__codelineno-133-4"></a><a href="#__codelineno-133-4"><span class="linenos" data-linenos=" 4 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">reset</span><span class="p">,</span><span class="w">    </span><span class="c1">// Synchronous reset</span>
</span><span id="__span-133-5"><a id="__codelineno-133-5" name="__codelineno-133-5"></a><a href="#__codelineno-133-5"><span class="linenos" data-linenos=" 5 "></span></a><span class="w">    </span><span class="k">output</span><span class="w"> </span><span class="p">[</span><span class="mh">23</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">out_bytes</span><span class="p">,</span>
</span><span id="__span-133-6"><a id="__codelineno-133-6" name="__codelineno-133-6"></a><a href="#__codelineno-133-6"><span class="linenos" data-linenos=" 6 "></span></a><span class="w">    </span><span class="k">output</span><span class="w"> </span><span class="n">done</span><span class="p">);</span><span class="w"> </span><span class="c1">//</span>
</span><span id="__span-133-7"><a id="__codelineno-133-7" name="__codelineno-133-7"></a><a href="#__codelineno-133-7"><span class="linenos" data-linenos=" 7 "></span></a>
</span><span id="__span-133-8"><a id="__codelineno-133-8" name="__codelineno-133-8"></a><a href="#__codelineno-133-8"><span class="linenos" data-linenos=" 8 "></span></a><span class="w">    </span><span class="c1">// FSM from fsm_ps2</span>
</span><span id="__span-133-9"><a id="__codelineno-133-9" name="__codelineno-133-9"></a><a href="#__codelineno-133-9"><span class="linenos" data-linenos=" 9 "></span></a><span class="w">    </span><span class="c1">//2&#39;b00 -&gt; reset</span>
</span><span id="__span-133-10"><a id="__codelineno-133-10" name="__codelineno-133-10"></a><a href="#__codelineno-133-10"><span class="linenos" data-linenos="10 "></span></a><span class="w">    </span><span class="c1">//2&#39;b01 -&gt; get the 1xx</span>
</span><span id="__span-133-11"><a id="__codelineno-133-11" name="__codelineno-133-11"></a><a href="#__codelineno-133-11"><span class="linenos" data-linenos="11 "></span></a><span class="w">    </span><span class="c1">//2&#39;b11 -&gt; output done = 1</span>
</span><span id="__span-133-12"><a id="__codelineno-133-12" name="__codelineno-133-12"></a><a href="#__codelineno-133-12"><span class="linenos" data-linenos="12 "></span></a><span class="w">    </span><span class="kt">reg</span><span class="w"> </span><span class="p">[</span><span class="mh">1</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="n">state</span><span class="p">,</span><span class="w"> </span><span class="n">next_state</span><span class="p">;</span>
</span><span id="__span-133-13"><a id="__codelineno-133-13" name="__codelineno-133-13"></a><a href="#__codelineno-133-13"><span class="linenos" data-linenos="13 "></span></a><span class="w">    </span><span class="c1">// State transition logic (combinational)</span>
</span><span id="__span-133-14"><a id="__codelineno-133-14" name="__codelineno-133-14"></a><a href="#__codelineno-133-14"><span class="linenos" data-linenos="14 "></span></a><span class="w">    </span><span class="k">always</span><span class="p">@(</span><span class="o">*</span><span class="p">)</span><span class="k">begin</span>
</span><span id="__span-133-15"><a id="__codelineno-133-15" name="__codelineno-133-15"></a><a href="#__codelineno-133-15"><span class="linenos" data-linenos="15 "></span></a><span class="w">        </span><span class="k">case</span><span class="p">(</span><span class="n">state</span><span class="p">)</span>
</span><span id="__span-133-16"><a id="__codelineno-133-16" name="__codelineno-133-16"></a><a href="#__codelineno-133-16"><span class="linenos" data-linenos="16 "></span></a><span class="w">            </span><span class="mh">2</span><span class="mb">&#39;b00</span><span class="o">:</span><span class="w"> </span><span class="n">next_state</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">in</span><span class="p">[</span><span class="mh">3</span><span class="p">]</span><span class="o">?</span><span class="w"> </span><span class="mh">2</span><span class="mb">&#39;b01</span><span class="o">:</span><span class="w"> </span><span class="mh">2</span><span class="mb">&#39;b00</span><span class="p">;</span>
</span><span id="__span-133-17"><a id="__codelineno-133-17" name="__codelineno-133-17"></a><a href="#__codelineno-133-17"><span class="linenos" data-linenos="17 "></span></a><span class="w">            </span><span class="mh">2</span><span class="mb">&#39;b01</span><span class="o">:</span><span class="w"> </span><span class="n">next_state</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">2</span><span class="mb">&#39;b10</span><span class="p">;</span>
</span><span id="__span-133-18"><a id="__codelineno-133-18" name="__codelineno-133-18"></a><a href="#__codelineno-133-18"><span class="linenos" data-linenos="18 "></span></a><span class="w">            </span><span class="mh">2</span><span class="mb">&#39;b10</span><span class="o">:</span><span class="w"> </span><span class="n">next_state</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">2</span><span class="mb">&#39;b11</span><span class="p">;</span>
</span><span id="__span-133-19"><a id="__codelineno-133-19" name="__codelineno-133-19"></a><a href="#__codelineno-133-19"><span class="linenos" data-linenos="19 "></span></a><span class="w">            </span><span class="mh">2</span><span class="mb">&#39;b11</span><span class="o">:</span><span class="w"> </span><span class="n">next_state</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">in</span><span class="p">[</span><span class="mh">3</span><span class="p">]</span><span class="o">?</span><span class="w"> </span><span class="mh">2</span><span class="mb">&#39;b01</span><span class="o">:</span><span class="w"> </span><span class="mh">2</span><span class="mb">&#39;b00</span><span class="p">;</span>
</span><span id="__span-133-20"><a id="__codelineno-133-20" name="__codelineno-133-20"></a><a href="#__codelineno-133-20"><span class="linenos" data-linenos="20 "></span></a><span class="w">        </span><span class="k">endcase</span>
</span><span id="__span-133-21"><a id="__codelineno-133-21" name="__codelineno-133-21"></a><a href="#__codelineno-133-21"><span class="linenos" data-linenos="21 "></span></a><span class="w">    </span><span class="k">end</span>
</span><span id="__span-133-22"><a id="__codelineno-133-22" name="__codelineno-133-22"></a><a href="#__codelineno-133-22"><span class="linenos" data-linenos="22 "></span></a><span class="w">    </span><span class="c1">// State flip-flops (sequential)</span>
</span><span id="__span-133-23"><a id="__codelineno-133-23" name="__codelineno-133-23"></a><a href="#__codelineno-133-23"><span class="linenos" data-linenos="23 "></span></a><span class="w">    </span><span class="k">always</span><span class="p">@(</span><span class="k">posedge</span><span class="w"> </span><span class="n">clk</span><span class="p">)</span><span class="k">begin</span>
</span><span id="__span-133-24"><a id="__codelineno-133-24" name="__codelineno-133-24"></a><a href="#__codelineno-133-24"><span class="linenos" data-linenos="24 "></span></a><span class="w">        </span><span class="k">if</span><span class="p">(</span><span class="n">reset</span><span class="p">)</span><span class="w"> </span><span class="n">state</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="mh">2</span><span class="mb">&#39;b00</span><span class="p">;</span><span class="c1">//reset</span>
</span><span id="__span-133-25"><a id="__codelineno-133-25" name="__codelineno-133-25"></a><a href="#__codelineno-133-25"><span class="linenos" data-linenos="25 "></span></a><span class="w">        </span><span class="k">else</span><span class="w"> </span><span class="n">state</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">next_state</span><span class="p">;</span>
</span><span id="__span-133-26"><a id="__codelineno-133-26" name="__codelineno-133-26"></a><a href="#__codelineno-133-26"><span class="linenos" data-linenos="26 "></span></a><span class="w">    </span><span class="k">end</span>
</span><span id="__span-133-27"><a id="__codelineno-133-27" name="__codelineno-133-27"></a><a href="#__codelineno-133-27"><span class="linenos" data-linenos="27 "></span></a><span class="w">    </span><span class="c1">// Output logic</span>
</span><span id="__span-133-28"><a id="__codelineno-133-28" name="__codelineno-133-28"></a><a href="#__codelineno-133-28"><span class="linenos" data-linenos="28 "></span></a><span class="w">    </span><span class="k">assign</span><span class="w"> </span><span class="n">done</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">state</span><span class="p">[</span><span class="mh">1</span><span class="p">]</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="n">state</span><span class="w"> </span><span class="p">[</span><span class="mh">0</span><span class="p">];</span><span class="c1">//done when state== 2&#39;b11</span>
</span><span id="__span-133-29"><a id="__codelineno-133-29" name="__codelineno-133-29"></a><a href="#__codelineno-133-29"><span class="linenos" data-linenos="29 "></span></a>
</span><span id="__span-133-30"><a id="__codelineno-133-30" name="__codelineno-133-30"></a><a href="#__codelineno-133-30"><span class="linenos" data-linenos="30 "></span></a><span class="w">    </span><span class="c1">// New: Datapath to store incoming bytes.</span>
</span><span id="__span-133-31"><a id="__codelineno-133-31" name="__codelineno-133-31"></a><a href="#__codelineno-133-31"><span class="linenos" data-linenos="31 "></span></a><span class="w">    </span><span class="kt">reg</span><span class="w"> </span><span class="p">[</span><span class="mh">7</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">in1</span><span class="p">,</span><span class="w"> </span><span class="n">in2</span><span class="p">,</span><span class="w"> </span><span class="n">in3</span><span class="p">;</span>
</span><span id="__span-133-32"><a id="__codelineno-133-32" name="__codelineno-133-32"></a><a href="#__codelineno-133-32"><span class="linenos" data-linenos="32 "></span></a><span class="w">    </span><span class="k">always</span><span class="p">@(</span><span class="k">posedge</span><span class="w"> </span><span class="n">clk</span><span class="p">)</span><span class="k">begin</span>
</span><span id="__span-133-33"><a id="__codelineno-133-33" name="__codelineno-133-33"></a><a href="#__codelineno-133-33"><span class="linenos" data-linenos="33 "></span></a><span class="w">        </span><span class="n">in1</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">in</span><span class="p">;</span>
</span><span id="__span-133-34"><a id="__codelineno-133-34" name="__codelineno-133-34"></a><a href="#__codelineno-133-34"><span class="linenos" data-linenos="34 "></span></a><span class="w">        </span><span class="n">in2</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">in1</span><span class="p">;</span>
</span><span id="__span-133-35"><a id="__codelineno-133-35" name="__codelineno-133-35"></a><a href="#__codelineno-133-35"><span class="linenos" data-linenos="35 "></span></a><span class="w">        </span><span class="n">in3</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">in2</span><span class="p">;</span>
</span><span id="__span-133-36"><a id="__codelineno-133-36" name="__codelineno-133-36"></a><a href="#__codelineno-133-36"><span class="linenos" data-linenos="36 "></span></a><span class="w">    </span><span class="k">end</span>
</span><span id="__span-133-37"><a id="__codelineno-133-37" name="__codelineno-133-37"></a><a href="#__codelineno-133-37"><span class="linenos" data-linenos="37 "></span></a>
</span><span id="__span-133-38"><a id="__codelineno-133-38" name="__codelineno-133-38"></a><a href="#__codelineno-133-38"><span class="linenos" data-linenos="38 "></span></a><span class="w">    </span><span class="k">assign</span><span class="w"> </span><span class="n">out_bytes</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">done</span><span class="o">?</span><span class="w"> </span><span class="p">{</span><span class="n">in3</span><span class="p">,</span><span class="w"> </span><span class="n">in2</span><span class="p">,</span><span class="w"> </span><span class="n">in1</span><span class="p">}</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="mh">24</span><span class="p">{</span><span class="mh">1</span><span class="mb">&#39;b0</span><span class="p">}};</span>
</span><span id="__span-133-39"><a id="__codelineno-133-39" name="__codelineno-133-39"></a><a href="#__codelineno-133-39"><span class="linenos" data-linenos="39 "></span></a>
</span><span id="__span-133-40"><a id="__codelineno-133-40" name="__codelineno-133-40"></a><a href="#__codelineno-133-40"><span class="linenos" data-linenos="40 "></span></a><span class="k">endmodule</span>
</span></code></pre></div></p>
<hr />
<h5 id="serial-receiver">Serial receiver<a class="headerlink" href="#serial-receiver" title="Anchor link to this section for reference">⚓︎</a></h5>
<p>Website: <a href="https://hdlbits.01xz.net/wiki/Fsm_serial" target="_blank">https://hdlbits.01xz.net/wiki/Fsm_serial</a></p>
<p>這題單純考怎麼將應用題轉成FSM。
<div class="language-verilog highlight"><span class="filename">Verilog</span><pre><span></span><code><span id="__span-134-1"><a id="__codelineno-134-1" name="__codelineno-134-1"></a><a href="#__codelineno-134-1"><span class="linenos" data-linenos=" 1 "></span></a><span class="k">module</span><span class="w"> </span><span class="n">top_module</span><span class="p">(</span>
</span><span id="__span-134-2"><a id="__codelineno-134-2" name="__codelineno-134-2"></a><a href="#__codelineno-134-2"><span class="linenos" data-linenos=" 2 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">clk</span><span class="p">,</span>
</span><span id="__span-134-3"><a id="__codelineno-134-3" name="__codelineno-134-3"></a><a href="#__codelineno-134-3"><span class="linenos" data-linenos=" 3 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">in</span><span class="p">,</span>
</span><span id="__span-134-4"><a id="__codelineno-134-4" name="__codelineno-134-4"></a><a href="#__codelineno-134-4"><span class="linenos" data-linenos=" 4 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">reset</span><span class="p">,</span><span class="w">    </span><span class="c1">// Synchronous reset</span>
</span><span id="__span-134-5"><a id="__codelineno-134-5" name="__codelineno-134-5"></a><a href="#__codelineno-134-5"><span class="linenos" data-linenos=" 5 "></span></a><span class="w">    </span><span class="k">output</span><span class="w"> </span><span class="n">done</span>
</span><span id="__span-134-6"><a id="__codelineno-134-6" name="__codelineno-134-6"></a><a href="#__codelineno-134-6"><span class="linenos" data-linenos=" 6 "></span></a><span class="p">);</span><span class="w"> </span>
</span><span id="__span-134-7"><a id="__codelineno-134-7" name="__codelineno-134-7"></a><a href="#__codelineno-134-7"><span class="linenos" data-linenos=" 7 "></span></a><span class="w">    </span><span class="c1">//data*8 + start + stop + idle + ??? = 12state</span>
</span><span id="__span-134-8"><a id="__codelineno-134-8" name="__codelineno-134-8"></a><a href="#__codelineno-134-8"><span class="linenos" data-linenos=" 8 "></span></a><span class="w">    </span><span class="kt">reg</span><span class="p">[</span><span class="mh">3</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">state</span><span class="p">,</span><span class="w"> </span><span class="n">next_state</span><span class="p">;</span>
</span><span id="__span-134-9"><a id="__codelineno-134-9" name="__codelineno-134-9"></a><a href="#__codelineno-134-9"><span class="linenos" data-linenos=" 9 "></span></a><span class="w">    </span><span class="k">always</span><span class="p">@(</span><span class="o">*</span><span class="p">)</span><span class="k">begin</span>
</span><span id="__span-134-10"><a id="__codelineno-134-10" name="__codelineno-134-10"></a><a href="#__codelineno-134-10"><span class="linenos" data-linenos="10 "></span></a><span class="w">        </span><span class="k">case</span><span class="p">(</span><span class="n">state</span><span class="p">)</span>
</span><span id="__span-134-11"><a id="__codelineno-134-11" name="__codelineno-134-11"></a><a href="#__codelineno-134-11"><span class="linenos" data-linenos="11 "></span></a><span class="w">            </span><span class="mh">4</span><span class="mi">&#39;d0</span><span class="o">:</span><span class="w"> </span><span class="n">next_state</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">in</span><span class="o">?</span><span class="w"> </span><span class="mh">4</span><span class="mi">&#39;d0</span><span class="o">:</span><span class="w"> </span><span class="mh">4</span><span class="mi">&#39;d1</span><span class="p">;</span><span class="c1">//idle</span>
</span><span id="__span-134-12"><a id="__codelineno-134-12" name="__codelineno-134-12"></a><a href="#__codelineno-134-12"><span class="linenos" data-linenos="12 "></span></a><span class="w">            </span><span class="mh">4</span><span class="mi">&#39;d1</span><span class="o">:</span><span class="w"> </span><span class="n">next_state</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">4</span><span class="mi">&#39;d2</span><span class="p">;</span><span class="c1">//start</span>
</span><span id="__span-134-13"><a id="__codelineno-134-13" name="__codelineno-134-13"></a><a href="#__codelineno-134-13"><span class="linenos" data-linenos="13 "></span></a><span class="w">            </span><span class="mh">4</span><span class="mi">&#39;d2</span><span class="o">:</span><span class="w"> </span><span class="n">next_state</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">4</span><span class="mi">&#39;d3</span><span class="p">;</span><span class="c1">//data1</span>
</span><span id="__span-134-14"><a id="__codelineno-134-14" name="__codelineno-134-14"></a><a href="#__codelineno-134-14"><span class="linenos" data-linenos="14 "></span></a><span class="w">            </span><span class="mh">4</span><span class="mi">&#39;d3</span><span class="o">:</span><span class="w"> </span><span class="n">next_state</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">4</span><span class="mi">&#39;d4</span><span class="p">;</span><span class="c1">//data2</span>
</span><span id="__span-134-15"><a id="__codelineno-134-15" name="__codelineno-134-15"></a><a href="#__codelineno-134-15"><span class="linenos" data-linenos="15 "></span></a><span class="w">            </span><span class="mh">4</span><span class="mi">&#39;d4</span><span class="o">:</span><span class="w"> </span><span class="n">next_state</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">4</span><span class="mi">&#39;d5</span><span class="p">;</span><span class="c1">//data3</span>
</span><span id="__span-134-16"><a id="__codelineno-134-16" name="__codelineno-134-16"></a><a href="#__codelineno-134-16"><span class="linenos" data-linenos="16 "></span></a><span class="w">            </span><span class="mh">4</span><span class="mi">&#39;d5</span><span class="o">:</span><span class="w"> </span><span class="n">next_state</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">4</span><span class="mi">&#39;d6</span><span class="p">;</span><span class="c1">//data4</span>
</span><span id="__span-134-17"><a id="__codelineno-134-17" name="__codelineno-134-17"></a><a href="#__codelineno-134-17"><span class="linenos" data-linenos="17 "></span></a><span class="w">            </span><span class="mh">4</span><span class="mi">&#39;d6</span><span class="o">:</span><span class="w"> </span><span class="n">next_state</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">4</span><span class="mi">&#39;d7</span><span class="p">;</span><span class="c1">//data5</span>
</span><span id="__span-134-18"><a id="__codelineno-134-18" name="__codelineno-134-18"></a><a href="#__codelineno-134-18"><span class="linenos" data-linenos="18 "></span></a><span class="w">            </span><span class="mh">4</span><span class="mi">&#39;d7</span><span class="o">:</span><span class="w"> </span><span class="n">next_state</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">4</span><span class="mi">&#39;d8</span><span class="p">;</span><span class="c1">//data6</span>
</span><span id="__span-134-19"><a id="__codelineno-134-19" name="__codelineno-134-19"></a><a href="#__codelineno-134-19"><span class="linenos" data-linenos="19 "></span></a><span class="w">            </span><span class="mh">4</span><span class="mi">&#39;d8</span><span class="o">:</span><span class="w"> </span><span class="n">next_state</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">4</span><span class="mi">&#39;d9</span><span class="p">;</span><span class="c1">//data7</span>
</span><span id="__span-134-20"><a id="__codelineno-134-20" name="__codelineno-134-20"></a><a href="#__codelineno-134-20"><span class="linenos" data-linenos="20 "></span></a><span class="w">            </span><span class="mh">4</span><span class="mi">&#39;d9</span><span class="o">:</span><span class="w"> </span><span class="n">next_state</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">in</span><span class="o">?</span><span class="w"> </span><span class="mh">4</span><span class="mi">&#39;d10</span><span class="o">:</span><span class="w"> </span><span class="mh">4</span><span class="mi">&#39;d11</span><span class="p">;</span><span class="c1">//data8</span>
</span><span id="__span-134-21"><a id="__codelineno-134-21" name="__codelineno-134-21"></a><a href="#__codelineno-134-21"><span class="linenos" data-linenos="21 "></span></a><span class="w">            </span><span class="mh">4</span><span class="mi">&#39;d10</span><span class="o">:</span><span class="w"> </span><span class="n">next_state</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">in</span><span class="o">?</span><span class="w"> </span><span class="mh">4</span><span class="mi">&#39;d0</span><span class="o">:</span><span class="w"> </span><span class="mh">4</span><span class="mi">&#39;d1</span><span class="p">;</span><span class="c1">//stop</span>
</span><span id="__span-134-22"><a id="__codelineno-134-22" name="__codelineno-134-22"></a><a href="#__codelineno-134-22"><span class="linenos" data-linenos="22 "></span></a><span class="w">            </span><span class="mh">4</span><span class="mi">&#39;d11</span><span class="o">:</span><span class="w"> </span><span class="n">next_state</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">in</span><span class="o">?</span><span class="w"> </span><span class="mh">4</span><span class="mi">&#39;d0</span><span class="o">:</span><span class="w"> </span><span class="mh">4</span><span class="mi">&#39;d11</span><span class="p">;</span><span class="c1">//???</span>
</span><span id="__span-134-23"><a id="__codelineno-134-23" name="__codelineno-134-23"></a><a href="#__codelineno-134-23"><span class="linenos" data-linenos="23 "></span></a><span class="w">            </span><span class="k">default</span><span class="o">:</span><span class="w"> </span><span class="n">next_state</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">4</span><span class="p">&#39;</span><span class="n">bxxxx</span><span class="p">;</span>
</span><span id="__span-134-24"><a id="__codelineno-134-24" name="__codelineno-134-24"></a><a href="#__codelineno-134-24"><span class="linenos" data-linenos="24 "></span></a><span class="w">        </span><span class="k">endcase</span>
</span><span id="__span-134-25"><a id="__codelineno-134-25" name="__codelineno-134-25"></a><a href="#__codelineno-134-25"><span class="linenos" data-linenos="25 "></span></a><span class="w">    </span><span class="k">end</span>
</span><span id="__span-134-26"><a id="__codelineno-134-26" name="__codelineno-134-26"></a><a href="#__codelineno-134-26"><span class="linenos" data-linenos="26 "></span></a>
</span><span id="__span-134-27"><a id="__codelineno-134-27" name="__codelineno-134-27"></a><a href="#__codelineno-134-27"><span class="linenos" data-linenos="27 "></span></a><span class="w">    </span><span class="k">assign</span><span class="w"> </span><span class="n">done</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">state</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mh">4</span><span class="mi">&#39;d10</span><span class="p">);</span>
</span><span id="__span-134-28"><a id="__codelineno-134-28" name="__codelineno-134-28"></a><a href="#__codelineno-134-28"><span class="linenos" data-linenos="28 "></span></a>
</span><span id="__span-134-29"><a id="__codelineno-134-29" name="__codelineno-134-29"></a><a href="#__codelineno-134-29"><span class="linenos" data-linenos="29 "></span></a><span class="w">    </span><span class="k">always</span><span class="p">@(</span><span class="k">posedge</span><span class="w"> </span><span class="n">clk</span><span class="p">)</span><span class="k">begin</span>
</span><span id="__span-134-30"><a id="__codelineno-134-30" name="__codelineno-134-30"></a><a href="#__codelineno-134-30"><span class="linenos" data-linenos="30 "></span></a><span class="w">        </span><span class="k">if</span><span class="p">(</span><span class="n">reset</span><span class="p">)</span><span class="w"> </span><span class="n">state</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="mh">4</span><span class="mb">&#39;b0000</span><span class="p">;</span>
</span><span id="__span-134-31"><a id="__codelineno-134-31" name="__codelineno-134-31"></a><a href="#__codelineno-134-31"><span class="linenos" data-linenos="31 "></span></a><span class="w">        </span><span class="k">else</span><span class="w"> </span><span class="n">state</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">next_state</span><span class="p">;</span>
</span><span id="__span-134-32"><a id="__codelineno-134-32" name="__codelineno-134-32"></a><a href="#__codelineno-134-32"><span class="linenos" data-linenos="32 "></span></a><span class="w">    </span><span class="k">end</span>
</span><span id="__span-134-33"><a id="__codelineno-134-33" name="__codelineno-134-33"></a><a href="#__codelineno-134-33"><span class="linenos" data-linenos="33 "></span></a><span class="k">endmodule</span>
</span></code></pre></div></p>
<hr />
<h5 id="serial-receiver-and-datapath">Serial receiver and datapath<a class="headerlink" href="#serial-receiver-and-datapath" title="Anchor link to this section for reference">⚓︎</a></h5>
<p>Website: <a href="https://hdlbits.01xz.net/wiki/Fsm_serialdata" target="_blank">https://hdlbits.01xz.net/wiki/Fsm_serialdata</a></p>
<p>這題接續上題，多加一個datapath存資料。
<div class="language-verilog highlight"><span class="filename">Verilog</span><pre><span></span><code><span id="__span-135-1"><a id="__codelineno-135-1" name="__codelineno-135-1"></a><a href="#__codelineno-135-1"><span class="linenos" data-linenos=" 1 "></span></a><span class="k">module</span><span class="w"> </span><span class="n">top_module</span><span class="p">(</span>
</span><span id="__span-135-2"><a id="__codelineno-135-2" name="__codelineno-135-2"></a><a href="#__codelineno-135-2"><span class="linenos" data-linenos=" 2 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">clk</span><span class="p">,</span>
</span><span id="__span-135-3"><a id="__codelineno-135-3" name="__codelineno-135-3"></a><a href="#__codelineno-135-3"><span class="linenos" data-linenos=" 3 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">in</span><span class="p">,</span>
</span><span id="__span-135-4"><a id="__codelineno-135-4" name="__codelineno-135-4"></a><a href="#__codelineno-135-4"><span class="linenos" data-linenos=" 4 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">reset</span><span class="p">,</span><span class="w">    </span><span class="c1">// Synchronous reset</span>
</span><span id="__span-135-5"><a id="__codelineno-135-5" name="__codelineno-135-5"></a><a href="#__codelineno-135-5"><span class="linenos" data-linenos=" 5 "></span></a><span class="w">    </span><span class="k">output</span><span class="w"> </span><span class="p">[</span><span class="mh">7</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">out_byte</span><span class="p">,</span>
</span><span id="__span-135-6"><a id="__codelineno-135-6" name="__codelineno-135-6"></a><a href="#__codelineno-135-6"><span class="linenos" data-linenos=" 6 "></span></a><span class="w">    </span><span class="k">output</span><span class="w"> </span><span class="n">done</span>
</span><span id="__span-135-7"><a id="__codelineno-135-7" name="__codelineno-135-7"></a><a href="#__codelineno-135-7"><span class="linenos" data-linenos=" 7 "></span></a><span class="p">);</span><span class="w"> </span><span class="c1">//</span>
</span><span id="__span-135-8"><a id="__codelineno-135-8" name="__codelineno-135-8"></a><a href="#__codelineno-135-8"><span class="linenos" data-linenos=" 8 "></span></a>
</span><span id="__span-135-9"><a id="__codelineno-135-9" name="__codelineno-135-9"></a><a href="#__codelineno-135-9"><span class="linenos" data-linenos=" 9 "></span></a><span class="w">    </span><span class="c1">// Use FSM from Fsm_serial</span>
</span><span id="__span-135-10"><a id="__codelineno-135-10" name="__codelineno-135-10"></a><a href="#__codelineno-135-10"><span class="linenos" data-linenos="10 "></span></a><span class="w">    </span><span class="c1">//data*8 + start + stop + idle + ??? = 12state</span>
</span><span id="__span-135-11"><a id="__codelineno-135-11" name="__codelineno-135-11"></a><a href="#__codelineno-135-11"><span class="linenos" data-linenos="11 "></span></a><span class="w">    </span><span class="kt">reg</span><span class="p">[</span><span class="mh">3</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">state</span><span class="p">,</span><span class="w"> </span><span class="n">next_state</span><span class="p">;</span>
</span><span id="__span-135-12"><a id="__codelineno-135-12" name="__codelineno-135-12"></a><a href="#__codelineno-135-12"><span class="linenos" data-linenos="12 "></span></a><span class="w">    </span><span class="k">always</span><span class="p">@(</span><span class="o">*</span><span class="p">)</span><span class="k">begin</span>
</span><span id="__span-135-13"><a id="__codelineno-135-13" name="__codelineno-135-13"></a><a href="#__codelineno-135-13"><span class="linenos" data-linenos="13 "></span></a><span class="w">        </span><span class="k">case</span><span class="p">(</span><span class="n">state</span><span class="p">)</span>
</span><span id="__span-135-14"><a id="__codelineno-135-14" name="__codelineno-135-14"></a><a href="#__codelineno-135-14"><span class="linenos" data-linenos="14 "></span></a><span class="w">            </span><span class="mh">4</span><span class="mi">&#39;d0</span><span class="o">:</span><span class="w"> </span><span class="n">next_state</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">in</span><span class="o">?</span><span class="w"> </span><span class="mh">4</span><span class="mi">&#39;d0</span><span class="o">:</span><span class="w"> </span><span class="mh">4</span><span class="mi">&#39;d1</span><span class="p">;</span><span class="c1">//idle</span>
</span><span id="__span-135-15"><a id="__codelineno-135-15" name="__codelineno-135-15"></a><a href="#__codelineno-135-15"><span class="linenos" data-linenos="15 "></span></a><span class="w">            </span><span class="mh">4</span><span class="mi">&#39;d1</span><span class="o">:</span><span class="w"> </span><span class="n">next_state</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">4</span><span class="mi">&#39;d2</span><span class="p">;</span><span class="c1">//start</span>
</span><span id="__span-135-16"><a id="__codelineno-135-16" name="__codelineno-135-16"></a><a href="#__codelineno-135-16"><span class="linenos" data-linenos="16 "></span></a><span class="w">            </span><span class="mh">4</span><span class="mi">&#39;d2</span><span class="o">:</span><span class="w"> </span><span class="n">next_state</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">4</span><span class="mi">&#39;d3</span><span class="p">;</span><span class="c1">//data1</span>
</span><span id="__span-135-17"><a id="__codelineno-135-17" name="__codelineno-135-17"></a><a href="#__codelineno-135-17"><span class="linenos" data-linenos="17 "></span></a><span class="w">            </span><span class="mh">4</span><span class="mi">&#39;d3</span><span class="o">:</span><span class="w"> </span><span class="n">next_state</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">4</span><span class="mi">&#39;d4</span><span class="p">;</span><span class="c1">//data2</span>
</span><span id="__span-135-18"><a id="__codelineno-135-18" name="__codelineno-135-18"></a><a href="#__codelineno-135-18"><span class="linenos" data-linenos="18 "></span></a><span class="w">            </span><span class="mh">4</span><span class="mi">&#39;d4</span><span class="o">:</span><span class="w"> </span><span class="n">next_state</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">4</span><span class="mi">&#39;d5</span><span class="p">;</span><span class="c1">//data3</span>
</span><span id="__span-135-19"><a id="__codelineno-135-19" name="__codelineno-135-19"></a><a href="#__codelineno-135-19"><span class="linenos" data-linenos="19 "></span></a><span class="w">            </span><span class="mh">4</span><span class="mi">&#39;d5</span><span class="o">:</span><span class="w"> </span><span class="n">next_state</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">4</span><span class="mi">&#39;d6</span><span class="p">;</span><span class="c1">//data4</span>
</span><span id="__span-135-20"><a id="__codelineno-135-20" name="__codelineno-135-20"></a><a href="#__codelineno-135-20"><span class="linenos" data-linenos="20 "></span></a><span class="w">            </span><span class="mh">4</span><span class="mi">&#39;d6</span><span class="o">:</span><span class="w"> </span><span class="n">next_state</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">4</span><span class="mi">&#39;d7</span><span class="p">;</span><span class="c1">//data5</span>
</span><span id="__span-135-21"><a id="__codelineno-135-21" name="__codelineno-135-21"></a><a href="#__codelineno-135-21"><span class="linenos" data-linenos="21 "></span></a><span class="w">            </span><span class="mh">4</span><span class="mi">&#39;d7</span><span class="o">:</span><span class="w"> </span><span class="n">next_state</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">4</span><span class="mi">&#39;d8</span><span class="p">;</span><span class="c1">//data6</span>
</span><span id="__span-135-22"><a id="__codelineno-135-22" name="__codelineno-135-22"></a><a href="#__codelineno-135-22"><span class="linenos" data-linenos="22 "></span></a><span class="w">            </span><span class="mh">4</span><span class="mi">&#39;d8</span><span class="o">:</span><span class="w"> </span><span class="n">next_state</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">4</span><span class="mi">&#39;d9</span><span class="p">;</span><span class="c1">//data7</span>
</span><span id="__span-135-23"><a id="__codelineno-135-23" name="__codelineno-135-23"></a><a href="#__codelineno-135-23"><span class="linenos" data-linenos="23 "></span></a><span class="w">            </span><span class="mh">4</span><span class="mi">&#39;d9</span><span class="o">:</span><span class="w"> </span><span class="n">next_state</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">in</span><span class="o">?</span><span class="w"> </span><span class="mh">4</span><span class="mi">&#39;d10</span><span class="o">:</span><span class="w"> </span><span class="mh">4</span><span class="mi">&#39;d11</span><span class="p">;</span><span class="c1">//data8</span>
</span><span id="__span-135-24"><a id="__codelineno-135-24" name="__codelineno-135-24"></a><a href="#__codelineno-135-24"><span class="linenos" data-linenos="24 "></span></a><span class="w">            </span><span class="mh">4</span><span class="mi">&#39;d10</span><span class="o">:</span><span class="w"> </span><span class="n">next_state</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">in</span><span class="o">?</span><span class="w"> </span><span class="mh">4</span><span class="mi">&#39;d0</span><span class="o">:</span><span class="w"> </span><span class="mh">4</span><span class="mi">&#39;d1</span><span class="p">;</span><span class="c1">//stop</span>
</span><span id="__span-135-25"><a id="__codelineno-135-25" name="__codelineno-135-25"></a><a href="#__codelineno-135-25"><span class="linenos" data-linenos="25 "></span></a><span class="w">            </span><span class="mh">4</span><span class="mi">&#39;d11</span><span class="o">:</span><span class="w"> </span><span class="n">next_state</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">in</span><span class="o">?</span><span class="w"> </span><span class="mh">4</span><span class="mi">&#39;d0</span><span class="o">:</span><span class="w"> </span><span class="mh">4</span><span class="mi">&#39;d11</span><span class="p">;</span><span class="c1">//???</span>
</span><span id="__span-135-26"><a id="__codelineno-135-26" name="__codelineno-135-26"></a><a href="#__codelineno-135-26"><span class="linenos" data-linenos="26 "></span></a><span class="w">            </span><span class="k">default</span><span class="o">:</span><span class="w"> </span><span class="n">next_state</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">4</span><span class="p">&#39;</span><span class="n">bxxxx</span><span class="p">;</span>
</span><span id="__span-135-27"><a id="__codelineno-135-27" name="__codelineno-135-27"></a><a href="#__codelineno-135-27"><span class="linenos" data-linenos="27 "></span></a><span class="w">        </span><span class="k">endcase</span>
</span><span id="__span-135-28"><a id="__codelineno-135-28" name="__codelineno-135-28"></a><a href="#__codelineno-135-28"><span class="linenos" data-linenos="28 "></span></a><span class="w">    </span><span class="k">end</span>
</span><span id="__span-135-29"><a id="__codelineno-135-29" name="__codelineno-135-29"></a><a href="#__codelineno-135-29"><span class="linenos" data-linenos="29 "></span></a>
</span><span id="__span-135-30"><a id="__codelineno-135-30" name="__codelineno-135-30"></a><a href="#__codelineno-135-30"><span class="linenos" data-linenos="30 "></span></a><span class="w">    </span><span class="k">assign</span><span class="w"> </span><span class="n">done</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">state</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mh">4</span><span class="mi">&#39;d10</span><span class="p">);</span>
</span><span id="__span-135-31"><a id="__codelineno-135-31" name="__codelineno-135-31"></a><a href="#__codelineno-135-31"><span class="linenos" data-linenos="31 "></span></a>
</span><span id="__span-135-32"><a id="__codelineno-135-32" name="__codelineno-135-32"></a><a href="#__codelineno-135-32"><span class="linenos" data-linenos="32 "></span></a><span class="w">    </span><span class="k">always</span><span class="p">@(</span><span class="k">posedge</span><span class="w"> </span><span class="n">clk</span><span class="p">)</span><span class="k">begin</span>
</span><span id="__span-135-33"><a id="__codelineno-135-33" name="__codelineno-135-33"></a><a href="#__codelineno-135-33"><span class="linenos" data-linenos="33 "></span></a><span class="w">        </span><span class="k">if</span><span class="p">(</span><span class="n">reset</span><span class="p">)</span><span class="w"> </span><span class="n">state</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="mh">4</span><span class="mb">&#39;b0000</span><span class="p">;</span>
</span><span id="__span-135-34"><a id="__codelineno-135-34" name="__codelineno-135-34"></a><a href="#__codelineno-135-34"><span class="linenos" data-linenos="34 "></span></a><span class="w">        </span><span class="k">else</span><span class="w"> </span><span class="n">state</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">next_state</span><span class="p">;</span>
</span><span id="__span-135-35"><a id="__codelineno-135-35" name="__codelineno-135-35"></a><a href="#__codelineno-135-35"><span class="linenos" data-linenos="35 "></span></a><span class="w">    </span><span class="k">end</span>
</span><span id="__span-135-36"><a id="__codelineno-135-36" name="__codelineno-135-36"></a><a href="#__codelineno-135-36"><span class="linenos" data-linenos="36 "></span></a><span class="w">    </span><span class="c1">// New: Datapath to latch input bits.</span>
</span><span id="__span-135-37"><a id="__codelineno-135-37" name="__codelineno-135-37"></a><a href="#__codelineno-135-37"><span class="linenos" data-linenos="37 "></span></a><span class="w">    </span><span class="kt">reg</span><span class="w"> </span><span class="p">[</span><span class="mh">8</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">data</span><span class="p">;</span>
</span><span id="__span-135-38"><a id="__codelineno-135-38" name="__codelineno-135-38"></a><a href="#__codelineno-135-38"><span class="linenos" data-linenos="38 "></span></a><span class="w">    </span><span class="k">always</span><span class="p">@(</span><span class="k">posedge</span><span class="w"> </span><span class="n">clk</span><span class="p">)</span><span class="k">begin</span>
</span><span id="__span-135-39"><a id="__codelineno-135-39" name="__codelineno-135-39"></a><a href="#__codelineno-135-39"><span class="linenos" data-linenos="39 "></span></a><span class="w">        </span><span class="n">data</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="p">{</span><span class="n">in</span><span class="p">,</span><span class="n">data</span><span class="p">[</span><span class="mh">8</span><span class="o">:</span><span class="mh">1</span><span class="p">]};</span>
</span><span id="__span-135-40"><a id="__codelineno-135-40" name="__codelineno-135-40"></a><a href="#__codelineno-135-40"><span class="linenos" data-linenos="40 "></span></a><span class="w">    </span><span class="k">end</span>
</span><span id="__span-135-41"><a id="__codelineno-135-41" name="__codelineno-135-41"></a><a href="#__codelineno-135-41"><span class="linenos" data-linenos="41 "></span></a><span class="w">    </span><span class="k">assign</span><span class="w"> </span><span class="n">out_byte</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">data</span><span class="p">[</span><span class="mh">7</span><span class="o">:</span><span class="mh">0</span><span class="p">];</span>
</span><span id="__span-135-42"><a id="__codelineno-135-42" name="__codelineno-135-42"></a><a href="#__codelineno-135-42"><span class="linenos" data-linenos="42 "></span></a><span class="k">endmodule</span>
</span></code></pre></div></p>
<hr />
<h5 id="serial-receiver-with-parity-checking">Serial receiver with parity checking<a class="headerlink" href="#serial-receiver-with-parity-checking" title="Anchor link to this section for reference">⚓︎</a></h5>
<p>Website: <a href="https://hdlbits.01xz.net/wiki/Fsm_serialdp" target="_blank">https://hdlbits.01xz.net/wiki/Fsm_serialdp</a></p>
<p>這題接續上題，data input從8 bit變9 bit，所以FSM要改。然後有個細節要注意，就是parity的reset等到start階段時也要reset。至於說如何判別<code>is_start</code>，這裡得用<code>assign is_start = (next_state == 4'd1);</code>，不能用<code>assign is_start = (state == 4'd1);</code>的原因在於，會晚一個cycle。所以把握一個原則，sequential logic中若用到狀態，記得要寫next_state。
<div class="language-verilog highlight"><span class="filename">Verilog</span><pre><span></span><code><span id="__span-136-1"><a id="__codelineno-136-1" name="__codelineno-136-1"></a><a href="#__codelineno-136-1"><span class="linenos" data-linenos=" 1 "></span></a><span class="k">module</span><span class="w"> </span><span class="n">top_module</span><span class="p">(</span>
</span><span id="__span-136-2"><a id="__codelineno-136-2" name="__codelineno-136-2"></a><a href="#__codelineno-136-2"><span class="linenos" data-linenos=" 2 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">clk</span><span class="p">,</span>
</span><span id="__span-136-3"><a id="__codelineno-136-3" name="__codelineno-136-3"></a><a href="#__codelineno-136-3"><span class="linenos" data-linenos=" 3 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">in</span><span class="p">,</span>
</span><span id="__span-136-4"><a id="__codelineno-136-4" name="__codelineno-136-4"></a><a href="#__codelineno-136-4"><span class="linenos" data-linenos=" 4 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">reset</span><span class="p">,</span><span class="w">    </span><span class="c1">// Synchronous reset</span>
</span><span id="__span-136-5"><a id="__codelineno-136-5" name="__codelineno-136-5"></a><a href="#__codelineno-136-5"><span class="linenos" data-linenos=" 5 "></span></a><span class="w">    </span><span class="k">output</span><span class="w"> </span><span class="p">[</span><span class="mh">7</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">out_byte</span><span class="p">,</span>
</span><span id="__span-136-6"><a id="__codelineno-136-6" name="__codelineno-136-6"></a><a href="#__codelineno-136-6"><span class="linenos" data-linenos=" 6 "></span></a><span class="w">    </span><span class="k">output</span><span class="w"> </span><span class="n">done</span>
</span><span id="__span-136-7"><a id="__codelineno-136-7" name="__codelineno-136-7"></a><a href="#__codelineno-136-7"><span class="linenos" data-linenos=" 7 "></span></a><span class="p">);</span><span class="w"> </span><span class="c1">//</span>
</span><span id="__span-136-8"><a id="__codelineno-136-8" name="__codelineno-136-8"></a><a href="#__codelineno-136-8"><span class="linenos" data-linenos=" 8 "></span></a>
</span><span id="__span-136-9"><a id="__codelineno-136-9" name="__codelineno-136-9"></a><a href="#__codelineno-136-9"><span class="linenos" data-linenos=" 9 "></span></a><span class="w">    </span><span class="c1">// Modify FSM and datapath from Fsm_serialdata</span>
</span><span id="__span-136-10"><a id="__codelineno-136-10" name="__codelineno-136-10"></a><a href="#__codelineno-136-10"><span class="linenos" data-linenos="10 "></span></a><span class="w">    </span><span class="c1">// Use FSM from Fsm_serial</span>
</span><span id="__span-136-11"><a id="__codelineno-136-11" name="__codelineno-136-11"></a><a href="#__codelineno-136-11"><span class="linenos" data-linenos="11 "></span></a><span class="w">    </span><span class="c1">//data*8 + start + stop + idle + ??? = 12state</span>
</span><span id="__span-136-12"><a id="__codelineno-136-12" name="__codelineno-136-12"></a><a href="#__codelineno-136-12"><span class="linenos" data-linenos="12 "></span></a><span class="w">    </span><span class="kt">reg</span><span class="p">[</span><span class="mh">3</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">state</span><span class="p">,</span><span class="w"> </span><span class="n">next_state</span><span class="p">;</span>
</span><span id="__span-136-13"><a id="__codelineno-136-13" name="__codelineno-136-13"></a><a href="#__codelineno-136-13"><span class="linenos" data-linenos="13 "></span></a><span class="w">    </span><span class="k">always</span><span class="p">@(</span><span class="o">*</span><span class="p">)</span><span class="k">begin</span>
</span><span id="__span-136-14"><a id="__codelineno-136-14" name="__codelineno-136-14"></a><a href="#__codelineno-136-14"><span class="linenos" data-linenos="14 "></span></a><span class="w">        </span><span class="k">case</span><span class="p">(</span><span class="n">state</span><span class="p">)</span>
</span><span id="__span-136-15"><a id="__codelineno-136-15" name="__codelineno-136-15"></a><a href="#__codelineno-136-15"><span class="linenos" data-linenos="15 "></span></a><span class="w">            </span><span class="mh">4</span><span class="mi">&#39;d0</span><span class="o">:</span><span class="w"> </span><span class="n">next_state</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">in</span><span class="o">?</span><span class="w"> </span><span class="mh">4</span><span class="mi">&#39;d0</span><span class="o">:</span><span class="w"> </span><span class="mh">4</span><span class="mi">&#39;d1</span><span class="p">;</span><span class="c1">//idle</span>
</span><span id="__span-136-16"><a id="__codelineno-136-16" name="__codelineno-136-16"></a><a href="#__codelineno-136-16"><span class="linenos" data-linenos="16 "></span></a><span class="w">            </span><span class="mh">4</span><span class="mi">&#39;d1</span><span class="o">:</span><span class="w"> </span><span class="n">next_state</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">4</span><span class="mi">&#39;d2</span><span class="p">;</span><span class="c1">//start</span>
</span><span id="__span-136-17"><a id="__codelineno-136-17" name="__codelineno-136-17"></a><a href="#__codelineno-136-17"><span class="linenos" data-linenos="17 "></span></a><span class="w">            </span><span class="mh">4</span><span class="mi">&#39;d2</span><span class="o">:</span><span class="w"> </span><span class="n">next_state</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">4</span><span class="mi">&#39;d3</span><span class="p">;</span><span class="c1">//data1</span>
</span><span id="__span-136-18"><a id="__codelineno-136-18" name="__codelineno-136-18"></a><a href="#__codelineno-136-18"><span class="linenos" data-linenos="18 "></span></a><span class="w">            </span><span class="mh">4</span><span class="mi">&#39;d3</span><span class="o">:</span><span class="w"> </span><span class="n">next_state</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">4</span><span class="mi">&#39;d4</span><span class="p">;</span><span class="c1">//data2</span>
</span><span id="__span-136-19"><a id="__codelineno-136-19" name="__codelineno-136-19"></a><a href="#__codelineno-136-19"><span class="linenos" data-linenos="19 "></span></a><span class="w">            </span><span class="mh">4</span><span class="mi">&#39;d4</span><span class="o">:</span><span class="w"> </span><span class="n">next_state</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">4</span><span class="mi">&#39;d5</span><span class="p">;</span><span class="c1">//data3</span>
</span><span id="__span-136-20"><a id="__codelineno-136-20" name="__codelineno-136-20"></a><a href="#__codelineno-136-20"><span class="linenos" data-linenos="20 "></span></a><span class="w">            </span><span class="mh">4</span><span class="mi">&#39;d5</span><span class="o">:</span><span class="w"> </span><span class="n">next_state</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">4</span><span class="mi">&#39;d6</span><span class="p">;</span><span class="c1">//data4</span>
</span><span id="__span-136-21"><a id="__codelineno-136-21" name="__codelineno-136-21"></a><a href="#__codelineno-136-21"><span class="linenos" data-linenos="21 "></span></a><span class="w">            </span><span class="mh">4</span><span class="mi">&#39;d6</span><span class="o">:</span><span class="w"> </span><span class="n">next_state</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">4</span><span class="mi">&#39;d7</span><span class="p">;</span><span class="c1">//data5</span>
</span><span id="__span-136-22"><a id="__codelineno-136-22" name="__codelineno-136-22"></a><a href="#__codelineno-136-22"><span class="linenos" data-linenos="22 "></span></a><span class="w">            </span><span class="mh">4</span><span class="mi">&#39;d7</span><span class="o">:</span><span class="w"> </span><span class="n">next_state</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">4</span><span class="mi">&#39;d8</span><span class="p">;</span><span class="c1">//data6</span>
</span><span id="__span-136-23"><a id="__codelineno-136-23" name="__codelineno-136-23"></a><a href="#__codelineno-136-23"><span class="linenos" data-linenos="23 "></span></a><span class="w">            </span><span class="mh">4</span><span class="mi">&#39;d8</span><span class="o">:</span><span class="w"> </span><span class="n">next_state</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">4</span><span class="mi">&#39;d9</span><span class="p">;</span><span class="c1">//data7</span>
</span><span id="__span-136-24"><a id="__codelineno-136-24" name="__codelineno-136-24"></a><a href="#__codelineno-136-24"><span class="linenos" data-linenos="24 "></span></a><span class="w">            </span><span class="mh">4</span><span class="mi">&#39;d9</span><span class="o">:</span><span class="w"> </span><span class="n">next_state</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">4</span><span class="mi">&#39;d10</span><span class="p">;</span><span class="c1">//data8</span>
</span><span id="__span-136-25"><a id="__codelineno-136-25" name="__codelineno-136-25"></a><a href="#__codelineno-136-25"><span class="linenos" data-linenos="25 "></span></a><span class="w">            </span><span class="mh">4</span><span class="mi">&#39;d10</span><span class="o">:</span><span class="w"> </span><span class="n">next_state</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">in</span><span class="o">?</span><span class="w"> </span><span class="mh">4</span><span class="mi">&#39;d11</span><span class="o">:</span><span class="w"> </span><span class="mh">4</span><span class="mi">&#39;d12</span><span class="p">;</span><span class="c1">//data9</span>
</span><span id="__span-136-26"><a id="__codelineno-136-26" name="__codelineno-136-26"></a><a href="#__codelineno-136-26"><span class="linenos" data-linenos="26 "></span></a><span class="w">            </span><span class="mh">4</span><span class="mi">&#39;d11</span><span class="o">:</span><span class="w"> </span><span class="n">next_state</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">in</span><span class="o">?</span><span class="w"> </span><span class="mh">4</span><span class="mi">&#39;d0</span><span class="o">:</span><span class="w"> </span><span class="mh">4</span><span class="mi">&#39;d1</span><span class="p">;</span><span class="c1">//stop</span>
</span><span id="__span-136-27"><a id="__codelineno-136-27" name="__codelineno-136-27"></a><a href="#__codelineno-136-27"><span class="linenos" data-linenos="27 "></span></a><span class="w">            </span><span class="mh">4</span><span class="mi">&#39;d12</span><span class="o">:</span><span class="w"> </span><span class="n">next_state</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">in</span><span class="o">?</span><span class="w"> </span><span class="mh">4</span><span class="mi">&#39;d0</span><span class="o">:</span><span class="w"> </span><span class="mh">4</span><span class="mi">&#39;d12</span><span class="p">;</span><span class="c1">//???</span>
</span><span id="__span-136-28"><a id="__codelineno-136-28" name="__codelineno-136-28"></a><a href="#__codelineno-136-28"><span class="linenos" data-linenos="28 "></span></a><span class="w">            </span><span class="k">default</span><span class="o">:</span><span class="w"> </span><span class="n">next_state</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">4</span><span class="p">&#39;</span><span class="n">bxxxx</span><span class="p">;</span>
</span><span id="__span-136-29"><a id="__codelineno-136-29" name="__codelineno-136-29"></a><a href="#__codelineno-136-29"><span class="linenos" data-linenos="29 "></span></a><span class="w">        </span><span class="k">endcase</span>
</span><span id="__span-136-30"><a id="__codelineno-136-30" name="__codelineno-136-30"></a><a href="#__codelineno-136-30"><span class="linenos" data-linenos="30 "></span></a><span class="w">    </span><span class="k">end</span>
</span><span id="__span-136-31"><a id="__codelineno-136-31" name="__codelineno-136-31"></a><a href="#__codelineno-136-31"><span class="linenos" data-linenos="31 "></span></a>
</span><span id="__span-136-32"><a id="__codelineno-136-32" name="__codelineno-136-32"></a><a href="#__codelineno-136-32"><span class="linenos" data-linenos="32 "></span></a><span class="w">    </span><span class="k">always</span><span class="p">@(</span><span class="k">posedge</span><span class="w"> </span><span class="n">clk</span><span class="p">)</span><span class="k">begin</span>
</span><span id="__span-136-33"><a id="__codelineno-136-33" name="__codelineno-136-33"></a><a href="#__codelineno-136-33"><span class="linenos" data-linenos="33 "></span></a><span class="w">        </span><span class="k">if</span><span class="p">(</span><span class="n">reset</span><span class="p">)</span><span class="w"> </span><span class="n">state</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="mh">4</span><span class="mb">&#39;b0000</span><span class="p">;</span>
</span><span id="__span-136-34"><a id="__codelineno-136-34" name="__codelineno-136-34"></a><a href="#__codelineno-136-34"><span class="linenos" data-linenos="34 "></span></a><span class="w">        </span><span class="k">else</span><span class="w"> </span><span class="k">begin</span>
</span><span id="__span-136-35"><a id="__codelineno-136-35" name="__codelineno-136-35"></a><a href="#__codelineno-136-35"><span class="linenos" data-linenos="35 "></span></a><span class="w">        </span><span class="n">state</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">next_state</span><span class="p">;</span>
</span><span id="__span-136-36"><a id="__codelineno-136-36" name="__codelineno-136-36"></a><a href="#__codelineno-136-36"><span class="linenos" data-linenos="36 "></span></a><span class="w">        </span><span class="n">valid</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">odd</span><span class="p">;</span>
</span><span id="__span-136-37"><a id="__codelineno-136-37" name="__codelineno-136-37"></a><a href="#__codelineno-136-37"><span class="linenos" data-linenos="37 "></span></a><span class="w">        </span><span class="k">end</span>
</span><span id="__span-136-38"><a id="__codelineno-136-38" name="__codelineno-136-38"></a><a href="#__codelineno-136-38"><span class="linenos" data-linenos="38 "></span></a><span class="w">    </span><span class="k">end</span>
</span><span id="__span-136-39"><a id="__codelineno-136-39" name="__codelineno-136-39"></a><a href="#__codelineno-136-39"><span class="linenos" data-linenos="39 "></span></a><span class="w">    </span><span class="c1">// New: Datapath to latch input bits.</span>
</span><span id="__span-136-40"><a id="__codelineno-136-40" name="__codelineno-136-40"></a><a href="#__codelineno-136-40"><span class="linenos" data-linenos="40 "></span></a><span class="w">    </span><span class="kt">reg</span><span class="w"> </span><span class="p">[</span><span class="mh">9</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">data</span><span class="p">;</span>
</span><span id="__span-136-41"><a id="__codelineno-136-41" name="__codelineno-136-41"></a><a href="#__codelineno-136-41"><span class="linenos" data-linenos="41 "></span></a><span class="w">    </span><span class="k">always</span><span class="p">@(</span><span class="k">posedge</span><span class="w"> </span><span class="n">clk</span><span class="p">)</span><span class="k">begin</span>
</span><span id="__span-136-42"><a id="__codelineno-136-42" name="__codelineno-136-42"></a><a href="#__codelineno-136-42"><span class="linenos" data-linenos="42 "></span></a><span class="w">        </span><span class="n">data</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="p">{</span><span class="n">in</span><span class="p">,</span><span class="n">data</span><span class="p">[</span><span class="mh">9</span><span class="o">:</span><span class="mh">1</span><span class="p">]};</span>
</span><span id="__span-136-43"><a id="__codelineno-136-43" name="__codelineno-136-43"></a><a href="#__codelineno-136-43"><span class="linenos" data-linenos="43 "></span></a><span class="w">    </span><span class="k">end</span>
</span><span id="__span-136-44"><a id="__codelineno-136-44" name="__codelineno-136-44"></a><a href="#__codelineno-136-44"><span class="linenos" data-linenos="44 "></span></a>
</span><span id="__span-136-45"><a id="__codelineno-136-45" name="__codelineno-136-45"></a><a href="#__codelineno-136-45"><span class="linenos" data-linenos="45 "></span></a><span class="w">    </span><span class="c1">// New: Add parity checking.</span>
</span><span id="__span-136-46"><a id="__codelineno-136-46" name="__codelineno-136-46"></a><a href="#__codelineno-136-46"><span class="linenos" data-linenos="46 "></span></a><span class="w">    </span><span class="kt">wire</span><span class="w"> </span><span class="n">odd</span><span class="p">,</span><span class="n">is_start</span><span class="p">;</span>
</span><span id="__span-136-47"><a id="__codelineno-136-47" name="__codelineno-136-47"></a><a href="#__codelineno-136-47"><span class="linenos" data-linenos="47 "></span></a><span class="w">    </span><span class="k">assign</span><span class="w"> </span><span class="n">is_start</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">next_state</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mh">4</span><span class="mi">&#39;d1</span><span class="p">);</span>
</span><span id="__span-136-48"><a id="__codelineno-136-48" name="__codelineno-136-48"></a><a href="#__codelineno-136-48"><span class="linenos" data-linenos="48 "></span></a><span class="w">    </span><span class="n">parity</span><span class="w"> </span><span class="n">pr</span><span class="p">(.</span><span class="n">clk</span><span class="p">(</span><span class="n">clk</span><span class="p">),.</span><span class="n">reset</span><span class="p">(</span><span class="n">reset</span><span class="o">|</span><span class="n">is_start</span><span class="p">),.</span><span class="n">in</span><span class="p">(</span><span class="n">in</span><span class="p">),.</span><span class="n">odd</span><span class="p">(</span><span class="n">odd</span><span class="p">));</span>
</span><span id="__span-136-49"><a id="__codelineno-136-49" name="__codelineno-136-49"></a><a href="#__codelineno-136-49"><span class="linenos" data-linenos="49 "></span></a><span class="w">    </span><span class="kt">reg</span><span class="w"> </span><span class="n">valid</span><span class="p">;</span>
</span><span id="__span-136-50"><a id="__codelineno-136-50" name="__codelineno-136-50"></a><a href="#__codelineno-136-50"><span class="linenos" data-linenos="50 "></span></a>
</span><span id="__span-136-51"><a id="__codelineno-136-51" name="__codelineno-136-51"></a><a href="#__codelineno-136-51"><span class="linenos" data-linenos="51 "></span></a><span class="w">    </span><span class="k">assign</span><span class="w"> </span><span class="n">out_byte</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">valid</span><span class="o">?</span><span class="w"> </span><span class="n">data</span><span class="p">[</span><span class="mh">7</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="o">:</span><span class="w"> </span><span class="mh">8</span><span class="mi">&#39;d0</span><span class="p">;</span>
</span><span id="__span-136-52"><a id="__codelineno-136-52" name="__codelineno-136-52"></a><a href="#__codelineno-136-52"><span class="linenos" data-linenos="52 "></span></a><span class="w">    </span><span class="k">assign</span><span class="w"> </span><span class="n">done</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">state</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mh">4</span><span class="mi">&#39;d11</span><span class="p">)</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="n">valid</span><span class="p">;</span>
</span><span id="__span-136-53"><a id="__codelineno-136-53" name="__codelineno-136-53"></a><a href="#__codelineno-136-53"><span class="linenos" data-linenos="53 "></span></a><span class="k">endmodule</span>
</span></code></pre></div></p>
<hr />
<h5 id="sequence-recognition">Sequence recognition<a class="headerlink" href="#sequence-recognition" title="Anchor link to this section for reference">⚓︎</a></h5>
<p>Website: <a href="https://hdlbits.01xz.net/wiki/Fsm_hdlc" target="_blank">https://hdlbits.01xz.net/wiki/Fsm_hdlc</a></p>
<p>這題分別對連續5，6，7以上個1做判斷，並做相對應的輸出，其實很像進階版的edge detection，不過可以用FSM實現，可以少幾個register。
<div class="language-verilog highlight"><span class="filename">Verilog</span><pre><span></span><code><span id="__span-137-1"><a id="__codelineno-137-1" name="__codelineno-137-1"></a><a href="#__codelineno-137-1"><span class="linenos" data-linenos=" 1 "></span></a><span class="k">module</span><span class="w"> </span><span class="n">top_module</span><span class="p">(</span>
</span><span id="__span-137-2"><a id="__codelineno-137-2" name="__codelineno-137-2"></a><a href="#__codelineno-137-2"><span class="linenos" data-linenos=" 2 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">clk</span><span class="p">,</span>
</span><span id="__span-137-3"><a id="__codelineno-137-3" name="__codelineno-137-3"></a><a href="#__codelineno-137-3"><span class="linenos" data-linenos=" 3 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">reset</span><span class="p">,</span><span class="w">    </span><span class="c1">// Synchronous reset</span>
</span><span id="__span-137-4"><a id="__codelineno-137-4" name="__codelineno-137-4"></a><a href="#__codelineno-137-4"><span class="linenos" data-linenos=" 4 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">in</span><span class="p">,</span>
</span><span id="__span-137-5"><a id="__codelineno-137-5" name="__codelineno-137-5"></a><a href="#__codelineno-137-5"><span class="linenos" data-linenos=" 5 "></span></a><span class="w">    </span><span class="k">output</span><span class="w"> </span><span class="n">disc</span><span class="p">,</span>
</span><span id="__span-137-6"><a id="__codelineno-137-6" name="__codelineno-137-6"></a><a href="#__codelineno-137-6"><span class="linenos" data-linenos=" 6 "></span></a><span class="w">    </span><span class="k">output</span><span class="w"> </span><span class="n">flag</span><span class="p">,</span>
</span><span id="__span-137-7"><a id="__codelineno-137-7" name="__codelineno-137-7"></a><a href="#__codelineno-137-7"><span class="linenos" data-linenos=" 7 "></span></a><span class="w">    </span><span class="k">output</span><span class="w"> </span><span class="n">err</span><span class="p">);</span>
</span><span id="__span-137-8"><a id="__codelineno-137-8" name="__codelineno-137-8"></a><a href="#__codelineno-137-8"><span class="linenos" data-linenos=" 8 "></span></a><span class="w">    </span><span class="kt">reg</span><span class="w"> </span><span class="p">[</span><span class="mh">3</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">state</span><span class="p">,</span><span class="w"> </span><span class="n">next_state</span><span class="p">;</span>
</span><span id="__span-137-9"><a id="__codelineno-137-9" name="__codelineno-137-9"></a><a href="#__codelineno-137-9"><span class="linenos" data-linenos=" 9 "></span></a><span class="w">    </span><span class="k">parameter</span><span class="w"> </span><span class="n">none</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">4</span><span class="mi">&#39;d0</span><span class="p">;</span>
</span><span id="__span-137-10"><a id="__codelineno-137-10" name="__codelineno-137-10"></a><a href="#__codelineno-137-10"><span class="linenos" data-linenos="10 "></span></a><span class="w">    </span><span class="k">parameter</span><span class="w"> </span><span class="n">one</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">4</span><span class="mi">&#39;d1</span><span class="p">;</span>
</span><span id="__span-137-11"><a id="__codelineno-137-11" name="__codelineno-137-11"></a><a href="#__codelineno-137-11"><span class="linenos" data-linenos="11 "></span></a><span class="w">    </span><span class="k">parameter</span><span class="w"> </span><span class="n">two</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">4</span><span class="mi">&#39;d2</span><span class="p">;</span>
</span><span id="__span-137-12"><a id="__codelineno-137-12" name="__codelineno-137-12"></a><a href="#__codelineno-137-12"><span class="linenos" data-linenos="12 "></span></a><span class="w">    </span><span class="k">parameter</span><span class="w"> </span><span class="n">three</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">4</span><span class="mi">&#39;d3</span><span class="p">;</span>
</span><span id="__span-137-13"><a id="__codelineno-137-13" name="__codelineno-137-13"></a><a href="#__codelineno-137-13"><span class="linenos" data-linenos="13 "></span></a><span class="w">    </span><span class="k">parameter</span><span class="w"> </span><span class="n">four</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">4</span><span class="mi">&#39;d4</span><span class="p">;</span>
</span><span id="__span-137-14"><a id="__codelineno-137-14" name="__codelineno-137-14"></a><a href="#__codelineno-137-14"><span class="linenos" data-linenos="14 "></span></a><span class="w">    </span><span class="k">parameter</span><span class="w"> </span><span class="n">five</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">4</span><span class="mi">&#39;d5</span><span class="p">;</span>
</span><span id="__span-137-15"><a id="__codelineno-137-15" name="__codelineno-137-15"></a><a href="#__codelineno-137-15"><span class="linenos" data-linenos="15 "></span></a><span class="w">    </span><span class="k">parameter</span><span class="w"> </span><span class="n">six</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">4</span><span class="mi">&#39;d6</span><span class="p">;</span>
</span><span id="__span-137-16"><a id="__codelineno-137-16" name="__codelineno-137-16"></a><a href="#__codelineno-137-16"><span class="linenos" data-linenos="16 "></span></a><span class="w">    </span><span class="k">parameter</span><span class="w"> </span><span class="n">seven</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">4</span><span class="mi">&#39;d7</span><span class="p">;</span>
</span><span id="__span-137-17"><a id="__codelineno-137-17" name="__codelineno-137-17"></a><a href="#__codelineno-137-17"><span class="linenos" data-linenos="17 "></span></a><span class="w">    </span><span class="k">parameter</span><span class="w"> </span><span class="n">discard</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">4</span><span class="mi">&#39;d8</span><span class="p">;</span>
</span><span id="__span-137-18"><a id="__codelineno-137-18" name="__codelineno-137-18"></a><a href="#__codelineno-137-18"><span class="linenos" data-linenos="18 "></span></a><span class="w">    </span><span class="k">parameter</span><span class="w"> </span><span class="n">fg</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">4</span><span class="mi">&#39;d9</span><span class="p">;</span>
</span><span id="__span-137-19"><a id="__codelineno-137-19" name="__codelineno-137-19"></a><a href="#__codelineno-137-19"><span class="linenos" data-linenos="19 "></span></a>
</span><span id="__span-137-20"><a id="__codelineno-137-20" name="__codelineno-137-20"></a><a href="#__codelineno-137-20"><span class="linenos" data-linenos="20 "></span></a><span class="w">    </span><span class="k">always</span><span class="p">@(</span><span class="o">*</span><span class="p">)</span><span class="k">begin</span>
</span><span id="__span-137-21"><a id="__codelineno-137-21" name="__codelineno-137-21"></a><a href="#__codelineno-137-21"><span class="linenos" data-linenos="21 "></span></a><span class="w">        </span><span class="k">case</span><span class="p">(</span><span class="n">state</span><span class="p">)</span>
</span><span id="__span-137-22"><a id="__codelineno-137-22" name="__codelineno-137-22"></a><a href="#__codelineno-137-22"><span class="linenos" data-linenos="22 "></span></a><span class="w">            </span><span class="nl">none:</span><span class="w"> </span><span class="n">next_state</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">in</span><span class="o">?</span><span class="w"> </span><span class="nl">one:</span><span class="w"> </span><span class="n">none</span><span class="p">;</span>
</span><span id="__span-137-23"><a id="__codelineno-137-23" name="__codelineno-137-23"></a><a href="#__codelineno-137-23"><span class="linenos" data-linenos="23 "></span></a><span class="w">            </span><span class="nl">one:</span><span class="w"> </span><span class="n">next_state</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">in</span><span class="o">?</span><span class="w"> </span><span class="nl">two:</span><span class="w"> </span><span class="n">none</span><span class="p">;</span>
</span><span id="__span-137-24"><a id="__codelineno-137-24" name="__codelineno-137-24"></a><a href="#__codelineno-137-24"><span class="linenos" data-linenos="24 "></span></a><span class="w">            </span><span class="nl">two:</span><span class="w"> </span><span class="n">next_state</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">in</span><span class="o">?</span><span class="w"> </span><span class="nl">three:</span><span class="w"> </span><span class="n">none</span><span class="p">;</span>
</span><span id="__span-137-25"><a id="__codelineno-137-25" name="__codelineno-137-25"></a><a href="#__codelineno-137-25"><span class="linenos" data-linenos="25 "></span></a><span class="w">            </span><span class="nl">three:</span><span class="w"> </span><span class="n">next_state</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">in</span><span class="o">?</span><span class="w"> </span><span class="nl">four:</span><span class="w"> </span><span class="n">none</span><span class="p">;</span>
</span><span id="__span-137-26"><a id="__codelineno-137-26" name="__codelineno-137-26"></a><a href="#__codelineno-137-26"><span class="linenos" data-linenos="26 "></span></a><span class="w">            </span><span class="nl">four:</span><span class="w"> </span><span class="n">next_state</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">in</span><span class="o">?</span><span class="w"> </span><span class="nl">five:</span><span class="w"> </span><span class="n">none</span><span class="p">;</span>
</span><span id="__span-137-27"><a id="__codelineno-137-27" name="__codelineno-137-27"></a><a href="#__codelineno-137-27"><span class="linenos" data-linenos="27 "></span></a><span class="w">            </span><span class="nl">five:</span><span class="w"> </span><span class="n">next_state</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">in</span><span class="o">?</span><span class="w"> </span><span class="nl">six:</span><span class="w"> </span><span class="n">discard</span><span class="p">;</span>
</span><span id="__span-137-28"><a id="__codelineno-137-28" name="__codelineno-137-28"></a><a href="#__codelineno-137-28"><span class="linenos" data-linenos="28 "></span></a><span class="w">            </span><span class="nl">six:</span><span class="w"> </span><span class="n">next_state</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">in</span><span class="o">?</span><span class="w"> </span><span class="nl">seven:</span><span class="w"> </span><span class="n">fg</span><span class="p">;</span>
</span><span id="__span-137-29"><a id="__codelineno-137-29" name="__codelineno-137-29"></a><a href="#__codelineno-137-29"><span class="linenos" data-linenos="29 "></span></a><span class="w">            </span><span class="nl">seven:</span><span class="w"> </span><span class="n">next_state</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">in</span><span class="o">?</span><span class="w"> </span><span class="nl">seven:</span><span class="w"> </span><span class="n">none</span><span class="p">;</span>
</span><span id="__span-137-30"><a id="__codelineno-137-30" name="__codelineno-137-30"></a><a href="#__codelineno-137-30"><span class="linenos" data-linenos="30 "></span></a><span class="w">            </span><span class="nl">discard:</span><span class="w"> </span><span class="n">next_state</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">in</span><span class="o">?</span><span class="w"> </span><span class="nl">one:</span><span class="w"> </span><span class="n">none</span><span class="p">;</span>
</span><span id="__span-137-31"><a id="__codelineno-137-31" name="__codelineno-137-31"></a><a href="#__codelineno-137-31"><span class="linenos" data-linenos="31 "></span></a><span class="w">            </span><span class="nl">fg:</span><span class="w"> </span><span class="n">next_state</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">in</span><span class="o">?</span><span class="w"> </span><span class="nl">one:</span><span class="w"> </span><span class="n">none</span><span class="p">;</span>
</span><span id="__span-137-32"><a id="__codelineno-137-32" name="__codelineno-137-32"></a><a href="#__codelineno-137-32"><span class="linenos" data-linenos="32 "></span></a><span class="w">            </span><span class="k">default</span><span class="o">:</span><span class="w"> </span><span class="n">next_state</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">4</span><span class="p">&#39;</span><span class="n">bxxxx</span><span class="p">;</span>
</span><span id="__span-137-33"><a id="__codelineno-137-33" name="__codelineno-137-33"></a><a href="#__codelineno-137-33"><span class="linenos" data-linenos="33 "></span></a><span class="w">        </span><span class="k">endcase</span>
</span><span id="__span-137-34"><a id="__codelineno-137-34" name="__codelineno-137-34"></a><a href="#__codelineno-137-34"><span class="linenos" data-linenos="34 "></span></a><span class="w">    </span><span class="k">end</span>
</span><span id="__span-137-35"><a id="__codelineno-137-35" name="__codelineno-137-35"></a><a href="#__codelineno-137-35"><span class="linenos" data-linenos="35 "></span></a>
</span><span id="__span-137-36"><a id="__codelineno-137-36" name="__codelineno-137-36"></a><a href="#__codelineno-137-36"><span class="linenos" data-linenos="36 "></span></a><span class="w">    </span><span class="k">always</span><span class="p">@(</span><span class="k">posedge</span><span class="w"> </span><span class="n">clk</span><span class="p">)</span><span class="k">begin</span>
</span><span id="__span-137-37"><a id="__codelineno-137-37" name="__codelineno-137-37"></a><a href="#__codelineno-137-37"><span class="linenos" data-linenos="37 "></span></a><span class="w">        </span><span class="k">if</span><span class="p">(</span><span class="n">reset</span><span class="p">)</span><span class="w"> </span><span class="n">state</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">none</span><span class="p">;</span>
</span><span id="__span-137-38"><a id="__codelineno-137-38" name="__codelineno-137-38"></a><a href="#__codelineno-137-38"><span class="linenos" data-linenos="38 "></span></a><span class="w">        </span><span class="k">else</span><span class="w"> </span><span class="n">state</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">next_state</span><span class="p">;</span>
</span><span id="__span-137-39"><a id="__codelineno-137-39" name="__codelineno-137-39"></a><a href="#__codelineno-137-39"><span class="linenos" data-linenos="39 "></span></a><span class="w">    </span><span class="k">end</span>
</span><span id="__span-137-40"><a id="__codelineno-137-40" name="__codelineno-137-40"></a><a href="#__codelineno-137-40"><span class="linenos" data-linenos="40 "></span></a>
</span><span id="__span-137-41"><a id="__codelineno-137-41" name="__codelineno-137-41"></a><a href="#__codelineno-137-41"><span class="linenos" data-linenos="41 "></span></a><span class="w">    </span><span class="k">assign</span><span class="w"> </span><span class="n">disc</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">state</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">discard</span><span class="p">);</span>
</span><span id="__span-137-42"><a id="__codelineno-137-42" name="__codelineno-137-42"></a><a href="#__codelineno-137-42"><span class="linenos" data-linenos="42 "></span></a><span class="w">    </span><span class="k">assign</span><span class="w"> </span><span class="n">flag</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">state</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">fg</span><span class="p">);</span>
</span><span id="__span-137-43"><a id="__codelineno-137-43" name="__codelineno-137-43"></a><a href="#__codelineno-137-43"><span class="linenos" data-linenos="43 "></span></a><span class="w">    </span><span class="k">assign</span><span class="w"> </span><span class="n">err</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">state</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">seven</span><span class="p">);</span>
</span><span id="__span-137-44"><a id="__codelineno-137-44" name="__codelineno-137-44"></a><a href="#__codelineno-137-44"><span class="linenos" data-linenos="44 "></span></a><span class="k">endmodule</span>
</span></code></pre></div></p>
<hr />
<h5 id="q8-design-a-mealy-fsm">Q8: Design a Mealy FSM<a class="headerlink" href="#q8-design-a-mealy-fsm" title="Anchor link to this section for reference">⚓︎</a></h5>
<p>Website: <a href="https://hdlbits.01xz.net/wiki/Exams/ece241_2013_q8" target="_blank">https://hdlbits.01xz.net/wiki/Exams/ece241_2013_q8</a></p>
<p>這題應該是這網站上第一題明確指出需使用mealy machine的題目。
<div class="language-verilog highlight"><span class="filename">Verilog</span><pre><span></span><code><span id="__span-138-1"><a id="__codelineno-138-1" name="__codelineno-138-1"></a><a href="#__codelineno-138-1"><span class="linenos" data-linenos=" 1 "></span></a><span class="k">module</span><span class="w"> </span><span class="n">top_module</span><span class="w"> </span><span class="p">(</span>
</span><span id="__span-138-2"><a id="__codelineno-138-2" name="__codelineno-138-2"></a><a href="#__codelineno-138-2"><span class="linenos" data-linenos=" 2 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">clk</span><span class="p">,</span>
</span><span id="__span-138-3"><a id="__codelineno-138-3" name="__codelineno-138-3"></a><a href="#__codelineno-138-3"><span class="linenos" data-linenos=" 3 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">aresetn</span><span class="p">,</span><span class="w">    </span><span class="c1">// Asynchronous active-low reset</span>
</span><span id="__span-138-4"><a id="__codelineno-138-4" name="__codelineno-138-4"></a><a href="#__codelineno-138-4"><span class="linenos" data-linenos=" 4 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">x</span><span class="p">,</span>
</span><span id="__span-138-5"><a id="__codelineno-138-5" name="__codelineno-138-5"></a><a href="#__codelineno-138-5"><span class="linenos" data-linenos=" 5 "></span></a><span class="w">    </span><span class="k">output</span><span class="w"> </span><span class="n">z</span><span class="w"> </span><span class="p">);</span><span class="w"> </span>
</span><span id="__span-138-6"><a id="__codelineno-138-6" name="__codelineno-138-6"></a><a href="#__codelineno-138-6"><span class="linenos" data-linenos=" 6 "></span></a><span class="w">    </span><span class="kt">reg</span><span class="w"> </span><span class="p">[</span><span class="mh">1</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">state</span><span class="p">,</span><span class="w"> </span><span class="n">next_state</span><span class="p">;</span>
</span><span id="__span-138-7"><a id="__codelineno-138-7" name="__codelineno-138-7"></a><a href="#__codelineno-138-7"><span class="linenos" data-linenos=" 7 "></span></a><span class="w">    </span><span class="k">parameter</span><span class="w"> </span><span class="n">zero_bit</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">2</span><span class="mb">&#39;b00</span><span class="p">;</span>
</span><span id="__span-138-8"><a id="__codelineno-138-8" name="__codelineno-138-8"></a><a href="#__codelineno-138-8"><span class="linenos" data-linenos=" 8 "></span></a><span class="w">    </span><span class="k">parameter</span><span class="w"> </span><span class="n">one_bit</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">2</span><span class="mb">&#39;b01</span><span class="p">;</span>
</span><span id="__span-138-9"><a id="__codelineno-138-9" name="__codelineno-138-9"></a><a href="#__codelineno-138-9"><span class="linenos" data-linenos=" 9 "></span></a><span class="w">    </span><span class="k">parameter</span><span class="w"> </span><span class="n">two_bit</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">2</span><span class="mb">&#39;b10</span><span class="p">;</span>
</span><span id="__span-138-10"><a id="__codelineno-138-10" name="__codelineno-138-10"></a><a href="#__codelineno-138-10"><span class="linenos" data-linenos="10 "></span></a>
</span><span id="__span-138-11"><a id="__codelineno-138-11" name="__codelineno-138-11"></a><a href="#__codelineno-138-11"><span class="linenos" data-linenos="11 "></span></a><span class="w">    </span><span class="k">always</span><span class="p">@(</span><span class="o">*</span><span class="p">)</span><span class="k">begin</span>
</span><span id="__span-138-12"><a id="__codelineno-138-12" name="__codelineno-138-12"></a><a href="#__codelineno-138-12"><span class="linenos" data-linenos="12 "></span></a><span class="w">        </span><span class="k">case</span><span class="p">(</span><span class="n">state</span><span class="p">)</span>
</span><span id="__span-138-13"><a id="__codelineno-138-13" name="__codelineno-138-13"></a><a href="#__codelineno-138-13"><span class="linenos" data-linenos="13 "></span></a><span class="w">            </span><span class="nl">zero_bit:</span><span class="w"> </span><span class="n">next_state</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">x</span><span class="o">?</span><span class="w"> </span><span class="nl">one_bit:</span><span class="w"> </span><span class="n">zero_bit</span><span class="p">;</span>
</span><span id="__span-138-14"><a id="__codelineno-138-14" name="__codelineno-138-14"></a><a href="#__codelineno-138-14"><span class="linenos" data-linenos="14 "></span></a><span class="w">            </span><span class="nl">one_bit:</span><span class="w"> </span><span class="n">next_state</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">x</span><span class="o">?</span><span class="w"> </span><span class="nl">one_bit:</span><span class="w"> </span><span class="n">two_bit</span><span class="p">;</span>
</span><span id="__span-138-15"><a id="__codelineno-138-15" name="__codelineno-138-15"></a><a href="#__codelineno-138-15"><span class="linenos" data-linenos="15 "></span></a><span class="w">            </span><span class="nl">two_bit:</span><span class="w"> </span><span class="n">next_state</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">x</span><span class="o">?</span><span class="w"> </span><span class="nl">one_bit:</span><span class="w"> </span><span class="n">zero_bit</span><span class="p">;</span>
</span><span id="__span-138-16"><a id="__codelineno-138-16" name="__codelineno-138-16"></a><a href="#__codelineno-138-16"><span class="linenos" data-linenos="16 "></span></a><span class="w">            </span><span class="k">default</span><span class="o">:</span><span class="w"> </span><span class="n">next_state</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">4</span><span class="p">&#39;</span><span class="n">bxxxx</span><span class="p">;</span>
</span><span id="__span-138-17"><a id="__codelineno-138-17" name="__codelineno-138-17"></a><a href="#__codelineno-138-17"><span class="linenos" data-linenos="17 "></span></a><span class="w">        </span><span class="k">endcase</span>
</span><span id="__span-138-18"><a id="__codelineno-138-18" name="__codelineno-138-18"></a><a href="#__codelineno-138-18"><span class="linenos" data-linenos="18 "></span></a><span class="w">    </span><span class="k">end</span>
</span><span id="__span-138-19"><a id="__codelineno-138-19" name="__codelineno-138-19"></a><a href="#__codelineno-138-19"><span class="linenos" data-linenos="19 "></span></a>
</span><span id="__span-138-20"><a id="__codelineno-138-20" name="__codelineno-138-20"></a><a href="#__codelineno-138-20"><span class="linenos" data-linenos="20 "></span></a><span class="w">    </span><span class="k">always</span><span class="p">@(</span><span class="k">posedge</span><span class="w"> </span><span class="n">clk</span><span class="p">,</span><span class="w"> </span><span class="k">negedge</span><span class="w"> </span><span class="n">aresetn</span><span class="p">)</span><span class="k">begin</span>
</span><span id="__span-138-21"><a id="__codelineno-138-21" name="__codelineno-138-21"></a><a href="#__codelineno-138-21"><span class="linenos" data-linenos="21 "></span></a><span class="w">        </span><span class="k">if</span><span class="p">(</span><span class="o">~</span><span class="n">aresetn</span><span class="p">)</span><span class="w"> </span><span class="n">state</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">zero_bit</span><span class="p">;</span>
</span><span id="__span-138-22"><a id="__codelineno-138-22" name="__codelineno-138-22"></a><a href="#__codelineno-138-22"><span class="linenos" data-linenos="22 "></span></a><span class="w">        </span><span class="k">else</span><span class="w"> </span><span class="n">state</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">next_state</span><span class="p">;</span>
</span><span id="__span-138-23"><a id="__codelineno-138-23" name="__codelineno-138-23"></a><a href="#__codelineno-138-23"><span class="linenos" data-linenos="23 "></span></a><span class="w">    </span><span class="k">end</span>
</span><span id="__span-138-24"><a id="__codelineno-138-24" name="__codelineno-138-24"></a><a href="#__codelineno-138-24"><span class="linenos" data-linenos="24 "></span></a>
</span><span id="__span-138-25"><a id="__codelineno-138-25" name="__codelineno-138-25"></a><a href="#__codelineno-138-25"><span class="linenos" data-linenos="25 "></span></a><span class="w">    </span><span class="k">assign</span><span class="w"> </span><span class="n">z</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">state</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">two_bit</span><span class="p">)</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">x</span><span class="p">;</span>
</span><span id="__span-138-26"><a id="__codelineno-138-26" name="__codelineno-138-26"></a><a href="#__codelineno-138-26"><span class="linenos" data-linenos="26 "></span></a><span class="k">endmodule</span>
</span></code></pre></div></p>
<hr />
<h5 id="q5a-serial-twos-complementer-moore-fsm">Q5a: Serial two's complementer (Moore FSM)<a class="headerlink" href="#q5a-serial-twos-complementer-moore-fsm" title="Anchor link to this section for reference">⚓︎</a></h5>
<p>Website: <a href="https://hdlbits.01xz.net/wiki/Exams/ece241_2014_q5a" target="_blank">https://hdlbits.01xz.net/wiki/Exams/ece241_2014_q5a</a></p>
<p>這題用moore machine寫2補數，就只有lsb的1輸出改1，沒什麼太難的。
<div class="language-verilog highlight"><span class="filename">Verilog</span><pre><span></span><code><span id="__span-139-1"><a id="__codelineno-139-1" name="__codelineno-139-1"></a><a href="#__codelineno-139-1"><span class="linenos" data-linenos=" 1 "></span></a><span class="k">module</span><span class="w"> </span><span class="n">top_module</span><span class="w"> </span><span class="p">(</span>
</span><span id="__span-139-2"><a id="__codelineno-139-2" name="__codelineno-139-2"></a><a href="#__codelineno-139-2"><span class="linenos" data-linenos=" 2 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">clk</span><span class="p">,</span>
</span><span id="__span-139-3"><a id="__codelineno-139-3" name="__codelineno-139-3"></a><a href="#__codelineno-139-3"><span class="linenos" data-linenos=" 3 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">areset</span><span class="p">,</span>
</span><span id="__span-139-4"><a id="__codelineno-139-4" name="__codelineno-139-4"></a><a href="#__codelineno-139-4"><span class="linenos" data-linenos=" 4 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">x</span><span class="p">,</span>
</span><span id="__span-139-5"><a id="__codelineno-139-5" name="__codelineno-139-5"></a><a href="#__codelineno-139-5"><span class="linenos" data-linenos=" 5 "></span></a><span class="w">    </span><span class="k">output</span><span class="w"> </span><span class="n">z</span>
</span><span id="__span-139-6"><a id="__codelineno-139-6" name="__codelineno-139-6"></a><a href="#__codelineno-139-6"><span class="linenos" data-linenos=" 6 "></span></a><span class="p">);</span><span class="w"> </span>
</span><span id="__span-139-7"><a id="__codelineno-139-7" name="__codelineno-139-7"></a><a href="#__codelineno-139-7"><span class="linenos" data-linenos=" 7 "></span></a><span class="w">    </span><span class="kt">reg</span><span class="w"> </span><span class="p">[</span><span class="mh">1</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">state</span><span class="p">,</span><span class="w"> </span><span class="n">next_state</span><span class="p">;</span>
</span><span id="__span-139-8"><a id="__codelineno-139-8" name="__codelineno-139-8"></a><a href="#__codelineno-139-8"><span class="linenos" data-linenos=" 8 "></span></a><span class="w">    </span><span class="k">parameter</span><span class="w"> </span><span class="n">idle</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">2</span><span class="mb">&#39;b00</span><span class="p">;</span>
</span><span id="__span-139-9"><a id="__codelineno-139-9" name="__codelineno-139-9"></a><a href="#__codelineno-139-9"><span class="linenos" data-linenos=" 9 "></span></a><span class="w">    </span><span class="k">parameter</span><span class="w"> </span><span class="n">zero</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">2</span><span class="mb">&#39;b01</span><span class="p">;</span>
</span><span id="__span-139-10"><a id="__codelineno-139-10" name="__codelineno-139-10"></a><a href="#__codelineno-139-10"><span class="linenos" data-linenos="10 "></span></a><span class="w">    </span><span class="k">parameter</span><span class="w"> </span><span class="n">one</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">2</span><span class="mb">&#39;b10</span><span class="p">;</span>
</span><span id="__span-139-11"><a id="__codelineno-139-11" name="__codelineno-139-11"></a><a href="#__codelineno-139-11"><span class="linenos" data-linenos="11 "></span></a>
</span><span id="__span-139-12"><a id="__codelineno-139-12" name="__codelineno-139-12"></a><a href="#__codelineno-139-12"><span class="linenos" data-linenos="12 "></span></a><span class="w">    </span><span class="k">always</span><span class="p">@(</span><span class="o">*</span><span class="p">)</span><span class="k">begin</span>
</span><span id="__span-139-13"><a id="__codelineno-139-13" name="__codelineno-139-13"></a><a href="#__codelineno-139-13"><span class="linenos" data-linenos="13 "></span></a><span class="w">        </span><span class="k">case</span><span class="p">(</span><span class="n">state</span><span class="p">)</span>
</span><span id="__span-139-14"><a id="__codelineno-139-14" name="__codelineno-139-14"></a><a href="#__codelineno-139-14"><span class="linenos" data-linenos="14 "></span></a><span class="w">            </span><span class="nl">idle:</span><span class="w"> </span><span class="n">next_state</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">x</span><span class="o">?</span><span class="w"> </span><span class="nl">zero:</span><span class="w"> </span><span class="n">idle</span><span class="p">;</span>
</span><span id="__span-139-15"><a id="__codelineno-139-15" name="__codelineno-139-15"></a><a href="#__codelineno-139-15"><span class="linenos" data-linenos="15 "></span></a><span class="w">            </span><span class="nl">zero:</span><span class="w"> </span><span class="n">next_state</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">x</span><span class="o">?</span><span class="w"> </span><span class="nl">one:</span><span class="w"> </span><span class="n">zero</span><span class="p">;</span>
</span><span id="__span-139-16"><a id="__codelineno-139-16" name="__codelineno-139-16"></a><a href="#__codelineno-139-16"><span class="linenos" data-linenos="16 "></span></a><span class="w">            </span><span class="nl">one:</span><span class="w"> </span><span class="n">next_state</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">x</span><span class="o">?</span><span class="w"> </span><span class="nl">one:</span><span class="w"> </span><span class="n">zero</span><span class="p">;</span>
</span><span id="__span-139-17"><a id="__codelineno-139-17" name="__codelineno-139-17"></a><a href="#__codelineno-139-17"><span class="linenos" data-linenos="17 "></span></a><span class="w">            </span><span class="k">default</span><span class="o">:</span><span class="w"> </span><span class="n">next_state</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">2</span><span class="p">&#39;</span><span class="n">bxx</span><span class="p">;</span>
</span><span id="__span-139-18"><a id="__codelineno-139-18" name="__codelineno-139-18"></a><a href="#__codelineno-139-18"><span class="linenos" data-linenos="18 "></span></a><span class="w">        </span><span class="k">endcase</span>
</span><span id="__span-139-19"><a id="__codelineno-139-19" name="__codelineno-139-19"></a><a href="#__codelineno-139-19"><span class="linenos" data-linenos="19 "></span></a><span class="w">    </span><span class="k">end</span>
</span><span id="__span-139-20"><a id="__codelineno-139-20" name="__codelineno-139-20"></a><a href="#__codelineno-139-20"><span class="linenos" data-linenos="20 "></span></a>
</span><span id="__span-139-21"><a id="__codelineno-139-21" name="__codelineno-139-21"></a><a href="#__codelineno-139-21"><span class="linenos" data-linenos="21 "></span></a><span class="w">    </span><span class="k">always</span><span class="p">@(</span><span class="k">posedge</span><span class="w"> </span><span class="n">clk</span><span class="p">,</span><span class="w"> </span><span class="k">posedge</span><span class="w"> </span><span class="n">areset</span><span class="p">)</span><span class="k">begin</span>
</span><span id="__span-139-22"><a id="__codelineno-139-22" name="__codelineno-139-22"></a><a href="#__codelineno-139-22"><span class="linenos" data-linenos="22 "></span></a><span class="w">        </span><span class="k">if</span><span class="p">(</span><span class="n">areset</span><span class="p">)</span><span class="w"> </span><span class="n">state</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="mh">2</span><span class="mb">&#39;b00</span><span class="p">;</span>
</span><span id="__span-139-23"><a id="__codelineno-139-23" name="__codelineno-139-23"></a><a href="#__codelineno-139-23"><span class="linenos" data-linenos="23 "></span></a><span class="w">        </span><span class="k">else</span><span class="w"> </span><span class="n">state</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">next_state</span><span class="p">;</span>
</span><span id="__span-139-24"><a id="__codelineno-139-24" name="__codelineno-139-24"></a><a href="#__codelineno-139-24"><span class="linenos" data-linenos="24 "></span></a><span class="w">    </span><span class="k">end</span>
</span><span id="__span-139-25"><a id="__codelineno-139-25" name="__codelineno-139-25"></a><a href="#__codelineno-139-25"><span class="linenos" data-linenos="25 "></span></a>
</span><span id="__span-139-26"><a id="__codelineno-139-26" name="__codelineno-139-26"></a><a href="#__codelineno-139-26"><span class="linenos" data-linenos="26 "></span></a><span class="w">    </span><span class="k">assign</span><span class="w"> </span><span class="n">z</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">state</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">zero</span><span class="p">);</span>
</span><span id="__span-139-27"><a id="__codelineno-139-27" name="__codelineno-139-27"></a><a href="#__codelineno-139-27"><span class="linenos" data-linenos="27 "></span></a><span class="k">endmodule</span>
</span></code></pre></div></p>
<hr />
<h5 id="q5b-serial-twos-complementer-mealy-fsm">Q5b: Serial two's complementer (Mealy FSM)<a class="headerlink" href="#q5b-serial-twos-complementer-mealy-fsm" title="Anchor link to this section for reference">⚓︎</a></h5>
<p>Website: <a href="https://hdlbits.01xz.net/wiki/Exams/ece241_2014_q5b" target="_blank">https://hdlbits.01xz.net/wiki/Exams/ece241_2014_q5b</a></p>
<p>這題用mealy machine，因為mealy machine比moore machine少一個state，所以輸出早一個週期。
<div class="language-verilog highlight"><span class="filename">Verilog</span><pre><span></span><code><span id="__span-140-1"><a id="__codelineno-140-1" name="__codelineno-140-1"></a><a href="#__codelineno-140-1"><span class="linenos" data-linenos=" 1 "></span></a><span class="k">module</span><span class="w"> </span><span class="n">top_module</span><span class="w"> </span><span class="p">(</span>
</span><span id="__span-140-2"><a id="__codelineno-140-2" name="__codelineno-140-2"></a><a href="#__codelineno-140-2"><span class="linenos" data-linenos=" 2 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">clk</span><span class="p">,</span>
</span><span id="__span-140-3"><a id="__codelineno-140-3" name="__codelineno-140-3"></a><a href="#__codelineno-140-3"><span class="linenos" data-linenos=" 3 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">areset</span><span class="p">,</span>
</span><span id="__span-140-4"><a id="__codelineno-140-4" name="__codelineno-140-4"></a><a href="#__codelineno-140-4"><span class="linenos" data-linenos=" 4 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">x</span><span class="p">,</span>
</span><span id="__span-140-5"><a id="__codelineno-140-5" name="__codelineno-140-5"></a><a href="#__codelineno-140-5"><span class="linenos" data-linenos=" 5 "></span></a><span class="w">    </span><span class="k">output</span><span class="w"> </span><span class="n">z</span>
</span><span id="__span-140-6"><a id="__codelineno-140-6" name="__codelineno-140-6"></a><a href="#__codelineno-140-6"><span class="linenos" data-linenos=" 6 "></span></a><span class="p">);</span><span class="w"> </span>
</span><span id="__span-140-7"><a id="__codelineno-140-7" name="__codelineno-140-7"></a><a href="#__codelineno-140-7"><span class="linenos" data-linenos=" 7 "></span></a><span class="w">    </span><span class="kt">reg</span><span class="w"> </span><span class="n">state</span><span class="p">,</span><span class="w"> </span><span class="n">next_state</span><span class="p">;</span>
</span><span id="__span-140-8"><a id="__codelineno-140-8" name="__codelineno-140-8"></a><a href="#__codelineno-140-8"><span class="linenos" data-linenos=" 8 "></span></a><span class="w">    </span><span class="k">parameter</span><span class="w"> </span><span class="n">idle</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">1</span><span class="mb">&#39;b0</span><span class="p">;</span>
</span><span id="__span-140-9"><a id="__codelineno-140-9" name="__codelineno-140-9"></a><a href="#__codelineno-140-9"><span class="linenos" data-linenos=" 9 "></span></a><span class="w">    </span><span class="k">parameter</span><span class="w"> </span><span class="n">comp</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">1</span><span class="mb">&#39;b1</span><span class="p">;</span>
</span><span id="__span-140-10"><a id="__codelineno-140-10" name="__codelineno-140-10"></a><a href="#__codelineno-140-10"><span class="linenos" data-linenos="10 "></span></a>
</span><span id="__span-140-11"><a id="__codelineno-140-11" name="__codelineno-140-11"></a><a href="#__codelineno-140-11"><span class="linenos" data-linenos="11 "></span></a><span class="w">    </span><span class="k">assign</span><span class="w"> </span><span class="n">next_state</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">state</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">x</span><span class="p">;</span>
</span><span id="__span-140-12"><a id="__codelineno-140-12" name="__codelineno-140-12"></a><a href="#__codelineno-140-12"><span class="linenos" data-linenos="12 "></span></a>
</span><span id="__span-140-13"><a id="__codelineno-140-13" name="__codelineno-140-13"></a><a href="#__codelineno-140-13"><span class="linenos" data-linenos="13 "></span></a><span class="w">    </span><span class="k">always</span><span class="p">@(</span><span class="k">posedge</span><span class="w"> </span><span class="n">clk</span><span class="p">,</span><span class="k">posedge</span><span class="w"> </span><span class="n">areset</span><span class="p">)</span><span class="k">begin</span>
</span><span id="__span-140-14"><a id="__codelineno-140-14" name="__codelineno-140-14"></a><a href="#__codelineno-140-14"><span class="linenos" data-linenos="14 "></span></a><span class="w">        </span><span class="k">if</span><span class="p">(</span><span class="n">areset</span><span class="p">)</span><span class="w"> </span><span class="n">state</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">idle</span><span class="p">;</span>
</span><span id="__span-140-15"><a id="__codelineno-140-15" name="__codelineno-140-15"></a><a href="#__codelineno-140-15"><span class="linenos" data-linenos="15 "></span></a><span class="w">        </span><span class="k">else</span><span class="w"> </span><span class="n">state</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">next_state</span><span class="p">;</span>
</span><span id="__span-140-16"><a id="__codelineno-140-16" name="__codelineno-140-16"></a><a href="#__codelineno-140-16"><span class="linenos" data-linenos="16 "></span></a><span class="w">    </span><span class="k">end</span>
</span><span id="__span-140-17"><a id="__codelineno-140-17" name="__codelineno-140-17"></a><a href="#__codelineno-140-17"><span class="linenos" data-linenos="17 "></span></a>
</span><span id="__span-140-18"><a id="__codelineno-140-18" name="__codelineno-140-18"></a><a href="#__codelineno-140-18"><span class="linenos" data-linenos="18 "></span></a><span class="w">    </span><span class="k">assign</span><span class="w"> </span><span class="n">z</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">state</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="o">~</span><span class="n">x</span><span class="p">)</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="p">(</span><span class="o">~</span><span class="n">state</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="n">x</span><span class="p">);</span>
</span><span id="__span-140-19"><a id="__codelineno-140-19" name="__codelineno-140-19"></a><a href="#__codelineno-140-19"><span class="linenos" data-linenos="19 "></span></a><span class="k">endmodule</span>
</span></code></pre></div></p>
<hr />
<h5 id="q3a-fsm">Q3a: FSM<a class="headerlink" href="#q3a-fsm" title="Anchor link to this section for reference">⚓︎</a></h5>
<p>Website: <a href="https://hdlbits.01xz.net/wiki/Exams/2014_q3fsm" target="_blank">https://hdlbits.01xz.net/wiki/Exams/2014_q3fsm</a></p>
<p>這題在考怎麼算三個cycle內有兩個1，其實可以開個datapath，然後取xnor和or。然後有個細節要注意，就是當reset和A轉換為B時要將datapath更新成3'b000，這裡得寫<code>else if(state == A) temp &lt;= 3'b000;</code>而不是寫<code>else if(next_state == B) temp &lt;= 3'b000;</code>的原因在於，<code>next_state == B</code>也可能代表<code>next_state == D</code>。
<div class="language-verilog highlight"><span class="filename">Verilog</span><pre><span></span><code><span id="__span-141-1"><a id="__codelineno-141-1" name="__codelineno-141-1"></a><a href="#__codelineno-141-1"><span class="linenos" data-linenos=" 1 "></span></a><span class="k">module</span><span class="w"> </span><span class="n">top_module</span><span class="w"> </span><span class="p">(</span>
</span><span id="__span-141-2"><a id="__codelineno-141-2" name="__codelineno-141-2"></a><a href="#__codelineno-141-2"><span class="linenos" data-linenos=" 2 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">clk</span><span class="p">,</span>
</span><span id="__span-141-3"><a id="__codelineno-141-3" name="__codelineno-141-3"></a><a href="#__codelineno-141-3"><span class="linenos" data-linenos=" 3 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">reset</span><span class="p">,</span><span class="w">   </span><span class="c1">// Synchronous reset</span>
</span><span id="__span-141-4"><a id="__codelineno-141-4" name="__codelineno-141-4"></a><a href="#__codelineno-141-4"><span class="linenos" data-linenos=" 4 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">s</span><span class="p">,</span>
</span><span id="__span-141-5"><a id="__codelineno-141-5" name="__codelineno-141-5"></a><a href="#__codelineno-141-5"><span class="linenos" data-linenos=" 5 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">w</span><span class="p">,</span>
</span><span id="__span-141-6"><a id="__codelineno-141-6" name="__codelineno-141-6"></a><a href="#__codelineno-141-6"><span class="linenos" data-linenos=" 6 "></span></a><span class="w">    </span><span class="k">output</span><span class="w"> </span><span class="n">z</span>
</span><span id="__span-141-7"><a id="__codelineno-141-7" name="__codelineno-141-7"></a><a href="#__codelineno-141-7"><span class="linenos" data-linenos=" 7 "></span></a><span class="p">);</span><span class="w">  </span>
</span><span id="__span-141-8"><a id="__codelineno-141-8" name="__codelineno-141-8"></a><a href="#__codelineno-141-8"><span class="linenos" data-linenos=" 8 "></span></a><span class="w">    </span><span class="kt">reg</span><span class="w"> </span><span class="p">[</span><span class="mh">1</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">state</span><span class="p">,</span><span class="w"> </span><span class="n">next_state</span><span class="p">;</span>
</span><span id="__span-141-9"><a id="__codelineno-141-9" name="__codelineno-141-9"></a><a href="#__codelineno-141-9"><span class="linenos" data-linenos=" 9 "></span></a><span class="w">    </span><span class="k">parameter</span><span class="w"> </span><span class="n">A</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">2</span><span class="mb">&#39;b00</span><span class="p">;</span>
</span><span id="__span-141-10"><a id="__codelineno-141-10" name="__codelineno-141-10"></a><a href="#__codelineno-141-10"><span class="linenos" data-linenos="10 "></span></a><span class="w">    </span><span class="k">parameter</span><span class="w"> </span><span class="n">B</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">2</span><span class="mb">&#39;b01</span><span class="p">;</span>
</span><span id="__span-141-11"><a id="__codelineno-141-11" name="__codelineno-141-11"></a><a href="#__codelineno-141-11"><span class="linenos" data-linenos="11 "></span></a><span class="w">    </span><span class="k">parameter</span><span class="w"> </span><span class="n">C</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">2</span><span class="mb">&#39;b10</span><span class="p">;</span>
</span><span id="__span-141-12"><a id="__codelineno-141-12" name="__codelineno-141-12"></a><a href="#__codelineno-141-12"><span class="linenos" data-linenos="12 "></span></a><span class="w">    </span><span class="k">parameter</span><span class="w"> </span><span class="n">D</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">2</span><span class="mb">&#39;b11</span><span class="p">;</span>
</span><span id="__span-141-13"><a id="__codelineno-141-13" name="__codelineno-141-13"></a><a href="#__codelineno-141-13"><span class="linenos" data-linenos="13 "></span></a>
</span><span id="__span-141-14"><a id="__codelineno-141-14" name="__codelineno-141-14"></a><a href="#__codelineno-141-14"><span class="linenos" data-linenos="14 "></span></a><span class="w">    </span><span class="k">always</span><span class="p">@(</span><span class="o">*</span><span class="p">)</span><span class="k">begin</span>
</span><span id="__span-141-15"><a id="__codelineno-141-15" name="__codelineno-141-15"></a><a href="#__codelineno-141-15"><span class="linenos" data-linenos="15 "></span></a><span class="w">        </span><span class="k">case</span><span class="p">(</span><span class="n">state</span><span class="p">)</span>
</span><span id="__span-141-16"><a id="__codelineno-141-16" name="__codelineno-141-16"></a><a href="#__codelineno-141-16"><span class="linenos" data-linenos="16 "></span></a><span class="w">            </span><span class="nl">A:</span><span class="w"> </span><span class="n">next_state</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">s</span><span class="o">?</span><span class="w"> </span><span class="nl">B:</span><span class="w"> </span><span class="n">A</span><span class="p">;</span>
</span><span id="__span-141-17"><a id="__codelineno-141-17" name="__codelineno-141-17"></a><a href="#__codelineno-141-17"><span class="linenos" data-linenos="17 "></span></a><span class="w">            </span><span class="nl">B:</span><span class="w"> </span><span class="n">next_state</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">C</span><span class="p">;</span>
</span><span id="__span-141-18"><a id="__codelineno-141-18" name="__codelineno-141-18"></a><a href="#__codelineno-141-18"><span class="linenos" data-linenos="18 "></span></a><span class="w">            </span><span class="nl">C:</span><span class="w"> </span><span class="n">next_state</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">D</span><span class="p">;</span>
</span><span id="__span-141-19"><a id="__codelineno-141-19" name="__codelineno-141-19"></a><a href="#__codelineno-141-19"><span class="linenos" data-linenos="19 "></span></a><span class="w">            </span><span class="nl">D:</span><span class="w"> </span><span class="n">next_state</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">B</span><span class="p">;</span>
</span><span id="__span-141-20"><a id="__codelineno-141-20" name="__codelineno-141-20"></a><a href="#__codelineno-141-20"><span class="linenos" data-linenos="20 "></span></a><span class="w">        </span><span class="k">endcase</span>
</span><span id="__span-141-21"><a id="__codelineno-141-21" name="__codelineno-141-21"></a><a href="#__codelineno-141-21"><span class="linenos" data-linenos="21 "></span></a><span class="w">    </span><span class="k">end</span>
</span><span id="__span-141-22"><a id="__codelineno-141-22" name="__codelineno-141-22"></a><a href="#__codelineno-141-22"><span class="linenos" data-linenos="22 "></span></a>
</span><span id="__span-141-23"><a id="__codelineno-141-23" name="__codelineno-141-23"></a><a href="#__codelineno-141-23"><span class="linenos" data-linenos="23 "></span></a><span class="w">    </span><span class="kt">reg</span><span class="w"> </span><span class="p">[</span><span class="mh">2</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="n">temp</span><span class="p">;</span>
</span><span id="__span-141-24"><a id="__codelineno-141-24" name="__codelineno-141-24"></a><a href="#__codelineno-141-24"><span class="linenos" data-linenos="24 "></span></a><span class="w">    </span><span class="k">always</span><span class="p">@(</span><span class="k">posedge</span><span class="w"> </span><span class="n">clk</span><span class="p">)</span><span class="k">begin</span><span class="w"> </span>
</span><span id="__span-141-25"><a id="__codelineno-141-25" name="__codelineno-141-25"></a><a href="#__codelineno-141-25"><span class="linenos" data-linenos="25 "></span></a><span class="w">        </span><span class="k">if</span><span class="p">(</span><span class="n">reset</span><span class="p">)</span><span class="w"> </span><span class="n">state</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">A</span><span class="p">;</span>
</span><span id="__span-141-26"><a id="__codelineno-141-26" name="__codelineno-141-26"></a><a href="#__codelineno-141-26"><span class="linenos" data-linenos="26 "></span></a><span class="w">        </span><span class="k">else</span><span class="w"> </span><span class="n">state</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">next_state</span><span class="p">;</span>
</span><span id="__span-141-27"><a id="__codelineno-141-27" name="__codelineno-141-27"></a><a href="#__codelineno-141-27"><span class="linenos" data-linenos="27 "></span></a><span class="w">    </span><span class="k">end</span>
</span><span id="__span-141-28"><a id="__codelineno-141-28" name="__codelineno-141-28"></a><a href="#__codelineno-141-28"><span class="linenos" data-linenos="28 "></span></a>
</span><span id="__span-141-29"><a id="__codelineno-141-29" name="__codelineno-141-29"></a><a href="#__codelineno-141-29"><span class="linenos" data-linenos="29 "></span></a><span class="w">    </span><span class="k">always</span><span class="p">@(</span><span class="k">posedge</span><span class="w"> </span><span class="n">clk</span><span class="p">)</span><span class="k">begin</span><span class="w"> </span>
</span><span id="__span-141-30"><a id="__codelineno-141-30" name="__codelineno-141-30"></a><a href="#__codelineno-141-30"><span class="linenos" data-linenos="30 "></span></a><span class="w">        </span><span class="k">if</span><span class="p">(</span><span class="n">reset</span><span class="p">)</span><span class="w"> </span><span class="n">temp</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="mh">3</span><span class="mb">&#39;b000</span><span class="p">;</span>
</span><span id="__span-141-31"><a id="__codelineno-141-31" name="__codelineno-141-31"></a><a href="#__codelineno-141-31"><span class="linenos" data-linenos="31 "></span></a><span class="w">        </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="p">(</span><span class="n">state</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">A</span><span class="p">)</span><span class="w"> </span><span class="n">temp</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="mh">3</span><span class="mb">&#39;b000</span><span class="p">;</span>
</span><span id="__span-141-32"><a id="__codelineno-141-32" name="__codelineno-141-32"></a><a href="#__codelineno-141-32"><span class="linenos" data-linenos="32 "></span></a><span class="w">        </span><span class="k">else</span><span class="w"> </span><span class="n">temp</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="p">{</span><span class="n">temp</span><span class="p">[</span><span class="mh">1</span><span class="o">:</span><span class="mh">0</span><span class="p">],</span><span class="n">w</span><span class="p">};</span>
</span><span id="__span-141-33"><a id="__codelineno-141-33" name="__codelineno-141-33"></a><a href="#__codelineno-141-33"><span class="linenos" data-linenos="33 "></span></a><span class="w">    </span><span class="k">end</span>
</span><span id="__span-141-34"><a id="__codelineno-141-34" name="__codelineno-141-34"></a><a href="#__codelineno-141-34"><span class="linenos" data-linenos="34 "></span></a>
</span><span id="__span-141-35"><a id="__codelineno-141-35" name="__codelineno-141-35"></a><a href="#__codelineno-141-35"><span class="linenos" data-linenos="35 "></span></a><span class="w">    </span><span class="k">assign</span><span class="w"> </span><span class="n">z</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">state</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">B</span><span class="p">)</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="o">~</span><span class="p">(</span><span class="o">^</span><span class="n">temp</span><span class="p">)</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="p">(</span><span class="o">|</span><span class="n">temp</span><span class="p">);</span>
</span><span id="__span-141-36"><a id="__codelineno-141-36" name="__codelineno-141-36"></a><a href="#__codelineno-141-36"><span class="linenos" data-linenos="36 "></span></a><span class="k">endmodule</span>
</span></code></pre></div></p>
<hr />
<h5 id="q3b-fsm">Q3b: FSM<a class="headerlink" href="#q3b-fsm" title="Anchor link to this section for reference">⚓︎</a></h5>
<p>Website: <a href="https://hdlbits.01xz.net/wiki/Exams/2014_q3bfsm" target="_blank">https://hdlbits.01xz.net/wiki/Exams/2014_q3bfsm</a></p>
<p>這題就照table寫Moore Machine，沒什麼難度。
<div class="language-verilog highlight"><span class="filename">Verilog</span><pre><span></span><code><span id="__span-142-1"><a id="__codelineno-142-1" name="__codelineno-142-1"></a><a href="#__codelineno-142-1"><span class="linenos" data-linenos=" 1 "></span></a><span class="k">module</span><span class="w"> </span><span class="n">top_module</span><span class="w"> </span><span class="p">(</span>
</span><span id="__span-142-2"><a id="__codelineno-142-2" name="__codelineno-142-2"></a><a href="#__codelineno-142-2"><span class="linenos" data-linenos=" 2 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">clk</span><span class="p">,</span>
</span><span id="__span-142-3"><a id="__codelineno-142-3" name="__codelineno-142-3"></a><a href="#__codelineno-142-3"><span class="linenos" data-linenos=" 3 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">reset</span><span class="p">,</span><span class="w">   </span><span class="c1">// Synchronous reset</span>
</span><span id="__span-142-4"><a id="__codelineno-142-4" name="__codelineno-142-4"></a><a href="#__codelineno-142-4"><span class="linenos" data-linenos=" 4 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">x</span><span class="p">,</span>
</span><span id="__span-142-5"><a id="__codelineno-142-5" name="__codelineno-142-5"></a><a href="#__codelineno-142-5"><span class="linenos" data-linenos=" 5 "></span></a><span class="w">    </span><span class="k">output</span><span class="w"> </span><span class="n">z</span>
</span><span id="__span-142-6"><a id="__codelineno-142-6" name="__codelineno-142-6"></a><a href="#__codelineno-142-6"><span class="linenos" data-linenos=" 6 "></span></a><span class="p">);</span>
</span><span id="__span-142-7"><a id="__codelineno-142-7" name="__codelineno-142-7"></a><a href="#__codelineno-142-7"><span class="linenos" data-linenos=" 7 "></span></a><span class="w">    </span><span class="kt">reg</span><span class="w"> </span><span class="p">[</span><span class="mh">2</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">state</span><span class="p">,</span><span class="w"> </span><span class="n">next_state</span><span class="p">;</span>
</span><span id="__span-142-8"><a id="__codelineno-142-8" name="__codelineno-142-8"></a><a href="#__codelineno-142-8"><span class="linenos" data-linenos=" 8 "></span></a>
</span><span id="__span-142-9"><a id="__codelineno-142-9" name="__codelineno-142-9"></a><a href="#__codelineno-142-9"><span class="linenos" data-linenos=" 9 "></span></a><span class="w">    </span><span class="k">always</span><span class="p">@(</span><span class="o">*</span><span class="p">)</span><span class="k">begin</span>
</span><span id="__span-142-10"><a id="__codelineno-142-10" name="__codelineno-142-10"></a><a href="#__codelineno-142-10"><span class="linenos" data-linenos="10 "></span></a><span class="w">        </span><span class="k">case</span><span class="p">(</span><span class="n">state</span><span class="p">)</span>
</span><span id="__span-142-11"><a id="__codelineno-142-11" name="__codelineno-142-11"></a><a href="#__codelineno-142-11"><span class="linenos" data-linenos="11 "></span></a><span class="w">            </span><span class="mh">3</span><span class="mb">&#39;b000</span><span class="o">:</span><span class="w"> </span><span class="n">next_state</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">x</span><span class="o">?</span><span class="w"> </span><span class="mh">3</span><span class="mb">&#39;b001</span><span class="o">:</span><span class="w"> </span><span class="mh">3</span><span class="mb">&#39;b000</span><span class="p">;</span>
</span><span id="__span-142-12"><a id="__codelineno-142-12" name="__codelineno-142-12"></a><a href="#__codelineno-142-12"><span class="linenos" data-linenos="12 "></span></a><span class="w">            </span><span class="mh">3</span><span class="mb">&#39;b001</span><span class="o">:</span><span class="w"> </span><span class="n">next_state</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">x</span><span class="o">?</span><span class="w"> </span><span class="mh">3</span><span class="mb">&#39;b100</span><span class="o">:</span><span class="w"> </span><span class="mh">3</span><span class="mb">&#39;b001</span><span class="p">;</span>
</span><span id="__span-142-13"><a id="__codelineno-142-13" name="__codelineno-142-13"></a><a href="#__codelineno-142-13"><span class="linenos" data-linenos="13 "></span></a><span class="w">            </span><span class="mh">3</span><span class="mb">&#39;b010</span><span class="o">:</span><span class="w"> </span><span class="n">next_state</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">x</span><span class="o">?</span><span class="w"> </span><span class="mh">3</span><span class="mb">&#39;b001</span><span class="o">:</span><span class="w"> </span><span class="mh">3</span><span class="mb">&#39;b010</span><span class="p">;</span>
</span><span id="__span-142-14"><a id="__codelineno-142-14" name="__codelineno-142-14"></a><a href="#__codelineno-142-14"><span class="linenos" data-linenos="14 "></span></a><span class="w">            </span><span class="mh">3</span><span class="mb">&#39;b011</span><span class="o">:</span><span class="w"> </span><span class="n">next_state</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">x</span><span class="o">?</span><span class="w"> </span><span class="mh">3</span><span class="mb">&#39;b010</span><span class="o">:</span><span class="w"> </span><span class="mh">3</span><span class="mb">&#39;b001</span><span class="p">;</span>
</span><span id="__span-142-15"><a id="__codelineno-142-15" name="__codelineno-142-15"></a><a href="#__codelineno-142-15"><span class="linenos" data-linenos="15 "></span></a><span class="w">            </span><span class="mh">3</span><span class="mb">&#39;b100</span><span class="o">:</span><span class="w"> </span><span class="n">next_state</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">x</span><span class="o">?</span><span class="w"> </span><span class="mh">3</span><span class="mb">&#39;b100</span><span class="o">:</span><span class="w"> </span><span class="mh">3</span><span class="mb">&#39;b011</span><span class="p">;</span>
</span><span id="__span-142-16"><a id="__codelineno-142-16" name="__codelineno-142-16"></a><a href="#__codelineno-142-16"><span class="linenos" data-linenos="16 "></span></a><span class="w">            </span><span class="k">default</span><span class="o">:</span><span class="w"> </span><span class="n">next_state</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">3</span><span class="p">&#39;</span><span class="n">bxxx</span><span class="p">;</span>
</span><span id="__span-142-17"><a id="__codelineno-142-17" name="__codelineno-142-17"></a><a href="#__codelineno-142-17"><span class="linenos" data-linenos="17 "></span></a><span class="w">        </span><span class="k">endcase</span>
</span><span id="__span-142-18"><a id="__codelineno-142-18" name="__codelineno-142-18"></a><a href="#__codelineno-142-18"><span class="linenos" data-linenos="18 "></span></a><span class="w">    </span><span class="k">end</span>
</span><span id="__span-142-19"><a id="__codelineno-142-19" name="__codelineno-142-19"></a><a href="#__codelineno-142-19"><span class="linenos" data-linenos="19 "></span></a>
</span><span id="__span-142-20"><a id="__codelineno-142-20" name="__codelineno-142-20"></a><a href="#__codelineno-142-20"><span class="linenos" data-linenos="20 "></span></a><span class="w">    </span><span class="k">always</span><span class="p">@(</span><span class="k">posedge</span><span class="w"> </span><span class="n">clk</span><span class="p">)</span><span class="k">begin</span>
</span><span id="__span-142-21"><a id="__codelineno-142-21" name="__codelineno-142-21"></a><a href="#__codelineno-142-21"><span class="linenos" data-linenos="21 "></span></a><span class="w">        </span><span class="k">if</span><span class="p">(</span><span class="n">reset</span><span class="p">)</span><span class="w"> </span><span class="n">state</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="mh">3</span><span class="mb">&#39;b000</span><span class="p">;</span>
</span><span id="__span-142-22"><a id="__codelineno-142-22" name="__codelineno-142-22"></a><a href="#__codelineno-142-22"><span class="linenos" data-linenos="22 "></span></a><span class="w">        </span><span class="k">else</span><span class="w"> </span><span class="n">state</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">next_state</span><span class="p">;</span>
</span><span id="__span-142-23"><a id="__codelineno-142-23" name="__codelineno-142-23"></a><a href="#__codelineno-142-23"><span class="linenos" data-linenos="23 "></span></a><span class="w">    </span><span class="k">end</span>
</span><span id="__span-142-24"><a id="__codelineno-142-24" name="__codelineno-142-24"></a><a href="#__codelineno-142-24"><span class="linenos" data-linenos="24 "></span></a>
</span><span id="__span-142-25"><a id="__codelineno-142-25" name="__codelineno-142-25"></a><a href="#__codelineno-142-25"><span class="linenos" data-linenos="25 "></span></a><span class="w">    </span><span class="k">assign</span><span class="w"> </span><span class="n">z</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="o">~</span><span class="n">state</span><span class="p">[</span><span class="mh">2</span><span class="p">]</span><span class="o">&amp;</span><span class="w"> </span><span class="n">state</span><span class="p">[</span><span class="mh">1</span><span class="p">]</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="n">state</span><span class="p">[</span><span class="mh">0</span><span class="p">])</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="p">(</span><span class="n">state</span><span class="p">[</span><span class="mh">2</span><span class="p">]</span><span class="o">&amp;</span><span class="w"> </span><span class="o">~</span><span class="n">state</span><span class="p">[</span><span class="mh">1</span><span class="p">]</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="o">~</span><span class="n">state</span><span class="p">[</span><span class="mh">0</span><span class="p">]);</span>
</span><span id="__span-142-26"><a id="__codelineno-142-26" name="__codelineno-142-26"></a><a href="#__codelineno-142-26"><span class="linenos" data-linenos="26 "></span></a><span class="k">endmodule</span>
</span></code></pre></div></p>
<hr />
<h5 id="q3c-fsm-logic">Q3c: FSM logic<a class="headerlink" href="#q3c-fsm-logic" title="Anchor link to this section for reference">⚓︎</a></h5>
<p>Website: <a href="https://hdlbits.01xz.net/wiki/Exams/2014_q3c" target="_blank">https://hdlbits.01xz.net/wiki/Exams/2014_q3c</a></p>
<p>這題因為有input clk，差點寫矇了，實際上因為這題的y是input給的，所以完全不用使用sequential block，也就用不上clk。
<div class="language-verilog highlight"><span class="filename">Verilog</span><pre><span></span><code><span id="__span-143-1"><a id="__codelineno-143-1" name="__codelineno-143-1"></a><a href="#__codelineno-143-1"><span class="linenos" data-linenos=" 1 "></span></a><span class="k">module</span><span class="w"> </span><span class="n">top_module</span><span class="w"> </span><span class="p">(</span>
</span><span id="__span-143-2"><a id="__codelineno-143-2" name="__codelineno-143-2"></a><a href="#__codelineno-143-2"><span class="linenos" data-linenos=" 2 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">clk</span><span class="p">,</span>
</span><span id="__span-143-3"><a id="__codelineno-143-3" name="__codelineno-143-3"></a><a href="#__codelineno-143-3"><span class="linenos" data-linenos=" 3 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="p">[</span><span class="mh">2</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">y</span><span class="p">,</span>
</span><span id="__span-143-4"><a id="__codelineno-143-4" name="__codelineno-143-4"></a><a href="#__codelineno-143-4"><span class="linenos" data-linenos=" 4 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">x</span><span class="p">,</span>
</span><span id="__span-143-5"><a id="__codelineno-143-5" name="__codelineno-143-5"></a><a href="#__codelineno-143-5"><span class="linenos" data-linenos=" 5 "></span></a><span class="w">    </span><span class="k">output</span><span class="w"> </span><span class="n">Y0</span><span class="p">,</span>
</span><span id="__span-143-6"><a id="__codelineno-143-6" name="__codelineno-143-6"></a><a href="#__codelineno-143-6"><span class="linenos" data-linenos=" 6 "></span></a><span class="w">    </span><span class="k">output</span><span class="w"> </span><span class="n">z</span>
</span><span id="__span-143-7"><a id="__codelineno-143-7" name="__codelineno-143-7"></a><a href="#__codelineno-143-7"><span class="linenos" data-linenos=" 7 "></span></a><span class="p">);</span>
</span><span id="__span-143-8"><a id="__codelineno-143-8" name="__codelineno-143-8"></a><a href="#__codelineno-143-8"><span class="linenos" data-linenos=" 8 "></span></a><span class="w">    </span><span class="kt">reg</span><span class="w"> </span><span class="p">[</span><span class="mh">2</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">next_state</span><span class="p">;</span>
</span><span id="__span-143-9"><a id="__codelineno-143-9" name="__codelineno-143-9"></a><a href="#__codelineno-143-9"><span class="linenos" data-linenos=" 9 "></span></a>
</span><span id="__span-143-10"><a id="__codelineno-143-10" name="__codelineno-143-10"></a><a href="#__codelineno-143-10"><span class="linenos" data-linenos="10 "></span></a><span class="w">    </span><span class="k">always</span><span class="p">@(</span><span class="o">*</span><span class="p">)</span><span class="k">begin</span>
</span><span id="__span-143-11"><a id="__codelineno-143-11" name="__codelineno-143-11"></a><a href="#__codelineno-143-11"><span class="linenos" data-linenos="11 "></span></a><span class="w">        </span><span class="k">case</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>
</span><span id="__span-143-12"><a id="__codelineno-143-12" name="__codelineno-143-12"></a><a href="#__codelineno-143-12"><span class="linenos" data-linenos="12 "></span></a><span class="w">            </span><span class="mh">3</span><span class="mb">&#39;b000</span><span class="o">:</span><span class="w"> </span><span class="n">next_state</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">x</span><span class="o">?</span><span class="w"> </span><span class="mh">3</span><span class="mb">&#39;b001</span><span class="o">:</span><span class="w"> </span><span class="mh">3</span><span class="mb">&#39;b000</span><span class="p">;</span>
</span><span id="__span-143-13"><a id="__codelineno-143-13" name="__codelineno-143-13"></a><a href="#__codelineno-143-13"><span class="linenos" data-linenos="13 "></span></a><span class="w">            </span><span class="mh">3</span><span class="mb">&#39;b001</span><span class="o">:</span><span class="w"> </span><span class="n">next_state</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">x</span><span class="o">?</span><span class="w"> </span><span class="mh">3</span><span class="mb">&#39;b100</span><span class="o">:</span><span class="w"> </span><span class="mh">3</span><span class="mb">&#39;b001</span><span class="p">;</span>
</span><span id="__span-143-14"><a id="__codelineno-143-14" name="__codelineno-143-14"></a><a href="#__codelineno-143-14"><span class="linenos" data-linenos="14 "></span></a><span class="w">            </span><span class="mh">3</span><span class="mb">&#39;b010</span><span class="o">:</span><span class="w"> </span><span class="n">next_state</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">x</span><span class="o">?</span><span class="w"> </span><span class="mh">3</span><span class="mb">&#39;b001</span><span class="o">:</span><span class="w"> </span><span class="mh">3</span><span class="mb">&#39;b010</span><span class="p">;</span>
</span><span id="__span-143-15"><a id="__codelineno-143-15" name="__codelineno-143-15"></a><a href="#__codelineno-143-15"><span class="linenos" data-linenos="15 "></span></a><span class="w">            </span><span class="mh">3</span><span class="mb">&#39;b011</span><span class="o">:</span><span class="w"> </span><span class="n">next_state</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">x</span><span class="o">?</span><span class="w"> </span><span class="mh">3</span><span class="mb">&#39;b010</span><span class="o">:</span><span class="w"> </span><span class="mh">3</span><span class="mb">&#39;b001</span><span class="p">;</span>
</span><span id="__span-143-16"><a id="__codelineno-143-16" name="__codelineno-143-16"></a><a href="#__codelineno-143-16"><span class="linenos" data-linenos="16 "></span></a><span class="w">            </span><span class="mh">3</span><span class="mb">&#39;b100</span><span class="o">:</span><span class="w"> </span><span class="n">next_state</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">x</span><span class="o">?</span><span class="w"> </span><span class="mh">3</span><span class="mb">&#39;b100</span><span class="o">:</span><span class="w"> </span><span class="mh">3</span><span class="mb">&#39;b011</span><span class="p">;</span>
</span><span id="__span-143-17"><a id="__codelineno-143-17" name="__codelineno-143-17"></a><a href="#__codelineno-143-17"><span class="linenos" data-linenos="17 "></span></a><span class="w">            </span><span class="k">default</span><span class="o">:</span><span class="w"> </span><span class="n">next_state</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">3</span><span class="p">&#39;</span><span class="n">bxxx</span><span class="p">;</span>
</span><span id="__span-143-18"><a id="__codelineno-143-18" name="__codelineno-143-18"></a><a href="#__codelineno-143-18"><span class="linenos" data-linenos="18 "></span></a><span class="w">        </span><span class="k">endcase</span>
</span><span id="__span-143-19"><a id="__codelineno-143-19" name="__codelineno-143-19"></a><a href="#__codelineno-143-19"><span class="linenos" data-linenos="19 "></span></a><span class="w">    </span><span class="k">end</span>
</span><span id="__span-143-20"><a id="__codelineno-143-20" name="__codelineno-143-20"></a><a href="#__codelineno-143-20"><span class="linenos" data-linenos="20 "></span></a>
</span><span id="__span-143-21"><a id="__codelineno-143-21" name="__codelineno-143-21"></a><a href="#__codelineno-143-21"><span class="linenos" data-linenos="21 "></span></a><span class="w">    </span><span class="k">assign</span><span class="w"> </span><span class="n">Y0</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">next_state</span><span class="p">[</span><span class="mh">0</span><span class="p">];</span>
</span><span id="__span-143-22"><a id="__codelineno-143-22" name="__codelineno-143-22"></a><a href="#__codelineno-143-22"><span class="linenos" data-linenos="22 "></span></a><span class="w">    </span><span class="k">assign</span><span class="w"> </span><span class="n">z</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="o">~</span><span class="n">y</span><span class="p">[</span><span class="mh">2</span><span class="p">]</span><span class="o">&amp;</span><span class="w"> </span><span class="n">y</span><span class="p">[</span><span class="mh">1</span><span class="p">]</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="n">y</span><span class="p">[</span><span class="mh">0</span><span class="p">])</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="p">(</span><span class="n">y</span><span class="p">[</span><span class="mh">2</span><span class="p">]</span><span class="o">&amp;</span><span class="w"> </span><span class="o">~</span><span class="n">y</span><span class="p">[</span><span class="mh">1</span><span class="p">]</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="o">~</span><span class="n">y</span><span class="p">[</span><span class="mh">0</span><span class="p">]);</span>
</span><span id="__span-143-23"><a id="__codelineno-143-23" name="__codelineno-143-23"></a><a href="#__codelineno-143-23"><span class="linenos" data-linenos="23 "></span></a><span class="k">endmodule</span>
</span></code></pre></div></p>
<hr />
<h5 id="q6b-fsm-next-state-logic">Q6b: FSM next-state logic<a class="headerlink" href="#q6b-fsm-next-state-logic" title="Anchor link to this section for reference">⚓︎</a></h5>
<p>Website: <a href="https://hdlbits.01xz.net/wiki/Exams/m2014_q6b" target="_blank">https://hdlbits.01xz.net/wiki/Exams/m2014_q6b</a></p>
<p>這題就照著FSM圖表寫完code就結束了，水題一題。
<div class="language-verilog highlight"><span class="filename">Verilog</span><pre><span></span><code><span id="__span-144-1"><a id="__codelineno-144-1" name="__codelineno-144-1"></a><a href="#__codelineno-144-1"><span class="linenos" data-linenos=" 1 "></span></a><span class="k">module</span><span class="w"> </span><span class="n">top_module</span><span class="w"> </span><span class="p">(</span>
</span><span id="__span-144-2"><a id="__codelineno-144-2" name="__codelineno-144-2"></a><a href="#__codelineno-144-2"><span class="linenos" data-linenos=" 2 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="p">[</span><span class="mh">3</span><span class="o">:</span><span class="mh">1</span><span class="p">]</span><span class="w"> </span><span class="n">y</span><span class="p">,</span>
</span><span id="__span-144-3"><a id="__codelineno-144-3" name="__codelineno-144-3"></a><a href="#__codelineno-144-3"><span class="linenos" data-linenos=" 3 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">w</span><span class="p">,</span>
</span><span id="__span-144-4"><a id="__codelineno-144-4" name="__codelineno-144-4"></a><a href="#__codelineno-144-4"><span class="linenos" data-linenos=" 4 "></span></a><span class="w">    </span><span class="k">output</span><span class="w"> </span><span class="n">Y2</span><span class="p">);</span>
</span><span id="__span-144-5"><a id="__codelineno-144-5" name="__codelineno-144-5"></a><a href="#__codelineno-144-5"><span class="linenos" data-linenos=" 5 "></span></a><span class="w">    </span><span class="k">parameter</span><span class="w"> </span><span class="n">A</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">3</span><span class="mi">&#39;d0</span><span class="p">;</span>
</span><span id="__span-144-6"><a id="__codelineno-144-6" name="__codelineno-144-6"></a><a href="#__codelineno-144-6"><span class="linenos" data-linenos=" 6 "></span></a><span class="w">    </span><span class="k">parameter</span><span class="w"> </span><span class="n">B</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">3</span><span class="mi">&#39;d1</span><span class="p">;</span>
</span><span id="__span-144-7"><a id="__codelineno-144-7" name="__codelineno-144-7"></a><a href="#__codelineno-144-7"><span class="linenos" data-linenos=" 7 "></span></a><span class="w">    </span><span class="k">parameter</span><span class="w"> </span><span class="n">C</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">3</span><span class="mi">&#39;d2</span><span class="p">;</span>
</span><span id="__span-144-8"><a id="__codelineno-144-8" name="__codelineno-144-8"></a><a href="#__codelineno-144-8"><span class="linenos" data-linenos=" 8 "></span></a><span class="w">    </span><span class="k">parameter</span><span class="w"> </span><span class="n">D</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">3</span><span class="mi">&#39;d3</span><span class="p">;</span>
</span><span id="__span-144-9"><a id="__codelineno-144-9" name="__codelineno-144-9"></a><a href="#__codelineno-144-9"><span class="linenos" data-linenos=" 9 "></span></a><span class="w">    </span><span class="k">parameter</span><span class="w"> </span><span class="n">E</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">3</span><span class="mi">&#39;d4</span><span class="p">;</span>
</span><span id="__span-144-10"><a id="__codelineno-144-10" name="__codelineno-144-10"></a><a href="#__codelineno-144-10"><span class="linenos" data-linenos="10 "></span></a><span class="w">    </span><span class="k">parameter</span><span class="w"> </span><span class="n">F</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">3</span><span class="mi">&#39;d5</span><span class="p">;</span>
</span><span id="__span-144-11"><a id="__codelineno-144-11" name="__codelineno-144-11"></a><a href="#__codelineno-144-11"><span class="linenos" data-linenos="11 "></span></a>
</span><span id="__span-144-12"><a id="__codelineno-144-12" name="__codelineno-144-12"></a><a href="#__codelineno-144-12"><span class="linenos" data-linenos="12 "></span></a><span class="w">    </span><span class="kt">reg</span><span class="w"> </span><span class="p">[</span><span class="mh">3</span><span class="o">:</span><span class="mh">1</span><span class="p">]</span><span class="n">next_state</span><span class="p">;</span>
</span><span id="__span-144-13"><a id="__codelineno-144-13" name="__codelineno-144-13"></a><a href="#__codelineno-144-13"><span class="linenos" data-linenos="13 "></span></a><span class="w">    </span><span class="k">always</span><span class="p">@(</span><span class="o">*</span><span class="p">)</span><span class="k">begin</span>
</span><span id="__span-144-14"><a id="__codelineno-144-14" name="__codelineno-144-14"></a><a href="#__codelineno-144-14"><span class="linenos" data-linenos="14 "></span></a><span class="w">        </span><span class="k">case</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>
</span><span id="__span-144-15"><a id="__codelineno-144-15" name="__codelineno-144-15"></a><a href="#__codelineno-144-15"><span class="linenos" data-linenos="15 "></span></a><span class="w">            </span><span class="nl">A:</span><span class="w"> </span><span class="n">next_state</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">w</span><span class="o">?</span><span class="w"> </span><span class="nl">A:</span><span class="w"> </span><span class="n">B</span><span class="p">;</span>
</span><span id="__span-144-16"><a id="__codelineno-144-16" name="__codelineno-144-16"></a><a href="#__codelineno-144-16"><span class="linenos" data-linenos="16 "></span></a><span class="w">            </span><span class="nl">B:</span><span class="w"> </span><span class="n">next_state</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">w</span><span class="o">?</span><span class="w"> </span><span class="nl">D:</span><span class="w"> </span><span class="n">C</span><span class="p">;</span>
</span><span id="__span-144-17"><a id="__codelineno-144-17" name="__codelineno-144-17"></a><a href="#__codelineno-144-17"><span class="linenos" data-linenos="17 "></span></a><span class="w">            </span><span class="nl">C:</span><span class="w"> </span><span class="n">next_state</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">w</span><span class="o">?</span><span class="w"> </span><span class="nl">D:</span><span class="w"> </span><span class="n">E</span><span class="p">;</span>
</span><span id="__span-144-18"><a id="__codelineno-144-18" name="__codelineno-144-18"></a><a href="#__codelineno-144-18"><span class="linenos" data-linenos="18 "></span></a><span class="w">            </span><span class="nl">D:</span><span class="w"> </span><span class="n">next_state</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">w</span><span class="o">?</span><span class="w"> </span><span class="nl">A:</span><span class="w"> </span><span class="n">F</span><span class="p">;</span>
</span><span id="__span-144-19"><a id="__codelineno-144-19" name="__codelineno-144-19"></a><a href="#__codelineno-144-19"><span class="linenos" data-linenos="19 "></span></a><span class="w">            </span><span class="nl">E:</span><span class="w"> </span><span class="n">next_state</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">w</span><span class="o">?</span><span class="w"> </span><span class="nl">D:</span><span class="w"> </span><span class="n">E</span><span class="p">;</span>
</span><span id="__span-144-20"><a id="__codelineno-144-20" name="__codelineno-144-20"></a><a href="#__codelineno-144-20"><span class="linenos" data-linenos="20 "></span></a><span class="w">            </span><span class="nl">F:</span><span class="w"> </span><span class="n">next_state</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">w</span><span class="o">?</span><span class="w"> </span><span class="nl">D:</span><span class="w"> </span><span class="n">C</span><span class="p">;</span>
</span><span id="__span-144-21"><a id="__codelineno-144-21" name="__codelineno-144-21"></a><a href="#__codelineno-144-21"><span class="linenos" data-linenos="21 "></span></a><span class="w">            </span><span class="k">default</span><span class="o">:</span><span class="w"> </span><span class="n">next_state</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">3</span><span class="p">&#39;</span><span class="n">bxxx</span><span class="p">;</span>
</span><span id="__span-144-22"><a id="__codelineno-144-22" name="__codelineno-144-22"></a><a href="#__codelineno-144-22"><span class="linenos" data-linenos="22 "></span></a><span class="w">        </span><span class="k">endcase</span>
</span><span id="__span-144-23"><a id="__codelineno-144-23" name="__codelineno-144-23"></a><a href="#__codelineno-144-23"><span class="linenos" data-linenos="23 "></span></a><span class="w">    </span><span class="k">end</span>
</span><span id="__span-144-24"><a id="__codelineno-144-24" name="__codelineno-144-24"></a><a href="#__codelineno-144-24"><span class="linenos" data-linenos="24 "></span></a><span class="w">    </span><span class="k">assign</span><span class="w"> </span><span class="n">Y2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">next_state</span><span class="p">[</span><span class="mh">2</span><span class="p">];</span>
</span><span id="__span-144-25"><a id="__codelineno-144-25" name="__codelineno-144-25"></a><a href="#__codelineno-144-25"><span class="linenos" data-linenos="25 "></span></a><span class="k">endmodule</span>
</span></code></pre></div></p>
<hr />
<h5 id="q6c-fsm-one-hot-next-state-logic">Q6c: FSM one-hot next-state logic<a class="headerlink" href="#q6c-fsm-one-hot-next-state-logic" title="Anchor link to this section for reference">⚓︎</a></h5>
<p>Website: <a href="https://hdlbits.01xz.net/wiki/Exams/m2014_q6c" target="_blank">https://hdlbits.01xz.net/wiki/Exams/m2014_q6c</a></p>
<p>這題跟上題很像，不過改成用assign完成，有關one hot vector一律建議使用assign。
<div class="language-verilog highlight"><span class="filename">Verilog</span><pre><span></span><code><span id="__span-145-1"><a id="__codelineno-145-1" name="__codelineno-145-1"></a><a href="#__codelineno-145-1"><span class="linenos" data-linenos="1 "></span></a><span class="k">module</span><span class="w"> </span><span class="n">top_module</span><span class="w"> </span><span class="p">(</span>
</span><span id="__span-145-2"><a id="__codelineno-145-2" name="__codelineno-145-2"></a><a href="#__codelineno-145-2"><span class="linenos" data-linenos="2 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="p">[</span><span class="mh">6</span><span class="o">:</span><span class="mh">1</span><span class="p">]</span><span class="w"> </span><span class="n">y</span><span class="p">,</span>
</span><span id="__span-145-3"><a id="__codelineno-145-3" name="__codelineno-145-3"></a><a href="#__codelineno-145-3"><span class="linenos" data-linenos="3 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">w</span><span class="p">,</span>
</span><span id="__span-145-4"><a id="__codelineno-145-4" name="__codelineno-145-4"></a><a href="#__codelineno-145-4"><span class="linenos" data-linenos="4 "></span></a><span class="w">    </span><span class="k">output</span><span class="w"> </span><span class="n">Y2</span><span class="p">,</span>
</span><span id="__span-145-5"><a id="__codelineno-145-5" name="__codelineno-145-5"></a><a href="#__codelineno-145-5"><span class="linenos" data-linenos="5 "></span></a><span class="w">    </span><span class="k">output</span><span class="w"> </span><span class="n">Y4</span><span class="p">);</span><span class="w">   </span>
</span><span id="__span-145-6"><a id="__codelineno-145-6" name="__codelineno-145-6"></a><a href="#__codelineno-145-6"><span class="linenos" data-linenos="6 "></span></a><span class="w">    </span><span class="k">assign</span><span class="w"> </span><span class="n">Y2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">~</span><span class="n">w</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="n">y</span><span class="p">[</span><span class="mh">1</span><span class="p">];</span>
</span><span id="__span-145-7"><a id="__codelineno-145-7" name="__codelineno-145-7"></a><a href="#__codelineno-145-7"><span class="linenos" data-linenos="7 "></span></a><span class="w">    </span><span class="k">assign</span><span class="w"> </span><span class="n">Y4</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">w</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="p">(</span><span class="n">y</span><span class="p">[</span><span class="mh">2</span><span class="p">]</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">y</span><span class="p">[</span><span class="mh">3</span><span class="p">]</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">y</span><span class="p">[</span><span class="mh">5</span><span class="p">]</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">y</span><span class="p">[</span><span class="mh">6</span><span class="p">]);</span>
</span><span id="__span-145-8"><a id="__codelineno-145-8" name="__codelineno-145-8"></a><a href="#__codelineno-145-8"><span class="linenos" data-linenos="8 "></span></a><span class="k">endmodule</span>
</span></code></pre></div></p>
<hr />
<h5 id="q6-fsm">Q6: FSM<a class="headerlink" href="#q6-fsm" title="Anchor link to this section for reference">⚓︎</a></h5>
<p>Website: <a href="https://hdlbits.01xz.net/wiki/Exams/m2014_q6" target="_blank">https://hdlbits.01xz.net/wiki/Exams/m2014_q6</a></p>
<p>這題就是上上題的完整版，把sequential logic寫完就結束了。
<div class="language-verilog highlight"><span class="filename">Verilog</span><pre><span></span><code><span id="__span-146-1"><a id="__codelineno-146-1" name="__codelineno-146-1"></a><a href="#__codelineno-146-1"><span class="linenos" data-linenos=" 1 "></span></a><span class="k">module</span><span class="w"> </span><span class="n">top_module</span><span class="w"> </span><span class="p">(</span>
</span><span id="__span-146-2"><a id="__codelineno-146-2" name="__codelineno-146-2"></a><a href="#__codelineno-146-2"><span class="linenos" data-linenos=" 2 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">clk</span><span class="p">,</span>
</span><span id="__span-146-3"><a id="__codelineno-146-3" name="__codelineno-146-3"></a><a href="#__codelineno-146-3"><span class="linenos" data-linenos=" 3 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">reset</span><span class="p">,</span><span class="w">     </span><span class="c1">// synchronous reset</span>
</span><span id="__span-146-4"><a id="__codelineno-146-4" name="__codelineno-146-4"></a><a href="#__codelineno-146-4"><span class="linenos" data-linenos=" 4 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">w</span><span class="p">,</span>
</span><span id="__span-146-5"><a id="__codelineno-146-5" name="__codelineno-146-5"></a><a href="#__codelineno-146-5"><span class="linenos" data-linenos=" 5 "></span></a><span class="w">    </span><span class="k">output</span><span class="w"> </span><span class="n">z</span><span class="p">);</span>
</span><span id="__span-146-6"><a id="__codelineno-146-6" name="__codelineno-146-6"></a><a href="#__codelineno-146-6"><span class="linenos" data-linenos=" 6 "></span></a><span class="w">    </span><span class="k">parameter</span><span class="w"> </span><span class="n">A</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">3</span><span class="mi">&#39;d0</span><span class="p">;</span>
</span><span id="__span-146-7"><a id="__codelineno-146-7" name="__codelineno-146-7"></a><a href="#__codelineno-146-7"><span class="linenos" data-linenos=" 7 "></span></a><span class="w">    </span><span class="k">parameter</span><span class="w"> </span><span class="n">B</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">3</span><span class="mi">&#39;d1</span><span class="p">;</span>
</span><span id="__span-146-8"><a id="__codelineno-146-8" name="__codelineno-146-8"></a><a href="#__codelineno-146-8"><span class="linenos" data-linenos=" 8 "></span></a><span class="w">    </span><span class="k">parameter</span><span class="w"> </span><span class="n">C</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">3</span><span class="mi">&#39;d2</span><span class="p">;</span>
</span><span id="__span-146-9"><a id="__codelineno-146-9" name="__codelineno-146-9"></a><a href="#__codelineno-146-9"><span class="linenos" data-linenos=" 9 "></span></a><span class="w">    </span><span class="k">parameter</span><span class="w"> </span><span class="n">D</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">3</span><span class="mi">&#39;d3</span><span class="p">;</span>
</span><span id="__span-146-10"><a id="__codelineno-146-10" name="__codelineno-146-10"></a><a href="#__codelineno-146-10"><span class="linenos" data-linenos="10 "></span></a><span class="w">    </span><span class="k">parameter</span><span class="w"> </span><span class="n">E</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">3</span><span class="mi">&#39;d4</span><span class="p">;</span>
</span><span id="__span-146-11"><a id="__codelineno-146-11" name="__codelineno-146-11"></a><a href="#__codelineno-146-11"><span class="linenos" data-linenos="11 "></span></a><span class="w">    </span><span class="k">parameter</span><span class="w"> </span><span class="n">F</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">3</span><span class="mi">&#39;d5</span><span class="p">;</span>
</span><span id="__span-146-12"><a id="__codelineno-146-12" name="__codelineno-146-12"></a><a href="#__codelineno-146-12"><span class="linenos" data-linenos="12 "></span></a>
</span><span id="__span-146-13"><a id="__codelineno-146-13" name="__codelineno-146-13"></a><a href="#__codelineno-146-13"><span class="linenos" data-linenos="13 "></span></a><span class="w">    </span><span class="kt">reg</span><span class="w"> </span><span class="p">[</span><span class="mh">2</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">state</span><span class="p">,</span><span class="n">next_state</span><span class="p">;</span>
</span><span id="__span-146-14"><a id="__codelineno-146-14" name="__codelineno-146-14"></a><a href="#__codelineno-146-14"><span class="linenos" data-linenos="14 "></span></a><span class="w">    </span><span class="k">always</span><span class="p">@(</span><span class="o">*</span><span class="p">)</span><span class="k">begin</span>
</span><span id="__span-146-15"><a id="__codelineno-146-15" name="__codelineno-146-15"></a><a href="#__codelineno-146-15"><span class="linenos" data-linenos="15 "></span></a><span class="w">        </span><span class="k">case</span><span class="p">(</span><span class="n">state</span><span class="p">)</span>
</span><span id="__span-146-16"><a id="__codelineno-146-16" name="__codelineno-146-16"></a><a href="#__codelineno-146-16"><span class="linenos" data-linenos="16 "></span></a><span class="w">            </span><span class="nl">A:</span><span class="w"> </span><span class="n">next_state</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">w</span><span class="o">?</span><span class="w"> </span><span class="nl">A:</span><span class="w"> </span><span class="n">B</span><span class="p">;</span>
</span><span id="__span-146-17"><a id="__codelineno-146-17" name="__codelineno-146-17"></a><a href="#__codelineno-146-17"><span class="linenos" data-linenos="17 "></span></a><span class="w">            </span><span class="nl">B:</span><span class="w"> </span><span class="n">next_state</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">w</span><span class="o">?</span><span class="w"> </span><span class="nl">D:</span><span class="w"> </span><span class="n">C</span><span class="p">;</span>
</span><span id="__span-146-18"><a id="__codelineno-146-18" name="__codelineno-146-18"></a><a href="#__codelineno-146-18"><span class="linenos" data-linenos="18 "></span></a><span class="w">            </span><span class="nl">C:</span><span class="w"> </span><span class="n">next_state</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">w</span><span class="o">?</span><span class="w"> </span><span class="nl">D:</span><span class="w"> </span><span class="n">E</span><span class="p">;</span>
</span><span id="__span-146-19"><a id="__codelineno-146-19" name="__codelineno-146-19"></a><a href="#__codelineno-146-19"><span class="linenos" data-linenos="19 "></span></a><span class="w">            </span><span class="nl">D:</span><span class="w"> </span><span class="n">next_state</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">w</span><span class="o">?</span><span class="w"> </span><span class="nl">A:</span><span class="w"> </span><span class="n">F</span><span class="p">;</span>
</span><span id="__span-146-20"><a id="__codelineno-146-20" name="__codelineno-146-20"></a><a href="#__codelineno-146-20"><span class="linenos" data-linenos="20 "></span></a><span class="w">            </span><span class="nl">E:</span><span class="w"> </span><span class="n">next_state</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">w</span><span class="o">?</span><span class="w"> </span><span class="nl">D:</span><span class="w"> </span><span class="n">E</span><span class="p">;</span>
</span><span id="__span-146-21"><a id="__codelineno-146-21" name="__codelineno-146-21"></a><a href="#__codelineno-146-21"><span class="linenos" data-linenos="21 "></span></a><span class="w">            </span><span class="nl">F:</span><span class="w"> </span><span class="n">next_state</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">w</span><span class="o">?</span><span class="w"> </span><span class="nl">D:</span><span class="w"> </span><span class="n">C</span><span class="p">;</span>
</span><span id="__span-146-22"><a id="__codelineno-146-22" name="__codelineno-146-22"></a><a href="#__codelineno-146-22"><span class="linenos" data-linenos="22 "></span></a><span class="w">            </span><span class="k">default</span><span class="o">:</span><span class="w"> </span><span class="n">next_state</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">3</span><span class="p">&#39;</span><span class="n">bxxx</span><span class="p">;</span>
</span><span id="__span-146-23"><a id="__codelineno-146-23" name="__codelineno-146-23"></a><a href="#__codelineno-146-23"><span class="linenos" data-linenos="23 "></span></a><span class="w">        </span><span class="k">endcase</span>
</span><span id="__span-146-24"><a id="__codelineno-146-24" name="__codelineno-146-24"></a><a href="#__codelineno-146-24"><span class="linenos" data-linenos="24 "></span></a><span class="w">    </span><span class="k">end</span>
</span><span id="__span-146-25"><a id="__codelineno-146-25" name="__codelineno-146-25"></a><a href="#__codelineno-146-25"><span class="linenos" data-linenos="25 "></span></a>
</span><span id="__span-146-26"><a id="__codelineno-146-26" name="__codelineno-146-26"></a><a href="#__codelineno-146-26"><span class="linenos" data-linenos="26 "></span></a><span class="w">    </span><span class="k">always</span><span class="p">@(</span><span class="k">posedge</span><span class="w"> </span><span class="n">clk</span><span class="p">)</span><span class="k">begin</span>
</span><span id="__span-146-27"><a id="__codelineno-146-27" name="__codelineno-146-27"></a><a href="#__codelineno-146-27"><span class="linenos" data-linenos="27 "></span></a><span class="w">        </span><span class="k">if</span><span class="p">(</span><span class="n">reset</span><span class="p">)</span><span class="w"> </span><span class="n">state</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">A</span><span class="p">;</span>
</span><span id="__span-146-28"><a id="__codelineno-146-28" name="__codelineno-146-28"></a><a href="#__codelineno-146-28"><span class="linenos" data-linenos="28 "></span></a><span class="w">        </span><span class="k">else</span><span class="w"> </span><span class="n">state</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">next_state</span><span class="p">;</span>
</span><span id="__span-146-29"><a id="__codelineno-146-29" name="__codelineno-146-29"></a><a href="#__codelineno-146-29"><span class="linenos" data-linenos="29 "></span></a><span class="w">    </span><span class="k">end</span>
</span><span id="__span-146-30"><a id="__codelineno-146-30" name="__codelineno-146-30"></a><a href="#__codelineno-146-30"><span class="linenos" data-linenos="30 "></span></a>
</span><span id="__span-146-31"><a id="__codelineno-146-31" name="__codelineno-146-31"></a><a href="#__codelineno-146-31"><span class="linenos" data-linenos="31 "></span></a><span class="w">    </span><span class="k">assign</span><span class="w"> </span><span class="n">z</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">state</span><span class="p">[</span><span class="mh">2</span><span class="p">]</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="o">~</span><span class="n">state</span><span class="p">[</span><span class="mh">1</span><span class="p">];</span>
</span><span id="__span-146-32"><a id="__codelineno-146-32" name="__codelineno-146-32"></a><a href="#__codelineno-146-32"><span class="linenos" data-linenos="32 "></span></a><span class="k">endmodule</span>
</span></code></pre></div></p>
<hr />
<h5 id="q2a-fsm">Q2a: FSM<a class="headerlink" href="#q2a-fsm" title="Anchor link to this section for reference">⚓︎</a></h5>
<p>Website: <a href="https://hdlbits.01xz.net/wiki/Exams/2012_q2fsm" target="_blank">https://hdlbits.01xz.net/wiki/Exams/2012_q2fsm</a></p>
<p>這題就是上題把input w complement，所以很容易就寫完。
<div class="language-verilog highlight"><span class="filename">Verilog</span><pre><span></span><code><span id="__span-147-1"><a id="__codelineno-147-1" name="__codelineno-147-1"></a><a href="#__codelineno-147-1"><span class="linenos" data-linenos=" 1 "></span></a><span class="k">module</span><span class="w"> </span><span class="n">top_module</span><span class="w"> </span><span class="p">(</span>
</span><span id="__span-147-2"><a id="__codelineno-147-2" name="__codelineno-147-2"></a><a href="#__codelineno-147-2"><span class="linenos" data-linenos=" 2 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">clk</span><span class="p">,</span>
</span><span id="__span-147-3"><a id="__codelineno-147-3" name="__codelineno-147-3"></a><a href="#__codelineno-147-3"><span class="linenos" data-linenos=" 3 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">reset</span><span class="p">,</span><span class="w">   </span><span class="c1">// Synchronous active-high reset</span>
</span><span id="__span-147-4"><a id="__codelineno-147-4" name="__codelineno-147-4"></a><a href="#__codelineno-147-4"><span class="linenos" data-linenos=" 4 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">w</span><span class="p">,</span>
</span><span id="__span-147-5"><a id="__codelineno-147-5" name="__codelineno-147-5"></a><a href="#__codelineno-147-5"><span class="linenos" data-linenos=" 5 "></span></a><span class="w">    </span><span class="k">output</span><span class="w"> </span><span class="n">z</span>
</span><span id="__span-147-6"><a id="__codelineno-147-6" name="__codelineno-147-6"></a><a href="#__codelineno-147-6"><span class="linenos" data-linenos=" 6 "></span></a><span class="p">);</span>
</span><span id="__span-147-7"><a id="__codelineno-147-7" name="__codelineno-147-7"></a><a href="#__codelineno-147-7"><span class="linenos" data-linenos=" 7 "></span></a><span class="w">    </span><span class="k">parameter</span><span class="w"> </span><span class="n">A</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">3</span><span class="mi">&#39;d0</span><span class="p">;</span>
</span><span id="__span-147-8"><a id="__codelineno-147-8" name="__codelineno-147-8"></a><a href="#__codelineno-147-8"><span class="linenos" data-linenos=" 8 "></span></a><span class="w">    </span><span class="k">parameter</span><span class="w"> </span><span class="n">B</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">3</span><span class="mi">&#39;d1</span><span class="p">;</span>
</span><span id="__span-147-9"><a id="__codelineno-147-9" name="__codelineno-147-9"></a><a href="#__codelineno-147-9"><span class="linenos" data-linenos=" 9 "></span></a><span class="w">    </span><span class="k">parameter</span><span class="w"> </span><span class="n">C</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">3</span><span class="mi">&#39;d2</span><span class="p">;</span>
</span><span id="__span-147-10"><a id="__codelineno-147-10" name="__codelineno-147-10"></a><a href="#__codelineno-147-10"><span class="linenos" data-linenos="10 "></span></a><span class="w">    </span><span class="k">parameter</span><span class="w"> </span><span class="n">D</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">3</span><span class="mi">&#39;d3</span><span class="p">;</span>
</span><span id="__span-147-11"><a id="__codelineno-147-11" name="__codelineno-147-11"></a><a href="#__codelineno-147-11"><span class="linenos" data-linenos="11 "></span></a><span class="w">    </span><span class="k">parameter</span><span class="w"> </span><span class="n">E</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">3</span><span class="mi">&#39;d4</span><span class="p">;</span>
</span><span id="__span-147-12"><a id="__codelineno-147-12" name="__codelineno-147-12"></a><a href="#__codelineno-147-12"><span class="linenos" data-linenos="12 "></span></a><span class="w">    </span><span class="k">parameter</span><span class="w"> </span><span class="n">F</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">3</span><span class="mi">&#39;d5</span><span class="p">;</span>
</span><span id="__span-147-13"><a id="__codelineno-147-13" name="__codelineno-147-13"></a><a href="#__codelineno-147-13"><span class="linenos" data-linenos="13 "></span></a>
</span><span id="__span-147-14"><a id="__codelineno-147-14" name="__codelineno-147-14"></a><a href="#__codelineno-147-14"><span class="linenos" data-linenos="14 "></span></a><span class="w">    </span><span class="kt">reg</span><span class="w"> </span><span class="p">[</span><span class="mh">2</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">state</span><span class="p">,</span><span class="n">next_state</span><span class="p">;</span>
</span><span id="__span-147-15"><a id="__codelineno-147-15" name="__codelineno-147-15"></a><a href="#__codelineno-147-15"><span class="linenos" data-linenos="15 "></span></a><span class="w">    </span><span class="k">always</span><span class="p">@(</span><span class="o">*</span><span class="p">)</span><span class="k">begin</span>
</span><span id="__span-147-16"><a id="__codelineno-147-16" name="__codelineno-147-16"></a><a href="#__codelineno-147-16"><span class="linenos" data-linenos="16 "></span></a><span class="w">        </span><span class="k">case</span><span class="p">(</span><span class="n">state</span><span class="p">)</span>
</span><span id="__span-147-17"><a id="__codelineno-147-17" name="__codelineno-147-17"></a><a href="#__codelineno-147-17"><span class="linenos" data-linenos="17 "></span></a><span class="w">            </span><span class="nl">A:</span><span class="w"> </span><span class="n">next_state</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">w</span><span class="o">?</span><span class="w"> </span><span class="nl">B:</span><span class="w"> </span><span class="n">A</span><span class="p">;</span>
</span><span id="__span-147-18"><a id="__codelineno-147-18" name="__codelineno-147-18"></a><a href="#__codelineno-147-18"><span class="linenos" data-linenos="18 "></span></a><span class="w">            </span><span class="nl">B:</span><span class="w"> </span><span class="n">next_state</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">w</span><span class="o">?</span><span class="w"> </span><span class="nl">C:</span><span class="w"> </span><span class="n">D</span><span class="p">;</span>
</span><span id="__span-147-19"><a id="__codelineno-147-19" name="__codelineno-147-19"></a><a href="#__codelineno-147-19"><span class="linenos" data-linenos="19 "></span></a><span class="w">            </span><span class="nl">C:</span><span class="w"> </span><span class="n">next_state</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">w</span><span class="o">?</span><span class="w"> </span><span class="nl">E:</span><span class="w"> </span><span class="n">D</span><span class="p">;</span>
</span><span id="__span-147-20"><a id="__codelineno-147-20" name="__codelineno-147-20"></a><a href="#__codelineno-147-20"><span class="linenos" data-linenos="20 "></span></a><span class="w">            </span><span class="nl">D:</span><span class="w"> </span><span class="n">next_state</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">w</span><span class="o">?</span><span class="w"> </span><span class="nl">F:</span><span class="w"> </span><span class="n">A</span><span class="p">;</span>
</span><span id="__span-147-21"><a id="__codelineno-147-21" name="__codelineno-147-21"></a><a href="#__codelineno-147-21"><span class="linenos" data-linenos="21 "></span></a><span class="w">            </span><span class="nl">E:</span><span class="w"> </span><span class="n">next_state</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">w</span><span class="o">?</span><span class="w"> </span><span class="nl">E:</span><span class="w"> </span><span class="n">D</span><span class="p">;</span>
</span><span id="__span-147-22"><a id="__codelineno-147-22" name="__codelineno-147-22"></a><a href="#__codelineno-147-22"><span class="linenos" data-linenos="22 "></span></a><span class="w">            </span><span class="nl">F:</span><span class="w"> </span><span class="n">next_state</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">w</span><span class="o">?</span><span class="w"> </span><span class="nl">C:</span><span class="w"> </span><span class="n">D</span><span class="p">;</span>
</span><span id="__span-147-23"><a id="__codelineno-147-23" name="__codelineno-147-23"></a><a href="#__codelineno-147-23"><span class="linenos" data-linenos="23 "></span></a><span class="w">            </span><span class="k">default</span><span class="o">:</span><span class="w"> </span><span class="n">next_state</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">3</span><span class="p">&#39;</span><span class="n">bxxx</span><span class="p">;</span>
</span><span id="__span-147-24"><a id="__codelineno-147-24" name="__codelineno-147-24"></a><a href="#__codelineno-147-24"><span class="linenos" data-linenos="24 "></span></a><span class="w">        </span><span class="k">endcase</span>
</span><span id="__span-147-25"><a id="__codelineno-147-25" name="__codelineno-147-25"></a><a href="#__codelineno-147-25"><span class="linenos" data-linenos="25 "></span></a><span class="w">    </span><span class="k">end</span>
</span><span id="__span-147-26"><a id="__codelineno-147-26" name="__codelineno-147-26"></a><a href="#__codelineno-147-26"><span class="linenos" data-linenos="26 "></span></a>
</span><span id="__span-147-27"><a id="__codelineno-147-27" name="__codelineno-147-27"></a><a href="#__codelineno-147-27"><span class="linenos" data-linenos="27 "></span></a><span class="w">    </span><span class="k">always</span><span class="p">@(</span><span class="k">posedge</span><span class="w"> </span><span class="n">clk</span><span class="p">)</span><span class="k">begin</span>
</span><span id="__span-147-28"><a id="__codelineno-147-28" name="__codelineno-147-28"></a><a href="#__codelineno-147-28"><span class="linenos" data-linenos="28 "></span></a><span class="w">        </span><span class="k">if</span><span class="p">(</span><span class="n">reset</span><span class="p">)</span><span class="w"> </span><span class="n">state</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">A</span><span class="p">;</span>
</span><span id="__span-147-29"><a id="__codelineno-147-29" name="__codelineno-147-29"></a><a href="#__codelineno-147-29"><span class="linenos" data-linenos="29 "></span></a><span class="w">        </span><span class="k">else</span><span class="w"> </span><span class="n">state</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">next_state</span><span class="p">;</span>
</span><span id="__span-147-30"><a id="__codelineno-147-30" name="__codelineno-147-30"></a><a href="#__codelineno-147-30"><span class="linenos" data-linenos="30 "></span></a><span class="w">    </span><span class="k">end</span>
</span><span id="__span-147-31"><a id="__codelineno-147-31" name="__codelineno-147-31"></a><a href="#__codelineno-147-31"><span class="linenos" data-linenos="31 "></span></a>
</span><span id="__span-147-32"><a id="__codelineno-147-32" name="__codelineno-147-32"></a><a href="#__codelineno-147-32"><span class="linenos" data-linenos="32 "></span></a><span class="w">    </span><span class="k">assign</span><span class="w"> </span><span class="n">z</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">state</span><span class="p">[</span><span class="mh">2</span><span class="p">]</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="o">~</span><span class="n">state</span><span class="p">[</span><span class="mh">1</span><span class="p">];</span>
</span><span id="__span-147-33"><a id="__codelineno-147-33" name="__codelineno-147-33"></a><a href="#__codelineno-147-33"><span class="linenos" data-linenos="33 "></span></a><span class="k">endmodule</span>
</span></code></pre></div></p>
<hr />
<h5 id="q2b-one-hot-fsm-equations">Q2b: One-hot FSM equations<a class="headerlink" href="#q2b-one-hot-fsm-equations" title="Anchor link to this section for reference">⚓︎</a></h5>
<p>Website: <a href="https://hdlbits.01xz.net/wiki/Exams/2012_q2b" target="_blank">https://hdlbits.01xz.net/wiki/Exams/2012_q2b</a></p>
<p>這題就是上上上題把input w complement，所以很容易就寫完。
<div class="language-verilog highlight"><span class="filename">Verilog</span><pre><span></span><code><span id="__span-148-1"><a id="__codelineno-148-1" name="__codelineno-148-1"></a><a href="#__codelineno-148-1"><span class="linenos" data-linenos="1 "></span></a><span class="k">module</span><span class="w"> </span><span class="n">top_module</span><span class="w"> </span><span class="p">(</span>
</span><span id="__span-148-2"><a id="__codelineno-148-2" name="__codelineno-148-2"></a><a href="#__codelineno-148-2"><span class="linenos" data-linenos="2 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="p">[</span><span class="mh">5</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">y</span><span class="p">,</span>
</span><span id="__span-148-3"><a id="__codelineno-148-3" name="__codelineno-148-3"></a><a href="#__codelineno-148-3"><span class="linenos" data-linenos="3 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">w</span><span class="p">,</span>
</span><span id="__span-148-4"><a id="__codelineno-148-4" name="__codelineno-148-4"></a><a href="#__codelineno-148-4"><span class="linenos" data-linenos="4 "></span></a><span class="w">    </span><span class="k">output</span><span class="w"> </span><span class="n">Y1</span><span class="p">,</span>
</span><span id="__span-148-5"><a id="__codelineno-148-5" name="__codelineno-148-5"></a><a href="#__codelineno-148-5"><span class="linenos" data-linenos="5 "></span></a><span class="w">    </span><span class="k">output</span><span class="w"> </span><span class="n">Y3</span>
</span><span id="__span-148-6"><a id="__codelineno-148-6" name="__codelineno-148-6"></a><a href="#__codelineno-148-6"><span class="linenos" data-linenos="6 "></span></a><span class="p">);</span>
</span><span id="__span-148-7"><a id="__codelineno-148-7" name="__codelineno-148-7"></a><a href="#__codelineno-148-7"><span class="linenos" data-linenos="7 "></span></a><span class="w">    </span><span class="k">assign</span><span class="w"> </span><span class="n">Y1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">w</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="n">y</span><span class="p">[</span><span class="mh">0</span><span class="p">];</span>
</span><span id="__span-148-8"><a id="__codelineno-148-8" name="__codelineno-148-8"></a><a href="#__codelineno-148-8"><span class="linenos" data-linenos="8 "></span></a><span class="w">    </span><span class="k">assign</span><span class="w"> </span><span class="n">Y3</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">~</span><span class="n">w</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="p">(</span><span class="n">y</span><span class="p">[</span><span class="mh">1</span><span class="p">]</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">y</span><span class="p">[</span><span class="mh">2</span><span class="p">]</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">y</span><span class="p">[</span><span class="mh">4</span><span class="p">]</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">y</span><span class="p">[</span><span class="mh">5</span><span class="p">]);</span>
</span><span id="__span-148-9"><a id="__codelineno-148-9" name="__codelineno-148-9"></a><a href="#__codelineno-148-9"><span class="linenos" data-linenos="9 "></span></a><span class="k">endmodule</span>
</span></code></pre></div></p>
<hr />
<h5 id="q2a-fsm_1">Q2a: FSM<a class="headerlink" href="#q2a-fsm_1" title="Anchor link to this section for reference">⚓︎</a></h5>
<p>Website: <a href="https://hdlbits.01xz.net/wiki/Exams/2013_q2afsm" target="_blank">https://hdlbits.01xz.net/wiki/Exams/2013_q2afsm</a></p>
<p>這題就是照著圖寫FSM，沒什麼太多的技巧。
<div class="language-verilog highlight"><span class="filename">Verilog</span><pre><span></span><code><span id="__span-149-1"><a id="__codelineno-149-1" name="__codelineno-149-1"></a><a href="#__codelineno-149-1"><span class="linenos" data-linenos=" 1 "></span></a><span class="k">module</span><span class="w"> </span><span class="n">top_module</span><span class="w"> </span><span class="p">(</span>
</span><span id="__span-149-2"><a id="__codelineno-149-2" name="__codelineno-149-2"></a><a href="#__codelineno-149-2"><span class="linenos" data-linenos=" 2 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">clk</span><span class="p">,</span>
</span><span id="__span-149-3"><a id="__codelineno-149-3" name="__codelineno-149-3"></a><a href="#__codelineno-149-3"><span class="linenos" data-linenos=" 3 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">resetn</span><span class="p">,</span><span class="w">    </span><span class="c1">// active-low synchronous reset</span>
</span><span id="__span-149-4"><a id="__codelineno-149-4" name="__codelineno-149-4"></a><a href="#__codelineno-149-4"><span class="linenos" data-linenos=" 4 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="p">[</span><span class="mh">3</span><span class="o">:</span><span class="mh">1</span><span class="p">]</span><span class="w"> </span><span class="n">r</span><span class="p">,</span><span class="w">   </span><span class="c1">// request</span>
</span><span id="__span-149-5"><a id="__codelineno-149-5" name="__codelineno-149-5"></a><a href="#__codelineno-149-5"><span class="linenos" data-linenos=" 5 "></span></a><span class="w">    </span><span class="k">output</span><span class="w"> </span><span class="p">[</span><span class="mh">3</span><span class="o">:</span><span class="mh">1</span><span class="p">]</span><span class="w"> </span><span class="n">g</span><span class="w">   </span><span class="c1">// grant</span>
</span><span id="__span-149-6"><a id="__codelineno-149-6" name="__codelineno-149-6"></a><a href="#__codelineno-149-6"><span class="linenos" data-linenos=" 6 "></span></a><span class="p">);</span><span class="w"> </span>
</span><span id="__span-149-7"><a id="__codelineno-149-7" name="__codelineno-149-7"></a><a href="#__codelineno-149-7"><span class="linenos" data-linenos=" 7 "></span></a>
</span><span id="__span-149-8"><a id="__codelineno-149-8" name="__codelineno-149-8"></a><a href="#__codelineno-149-8"><span class="linenos" data-linenos=" 8 "></span></a><span class="w">    </span><span class="kt">reg</span><span class="w"> </span><span class="p">[</span><span class="mh">1</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">state</span><span class="p">,</span><span class="w"> </span><span class="n">next_state</span><span class="p">;</span>
</span><span id="__span-149-9"><a id="__codelineno-149-9" name="__codelineno-149-9"></a><a href="#__codelineno-149-9"><span class="linenos" data-linenos=" 9 "></span></a><span class="w">    </span><span class="k">parameter</span><span class="w"> </span><span class="n">A</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">2</span><span class="mb">&#39;b00</span><span class="p">;</span>
</span><span id="__span-149-10"><a id="__codelineno-149-10" name="__codelineno-149-10"></a><a href="#__codelineno-149-10"><span class="linenos" data-linenos="10 "></span></a><span class="w">    </span><span class="k">parameter</span><span class="w"> </span><span class="n">B</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">2</span><span class="mb">&#39;b01</span><span class="p">;</span>
</span><span id="__span-149-11"><a id="__codelineno-149-11" name="__codelineno-149-11"></a><a href="#__codelineno-149-11"><span class="linenos" data-linenos="11 "></span></a><span class="w">    </span><span class="k">parameter</span><span class="w"> </span><span class="n">C</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">2</span><span class="mb">&#39;b10</span><span class="p">;</span>
</span><span id="__span-149-12"><a id="__codelineno-149-12" name="__codelineno-149-12"></a><a href="#__codelineno-149-12"><span class="linenos" data-linenos="12 "></span></a><span class="w">    </span><span class="k">parameter</span><span class="w"> </span><span class="n">D</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">2</span><span class="mb">&#39;b11</span><span class="p">;</span>
</span><span id="__span-149-13"><a id="__codelineno-149-13" name="__codelineno-149-13"></a><a href="#__codelineno-149-13"><span class="linenos" data-linenos="13 "></span></a>
</span><span id="__span-149-14"><a id="__codelineno-149-14" name="__codelineno-149-14"></a><a href="#__codelineno-149-14"><span class="linenos" data-linenos="14 "></span></a><span class="w">    </span><span class="k">always</span><span class="p">@(</span><span class="o">*</span><span class="p">)</span><span class="k">begin</span>
</span><span id="__span-149-15"><a id="__codelineno-149-15" name="__codelineno-149-15"></a><a href="#__codelineno-149-15"><span class="linenos" data-linenos="15 "></span></a><span class="w">        </span><span class="k">case</span><span class="p">(</span><span class="n">state</span><span class="p">)</span>
</span><span id="__span-149-16"><a id="__codelineno-149-16" name="__codelineno-149-16"></a><a href="#__codelineno-149-16"><span class="linenos" data-linenos="16 "></span></a><span class="w">            </span><span class="nl">A:</span><span class="k">begin</span>
</span><span id="__span-149-17"><a id="__codelineno-149-17" name="__codelineno-149-17"></a><a href="#__codelineno-149-17"><span class="linenos" data-linenos="17 "></span></a><span class="w">                </span><span class="k">if</span><span class="p">(</span><span class="o">~|</span><span class="n">r</span><span class="p">)</span><span class="w"> </span><span class="n">next_state</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">A</span><span class="p">;</span>
</span><span id="__span-149-18"><a id="__codelineno-149-18" name="__codelineno-149-18"></a><a href="#__codelineno-149-18"><span class="linenos" data-linenos="18 "></span></a><span class="w">                </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="p">(</span><span class="n">r</span><span class="p">[</span><span class="mh">3</span><span class="o">:</span><span class="mh">1</span><span class="p">]</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mh">3</span><span class="mb">&#39;b100</span><span class="p">)</span><span class="w"> </span><span class="n">next_state</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">D</span><span class="p">;</span>
</span><span id="__span-149-19"><a id="__codelineno-149-19" name="__codelineno-149-19"></a><a href="#__codelineno-149-19"><span class="linenos" data-linenos="19 "></span></a><span class="w">                </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="p">(</span><span class="n">r</span><span class="p">[</span><span class="mh">2</span><span class="o">:</span><span class="mh">1</span><span class="p">]</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mh">2</span><span class="mb">&#39;b10</span><span class="p">)</span><span class="w"> </span><span class="n">next_state</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">C</span><span class="p">;</span>
</span><span id="__span-149-20"><a id="__codelineno-149-20" name="__codelineno-149-20"></a><a href="#__codelineno-149-20"><span class="linenos" data-linenos="20 "></span></a><span class="w">                </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="p">(</span><span class="n">r</span><span class="p">[</span><span class="mh">1</span><span class="p">])</span><span class="w"> </span><span class="n">next_state</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">B</span><span class="p">;</span>
</span><span id="__span-149-21"><a id="__codelineno-149-21" name="__codelineno-149-21"></a><a href="#__codelineno-149-21"><span class="linenos" data-linenos="21 "></span></a><span class="w">                </span><span class="k">else</span><span class="w"> </span><span class="n">next_state</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">2</span><span class="p">&#39;</span><span class="n">bxx</span><span class="p">;</span>
</span><span id="__span-149-22"><a id="__codelineno-149-22" name="__codelineno-149-22"></a><a href="#__codelineno-149-22"><span class="linenos" data-linenos="22 "></span></a><span class="w">            </span><span class="k">end</span>
</span><span id="__span-149-23"><a id="__codelineno-149-23" name="__codelineno-149-23"></a><a href="#__codelineno-149-23"><span class="linenos" data-linenos="23 "></span></a><span class="w">            </span><span class="nl">B:</span><span class="w"> </span><span class="n">next_state</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">r</span><span class="p">[</span><span class="mh">1</span><span class="p">]</span><span class="o">?</span><span class="w"> </span><span class="nl">B:</span><span class="w"> </span><span class="n">A</span><span class="p">;</span>
</span><span id="__span-149-24"><a id="__codelineno-149-24" name="__codelineno-149-24"></a><a href="#__codelineno-149-24"><span class="linenos" data-linenos="24 "></span></a><span class="w">            </span><span class="nl">C:</span><span class="w"> </span><span class="n">next_state</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">r</span><span class="p">[</span><span class="mh">2</span><span class="p">]</span><span class="o">?</span><span class="w"> </span><span class="nl">C:</span><span class="w"> </span><span class="n">A</span><span class="p">;</span>
</span><span id="__span-149-25"><a id="__codelineno-149-25" name="__codelineno-149-25"></a><a href="#__codelineno-149-25"><span class="linenos" data-linenos="25 "></span></a><span class="w">            </span><span class="nl">D:</span><span class="w"> </span><span class="n">next_state</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">r</span><span class="p">[</span><span class="mh">3</span><span class="p">]</span><span class="o">?</span><span class="w"> </span><span class="nl">D:</span><span class="w"> </span><span class="n">A</span><span class="p">;</span>
</span><span id="__span-149-26"><a id="__codelineno-149-26" name="__codelineno-149-26"></a><a href="#__codelineno-149-26"><span class="linenos" data-linenos="26 "></span></a><span class="w">        </span><span class="k">endcase</span>
</span><span id="__span-149-27"><a id="__codelineno-149-27" name="__codelineno-149-27"></a><a href="#__codelineno-149-27"><span class="linenos" data-linenos="27 "></span></a><span class="w">    </span><span class="k">end</span>
</span><span id="__span-149-28"><a id="__codelineno-149-28" name="__codelineno-149-28"></a><a href="#__codelineno-149-28"><span class="linenos" data-linenos="28 "></span></a>
</span><span id="__span-149-29"><a id="__codelineno-149-29" name="__codelineno-149-29"></a><a href="#__codelineno-149-29"><span class="linenos" data-linenos="29 "></span></a><span class="w">    </span><span class="k">always</span><span class="p">@(</span><span class="k">posedge</span><span class="w"> </span><span class="n">clk</span><span class="p">)</span><span class="k">begin</span>
</span><span id="__span-149-30"><a id="__codelineno-149-30" name="__codelineno-149-30"></a><a href="#__codelineno-149-30"><span class="linenos" data-linenos="30 "></span></a><span class="w">        </span><span class="k">if</span><span class="p">(</span><span class="o">~</span><span class="n">resetn</span><span class="p">)</span><span class="w"> </span><span class="n">state</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">A</span><span class="p">;</span>
</span><span id="__span-149-31"><a id="__codelineno-149-31" name="__codelineno-149-31"></a><a href="#__codelineno-149-31"><span class="linenos" data-linenos="31 "></span></a><span class="w">        </span><span class="k">else</span><span class="w"> </span><span class="n">state</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">next_state</span><span class="p">;</span>
</span><span id="__span-149-32"><a id="__codelineno-149-32" name="__codelineno-149-32"></a><a href="#__codelineno-149-32"><span class="linenos" data-linenos="32 "></span></a><span class="w">    </span><span class="k">end</span>
</span><span id="__span-149-33"><a id="__codelineno-149-33" name="__codelineno-149-33"></a><a href="#__codelineno-149-33"><span class="linenos" data-linenos="33 "></span></a>
</span><span id="__span-149-34"><a id="__codelineno-149-34" name="__codelineno-149-34"></a><a href="#__codelineno-149-34"><span class="linenos" data-linenos="34 "></span></a><span class="w">    </span><span class="k">assign</span><span class="w"> </span><span class="n">g</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{(</span><span class="n">state</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">D</span><span class="p">),</span><span class="w"> </span><span class="p">(</span><span class="n">state</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">C</span><span class="p">),</span><span class="w"> </span><span class="p">(</span><span class="n">state</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">B</span><span class="p">)};</span>
</span><span id="__span-149-35"><a id="__codelineno-149-35" name="__codelineno-149-35"></a><a href="#__codelineno-149-35"><span class="linenos" data-linenos="35 "></span></a><span class="k">endmodule</span>
</span></code></pre></div></p>
<hr />
<h5 id="q2b-another-fsm">Q2b: Another FSM<a class="headerlink" href="#q2b-another-fsm" title="Anchor link to this section for reference">⚓︎</a></h5>
<p>Website: <a href="https://hdlbits.01xz.net/wiki/Exams/2013_q2bfsm" target="_blank">https://hdlbits.01xz.net/wiki/Exams/2013_q2bfsm</a></p>
<p>這題就是照著題目敘述寫FSM，考的是英文能力和debug通靈技巧。
<div class="language-verilog highlight"><span class="filename">Verilog</span><pre><span></span><code><span id="__span-150-1"><a id="__codelineno-150-1" name="__codelineno-150-1"></a><a href="#__codelineno-150-1"><span class="linenos" data-linenos=" 1 "></span></a><span class="k">module</span><span class="w"> </span><span class="n">top_module</span><span class="w"> </span><span class="p">(</span>
</span><span id="__span-150-2"><a id="__codelineno-150-2" name="__codelineno-150-2"></a><a href="#__codelineno-150-2"><span class="linenos" data-linenos=" 2 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">clk</span><span class="p">,</span>
</span><span id="__span-150-3"><a id="__codelineno-150-3" name="__codelineno-150-3"></a><a href="#__codelineno-150-3"><span class="linenos" data-linenos=" 3 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">resetn</span><span class="p">,</span><span class="w">    </span><span class="c1">// active-low synchronous reset</span>
</span><span id="__span-150-4"><a id="__codelineno-150-4" name="__codelineno-150-4"></a><a href="#__codelineno-150-4"><span class="linenos" data-linenos=" 4 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">x</span><span class="p">,</span>
</span><span id="__span-150-5"><a id="__codelineno-150-5" name="__codelineno-150-5"></a><a href="#__codelineno-150-5"><span class="linenos" data-linenos=" 5 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">y</span><span class="p">,</span>
</span><span id="__span-150-6"><a id="__codelineno-150-6" name="__codelineno-150-6"></a><a href="#__codelineno-150-6"><span class="linenos" data-linenos=" 6 "></span></a><span class="w">    </span><span class="k">output</span><span class="w"> </span><span class="n">f</span><span class="p">,</span>
</span><span id="__span-150-7"><a id="__codelineno-150-7" name="__codelineno-150-7"></a><a href="#__codelineno-150-7"><span class="linenos" data-linenos=" 7 "></span></a><span class="w">    </span><span class="k">output</span><span class="w"> </span><span class="n">g</span>
</span><span id="__span-150-8"><a id="__codelineno-150-8" name="__codelineno-150-8"></a><a href="#__codelineno-150-8"><span class="linenos" data-linenos=" 8 "></span></a><span class="p">);</span><span class="w"> </span>
</span><span id="__span-150-9"><a id="__codelineno-150-9" name="__codelineno-150-9"></a><a href="#__codelineno-150-9"><span class="linenos" data-linenos=" 9 "></span></a><span class="w">    </span><span class="kt">reg</span><span class="w"> </span><span class="p">[</span><span class="mh">3</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="n">state</span><span class="p">,</span><span class="w"> </span><span class="n">next_state</span><span class="p">;</span>
</span><span id="__span-150-10"><a id="__codelineno-150-10" name="__codelineno-150-10"></a><a href="#__codelineno-150-10"><span class="linenos" data-linenos="10 "></span></a><span class="w">    </span><span class="k">parameter</span><span class="w"> </span><span class="n">A</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">4</span><span class="mi">&#39;d0</span><span class="p">;</span>
</span><span id="__span-150-11"><a id="__codelineno-150-11" name="__codelineno-150-11"></a><a href="#__codelineno-150-11"><span class="linenos" data-linenos="11 "></span></a><span class="w">    </span><span class="k">parameter</span><span class="w"> </span><span class="n">f_1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">4</span><span class="mi">&#39;d1</span><span class="p">;</span>
</span><span id="__span-150-12"><a id="__codelineno-150-12" name="__codelineno-150-12"></a><a href="#__codelineno-150-12"><span class="linenos" data-linenos="12 "></span></a><span class="w">    </span><span class="k">parameter</span><span class="w"> </span><span class="n">zero_bit</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">4</span><span class="mi">&#39;d2</span><span class="p">;</span>
</span><span id="__span-150-13"><a id="__codelineno-150-13" name="__codelineno-150-13"></a><a href="#__codelineno-150-13"><span class="linenos" data-linenos="13 "></span></a><span class="w">    </span><span class="k">parameter</span><span class="w"> </span><span class="n">one_bit</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">4</span><span class="mi">&#39;d3</span><span class="p">;</span>
</span><span id="__span-150-14"><a id="__codelineno-150-14" name="__codelineno-150-14"></a><a href="#__codelineno-150-14"><span class="linenos" data-linenos="14 "></span></a><span class="w">    </span><span class="k">parameter</span><span class="w"> </span><span class="n">two_bit</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">4</span><span class="mi">&#39;d4</span><span class="p">;</span>
</span><span id="__span-150-15"><a id="__codelineno-150-15" name="__codelineno-150-15"></a><a href="#__codelineno-150-15"><span class="linenos" data-linenos="15 "></span></a><span class="w">    </span><span class="k">parameter</span><span class="w"> </span><span class="n">three_bit</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">4</span><span class="mi">&#39;d5</span><span class="p">;</span>
</span><span id="__span-150-16"><a id="__codelineno-150-16" name="__codelineno-150-16"></a><a href="#__codelineno-150-16"><span class="linenos" data-linenos="16 "></span></a><span class="w">    </span><span class="k">parameter</span><span class="w"> </span><span class="n">g_0</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">4</span><span class="mi">&#39;d6</span><span class="p">;</span>
</span><span id="__span-150-17"><a id="__codelineno-150-17" name="__codelineno-150-17"></a><a href="#__codelineno-150-17"><span class="linenos" data-linenos="17 "></span></a><span class="w">    </span><span class="k">parameter</span><span class="w"> </span><span class="n">g_1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">4</span><span class="mi">&#39;d7</span><span class="p">;</span>
</span><span id="__span-150-18"><a id="__codelineno-150-18" name="__codelineno-150-18"></a><a href="#__codelineno-150-18"><span class="linenos" data-linenos="18 "></span></a><span class="w">    </span><span class="k">parameter</span><span class="w"> </span><span class="n">temp</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">4</span><span class="mi">&#39;d8</span><span class="p">;</span>
</span><span id="__span-150-19"><a id="__codelineno-150-19" name="__codelineno-150-19"></a><a href="#__codelineno-150-19"><span class="linenos" data-linenos="19 "></span></a>
</span><span id="__span-150-20"><a id="__codelineno-150-20" name="__codelineno-150-20"></a><a href="#__codelineno-150-20"><span class="linenos" data-linenos="20 "></span></a><span class="w">    </span><span class="k">always</span><span class="p">@(</span><span class="o">*</span><span class="p">)</span><span class="k">begin</span>
</span><span id="__span-150-21"><a id="__codelineno-150-21" name="__codelineno-150-21"></a><a href="#__codelineno-150-21"><span class="linenos" data-linenos="21 "></span></a><span class="w">        </span><span class="k">case</span><span class="p">(</span><span class="n">state</span><span class="p">)</span>
</span><span id="__span-150-22"><a id="__codelineno-150-22" name="__codelineno-150-22"></a><a href="#__codelineno-150-22"><span class="linenos" data-linenos="22 "></span></a><span class="w">            </span><span class="nl">A:</span><span class="w"> </span><span class="n">next_state</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">f_1</span><span class="p">;</span>
</span><span id="__span-150-23"><a id="__codelineno-150-23" name="__codelineno-150-23"></a><a href="#__codelineno-150-23"><span class="linenos" data-linenos="23 "></span></a><span class="w">            </span><span class="nl">f_1:</span><span class="w"> </span><span class="n">next_state</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">zero_bit</span><span class="p">;</span>
</span><span id="__span-150-24"><a id="__codelineno-150-24" name="__codelineno-150-24"></a><a href="#__codelineno-150-24"><span class="linenos" data-linenos="24 "></span></a><span class="w">            </span><span class="nl">zero_bit:</span><span class="w"> </span><span class="n">next_state</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">x</span><span class="o">?</span><span class="w"> </span><span class="nl">one_bit:</span><span class="w"> </span><span class="n">zero_bit</span><span class="p">;</span>
</span><span id="__span-150-25"><a id="__codelineno-150-25" name="__codelineno-150-25"></a><a href="#__codelineno-150-25"><span class="linenos" data-linenos="25 "></span></a><span class="w">            </span><span class="nl">one_bit:</span><span class="w"> </span><span class="n">next_state</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">x</span><span class="o">?</span><span class="w">  </span><span class="nl">one_bit:</span><span class="w"> </span><span class="n">two_bit</span><span class="p">;</span>
</span><span id="__span-150-26"><a id="__codelineno-150-26" name="__codelineno-150-26"></a><a href="#__codelineno-150-26"><span class="linenos" data-linenos="26 "></span></a><span class="w">            </span><span class="nl">two_bit:</span><span class="w"> </span><span class="n">next_state</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">x</span><span class="o">?</span><span class="w"> </span><span class="nl">three_bit:</span><span class="w"> </span><span class="n">zero_bit</span><span class="p">;</span>
</span><span id="__span-150-27"><a id="__codelineno-150-27" name="__codelineno-150-27"></a><a href="#__codelineno-150-27"><span class="linenos" data-linenos="27 "></span></a><span class="w">            </span><span class="nl">three_bit:</span><span class="w"> </span><span class="n">next_state</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">y</span><span class="o">?</span><span class="w"> </span><span class="nl">g_1:</span><span class="w"> </span><span class="n">temp</span><span class="p">;</span>
</span><span id="__span-150-28"><a id="__codelineno-150-28" name="__codelineno-150-28"></a><a href="#__codelineno-150-28"><span class="linenos" data-linenos="28 "></span></a><span class="w">            </span><span class="nl">g_0:</span><span class="w"> </span><span class="n">next_state</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">g_0</span><span class="p">;</span>
</span><span id="__span-150-29"><a id="__codelineno-150-29" name="__codelineno-150-29"></a><a href="#__codelineno-150-29"><span class="linenos" data-linenos="29 "></span></a><span class="w">            </span><span class="nl">temp:</span><span class="w"> </span><span class="n">next_state</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">y</span><span class="o">?</span><span class="w"> </span><span class="nl">g_1:</span><span class="w"> </span><span class="n">g_0</span><span class="p">;</span>
</span><span id="__span-150-30"><a id="__codelineno-150-30" name="__codelineno-150-30"></a><a href="#__codelineno-150-30"><span class="linenos" data-linenos="30 "></span></a><span class="w">            </span><span class="nl">g_1:</span><span class="w"> </span><span class="n">next_state</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">g_1</span><span class="p">;</span>
</span><span id="__span-150-31"><a id="__codelineno-150-31" name="__codelineno-150-31"></a><a href="#__codelineno-150-31"><span class="linenos" data-linenos="31 "></span></a><span class="w">            </span><span class="k">default</span><span class="o">:</span><span class="w"> </span><span class="n">next_state</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">4</span><span class="p">&#39;</span><span class="n">bxxxx</span><span class="p">;</span>
</span><span id="__span-150-32"><a id="__codelineno-150-32" name="__codelineno-150-32"></a><a href="#__codelineno-150-32"><span class="linenos" data-linenos="32 "></span></a><span class="w">        </span><span class="k">endcase</span>
</span><span id="__span-150-33"><a id="__codelineno-150-33" name="__codelineno-150-33"></a><a href="#__codelineno-150-33"><span class="linenos" data-linenos="33 "></span></a><span class="w">    </span><span class="k">end</span>
</span><span id="__span-150-34"><a id="__codelineno-150-34" name="__codelineno-150-34"></a><a href="#__codelineno-150-34"><span class="linenos" data-linenos="34 "></span></a>
</span><span id="__span-150-35"><a id="__codelineno-150-35" name="__codelineno-150-35"></a><a href="#__codelineno-150-35"><span class="linenos" data-linenos="35 "></span></a><span class="w">    </span><span class="k">always</span><span class="p">@(</span><span class="k">posedge</span><span class="w"> </span><span class="n">clk</span><span class="p">)</span><span class="k">begin</span>
</span><span id="__span-150-36"><a id="__codelineno-150-36" name="__codelineno-150-36"></a><a href="#__codelineno-150-36"><span class="linenos" data-linenos="36 "></span></a><span class="w">        </span><span class="k">if</span><span class="p">(</span><span class="o">~</span><span class="n">resetn</span><span class="p">)</span><span class="w"> </span><span class="n">state</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">A</span><span class="p">;</span>
</span><span id="__span-150-37"><a id="__codelineno-150-37" name="__codelineno-150-37"></a><a href="#__codelineno-150-37"><span class="linenos" data-linenos="37 "></span></a><span class="w">        </span><span class="k">else</span><span class="w"> </span><span class="n">state</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">next_state</span><span class="p">;</span>
</span><span id="__span-150-38"><a id="__codelineno-150-38" name="__codelineno-150-38"></a><a href="#__codelineno-150-38"><span class="linenos" data-linenos="38 "></span></a><span class="w">    </span><span class="k">end</span>
</span><span id="__span-150-39"><a id="__codelineno-150-39" name="__codelineno-150-39"></a><a href="#__codelineno-150-39"><span class="linenos" data-linenos="39 "></span></a>
</span><span id="__span-150-40"><a id="__codelineno-150-40" name="__codelineno-150-40"></a><a href="#__codelineno-150-40"><span class="linenos" data-linenos="40 "></span></a><span class="w">    </span><span class="k">assign</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">state</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">f_1</span><span class="p">);</span>
</span><span id="__span-150-41"><a id="__codelineno-150-41" name="__codelineno-150-41"></a><a href="#__codelineno-150-41"><span class="linenos" data-linenos="41 "></span></a><span class="w">    </span><span class="k">assign</span><span class="w"> </span><span class="n">g</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">state</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">three_bit</span><span class="p">)</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="p">(</span><span class="n">state</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">temp</span><span class="p">)</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="p">(</span><span class="n">state</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">g_1</span><span class="p">);</span>
</span><span id="__span-150-42"><a id="__codelineno-150-42" name="__codelineno-150-42"></a><a href="#__codelineno-150-42"><span class="linenos" data-linenos="42 "></span></a><span class="k">endmodule</span>
</span></code></pre></div></p>
<hr />
<h3 id="building-larger-circuits">Building Larger Circuits<a class="headerlink" href="#building-larger-circuits" title="Anchor link to this section for reference">⚓︎</a></h3>
<h4 id="counter-with-period-1000">Counter with period 1000<a class="headerlink" href="#counter-with-period-1000" title="Anchor link to this section for reference">⚓︎</a></h4>
<p>Website: <a href="https://hdlbits.01xz.net/wiki/Exams/review2015_count1k" target="_blank">https://hdlbits.01xz.net/wiki/Exams/review2015_count1k</a></p>
<p>這題只是看起來位數很多很嚇人，如果熟練的話可以寫得很簡潔。
<div class="language-verilog highlight"><span class="filename">Verilog</span><pre><span></span><code><span id="__span-151-1"><a id="__codelineno-151-1" name="__codelineno-151-1"></a><a href="#__codelineno-151-1"><span class="linenos" data-linenos=" 1 "></span></a><span class="k">module</span><span class="w"> </span><span class="n">top_module</span><span class="w"> </span><span class="p">(</span>
</span><span id="__span-151-2"><a id="__codelineno-151-2" name="__codelineno-151-2"></a><a href="#__codelineno-151-2"><span class="linenos" data-linenos=" 2 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">clk</span><span class="p">,</span>
</span><span id="__span-151-3"><a id="__codelineno-151-3" name="__codelineno-151-3"></a><a href="#__codelineno-151-3"><span class="linenos" data-linenos=" 3 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">reset</span><span class="p">,</span>
</span><span id="__span-151-4"><a id="__codelineno-151-4" name="__codelineno-151-4"></a><a href="#__codelineno-151-4"><span class="linenos" data-linenos=" 4 "></span></a><span class="w">    </span><span class="k">output</span><span class="w"> </span><span class="kt">reg</span><span class="p">[</span><span class="mh">9</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">q</span><span class="p">);</span>
</span><span id="__span-151-5"><a id="__codelineno-151-5" name="__codelineno-151-5"></a><a href="#__codelineno-151-5"><span class="linenos" data-linenos=" 5 "></span></a><span class="w">    </span><span class="k">always</span><span class="p">@(</span><span class="k">posedge</span><span class="w"> </span><span class="n">clk</span><span class="p">)</span><span class="k">begin</span>
</span><span id="__span-151-6"><a id="__codelineno-151-6" name="__codelineno-151-6"></a><a href="#__codelineno-151-6"><span class="linenos" data-linenos=" 6 "></span></a><span class="w">        </span><span class="k">if</span><span class="p">(</span><span class="n">reset</span><span class="p">)</span><span class="w"> </span><span class="n">q</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="mh">10</span><span class="mi">&#39;d0</span><span class="p">;</span>
</span><span id="__span-151-7"><a id="__codelineno-151-7" name="__codelineno-151-7"></a><a href="#__codelineno-151-7"><span class="linenos" data-linenos=" 7 "></span></a><span class="w">        </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="p">(</span><span class="n">q</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mh">10</span><span class="mi">&#39;d999</span><span class="p">)</span><span class="w"> </span><span class="n">q</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="mh">10</span><span class="mi">&#39;d0</span><span class="p">;</span>
</span><span id="__span-151-8"><a id="__codelineno-151-8" name="__codelineno-151-8"></a><a href="#__codelineno-151-8"><span class="linenos" data-linenos=" 8 "></span></a><span class="w">        </span><span class="k">else</span><span class="w"> </span><span class="n">q</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">q</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mh">1</span><span class="mb">&#39;b1</span><span class="p">;</span>
</span><span id="__span-151-9"><a id="__codelineno-151-9" name="__codelineno-151-9"></a><a href="#__codelineno-151-9"><span class="linenos" data-linenos=" 9 "></span></a><span class="w">    </span><span class="k">end</span>
</span><span id="__span-151-10"><a id="__codelineno-151-10" name="__codelineno-151-10"></a><a href="#__codelineno-151-10"><span class="linenos" data-linenos="10 "></span></a><span class="k">endmodule</span>
</span></code></pre></div></p>
<hr />
<h4 id="4-bit-shift-register-and-down-counter">4-bit shift register and down counter<a class="headerlink" href="#4-bit-shift-register-and-down-counter" title="Anchor link to this section for reference">⚓︎</a></h4>
<p>Website: <a href="https://hdlbits.01xz.net/wiki/Exams/review2015_shiftcount" target="_blank">https://hdlbits.01xz.net/wiki/Exams/review2015_shiftcount</a></p>
<p>這題我覺得也說不上是特別複雜的電路，前面更多更複雜的題目，我猜是因為幫後面題目鋪墊的關係。
<div class="language-verilog highlight"><span class="filename">Verilog</span><pre><span></span><code><span id="__span-152-1"><a id="__codelineno-152-1" name="__codelineno-152-1"></a><a href="#__codelineno-152-1"><span class="linenos" data-linenos=" 1 "></span></a><span class="k">module</span><span class="w"> </span><span class="n">top_module</span><span class="w"> </span><span class="p">(</span>
</span><span id="__span-152-2"><a id="__codelineno-152-2" name="__codelineno-152-2"></a><a href="#__codelineno-152-2"><span class="linenos" data-linenos=" 2 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">clk</span><span class="p">,</span>
</span><span id="__span-152-3"><a id="__codelineno-152-3" name="__codelineno-152-3"></a><a href="#__codelineno-152-3"><span class="linenos" data-linenos=" 3 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">shift_ena</span><span class="p">,</span>
</span><span id="__span-152-4"><a id="__codelineno-152-4" name="__codelineno-152-4"></a><a href="#__codelineno-152-4"><span class="linenos" data-linenos=" 4 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">count_ena</span><span class="p">,</span>
</span><span id="__span-152-5"><a id="__codelineno-152-5" name="__codelineno-152-5"></a><a href="#__codelineno-152-5"><span class="linenos" data-linenos=" 5 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">data</span><span class="p">,</span>
</span><span id="__span-152-6"><a id="__codelineno-152-6" name="__codelineno-152-6"></a><a href="#__codelineno-152-6"><span class="linenos" data-linenos=" 6 "></span></a><span class="w">    </span><span class="k">output</span><span class="w"> </span><span class="kt">reg</span><span class="p">[</span><span class="mh">3</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">q</span><span class="p">);</span>
</span><span id="__span-152-7"><a id="__codelineno-152-7" name="__codelineno-152-7"></a><a href="#__codelineno-152-7"><span class="linenos" data-linenos=" 7 "></span></a><span class="w">    </span><span class="k">always</span><span class="p">@(</span><span class="k">posedge</span><span class="w"> </span><span class="n">clk</span><span class="p">)</span><span class="k">begin</span>
</span><span id="__span-152-8"><a id="__codelineno-152-8" name="__codelineno-152-8"></a><a href="#__codelineno-152-8"><span class="linenos" data-linenos=" 8 "></span></a><span class="w">        </span><span class="k">case</span><span class="p">({</span><span class="n">shift_ena</span><span class="p">,</span><span class="w"> </span><span class="n">count_ena</span><span class="p">})</span>
</span><span id="__span-152-9"><a id="__codelineno-152-9" name="__codelineno-152-9"></a><a href="#__codelineno-152-9"><span class="linenos" data-linenos=" 9 "></span></a><span class="w">            </span><span class="mh">2</span><span class="mb">&#39;b00</span><span class="o">:</span><span class="w"> </span><span class="n">q</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">q</span><span class="p">;</span>
</span><span id="__span-152-10"><a id="__codelineno-152-10" name="__codelineno-152-10"></a><a href="#__codelineno-152-10"><span class="linenos" data-linenos="10 "></span></a><span class="w">            </span><span class="mh">2</span><span class="mb">&#39;b01</span><span class="o">:</span><span class="w"> </span><span class="n">q</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">q</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mh">1</span><span class="mb">&#39;b1</span><span class="p">;</span>
</span><span id="__span-152-11"><a id="__codelineno-152-11" name="__codelineno-152-11"></a><a href="#__codelineno-152-11"><span class="linenos" data-linenos="11 "></span></a><span class="w">            </span><span class="mh">2</span><span class="mb">&#39;b10</span><span class="o">:</span><span class="w"> </span><span class="n">q</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="p">{</span><span class="n">q</span><span class="p">[</span><span class="mh">2</span><span class="o">:</span><span class="mh">0</span><span class="p">],</span><span class="n">data</span><span class="p">};</span>
</span><span id="__span-152-12"><a id="__codelineno-152-12" name="__codelineno-152-12"></a><a href="#__codelineno-152-12"><span class="linenos" data-linenos="12 "></span></a><span class="w">            </span><span class="mh">2</span><span class="mb">&#39;b11</span><span class="o">:</span><span class="w"> </span><span class="n">q</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="mh">4</span><span class="p">&#39;</span><span class="n">bxxxx</span><span class="p">;</span>
</span><span id="__span-152-13"><a id="__codelineno-152-13" name="__codelineno-152-13"></a><a href="#__codelineno-152-13"><span class="linenos" data-linenos="13 "></span></a><span class="w">        </span><span class="k">endcase</span>
</span><span id="__span-152-14"><a id="__codelineno-152-14" name="__codelineno-152-14"></a><a href="#__codelineno-152-14"><span class="linenos" data-linenos="14 "></span></a><span class="w">    </span><span class="k">end</span>
</span><span id="__span-152-15"><a id="__codelineno-152-15" name="__codelineno-152-15"></a><a href="#__codelineno-152-15"><span class="linenos" data-linenos="15 "></span></a><span class="k">endmodule</span>
</span></code></pre></div></p>
<hr />
<h4 id="fsm-sequence-1101-recognizer">FSM: Sequence 1101 recognizer<a class="headerlink" href="#fsm-sequence-1101-recognizer" title="Anchor link to this section for reference">⚓︎</a></h4>
<p>Website: <a href="https://hdlbits.01xz.net/wiki/Exams/review2015_fsmseq" target="_blank">https://hdlbits.01xz.net/wiki/Exams/review2015_fsmseq</a></p>
<p>這題我覺得也說不上是特別複雜的電路，前面更多更複雜的題目，我猜是因為幫後面題目鋪墊的關係。
<div class="language-verilog highlight"><span class="filename">Verilog</span><pre><span></span><code><span id="__span-153-1"><a id="__codelineno-153-1" name="__codelineno-153-1"></a><a href="#__codelineno-153-1"><span class="linenos" data-linenos=" 1 "></span></a><span class="k">module</span><span class="w"> </span><span class="n">top_module</span><span class="w"> </span><span class="p">(</span>
</span><span id="__span-153-2"><a id="__codelineno-153-2" name="__codelineno-153-2"></a><a href="#__codelineno-153-2"><span class="linenos" data-linenos=" 2 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">clk</span><span class="p">,</span>
</span><span id="__span-153-3"><a id="__codelineno-153-3" name="__codelineno-153-3"></a><a href="#__codelineno-153-3"><span class="linenos" data-linenos=" 3 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">reset</span><span class="p">,</span><span class="w">      </span><span class="c1">// Synchronous reset</span>
</span><span id="__span-153-4"><a id="__codelineno-153-4" name="__codelineno-153-4"></a><a href="#__codelineno-153-4"><span class="linenos" data-linenos=" 4 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">data</span><span class="p">,</span>
</span><span id="__span-153-5"><a id="__codelineno-153-5" name="__codelineno-153-5"></a><a href="#__codelineno-153-5"><span class="linenos" data-linenos=" 5 "></span></a><span class="w">    </span><span class="k">output</span><span class="w"> </span><span class="n">start_shifting</span><span class="p">);</span>
</span><span id="__span-153-6"><a id="__codelineno-153-6" name="__codelineno-153-6"></a><a href="#__codelineno-153-6"><span class="linenos" data-linenos=" 6 "></span></a><span class="w">    </span><span class="kt">reg</span><span class="w"> </span><span class="p">[</span><span class="mh">2</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">state</span><span class="p">,</span><span class="w"> </span><span class="n">nstate</span><span class="p">;</span>
</span><span id="__span-153-7"><a id="__codelineno-153-7" name="__codelineno-153-7"></a><a href="#__codelineno-153-7"><span class="linenos" data-linenos=" 7 "></span></a><span class="w">    </span><span class="k">parameter</span><span class="w"> </span><span class="n">zero</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">3</span><span class="mi">&#39;d0</span><span class="p">;</span>
</span><span id="__span-153-8"><a id="__codelineno-153-8" name="__codelineno-153-8"></a><a href="#__codelineno-153-8"><span class="linenos" data-linenos=" 8 "></span></a><span class="w">    </span><span class="k">parameter</span><span class="w"> </span><span class="n">one</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">3</span><span class="mi">&#39;d1</span><span class="p">;</span>
</span><span id="__span-153-9"><a id="__codelineno-153-9" name="__codelineno-153-9"></a><a href="#__codelineno-153-9"><span class="linenos" data-linenos=" 9 "></span></a><span class="w">    </span><span class="k">parameter</span><span class="w"> </span><span class="n">two</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">3</span><span class="mi">&#39;d2</span><span class="p">;</span>
</span><span id="__span-153-10"><a id="__codelineno-153-10" name="__codelineno-153-10"></a><a href="#__codelineno-153-10"><span class="linenos" data-linenos="10 "></span></a><span class="w">    </span><span class="k">parameter</span><span class="w"> </span><span class="n">three</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">3</span><span class="mi">&#39;d3</span><span class="p">;</span>
</span><span id="__span-153-11"><a id="__codelineno-153-11" name="__codelineno-153-11"></a><a href="#__codelineno-153-11"><span class="linenos" data-linenos="11 "></span></a><span class="w">    </span><span class="k">parameter</span><span class="w"> </span><span class="n">four</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">3</span><span class="mi">&#39;d4</span><span class="p">;</span>
</span><span id="__span-153-12"><a id="__codelineno-153-12" name="__codelineno-153-12"></a><a href="#__codelineno-153-12"><span class="linenos" data-linenos="12 "></span></a>
</span><span id="__span-153-13"><a id="__codelineno-153-13" name="__codelineno-153-13"></a><a href="#__codelineno-153-13"><span class="linenos" data-linenos="13 "></span></a><span class="w">    </span><span class="k">always</span><span class="p">@(</span><span class="o">*</span><span class="p">)</span><span class="k">begin</span>
</span><span id="__span-153-14"><a id="__codelineno-153-14" name="__codelineno-153-14"></a><a href="#__codelineno-153-14"><span class="linenos" data-linenos="14 "></span></a><span class="w">        </span><span class="k">case</span><span class="p">(</span><span class="n">state</span><span class="p">)</span>
</span><span id="__span-153-15"><a id="__codelineno-153-15" name="__codelineno-153-15"></a><a href="#__codelineno-153-15"><span class="linenos" data-linenos="15 "></span></a><span class="w">            </span><span class="nl">zero:</span><span class="w"> </span><span class="n">nstate</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">data</span><span class="o">?</span><span class="w"> </span><span class="nl">one:</span><span class="w"> </span><span class="n">zero</span><span class="p">;</span>
</span><span id="__span-153-16"><a id="__codelineno-153-16" name="__codelineno-153-16"></a><a href="#__codelineno-153-16"><span class="linenos" data-linenos="16 "></span></a><span class="w">            </span><span class="nl">one:</span><span class="w"> </span><span class="n">nstate</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">data</span><span class="o">?</span><span class="w"> </span><span class="nl">two:</span><span class="w"> </span><span class="n">zero</span><span class="p">;</span>
</span><span id="__span-153-17"><a id="__codelineno-153-17" name="__codelineno-153-17"></a><a href="#__codelineno-153-17"><span class="linenos" data-linenos="17 "></span></a><span class="w">            </span><span class="nl">two:</span><span class="w"> </span><span class="n">nstate</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">data</span><span class="o">?</span><span class="w"> </span><span class="nl">two:</span><span class="w"> </span><span class="n">three</span><span class="p">;</span>
</span><span id="__span-153-18"><a id="__codelineno-153-18" name="__codelineno-153-18"></a><a href="#__codelineno-153-18"><span class="linenos" data-linenos="18 "></span></a><span class="w">            </span><span class="nl">three:</span><span class="w"> </span><span class="n">nstate</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">data</span><span class="o">?</span><span class="w"> </span><span class="nl">four:</span><span class="w"> </span><span class="n">zero</span><span class="p">;</span>
</span><span id="__span-153-19"><a id="__codelineno-153-19" name="__codelineno-153-19"></a><a href="#__codelineno-153-19"><span class="linenos" data-linenos="19 "></span></a><span class="w">            </span><span class="nl">four:</span><span class="w"> </span><span class="n">nstate</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">four</span><span class="p">;</span>
</span><span id="__span-153-20"><a id="__codelineno-153-20" name="__codelineno-153-20"></a><a href="#__codelineno-153-20"><span class="linenos" data-linenos="20 "></span></a><span class="w">            </span><span class="k">default</span><span class="o">:</span><span class="w"> </span><span class="n">nstate</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">3</span><span class="p">&#39;</span><span class="n">bxxx</span><span class="p">;</span>
</span><span id="__span-153-21"><a id="__codelineno-153-21" name="__codelineno-153-21"></a><a href="#__codelineno-153-21"><span class="linenos" data-linenos="21 "></span></a><span class="w">        </span><span class="k">endcase</span>
</span><span id="__span-153-22"><a id="__codelineno-153-22" name="__codelineno-153-22"></a><a href="#__codelineno-153-22"><span class="linenos" data-linenos="22 "></span></a><span class="w">    </span><span class="k">end</span>
</span><span id="__span-153-23"><a id="__codelineno-153-23" name="__codelineno-153-23"></a><a href="#__codelineno-153-23"><span class="linenos" data-linenos="23 "></span></a>
</span><span id="__span-153-24"><a id="__codelineno-153-24" name="__codelineno-153-24"></a><a href="#__codelineno-153-24"><span class="linenos" data-linenos="24 "></span></a><span class="w">    </span><span class="k">always</span><span class="p">@(</span><span class="k">posedge</span><span class="w"> </span><span class="n">clk</span><span class="p">)</span><span class="k">begin</span>
</span><span id="__span-153-25"><a id="__codelineno-153-25" name="__codelineno-153-25"></a><a href="#__codelineno-153-25"><span class="linenos" data-linenos="25 "></span></a><span class="w">        </span><span class="k">if</span><span class="p">(</span><span class="n">reset</span><span class="p">)</span><span class="w"> </span><span class="n">state</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">zero</span><span class="p">;</span>
</span><span id="__span-153-26"><a id="__codelineno-153-26" name="__codelineno-153-26"></a><a href="#__codelineno-153-26"><span class="linenos" data-linenos="26 "></span></a><span class="w">        </span><span class="k">else</span><span class="w"> </span><span class="n">state</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">nstate</span><span class="p">;</span>
</span><span id="__span-153-27"><a id="__codelineno-153-27" name="__codelineno-153-27"></a><a href="#__codelineno-153-27"><span class="linenos" data-linenos="27 "></span></a><span class="w">    </span><span class="k">end</span>
</span><span id="__span-153-28"><a id="__codelineno-153-28" name="__codelineno-153-28"></a><a href="#__codelineno-153-28"><span class="linenos" data-linenos="28 "></span></a>
</span><span id="__span-153-29"><a id="__codelineno-153-29" name="__codelineno-153-29"></a><a href="#__codelineno-153-29"><span class="linenos" data-linenos="29 "></span></a><span class="w">    </span><span class="k">assign</span><span class="w"> </span><span class="n">start_shifting</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">state</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">four</span><span class="p">);</span>
</span><span id="__span-153-30"><a id="__codelineno-153-30" name="__codelineno-153-30"></a><a href="#__codelineno-153-30"><span class="linenos" data-linenos="30 "></span></a>
</span><span id="__span-153-31"><a id="__codelineno-153-31" name="__codelineno-153-31"></a><a href="#__codelineno-153-31"><span class="linenos" data-linenos="31 "></span></a><span class="k">endmodule</span>
</span></code></pre></div></p>
<hr />
<h4 id="fsm-enable-shift-register">FSM: Enable shift register<a class="headerlink" href="#fsm-enable-shift-register" title="Anchor link to this section for reference">⚓︎</a></h4>
<p>Website: <a href="https://hdlbits.01xz.net/wiki/Exams/review2015_fsmshift" target="_blank">https://hdlbits.01xz.net/wiki/Exams/review2015_fsmshift</a></p>
<p>這題我覺得也說不上是特別複雜的電路，前面更多更複雜的題目，我猜是因為幫後面題目鋪墊的關係。
<div class="language-verilog highlight"><span class="filename">Verilog</span><pre><span></span><code><span id="__span-154-1"><a id="__codelineno-154-1" name="__codelineno-154-1"></a><a href="#__codelineno-154-1"><span class="linenos" data-linenos=" 1 "></span></a><span class="k">module</span><span class="w"> </span><span class="n">top_module</span><span class="w"> </span><span class="p">(</span>
</span><span id="__span-154-2"><a id="__codelineno-154-2" name="__codelineno-154-2"></a><a href="#__codelineno-154-2"><span class="linenos" data-linenos=" 2 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">clk</span><span class="p">,</span>
</span><span id="__span-154-3"><a id="__codelineno-154-3" name="__codelineno-154-3"></a><a href="#__codelineno-154-3"><span class="linenos" data-linenos=" 3 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">reset</span><span class="p">,</span><span class="w">      </span><span class="c1">// Synchronous reset</span>
</span><span id="__span-154-4"><a id="__codelineno-154-4" name="__codelineno-154-4"></a><a href="#__codelineno-154-4"><span class="linenos" data-linenos=" 4 "></span></a><span class="w">    </span><span class="k">output</span><span class="w"> </span><span class="n">shift_ena</span><span class="p">);</span>
</span><span id="__span-154-5"><a id="__codelineno-154-5" name="__codelineno-154-5"></a><a href="#__codelineno-154-5"><span class="linenos" data-linenos=" 5 "></span></a><span class="w">    </span><span class="kt">reg</span><span class="w"> </span><span class="p">[</span><span class="mh">2</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">counter</span><span class="p">;</span><span class="w"> </span>
</span><span id="__span-154-6"><a id="__codelineno-154-6" name="__codelineno-154-6"></a><a href="#__codelineno-154-6"><span class="linenos" data-linenos=" 6 "></span></a>
</span><span id="__span-154-7"><a id="__codelineno-154-7" name="__codelineno-154-7"></a><a href="#__codelineno-154-7"><span class="linenos" data-linenos=" 7 "></span></a><span class="w">    </span><span class="k">always</span><span class="p">@(</span><span class="k">posedge</span><span class="w"> </span><span class="n">clk</span><span class="p">)</span><span class="k">begin</span>
</span><span id="__span-154-8"><a id="__codelineno-154-8" name="__codelineno-154-8"></a><a href="#__codelineno-154-8"><span class="linenos" data-linenos=" 8 "></span></a><span class="w">        </span><span class="k">if</span><span class="p">(</span><span class="n">reset</span><span class="p">)</span><span class="w"> </span><span class="n">counter</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="mh">3</span><span class="mi">&#39;d0</span><span class="p">;</span>
</span><span id="__span-154-9"><a id="__codelineno-154-9" name="__codelineno-154-9"></a><a href="#__codelineno-154-9"><span class="linenos" data-linenos=" 9 "></span></a><span class="w">        </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="p">(</span><span class="n">counter</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mh">3</span><span class="mi">&#39;d4</span><span class="p">)</span><span class="w"> </span><span class="n">counter</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">counter</span><span class="p">;</span>
</span><span id="__span-154-10"><a id="__codelineno-154-10" name="__codelineno-154-10"></a><a href="#__codelineno-154-10"><span class="linenos" data-linenos="10 "></span></a><span class="w">        </span><span class="k">else</span><span class="w"> </span><span class="n">counter</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">counter</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mh">1</span><span class="mb">&#39;b1</span><span class="p">;</span>
</span><span id="__span-154-11"><a id="__codelineno-154-11" name="__codelineno-154-11"></a><a href="#__codelineno-154-11"><span class="linenos" data-linenos="11 "></span></a><span class="w">    </span><span class="k">end</span>
</span><span id="__span-154-12"><a id="__codelineno-154-12" name="__codelineno-154-12"></a><a href="#__codelineno-154-12"><span class="linenos" data-linenos="12 "></span></a>
</span><span id="__span-154-13"><a id="__codelineno-154-13" name="__codelineno-154-13"></a><a href="#__codelineno-154-13"><span class="linenos" data-linenos="13 "></span></a><span class="w">    </span><span class="k">assign</span><span class="w"> </span><span class="n">shift_ena</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">~</span><span class="n">counter</span><span class="p">[</span><span class="mh">2</span><span class="p">];</span>
</span><span id="__span-154-14"><a id="__codelineno-154-14" name="__codelineno-154-14"></a><a href="#__codelineno-154-14"><span class="linenos" data-linenos="14 "></span></a><span class="k">endmodule</span>
</span></code></pre></div></p>
<hr />
<h4 id="fsm-the-complete-fsm">FSM: The complete FSM<a class="headerlink" href="#fsm-the-complete-fsm" title="Anchor link to this section for reference">⚓︎</a></h4>
<p>Website: <a href="https://hdlbits.01xz.net/wiki/Exams/review2015_fsm" target="_blank">https://hdlbits.01xz.net/wiki/Exams/review2015_fsm</a></p>
<p>這題就是前三題的綜合，如果已經寫過<code>Lemmings4</code>，應該覺得這題佛心來著。
<div class="language-verilog highlight"><span class="filename">Verilog</span><pre><span></span><code><span id="__span-155-1"><a id="__codelineno-155-1" name="__codelineno-155-1"></a><a href="#__codelineno-155-1"><span class="linenos" data-linenos=" 1 "></span></a><span class="k">module</span><span class="w"> </span><span class="n">top_module</span><span class="w"> </span><span class="p">(</span>
</span><span id="__span-155-2"><a id="__codelineno-155-2" name="__codelineno-155-2"></a><a href="#__codelineno-155-2"><span class="linenos" data-linenos=" 2 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">clk</span><span class="p">,</span>
</span><span id="__span-155-3"><a id="__codelineno-155-3" name="__codelineno-155-3"></a><a href="#__codelineno-155-3"><span class="linenos" data-linenos=" 3 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">reset</span><span class="p">,</span><span class="w">      </span><span class="c1">// Synchronous reset</span>
</span><span id="__span-155-4"><a id="__codelineno-155-4" name="__codelineno-155-4"></a><a href="#__codelineno-155-4"><span class="linenos" data-linenos=" 4 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">data</span><span class="p">,</span>
</span><span id="__span-155-5"><a id="__codelineno-155-5" name="__codelineno-155-5"></a><a href="#__codelineno-155-5"><span class="linenos" data-linenos=" 5 "></span></a><span class="w">    </span><span class="k">output</span><span class="w"> </span><span class="n">shift_ena</span><span class="p">,</span>
</span><span id="__span-155-6"><a id="__codelineno-155-6" name="__codelineno-155-6"></a><a href="#__codelineno-155-6"><span class="linenos" data-linenos=" 6 "></span></a><span class="w">    </span><span class="k">output</span><span class="w"> </span><span class="n">counting</span><span class="p">,</span>
</span><span id="__span-155-7"><a id="__codelineno-155-7" name="__codelineno-155-7"></a><a href="#__codelineno-155-7"><span class="linenos" data-linenos=" 7 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">done_counting</span><span class="p">,</span>
</span><span id="__span-155-8"><a id="__codelineno-155-8" name="__codelineno-155-8"></a><a href="#__codelineno-155-8"><span class="linenos" data-linenos=" 8 "></span></a><span class="w">    </span><span class="k">output</span><span class="w"> </span><span class="n">done</span><span class="p">,</span>
</span><span id="__span-155-9"><a id="__codelineno-155-9" name="__codelineno-155-9"></a><a href="#__codelineno-155-9"><span class="linenos" data-linenos=" 9 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">ack</span><span class="w"> </span><span class="p">);</span>
</span><span id="__span-155-10"><a id="__codelineno-155-10" name="__codelineno-155-10"></a><a href="#__codelineno-155-10"><span class="linenos" data-linenos="10 "></span></a><span class="w">    </span><span class="kt">reg</span><span class="w"> </span><span class="p">[</span><span class="mh">3</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">state</span><span class="p">,</span><span class="w"> </span><span class="n">nstate</span><span class="p">;</span>
</span><span id="__span-155-11"><a id="__codelineno-155-11" name="__codelineno-155-11"></a><a href="#__codelineno-155-11"><span class="linenos" data-linenos="11 "></span></a><span class="w">    </span><span class="k">parameter</span><span class="w"> </span><span class="n">re</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">4</span><span class="mi">&#39;d0</span><span class="p">;</span>
</span><span id="__span-155-12"><a id="__codelineno-155-12" name="__codelineno-155-12"></a><a href="#__codelineno-155-12"><span class="linenos" data-linenos="12 "></span></a><span class="w">    </span><span class="k">parameter</span><span class="w"> </span><span class="n">l</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">4</span><span class="mi">&#39;d1</span><span class="p">;</span>
</span><span id="__span-155-13"><a id="__codelineno-155-13" name="__codelineno-155-13"></a><a href="#__codelineno-155-13"><span class="linenos" data-linenos="13 "></span></a><span class="w">    </span><span class="k">parameter</span><span class="w"> </span><span class="n">ll</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">4</span><span class="mi">&#39;d2</span><span class="p">;</span>
</span><span id="__span-155-14"><a id="__codelineno-155-14" name="__codelineno-155-14"></a><a href="#__codelineno-155-14"><span class="linenos" data-linenos="14 "></span></a><span class="w">    </span><span class="k">parameter</span><span class="w"> </span><span class="n">llo</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">4</span><span class="mi">&#39;d3</span><span class="p">;</span>
</span><span id="__span-155-15"><a id="__codelineno-155-15" name="__codelineno-155-15"></a><a href="#__codelineno-155-15"><span class="linenos" data-linenos="15 "></span></a><span class="w">    </span><span class="k">parameter</span><span class="w"> </span><span class="n">llol</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">4</span><span class="mi">&#39;d4</span><span class="p">;</span>
</span><span id="__span-155-16"><a id="__codelineno-155-16" name="__codelineno-155-16"></a><a href="#__codelineno-155-16"><span class="linenos" data-linenos="16 "></span></a><span class="w">    </span><span class="k">parameter</span><span class="w"> </span><span class="n">s1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">4</span><span class="mi">&#39;d5</span><span class="p">;</span>
</span><span id="__span-155-17"><a id="__codelineno-155-17" name="__codelineno-155-17"></a><a href="#__codelineno-155-17"><span class="linenos" data-linenos="17 "></span></a><span class="w">    </span><span class="k">parameter</span><span class="w"> </span><span class="n">s2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">4</span><span class="mi">&#39;d6</span><span class="p">;</span>
</span><span id="__span-155-18"><a id="__codelineno-155-18" name="__codelineno-155-18"></a><a href="#__codelineno-155-18"><span class="linenos" data-linenos="18 "></span></a><span class="w">    </span><span class="k">parameter</span><span class="w"> </span><span class="n">s3</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">4</span><span class="mi">&#39;d7</span><span class="p">;</span>
</span><span id="__span-155-19"><a id="__codelineno-155-19" name="__codelineno-155-19"></a><a href="#__codelineno-155-19"><span class="linenos" data-linenos="19 "></span></a><span class="w">    </span><span class="k">parameter</span><span class="w"> </span><span class="n">is_counting</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">4</span><span class="mi">&#39;d8</span><span class="p">;</span>
</span><span id="__span-155-20"><a id="__codelineno-155-20" name="__codelineno-155-20"></a><a href="#__codelineno-155-20"><span class="linenos" data-linenos="20 "></span></a><span class="w">    </span><span class="k">parameter</span><span class="w"> </span><span class="n">is_done</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">4</span><span class="mi">&#39;d9</span><span class="p">;</span>
</span><span id="__span-155-21"><a id="__codelineno-155-21" name="__codelineno-155-21"></a><a href="#__codelineno-155-21"><span class="linenos" data-linenos="21 "></span></a>
</span><span id="__span-155-22"><a id="__codelineno-155-22" name="__codelineno-155-22"></a><a href="#__codelineno-155-22"><span class="linenos" data-linenos="22 "></span></a><span class="w">    </span><span class="k">always</span><span class="p">@(</span><span class="o">*</span><span class="p">)</span><span class="k">begin</span>
</span><span id="__span-155-23"><a id="__codelineno-155-23" name="__codelineno-155-23"></a><a href="#__codelineno-155-23"><span class="linenos" data-linenos="23 "></span></a><span class="w">        </span><span class="k">case</span><span class="p">(</span><span class="n">state</span><span class="p">)</span>
</span><span id="__span-155-24"><a id="__codelineno-155-24" name="__codelineno-155-24"></a><a href="#__codelineno-155-24"><span class="linenos" data-linenos="24 "></span></a><span class="w">            </span><span class="nl">re:</span><span class="w"> </span><span class="n">nstate</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">data</span><span class="o">?</span><span class="w"> </span><span class="nl">l:</span><span class="w"> </span><span class="n">re</span><span class="p">;</span>
</span><span id="__span-155-25"><a id="__codelineno-155-25" name="__codelineno-155-25"></a><a href="#__codelineno-155-25"><span class="linenos" data-linenos="25 "></span></a><span class="w">            </span><span class="nl">l:</span><span class="w"> </span><span class="n">nstate</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">data</span><span class="o">?</span><span class="w"> </span><span class="nl">ll:</span><span class="w"> </span><span class="n">re</span><span class="p">;</span>
</span><span id="__span-155-26"><a id="__codelineno-155-26" name="__codelineno-155-26"></a><a href="#__codelineno-155-26"><span class="linenos" data-linenos="26 "></span></a><span class="w">            </span><span class="nl">ll:</span><span class="w"> </span><span class="n">nstate</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">data</span><span class="o">?</span><span class="w"> </span><span class="nl">ll:</span><span class="w"> </span><span class="n">llo</span><span class="p">;</span>
</span><span id="__span-155-27"><a id="__codelineno-155-27" name="__codelineno-155-27"></a><a href="#__codelineno-155-27"><span class="linenos" data-linenos="27 "></span></a><span class="w">            </span><span class="nl">llo:</span><span class="w"> </span><span class="n">nstate</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">data</span><span class="o">?</span><span class="w"> </span><span class="nl">llol:</span><span class="w"> </span><span class="n">re</span><span class="p">;</span>
</span><span id="__span-155-28"><a id="__codelineno-155-28" name="__codelineno-155-28"></a><a href="#__codelineno-155-28"><span class="linenos" data-linenos="28 "></span></a><span class="w">            </span><span class="nl">llol:</span><span class="w"> </span><span class="n">nstate</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">s1</span><span class="p">;</span>
</span><span id="__span-155-29"><a id="__codelineno-155-29" name="__codelineno-155-29"></a><a href="#__codelineno-155-29"><span class="linenos" data-linenos="29 "></span></a><span class="w">            </span><span class="nl">s1:</span><span class="w"> </span><span class="n">nstate</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">s2</span><span class="p">;</span>
</span><span id="__span-155-30"><a id="__codelineno-155-30" name="__codelineno-155-30"></a><a href="#__codelineno-155-30"><span class="linenos" data-linenos="30 "></span></a><span class="w">            </span><span class="nl">s2:</span><span class="w"> </span><span class="n">nstate</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">s3</span><span class="p">;</span>
</span><span id="__span-155-31"><a id="__codelineno-155-31" name="__codelineno-155-31"></a><a href="#__codelineno-155-31"><span class="linenos" data-linenos="31 "></span></a><span class="w">            </span><span class="nl">s3:</span><span class="w"> </span><span class="n">nstate</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">is_counting</span><span class="p">;</span>
</span><span id="__span-155-32"><a id="__codelineno-155-32" name="__codelineno-155-32"></a><a href="#__codelineno-155-32"><span class="linenos" data-linenos="32 "></span></a><span class="w">            </span><span class="nl">is_counting:</span><span class="w"> </span><span class="n">nstate</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">done_counting</span><span class="o">?</span><span class="w"> </span><span class="nl">is_done:</span><span class="w"> </span><span class="n">is_counting</span><span class="p">;</span>
</span><span id="__span-155-33"><a id="__codelineno-155-33" name="__codelineno-155-33"></a><a href="#__codelineno-155-33"><span class="linenos" data-linenos="33 "></span></a><span class="w">            </span><span class="nl">is_done:</span><span class="w"> </span><span class="n">nstate</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ack</span><span class="o">?</span><span class="w"> </span><span class="nl">re:</span><span class="w"> </span><span class="n">is_done</span><span class="p">;</span>
</span><span id="__span-155-34"><a id="__codelineno-155-34" name="__codelineno-155-34"></a><a href="#__codelineno-155-34"><span class="linenos" data-linenos="34 "></span></a><span class="w">            </span><span class="k">default</span><span class="o">:</span><span class="w"> </span><span class="n">nstate</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">4</span><span class="p">&#39;</span><span class="n">bxxxx</span><span class="p">;</span>
</span><span id="__span-155-35"><a id="__codelineno-155-35" name="__codelineno-155-35"></a><a href="#__codelineno-155-35"><span class="linenos" data-linenos="35 "></span></a><span class="w">        </span><span class="k">endcase</span>
</span><span id="__span-155-36"><a id="__codelineno-155-36" name="__codelineno-155-36"></a><a href="#__codelineno-155-36"><span class="linenos" data-linenos="36 "></span></a><span class="w">    </span><span class="k">end</span>
</span><span id="__span-155-37"><a id="__codelineno-155-37" name="__codelineno-155-37"></a><a href="#__codelineno-155-37"><span class="linenos" data-linenos="37 "></span></a>
</span><span id="__span-155-38"><a id="__codelineno-155-38" name="__codelineno-155-38"></a><a href="#__codelineno-155-38"><span class="linenos" data-linenos="38 "></span></a><span class="w">    </span><span class="k">always</span><span class="p">@(</span><span class="k">posedge</span><span class="w"> </span><span class="n">clk</span><span class="p">)</span><span class="k">begin</span>
</span><span id="__span-155-39"><a id="__codelineno-155-39" name="__codelineno-155-39"></a><a href="#__codelineno-155-39"><span class="linenos" data-linenos="39 "></span></a><span class="w">        </span><span class="k">if</span><span class="p">(</span><span class="n">reset</span><span class="p">)</span><span class="w"> </span><span class="n">state</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">re</span><span class="p">;</span>
</span><span id="__span-155-40"><a id="__codelineno-155-40" name="__codelineno-155-40"></a><a href="#__codelineno-155-40"><span class="linenos" data-linenos="40 "></span></a><span class="w">        </span><span class="k">else</span><span class="w"> </span><span class="n">state</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">nstate</span><span class="p">;</span>
</span><span id="__span-155-41"><a id="__codelineno-155-41" name="__codelineno-155-41"></a><a href="#__codelineno-155-41"><span class="linenos" data-linenos="41 "></span></a><span class="w">    </span><span class="k">end</span>
</span><span id="__span-155-42"><a id="__codelineno-155-42" name="__codelineno-155-42"></a><a href="#__codelineno-155-42"><span class="linenos" data-linenos="42 "></span></a>
</span><span id="__span-155-43"><a id="__codelineno-155-43" name="__codelineno-155-43"></a><a href="#__codelineno-155-43"><span class="linenos" data-linenos="43 "></span></a><span class="w">    </span><span class="k">assign</span><span class="w"> </span><span class="n">shift_ena</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">state</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">s1</span><span class="p">)</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="p">(</span><span class="n">state</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">s2</span><span class="p">)</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="p">(</span><span class="n">state</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">s3</span><span class="p">)</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="p">(</span><span class="n">state</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">llol</span><span class="p">);</span>
</span><span id="__span-155-44"><a id="__codelineno-155-44" name="__codelineno-155-44"></a><a href="#__codelineno-155-44"><span class="linenos" data-linenos="44 "></span></a><span class="w">    </span><span class="k">assign</span><span class="w"> </span><span class="n">counting</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">state</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">is_counting</span><span class="p">);</span>
</span><span id="__span-155-45"><a id="__codelineno-155-45" name="__codelineno-155-45"></a><a href="#__codelineno-155-45"><span class="linenos" data-linenos="45 "></span></a><span class="w">    </span><span class="k">assign</span><span class="w"> </span><span class="n">done</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">state</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">is_done</span><span class="p">);</span>
</span><span id="__span-155-46"><a id="__codelineno-155-46" name="__codelineno-155-46"></a><a href="#__codelineno-155-46"><span class="linenos" data-linenos="46 "></span></a>
</span><span id="__span-155-47"><a id="__codelineno-155-47" name="__codelineno-155-47"></a><a href="#__codelineno-155-47"><span class="linenos" data-linenos="47 "></span></a><span class="k">endmodule</span>
</span></code></pre></div></p>
<hr />
<h4 id="the-complete-timer">The complete timer<a class="headerlink" href="#the-complete-timer" title="Anchor link to this section for reference">⚓︎</a></h4>
<p>Website: <a href="https://hdlbits.01xz.net/wiki/Exams/review2015_fancytimer" target="_blank">https://hdlbits.01xz.net/wiki/Exams/review2015_fancytimer</a></p>
<p>這題單純在比耐心和debug能力，順便考驗怎麼省空間，我也覺得delay透過倒數的方式，可能空間可以少不少。
<div class="language-verilog highlight"><span class="filename">Verilog</span><pre><span></span><code><span id="__span-156-1"><a id="__codelineno-156-1" name="__codelineno-156-1"></a><a href="#__codelineno-156-1"><span class="linenos" data-linenos=" 1 "></span></a><span class="k">module</span><span class="w"> </span><span class="n">top_module</span><span class="w"> </span><span class="p">(</span>
</span><span id="__span-156-2"><a id="__codelineno-156-2" name="__codelineno-156-2"></a><a href="#__codelineno-156-2"><span class="linenos" data-linenos=" 2 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">clk</span><span class="p">,</span>
</span><span id="__span-156-3"><a id="__codelineno-156-3" name="__codelineno-156-3"></a><a href="#__codelineno-156-3"><span class="linenos" data-linenos=" 3 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">reset</span><span class="p">,</span><span class="w">      </span><span class="c1">// Synchronous reset</span>
</span><span id="__span-156-4"><a id="__codelineno-156-4" name="__codelineno-156-4"></a><a href="#__codelineno-156-4"><span class="linenos" data-linenos=" 4 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">data</span><span class="p">,</span>
</span><span id="__span-156-5"><a id="__codelineno-156-5" name="__codelineno-156-5"></a><a href="#__codelineno-156-5"><span class="linenos" data-linenos=" 5 "></span></a><span class="w">    </span><span class="k">output</span><span class="w"> </span><span class="p">[</span><span class="mh">3</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">count</span><span class="p">,</span>
</span><span id="__span-156-6"><a id="__codelineno-156-6" name="__codelineno-156-6"></a><a href="#__codelineno-156-6"><span class="linenos" data-linenos=" 6 "></span></a><span class="w">    </span><span class="k">output</span><span class="w"> </span><span class="n">counting</span><span class="p">,</span>
</span><span id="__span-156-7"><a id="__codelineno-156-7" name="__codelineno-156-7"></a><a href="#__codelineno-156-7"><span class="linenos" data-linenos=" 7 "></span></a><span class="w">    </span><span class="k">output</span><span class="w"> </span><span class="n">done</span><span class="p">,</span>
</span><span id="__span-156-8"><a id="__codelineno-156-8" name="__codelineno-156-8"></a><a href="#__codelineno-156-8"><span class="linenos" data-linenos=" 8 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">ack</span><span class="w"> </span><span class="p">);</span>
</span><span id="__span-156-9"><a id="__codelineno-156-9" name="__codelineno-156-9"></a><a href="#__codelineno-156-9"><span class="linenos" data-linenos=" 9 "></span></a>
</span><span id="__span-156-10"><a id="__codelineno-156-10" name="__codelineno-156-10"></a><a href="#__codelineno-156-10"><span class="linenos" data-linenos="10 "></span></a><span class="w">    </span><span class="c1">//FSM</span>
</span><span id="__span-156-11"><a id="__codelineno-156-11" name="__codelineno-156-11"></a><a href="#__codelineno-156-11"><span class="linenos" data-linenos="11 "></span></a><span class="w">    </span><span class="kt">reg</span><span class="w"> </span><span class="p">[</span><span class="mh">3</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">state</span><span class="p">,</span><span class="n">next_state</span><span class="p">;</span>
</span><span id="__span-156-12"><a id="__codelineno-156-12" name="__codelineno-156-12"></a><a href="#__codelineno-156-12"><span class="linenos" data-linenos="12 "></span></a>
</span><span id="__span-156-13"><a id="__codelineno-156-13" name="__codelineno-156-13"></a><a href="#__codelineno-156-13"><span class="linenos" data-linenos="13 "></span></a><span class="w">    </span><span class="k">parameter</span><span class="w"> </span><span class="n">re</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">4</span><span class="mi">&#39;d0</span><span class="p">;</span>
</span><span id="__span-156-14"><a id="__codelineno-156-14" name="__codelineno-156-14"></a><a href="#__codelineno-156-14"><span class="linenos" data-linenos="14 "></span></a><span class="w">    </span><span class="k">parameter</span><span class="w"> </span><span class="n">l</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">4</span><span class="mi">&#39;d1</span><span class="p">;</span>
</span><span id="__span-156-15"><a id="__codelineno-156-15" name="__codelineno-156-15"></a><a href="#__codelineno-156-15"><span class="linenos" data-linenos="15 "></span></a><span class="w">    </span><span class="k">parameter</span><span class="w"> </span><span class="n">ll</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">4</span><span class="mi">&#39;d2</span><span class="p">;</span>
</span><span id="__span-156-16"><a id="__codelineno-156-16" name="__codelineno-156-16"></a><a href="#__codelineno-156-16"><span class="linenos" data-linenos="16 "></span></a><span class="w">    </span><span class="k">parameter</span><span class="w"> </span><span class="n">llo</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">4</span><span class="mi">&#39;d3</span><span class="p">;</span>
</span><span id="__span-156-17"><a id="__codelineno-156-17" name="__codelineno-156-17"></a><a href="#__codelineno-156-17"><span class="linenos" data-linenos="17 "></span></a><span class="w">    </span><span class="k">parameter</span><span class="w"> </span><span class="n">shift_o</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">4</span><span class="mi">&#39;d4</span><span class="p">;</span>
</span><span id="__span-156-18"><a id="__codelineno-156-18" name="__codelineno-156-18"></a><a href="#__codelineno-156-18"><span class="linenos" data-linenos="18 "></span></a><span class="w">    </span><span class="k">parameter</span><span class="w"> </span><span class="n">shift_l</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">4</span><span class="mi">&#39;d5</span><span class="p">;</span>
</span><span id="__span-156-19"><a id="__codelineno-156-19" name="__codelineno-156-19"></a><a href="#__codelineno-156-19"><span class="linenos" data-linenos="19 "></span></a><span class="w">    </span><span class="k">parameter</span><span class="w"> </span><span class="n">shift_lo</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">4</span><span class="mi">&#39;d6</span><span class="p">;</span>
</span><span id="__span-156-20"><a id="__codelineno-156-20" name="__codelineno-156-20"></a><a href="#__codelineno-156-20"><span class="linenos" data-linenos="20 "></span></a><span class="w">    </span><span class="k">parameter</span><span class="w"> </span><span class="n">shift_ll</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">4</span><span class="mi">&#39;d7</span><span class="p">;</span>
</span><span id="__span-156-21"><a id="__codelineno-156-21" name="__codelineno-156-21"></a><a href="#__codelineno-156-21"><span class="linenos" data-linenos="21 "></span></a><span class="w">    </span><span class="k">parameter</span><span class="w"> </span><span class="n">is_count</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">4</span><span class="mi">&#39;d8</span><span class="p">;</span>
</span><span id="__span-156-22"><a id="__codelineno-156-22" name="__codelineno-156-22"></a><a href="#__codelineno-156-22"><span class="linenos" data-linenos="22 "></span></a><span class="w">    </span><span class="k">parameter</span><span class="w"> </span><span class="n">is_finish</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">4</span><span class="mi">&#39;d9</span><span class="p">;</span>
</span><span id="__span-156-23"><a id="__codelineno-156-23" name="__codelineno-156-23"></a><a href="#__codelineno-156-23"><span class="linenos" data-linenos="23 "></span></a>
</span><span id="__span-156-24"><a id="__codelineno-156-24" name="__codelineno-156-24"></a><a href="#__codelineno-156-24"><span class="linenos" data-linenos="24 "></span></a><span class="w">    </span><span class="k">always</span><span class="p">@(</span><span class="o">*</span><span class="p">)</span><span class="k">begin</span>
</span><span id="__span-156-25"><a id="__codelineno-156-25" name="__codelineno-156-25"></a><a href="#__codelineno-156-25"><span class="linenos" data-linenos="25 "></span></a><span class="w">        </span><span class="k">case</span><span class="p">(</span><span class="n">state</span><span class="p">)</span>
</span><span id="__span-156-26"><a id="__codelineno-156-26" name="__codelineno-156-26"></a><a href="#__codelineno-156-26"><span class="linenos" data-linenos="26 "></span></a><span class="w">            </span><span class="nl">re:</span><span class="w"> </span><span class="n">next_state</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">data</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="nl">l:</span><span class="w"> </span><span class="n">re</span><span class="p">;</span>
</span><span id="__span-156-27"><a id="__codelineno-156-27" name="__codelineno-156-27"></a><a href="#__codelineno-156-27"><span class="linenos" data-linenos="27 "></span></a><span class="w">            </span><span class="nl">l:</span><span class="w"> </span><span class="n">next_state</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">data</span><span class="o">?</span><span class="w"> </span><span class="nl">ll:</span><span class="w"> </span><span class="n">re</span><span class="p">;</span>
</span><span id="__span-156-28"><a id="__codelineno-156-28" name="__codelineno-156-28"></a><a href="#__codelineno-156-28"><span class="linenos" data-linenos="28 "></span></a><span class="w">            </span><span class="nl">ll:</span><span class="w"> </span><span class="n">next_state</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">data</span><span class="o">?</span><span class="w"> </span><span class="nl">ll:</span><span class="w"> </span><span class="n">llo</span><span class="p">;</span>
</span><span id="__span-156-29"><a id="__codelineno-156-29" name="__codelineno-156-29"></a><a href="#__codelineno-156-29"><span class="linenos" data-linenos="29 "></span></a><span class="w">            </span><span class="nl">llo:</span><span class="w"> </span><span class="n">next_state</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">data</span><span class="o">?</span><span class="w"> </span><span class="nl">shift_o:</span><span class="w"> </span><span class="n">re</span><span class="p">;</span>
</span><span id="__span-156-30"><a id="__codelineno-156-30" name="__codelineno-156-30"></a><a href="#__codelineno-156-30"><span class="linenos" data-linenos="30 "></span></a><span class="w">            </span><span class="nl">shift_o:</span><span class="w"> </span><span class="n">next_state</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">shift_l</span><span class="p">;</span>
</span><span id="__span-156-31"><a id="__codelineno-156-31" name="__codelineno-156-31"></a><a href="#__codelineno-156-31"><span class="linenos" data-linenos="31 "></span></a><span class="w">            </span><span class="nl">shift_l:</span><span class="w"> </span><span class="n">next_state</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">shift_lo</span><span class="p">;</span>
</span><span id="__span-156-32"><a id="__codelineno-156-32" name="__codelineno-156-32"></a><a href="#__codelineno-156-32"><span class="linenos" data-linenos="32 "></span></a><span class="w">            </span><span class="nl">shift_lo:</span><span class="w"> </span><span class="n">next_state</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">shift_ll</span><span class="p">;</span>
</span><span id="__span-156-33"><a id="__codelineno-156-33" name="__codelineno-156-33"></a><a href="#__codelineno-156-33"><span class="linenos" data-linenos="33 "></span></a><span class="w">            </span><span class="nl">shift_ll:</span><span class="w"> </span><span class="n">next_state</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">is_count</span><span class="p">;</span>
</span><span id="__span-156-34"><a id="__codelineno-156-34" name="__codelineno-156-34"></a><a href="#__codelineno-156-34"><span class="linenos" data-linenos="34 "></span></a><span class="w">            </span><span class="nl">is_count:</span><span class="w"> </span><span class="n">next_state</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">((</span><span class="n">num</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mh">15</span><span class="mi">&#39;d999</span><span class="p">)</span><span class="o">&amp;</span><span class="p">(</span><span class="n">data_pipe</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mh">4</span><span class="mi">&#39;d0</span><span class="p">))</span><span class="o">?</span><span class="w"> </span><span class="nl">is_finish:</span><span class="w"> </span><span class="n">is_count</span><span class="p">;</span>
</span><span id="__span-156-35"><a id="__codelineno-156-35" name="__codelineno-156-35"></a><a href="#__codelineno-156-35"><span class="linenos" data-linenos="35 "></span></a><span class="w">            </span><span class="nl">is_finish:</span><span class="w"> </span><span class="n">next_state</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ack</span><span class="o">?</span><span class="w"> </span><span class="nl">re:</span><span class="w"> </span><span class="n">is_finish</span><span class="p">;</span>
</span><span id="__span-156-36"><a id="__codelineno-156-36" name="__codelineno-156-36"></a><a href="#__codelineno-156-36"><span class="linenos" data-linenos="36 "></span></a><span class="w">            </span><span class="k">default</span><span class="o">:</span><span class="w"> </span><span class="n">next_state</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">4</span><span class="p">&#39;</span><span class="n">bxxxx</span><span class="p">;</span>
</span><span id="__span-156-37"><a id="__codelineno-156-37" name="__codelineno-156-37"></a><a href="#__codelineno-156-37"><span class="linenos" data-linenos="37 "></span></a><span class="w">        </span><span class="k">endcase</span>
</span><span id="__span-156-38"><a id="__codelineno-156-38" name="__codelineno-156-38"></a><a href="#__codelineno-156-38"><span class="linenos" data-linenos="38 "></span></a><span class="w">    </span><span class="k">end</span>
</span><span id="__span-156-39"><a id="__codelineno-156-39" name="__codelineno-156-39"></a><a href="#__codelineno-156-39"><span class="linenos" data-linenos="39 "></span></a>
</span><span id="__span-156-40"><a id="__codelineno-156-40" name="__codelineno-156-40"></a><a href="#__codelineno-156-40"><span class="linenos" data-linenos="40 "></span></a><span class="w">    </span><span class="k">always</span><span class="p">@(</span><span class="k">posedge</span><span class="w"> </span><span class="n">clk</span><span class="p">)</span><span class="k">begin</span>
</span><span id="__span-156-41"><a id="__codelineno-156-41" name="__codelineno-156-41"></a><a href="#__codelineno-156-41"><span class="linenos" data-linenos="41 "></span></a><span class="w">        </span><span class="k">if</span><span class="p">(</span><span class="n">reset</span><span class="p">)</span><span class="w"> </span><span class="n">state</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">re</span><span class="p">;</span>
</span><span id="__span-156-42"><a id="__codelineno-156-42" name="__codelineno-156-42"></a><a href="#__codelineno-156-42"><span class="linenos" data-linenos="42 "></span></a><span class="w">        </span><span class="k">else</span><span class="w"> </span><span class="n">state</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">next_state</span><span class="p">;</span>
</span><span id="__span-156-43"><a id="__codelineno-156-43" name="__codelineno-156-43"></a><a href="#__codelineno-156-43"><span class="linenos" data-linenos="43 "></span></a><span class="w">    </span><span class="k">end</span>
</span><span id="__span-156-44"><a id="__codelineno-156-44" name="__codelineno-156-44"></a><a href="#__codelineno-156-44"><span class="linenos" data-linenos="44 "></span></a>
</span><span id="__span-156-45"><a id="__codelineno-156-45" name="__codelineno-156-45"></a><a href="#__codelineno-156-45"><span class="linenos" data-linenos="45 "></span></a><span class="w">    </span><span class="c1">//Counter</span>
</span><span id="__span-156-46"><a id="__codelineno-156-46" name="__codelineno-156-46"></a><a href="#__codelineno-156-46"><span class="linenos" data-linenos="46 "></span></a><span class="w">    </span><span class="kt">reg</span><span class="w"> </span><span class="p">[</span><span class="mh">9</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">num</span><span class="p">;</span>
</span><span id="__span-156-47"><a id="__codelineno-156-47" name="__codelineno-156-47"></a><a href="#__codelineno-156-47"><span class="linenos" data-linenos="47 "></span></a><span class="w">    </span><span class="k">always</span><span class="p">@(</span><span class="k">posedge</span><span class="w"> </span><span class="n">clk</span><span class="p">)</span><span class="k">begin</span>
</span><span id="__span-156-48"><a id="__codelineno-156-48" name="__codelineno-156-48"></a><a href="#__codelineno-156-48"><span class="linenos" data-linenos="48 "></span></a><span class="w">        </span><span class="k">if</span><span class="p">(</span><span class="n">reset</span><span class="p">)</span><span class="w"> </span><span class="n">num</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="mh">10</span><span class="mi">&#39;d0</span><span class="p">;</span>
</span><span id="__span-156-49"><a id="__codelineno-156-49" name="__codelineno-156-49"></a><a href="#__codelineno-156-49"><span class="linenos" data-linenos="49 "></span></a><span class="w">        </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="p">(</span><span class="n">num</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mh">10</span><span class="mi">&#39;d999</span><span class="p">)</span><span class="w"> </span><span class="n">num</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="mh">10</span><span class="mi">&#39;d0</span><span class="p">;</span>
</span><span id="__span-156-50"><a id="__codelineno-156-50" name="__codelineno-156-50"></a><a href="#__codelineno-156-50"><span class="linenos" data-linenos="50 "></span></a><span class="w">        </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="p">(</span><span class="n">counting</span><span class="p">)</span><span class="w"> </span><span class="n">num</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">num</span><span class="w"> </span><span class="o">+</span><span class="mh">10</span><span class="mi">&#39;d1</span><span class="p">;</span>
</span><span id="__span-156-51"><a id="__codelineno-156-51" name="__codelineno-156-51"></a><a href="#__codelineno-156-51"><span class="linenos" data-linenos="51 "></span></a><span class="w">        </span><span class="k">else</span><span class="w"> </span><span class="n">num</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">num</span><span class="p">;</span>
</span><span id="__span-156-52"><a id="__codelineno-156-52" name="__codelineno-156-52"></a><a href="#__codelineno-156-52"><span class="linenos" data-linenos="52 "></span></a><span class="w">    </span><span class="k">end</span>
</span><span id="__span-156-53"><a id="__codelineno-156-53" name="__codelineno-156-53"></a><a href="#__codelineno-156-53"><span class="linenos" data-linenos="53 "></span></a><span class="w">    </span><span class="c1">//Data</span>
</span><span id="__span-156-54"><a id="__codelineno-156-54" name="__codelineno-156-54"></a><a href="#__codelineno-156-54"><span class="linenos" data-linenos="54 "></span></a><span class="w">    </span><span class="kt">wire</span><span class="w"> </span><span class="n">is_data_shift</span><span class="p">;</span>
</span><span id="__span-156-55"><a id="__codelineno-156-55" name="__codelineno-156-55"></a><a href="#__codelineno-156-55"><span class="linenos" data-linenos="55 "></span></a><span class="w">    </span><span class="kt">reg</span><span class="w"> </span><span class="p">[</span><span class="mh">3</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">data_pipe</span><span class="p">;</span>
</span><span id="__span-156-56"><a id="__codelineno-156-56" name="__codelineno-156-56"></a><a href="#__codelineno-156-56"><span class="linenos" data-linenos="56 "></span></a><span class="w">    </span><span class="k">assign</span><span class="w"> </span><span class="n">is_data_shift</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">state</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">shift_o</span><span class="p">)</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="p">(</span><span class="n">state</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">shift_l</span><span class="p">)</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="p">(</span><span class="n">state</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">shift_lo</span><span class="p">)</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="p">(</span><span class="n">state</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">shift_ll</span><span class="p">);</span>
</span><span id="__span-156-57"><a id="__codelineno-156-57" name="__codelineno-156-57"></a><a href="#__codelineno-156-57"><span class="linenos" data-linenos="57 "></span></a><span class="w">    </span><span class="k">always</span><span class="p">@(</span><span class="k">posedge</span><span class="w"> </span><span class="n">clk</span><span class="p">)</span><span class="k">begin</span>
</span><span id="__span-156-58"><a id="__codelineno-156-58" name="__codelineno-156-58"></a><a href="#__codelineno-156-58"><span class="linenos" data-linenos="58 "></span></a><span class="w">        </span><span class="k">if</span><span class="p">(</span><span class="n">reset</span><span class="p">)</span><span class="w"> </span><span class="n">data_pipe</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="mh">4</span><span class="mi">&#39;d0</span><span class="p">;</span>
</span><span id="__span-156-59"><a id="__codelineno-156-59" name="__codelineno-156-59"></a><a href="#__codelineno-156-59"><span class="linenos" data-linenos="59 "></span></a><span class="w">        </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="p">(</span><span class="n">is_data_shift</span><span class="p">)</span><span class="w"> </span><span class="n">data_pipe</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="p">{</span><span class="n">data_pipe</span><span class="p">[</span><span class="mh">2</span><span class="o">:</span><span class="mh">0</span><span class="p">],</span><span class="w"> </span><span class="n">data</span><span class="p">};</span>
</span><span id="__span-156-60"><a id="__codelineno-156-60" name="__codelineno-156-60"></a><a href="#__codelineno-156-60"><span class="linenos" data-linenos="60 "></span></a><span class="w">        </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="p">(</span><span class="n">num</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mh">10</span><span class="mi">&#39;d999</span><span class="p">)</span><span class="w"> </span><span class="n">data_pipe</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">data_pipe</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mh">1</span><span class="mb">&#39;b1</span><span class="p">;</span>
</span><span id="__span-156-61"><a id="__codelineno-156-61" name="__codelineno-156-61"></a><a href="#__codelineno-156-61"><span class="linenos" data-linenos="61 "></span></a><span class="w">        </span><span class="k">else</span><span class="w"> </span><span class="n">data_pipe</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">data_pipe</span><span class="p">;</span>
</span><span id="__span-156-62"><a id="__codelineno-156-62" name="__codelineno-156-62"></a><a href="#__codelineno-156-62"><span class="linenos" data-linenos="62 "></span></a><span class="w">    </span><span class="k">end</span>
</span><span id="__span-156-63"><a id="__codelineno-156-63" name="__codelineno-156-63"></a><a href="#__codelineno-156-63"><span class="linenos" data-linenos="63 "></span></a><span class="w">    </span><span class="k">assign</span><span class="w"> </span><span class="n">count</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">data_pipe</span><span class="p">;</span>
</span><span id="__span-156-64"><a id="__codelineno-156-64" name="__codelineno-156-64"></a><a href="#__codelineno-156-64"><span class="linenos" data-linenos="64 "></span></a><span class="w">    </span><span class="k">assign</span><span class="w"> </span><span class="n">counting</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">state</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">is_count</span><span class="p">);</span>
</span><span id="__span-156-65"><a id="__codelineno-156-65" name="__codelineno-156-65"></a><a href="#__codelineno-156-65"><span class="linenos" data-linenos="65 "></span></a><span class="w">    </span><span class="k">assign</span><span class="w"> </span><span class="n">done</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">state</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">is_finish</span><span class="p">);</span>
</span><span id="__span-156-66"><a id="__codelineno-156-66" name="__codelineno-156-66"></a><a href="#__codelineno-156-66"><span class="linenos" data-linenos="66 "></span></a><span class="k">endmodule</span>
</span></code></pre></div></p>
<hr />
<h4 id="fsm-one-hot-logic-equations">FSM: One-hot logic equations<a class="headerlink" href="#fsm-one-hot-logic-equations" title="Anchor link to this section for reference">⚓︎</a></h4>
<p>Website: <a href="https://hdlbits.01xz.net/wiki/Exams/review2015_fsmonehot" target="_blank">https://hdlbits.01xz.net/wiki/Exams/review2015_fsmonehot</a></p>
<p>這題跟上題比，不需要考慮clock，要用assign接，滿容易的。
<div class="language-verilog highlight"><span class="filename">Verilog</span><pre><span></span><code><span id="__span-157-1"><a id="__codelineno-157-1" name="__codelineno-157-1"></a><a href="#__codelineno-157-1"><span class="linenos" data-linenos=" 1 "></span></a><span class="k">module</span><span class="w"> </span><span class="n">top_module</span><span class="p">(</span>
</span><span id="__span-157-2"><a id="__codelineno-157-2" name="__codelineno-157-2"></a><a href="#__codelineno-157-2"><span class="linenos" data-linenos=" 2 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">d</span><span class="p">,</span>
</span><span id="__span-157-3"><a id="__codelineno-157-3" name="__codelineno-157-3"></a><a href="#__codelineno-157-3"><span class="linenos" data-linenos=" 3 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">done_counting</span><span class="p">,</span>
</span><span id="__span-157-4"><a id="__codelineno-157-4" name="__codelineno-157-4"></a><a href="#__codelineno-157-4"><span class="linenos" data-linenos=" 4 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">ack</span><span class="p">,</span>
</span><span id="__span-157-5"><a id="__codelineno-157-5" name="__codelineno-157-5"></a><a href="#__codelineno-157-5"><span class="linenos" data-linenos=" 5 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="p">[</span><span class="mh">9</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">state</span><span class="p">,</span><span class="w">    </span><span class="c1">// 10-bit one-hot current state</span>
</span><span id="__span-157-6"><a id="__codelineno-157-6" name="__codelineno-157-6"></a><a href="#__codelineno-157-6"><span class="linenos" data-linenos=" 6 "></span></a><span class="w">    </span><span class="k">output</span><span class="w"> </span><span class="n">B3_next</span><span class="p">,</span>
</span><span id="__span-157-7"><a id="__codelineno-157-7" name="__codelineno-157-7"></a><a href="#__codelineno-157-7"><span class="linenos" data-linenos=" 7 "></span></a><span class="w">    </span><span class="k">output</span><span class="w"> </span><span class="n">S_next</span><span class="p">,</span>
</span><span id="__span-157-8"><a id="__codelineno-157-8" name="__codelineno-157-8"></a><a href="#__codelineno-157-8"><span class="linenos" data-linenos=" 8 "></span></a><span class="w">    </span><span class="k">output</span><span class="w"> </span><span class="n">S1_next</span><span class="p">,</span>
</span><span id="__span-157-9"><a id="__codelineno-157-9" name="__codelineno-157-9"></a><a href="#__codelineno-157-9"><span class="linenos" data-linenos=" 9 "></span></a><span class="w">    </span><span class="k">output</span><span class="w"> </span><span class="n">Count_next</span><span class="p">,</span>
</span><span id="__span-157-10"><a id="__codelineno-157-10" name="__codelineno-157-10"></a><a href="#__codelineno-157-10"><span class="linenos" data-linenos="10 "></span></a><span class="w">    </span><span class="k">output</span><span class="w"> </span><span class="n">Wait_next</span><span class="p">,</span>
</span><span id="__span-157-11"><a id="__codelineno-157-11" name="__codelineno-157-11"></a><a href="#__codelineno-157-11"><span class="linenos" data-linenos="11 "></span></a><span class="w">    </span><span class="k">output</span><span class="w"> </span><span class="n">done</span><span class="p">,</span>
</span><span id="__span-157-12"><a id="__codelineno-157-12" name="__codelineno-157-12"></a><a href="#__codelineno-157-12"><span class="linenos" data-linenos="12 "></span></a><span class="w">    </span><span class="k">output</span><span class="w"> </span><span class="n">counting</span><span class="p">,</span>
</span><span id="__span-157-13"><a id="__codelineno-157-13" name="__codelineno-157-13"></a><a href="#__codelineno-157-13"><span class="linenos" data-linenos="13 "></span></a><span class="w">    </span><span class="k">output</span><span class="w"> </span><span class="n">shift_ena</span>
</span><span id="__span-157-14"><a id="__codelineno-157-14" name="__codelineno-157-14"></a><a href="#__codelineno-157-14"><span class="linenos" data-linenos="14 "></span></a><span class="p">);</span><span class="w"> </span><span class="c1">//</span>
</span><span id="__span-157-15"><a id="__codelineno-157-15" name="__codelineno-157-15"></a><a href="#__codelineno-157-15"><span class="linenos" data-linenos="15 "></span></a>
</span><span id="__span-157-16"><a id="__codelineno-157-16" name="__codelineno-157-16"></a><a href="#__codelineno-157-16"><span class="linenos" data-linenos="16 "></span></a><span class="w">    </span><span class="c1">// You may use these parameters to access state bits using e.g., state[B2] instead of state[6].</span>
</span><span id="__span-157-17"><a id="__codelineno-157-17" name="__codelineno-157-17"></a><a href="#__codelineno-157-17"><span class="linenos" data-linenos="17 "></span></a><span class="w">    </span><span class="k">parameter</span><span class="w"> </span><span class="n">S</span><span class="o">=</span><span class="mh">0</span><span class="p">,</span><span class="w"> </span><span class="n">S1</span><span class="o">=</span><span class="mh">1</span><span class="p">,</span><span class="w"> </span><span class="n">S11</span><span class="o">=</span><span class="mh">2</span><span class="p">,</span><span class="w"> </span><span class="n">S110</span><span class="o">=</span><span class="mh">3</span><span class="p">,</span><span class="w"> </span><span class="n">B0</span><span class="o">=</span><span class="mh">4</span><span class="p">,</span><span class="w"> </span><span class="n">B1</span><span class="o">=</span><span class="mh">5</span><span class="p">,</span><span class="w"> </span><span class="n">B2</span><span class="o">=</span><span class="mh">6</span><span class="p">,</span><span class="w"> </span><span class="n">B3</span><span class="o">=</span><span class="mh">7</span><span class="p">,</span><span class="w"> </span><span class="n">Count</span><span class="o">=</span><span class="mh">8</span><span class="p">,</span><span class="w"> </span><span class="n">Wait</span><span class="o">=</span><span class="mh">9</span><span class="p">;</span>
</span><span id="__span-157-18"><a id="__codelineno-157-18" name="__codelineno-157-18"></a><a href="#__codelineno-157-18"><span class="linenos" data-linenos="18 "></span></a><span class="w">    </span><span class="k">assign</span><span class="w"> </span><span class="n">B3_next</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">state</span><span class="p">[</span><span class="n">B2</span><span class="p">];</span>
</span><span id="__span-157-19"><a id="__codelineno-157-19" name="__codelineno-157-19"></a><a href="#__codelineno-157-19"><span class="linenos" data-linenos="19 "></span></a><span class="w">    </span><span class="k">assign</span><span class="w"> </span><span class="n">S_next</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">state</span><span class="p">[</span><span class="n">Wait</span><span class="p">]</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="n">ack</span><span class="p">)</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="p">(</span><span class="n">state</span><span class="p">[</span><span class="n">S</span><span class="p">]</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="o">~</span><span class="n">d</span><span class="p">)</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="p">(</span><span class="n">state</span><span class="p">[</span><span class="n">S1</span><span class="p">]</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="o">~</span><span class="n">d</span><span class="p">)</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="p">(</span><span class="n">state</span><span class="p">[</span><span class="n">S110</span><span class="p">]</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="o">~</span><span class="n">d</span><span class="p">);</span>
</span><span id="__span-157-20"><a id="__codelineno-157-20" name="__codelineno-157-20"></a><a href="#__codelineno-157-20"><span class="linenos" data-linenos="20 "></span></a><span class="w">    </span><span class="k">assign</span><span class="w"> </span><span class="n">S1_next</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">state</span><span class="p">[</span><span class="n">S</span><span class="p">]</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="n">d</span><span class="p">;</span>
</span><span id="__span-157-21"><a id="__codelineno-157-21" name="__codelineno-157-21"></a><a href="#__codelineno-157-21"><span class="linenos" data-linenos="21 "></span></a><span class="w">    </span><span class="k">assign</span><span class="w"> </span><span class="n">Count_next</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">state</span><span class="p">[</span><span class="n">B3</span><span class="p">]</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="p">(</span><span class="n">state</span><span class="p">[</span><span class="n">Count</span><span class="p">]</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="o">~</span><span class="n">done_counting</span><span class="p">);</span>
</span><span id="__span-157-22"><a id="__codelineno-157-22" name="__codelineno-157-22"></a><a href="#__codelineno-157-22"><span class="linenos" data-linenos="22 "></span></a><span class="w">    </span><span class="k">assign</span><span class="w"> </span><span class="n">Wait_next</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">state</span><span class="p">[</span><span class="n">Count</span><span class="p">]</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="n">done_counting</span><span class="p">)</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="p">(</span><span class="n">state</span><span class="p">[</span><span class="n">Wait</span><span class="p">]</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="o">~</span><span class="n">ack</span><span class="p">);</span>
</span><span id="__span-157-23"><a id="__codelineno-157-23" name="__codelineno-157-23"></a><a href="#__codelineno-157-23"><span class="linenos" data-linenos="23 "></span></a><span class="w">    </span><span class="k">assign</span><span class="w"> </span><span class="n">done</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">state</span><span class="p">[</span><span class="n">Wait</span><span class="p">];</span>
</span><span id="__span-157-24"><a id="__codelineno-157-24" name="__codelineno-157-24"></a><a href="#__codelineno-157-24"><span class="linenos" data-linenos="24 "></span></a><span class="w">    </span><span class="k">assign</span><span class="w"> </span><span class="n">counting</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">state</span><span class="p">[</span><span class="n">Count</span><span class="p">];</span>
</span><span id="__span-157-25"><a id="__codelineno-157-25" name="__codelineno-157-25"></a><a href="#__codelineno-157-25"><span class="linenos" data-linenos="25 "></span></a><span class="w">    </span><span class="k">assign</span><span class="w"> </span><span class="n">shift_ena</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">state</span><span class="p">[</span><span class="n">B0</span><span class="p">]</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">state</span><span class="p">[</span><span class="n">B1</span><span class="p">]</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">state</span><span class="p">[</span><span class="n">B2</span><span class="p">]</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">state</span><span class="p">[</span><span class="n">B3</span><span class="p">];</span>
</span><span id="__span-157-26"><a id="__codelineno-157-26" name="__codelineno-157-26"></a><a href="#__codelineno-157-26"><span class="linenos" data-linenos="26 "></span></a><span class="k">endmodule</span>
</span></code></pre></div></p>
<hr />
<h2 id="verification-reading-simulations">Verification: Reading Simulations<a class="headerlink" href="#verification-reading-simulations" title="Anchor link to this section for reference">⚓︎</a></h2>
<h3 id="finding-bugs-in-code">Finding bugs in code<a class="headerlink" href="#finding-bugs-in-code" title="Anchor link to this section for reference">⚓︎</a></h3>
<h4 id="mux">Mux<a class="headerlink" href="#mux" title="Anchor link to this section for reference">⚓︎</a></h4>
<p>Website: <a href="https://hdlbits.01xz.net/wiki/Bugs_mux2" target="_blank">https://hdlbits.01xz.net/wiki/Bugs_mux2</a></p>
<p>終於到了要debug的題型了，這部分相對先前的題型友善許多，這題的bug出在output要改成8bit，還有用三元運算可能方便一點。
<div class="language-verilog highlight"><span class="filename">Verilog</span><pre><span></span><code><span id="__span-158-1"><a id="__codelineno-158-1" name="__codelineno-158-1"></a><a href="#__codelineno-158-1"><span class="linenos" data-linenos="1 "></span></a><span class="k">module</span><span class="w"> </span><span class="n">top_module</span><span class="w"> </span><span class="p">(</span>
</span><span id="__span-158-2"><a id="__codelineno-158-2" name="__codelineno-158-2"></a><a href="#__codelineno-158-2"><span class="linenos" data-linenos="2 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">sel</span><span class="p">,</span>
</span><span id="__span-158-3"><a id="__codelineno-158-3" name="__codelineno-158-3"></a><a href="#__codelineno-158-3"><span class="linenos" data-linenos="3 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="p">[</span><span class="mh">7</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">a</span><span class="p">,</span>
</span><span id="__span-158-4"><a id="__codelineno-158-4" name="__codelineno-158-4"></a><a href="#__codelineno-158-4"><span class="linenos" data-linenos="4 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="p">[</span><span class="mh">7</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">b</span><span class="p">,</span>
</span><span id="__span-158-5"><a id="__codelineno-158-5" name="__codelineno-158-5"></a><a href="#__codelineno-158-5"><span class="linenos" data-linenos="5 "></span></a><span class="w">    </span><span class="k">output</span><span class="w"> </span><span class="p">[</span><span class="mh">7</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">out</span><span class="w">  </span><span class="p">);</span>
</span><span id="__span-158-6"><a id="__codelineno-158-6" name="__codelineno-158-6"></a><a href="#__codelineno-158-6"><span class="linenos" data-linenos="6 "></span></a>
</span><span id="__span-158-7"><a id="__codelineno-158-7" name="__codelineno-158-7"></a><a href="#__codelineno-158-7"><span class="linenos" data-linenos="7 "></span></a><span class="w">    </span><span class="k">assign</span><span class="w"> </span><span class="n">out</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">sel</span><span class="o">?</span><span class="w"> </span><span class="nl">a:</span><span class="w"> </span><span class="n">b</span><span class="p">;</span>
</span><span id="__span-158-8"><a id="__codelineno-158-8" name="__codelineno-158-8"></a><a href="#__codelineno-158-8"><span class="linenos" data-linenos="8 "></span></a>
</span><span id="__span-158-9"><a id="__codelineno-158-9" name="__codelineno-158-9"></a><a href="#__codelineno-158-9"><span class="linenos" data-linenos="9 "></span></a><span class="k">endmodule</span>
</span></code></pre></div></p>
<hr />
<h4 id="nand">NAND<a class="headerlink" href="#nand" title="Anchor link to this section for reference">⚓︎</a></h4>
<p>Website: <a href="https://hdlbits.01xz.net/wiki/Bugs_nand3" target="_blank">https://hdlbits.01xz.net/wiki/Bugs_nand3</a></p>
<p>這題要寫nand，所以最後要接個not gate，然後要使用submodule的話，參數要馬照順序給，要馬照名字給。
<div class="language-verilog highlight"><span class="filename">Verilog</span><pre><span></span><code><span id="__span-159-1"><a id="__codelineno-159-1" name="__codelineno-159-1"></a><a href="#__codelineno-159-1"><span class="linenos" data-linenos="1 "></span></a><span class="k">module</span><span class="w"> </span><span class="n">top_module</span><span class="w"> </span><span class="p">(</span><span class="k">input</span><span class="w"> </span><span class="n">a</span><span class="p">,</span><span class="w"> </span><span class="k">input</span><span class="w"> </span><span class="n">b</span><span class="p">,</span><span class="w"> </span><span class="k">input</span><span class="w"> </span><span class="n">c</span><span class="p">,</span><span class="w"> </span><span class="k">output</span><span class="w"> </span><span class="n">out</span><span class="p">);</span><span class="c1">//</span>
</span><span id="__span-159-2"><a id="__codelineno-159-2" name="__codelineno-159-2"></a><a href="#__codelineno-159-2"><span class="linenos" data-linenos="2 "></span></a><span class="w">    </span><span class="kt">wire</span><span class="w"> </span><span class="n">out_inv</span><span class="p">;</span>
</span><span id="__span-159-3"><a id="__codelineno-159-3" name="__codelineno-159-3"></a><a href="#__codelineno-159-3"><span class="linenos" data-linenos="3 "></span></a><span class="w">    </span><span class="n">andgate</span><span class="w"> </span><span class="n">inst1</span><span class="w"> </span><span class="p">(</span><span class="w"> </span><span class="p">.</span><span class="n">out</span><span class="p">(</span><span class="n">out_inv</span><span class="p">),</span><span class="w"> </span><span class="p">.</span><span class="n">a</span><span class="p">(</span><span class="n">a</span><span class="p">),</span><span class="w"> </span><span class="p">.</span><span class="n">b</span><span class="p">(</span><span class="n">b</span><span class="p">),</span><span class="w"> </span><span class="p">.</span><span class="n">c</span><span class="p">(</span><span class="n">c</span><span class="p">),</span><span class="w"> </span><span class="p">.</span><span class="n">d</span><span class="p">(</span><span class="mh">1</span><span class="mb">&#39;b1</span><span class="p">),</span><span class="w"> </span><span class="p">.</span><span class="n">e</span><span class="p">(</span><span class="mh">1</span><span class="mb">&#39;b1</span><span class="p">)</span><span class="w"> </span><span class="p">);</span>
</span><span id="__span-159-4"><a id="__codelineno-159-4" name="__codelineno-159-4"></a><a href="#__codelineno-159-4"><span class="linenos" data-linenos="4 "></span></a><span class="w">    </span><span class="k">assign</span><span class="w"> </span><span class="n">out</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">~</span><span class="n">out_inv</span><span class="p">;</span>
</span><span id="__span-159-5"><a id="__codelineno-159-5" name="__codelineno-159-5"></a><a href="#__codelineno-159-5"><span class="linenos" data-linenos="5 "></span></a><span class="k">endmodule</span>
</span></code></pre></div></p>
<hr />
<h4 id="mux2">Mux(2)<a class="headerlink" href="#mux2" title="Anchor link to this section for reference">⚓︎</a></h4>
<p>Website: <a href="https://hdlbits.01xz.net/wiki/Bugs_mux4" target="_blank">https://hdlbits.01xz.net/wiki/Bugs_mux4</a></p>
<p>這題問題出在wire沒開vector，sel亂接，還有變數重複命名。
<div class="language-verilog highlight"><span class="filename">Verilog</span><pre><span></span><code><span id="__span-160-1"><a id="__codelineno-160-1" name="__codelineno-160-1"></a><a href="#__codelineno-160-1"><span class="linenos" data-linenos=" 1 "></span></a><span class="k">module</span><span class="w"> </span><span class="n">top_module</span><span class="w"> </span><span class="p">(</span>
</span><span id="__span-160-2"><a id="__codelineno-160-2" name="__codelineno-160-2"></a><a href="#__codelineno-160-2"><span class="linenos" data-linenos=" 2 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="p">[</span><span class="mh">1</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">sel</span><span class="p">,</span>
</span><span id="__span-160-3"><a id="__codelineno-160-3" name="__codelineno-160-3"></a><a href="#__codelineno-160-3"><span class="linenos" data-linenos=" 3 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="p">[</span><span class="mh">7</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">a</span><span class="p">,</span>
</span><span id="__span-160-4"><a id="__codelineno-160-4" name="__codelineno-160-4"></a><a href="#__codelineno-160-4"><span class="linenos" data-linenos=" 4 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="p">[</span><span class="mh">7</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">b</span><span class="p">,</span>
</span><span id="__span-160-5"><a id="__codelineno-160-5" name="__codelineno-160-5"></a><a href="#__codelineno-160-5"><span class="linenos" data-linenos=" 5 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="p">[</span><span class="mh">7</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">c</span><span class="p">,</span>
</span><span id="__span-160-6"><a id="__codelineno-160-6" name="__codelineno-160-6"></a><a href="#__codelineno-160-6"><span class="linenos" data-linenos=" 6 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="p">[</span><span class="mh">7</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">d</span><span class="p">,</span>
</span><span id="__span-160-7"><a id="__codelineno-160-7" name="__codelineno-160-7"></a><a href="#__codelineno-160-7"><span class="linenos" data-linenos=" 7 "></span></a><span class="w">    </span><span class="k">output</span><span class="w"> </span><span class="p">[</span><span class="mh">7</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">out</span><span class="w">  </span><span class="p">);</span><span class="w"> </span><span class="c1">//</span>
</span><span id="__span-160-8"><a id="__codelineno-160-8" name="__codelineno-160-8"></a><a href="#__codelineno-160-8"><span class="linenos" data-linenos=" 8 "></span></a>
</span><span id="__span-160-9"><a id="__codelineno-160-9" name="__codelineno-160-9"></a><a href="#__codelineno-160-9"><span class="linenos" data-linenos=" 9 "></span></a><span class="w">    </span><span class="kt">wire</span><span class="w"> </span><span class="p">[</span><span class="mh">7</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="n">mux0</span><span class="p">,</span><span class="w"> </span><span class="n">mux1</span><span class="p">;</span>
</span><span id="__span-160-10"><a id="__codelineno-160-10" name="__codelineno-160-10"></a><a href="#__codelineno-160-10"><span class="linenos" data-linenos="10 "></span></a><span class="w">    </span><span class="n">mux2</span><span class="w"> </span><span class="n">mux_0</span><span class="w"> </span><span class="p">(</span><span class="w"> </span><span class="n">sel</span><span class="p">[</span><span class="mh">0</span><span class="p">],</span><span class="w">    </span><span class="n">a</span><span class="p">,</span><span class="w">    </span><span class="n">b</span><span class="p">,</span><span class="w"> </span><span class="n">mux0</span><span class="w"> </span><span class="p">);</span>
</span><span id="__span-160-11"><a id="__codelineno-160-11" name="__codelineno-160-11"></a><a href="#__codelineno-160-11"><span class="linenos" data-linenos="11 "></span></a><span class="w">    </span><span class="n">mux2</span><span class="w"> </span><span class="n">mux_1</span><span class="w"> </span><span class="p">(</span><span class="w"> </span><span class="n">sel</span><span class="p">[</span><span class="mh">0</span><span class="p">],</span><span class="w">    </span><span class="n">c</span><span class="p">,</span><span class="w">    </span><span class="n">d</span><span class="p">,</span><span class="w"> </span><span class="n">mux1</span><span class="w"> </span><span class="p">);</span>
</span><span id="__span-160-12"><a id="__codelineno-160-12" name="__codelineno-160-12"></a><a href="#__codelineno-160-12"><span class="linenos" data-linenos="12 "></span></a><span class="w">    </span><span class="n">mux2</span><span class="w"> </span><span class="n">mux_2</span><span class="w"> </span><span class="p">(</span><span class="w"> </span><span class="n">sel</span><span class="p">[</span><span class="mh">1</span><span class="p">],</span><span class="w"> </span><span class="n">mux0</span><span class="p">,</span><span class="w"> </span><span class="n">mux1</span><span class="p">,</span><span class="w">  </span><span class="n">out</span><span class="w"> </span><span class="p">);</span>
</span><span id="__span-160-13"><a id="__codelineno-160-13" name="__codelineno-160-13"></a><a href="#__codelineno-160-13"><span class="linenos" data-linenos="13 "></span></a>
</span><span id="__span-160-14"><a id="__codelineno-160-14" name="__codelineno-160-14"></a><a href="#__codelineno-160-14"><span class="linenos" data-linenos="14 "></span></a><span class="k">endmodule</span>
</span></code></pre></div></p>
<hr />
<h4 id="addsub">Add/sub<a class="headerlink" href="#addsub" title="Anchor link to this section for reference">⚓︎</a></h4>
<p>Website: <a href="https://hdlbits.01xz.net/wiki/Bugs_addsubz" target="_blank">https://hdlbits.01xz.net/wiki/Bugs_addsubz</a></p>
<p>這題問題出在他把logical not和arithmetic not搞混了，還有沒寫else，會產生latch。
<div class="language-verilog highlight"><span class="filename">Verilog</span><pre><span></span><code><span id="__span-161-1"><a id="__codelineno-161-1" name="__codelineno-161-1"></a><a href="#__codelineno-161-1"><span class="linenos" data-linenos=" 1 "></span></a><span class="c1">// synthesis verilog_input_version verilog_2001</span>
</span><span id="__span-161-2"><a id="__codelineno-161-2" name="__codelineno-161-2"></a><a href="#__codelineno-161-2"><span class="linenos" data-linenos=" 2 "></span></a><span class="k">module</span><span class="w"> </span><span class="n">top_module</span><span class="w"> </span><span class="p">(</span><span class="w"> </span>
</span><span id="__span-161-3"><a id="__codelineno-161-3" name="__codelineno-161-3"></a><a href="#__codelineno-161-3"><span class="linenos" data-linenos=" 3 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">do_sub</span><span class="p">,</span>
</span><span id="__span-161-4"><a id="__codelineno-161-4" name="__codelineno-161-4"></a><a href="#__codelineno-161-4"><span class="linenos" data-linenos=" 4 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="p">[</span><span class="mh">7</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">a</span><span class="p">,</span>
</span><span id="__span-161-5"><a id="__codelineno-161-5" name="__codelineno-161-5"></a><a href="#__codelineno-161-5"><span class="linenos" data-linenos=" 5 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="p">[</span><span class="mh">7</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">b</span><span class="p">,</span>
</span><span id="__span-161-6"><a id="__codelineno-161-6" name="__codelineno-161-6"></a><a href="#__codelineno-161-6"><span class="linenos" data-linenos=" 6 "></span></a><span class="w">    </span><span class="k">output</span><span class="w"> </span><span class="kt">reg</span><span class="w"> </span><span class="p">[</span><span class="mh">7</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">out</span><span class="p">,</span>
</span><span id="__span-161-7"><a id="__codelineno-161-7" name="__codelineno-161-7"></a><a href="#__codelineno-161-7"><span class="linenos" data-linenos=" 7 "></span></a><span class="w">    </span><span class="k">output</span><span class="w"> </span><span class="kt">reg</span><span class="w"> </span><span class="n">result_is_zero</span>
</span><span id="__span-161-8"><a id="__codelineno-161-8" name="__codelineno-161-8"></a><a href="#__codelineno-161-8"><span class="linenos" data-linenos=" 8 "></span></a><span class="p">);</span><span class="c1">//</span>
</span><span id="__span-161-9"><a id="__codelineno-161-9" name="__codelineno-161-9"></a><a href="#__codelineno-161-9"><span class="linenos" data-linenos=" 9 "></span></a>
</span><span id="__span-161-10"><a id="__codelineno-161-10" name="__codelineno-161-10"></a><a href="#__codelineno-161-10"><span class="linenos" data-linenos="10 "></span></a><span class="w">    </span><span class="k">always</span><span class="w"> </span><span class="p">@(</span><span class="o">*</span><span class="p">)</span><span class="w"> </span><span class="k">begin</span>
</span><span id="__span-161-11"><a id="__codelineno-161-11" name="__codelineno-161-11"></a><a href="#__codelineno-161-11"><span class="linenos" data-linenos="11 "></span></a><span class="w">        </span><span class="k">case</span><span class="w"> </span><span class="p">(</span><span class="n">do_sub</span><span class="p">)</span>
</span><span id="__span-161-12"><a id="__codelineno-161-12" name="__codelineno-161-12"></a><a href="#__codelineno-161-12"><span class="linenos" data-linenos="12 "></span></a><span class="w">          </span><span class="mh">0</span><span class="o">:</span><span class="w"> </span><span class="n">out</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">a</span><span class="o">+</span><span class="n">b</span><span class="p">;</span>
</span><span id="__span-161-13"><a id="__codelineno-161-13" name="__codelineno-161-13"></a><a href="#__codelineno-161-13"><span class="linenos" data-linenos="13 "></span></a><span class="w">          </span><span class="mh">1</span><span class="o">:</span><span class="w"> </span><span class="n">out</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">a</span><span class="o">-</span><span class="n">b</span><span class="p">;</span>
</span><span id="__span-161-14"><a id="__codelineno-161-14" name="__codelineno-161-14"></a><a href="#__codelineno-161-14"><span class="linenos" data-linenos="14 "></span></a><span class="w">        </span><span class="k">endcase</span>
</span><span id="__span-161-15"><a id="__codelineno-161-15" name="__codelineno-161-15"></a><a href="#__codelineno-161-15"><span class="linenos" data-linenos="15 "></span></a>
</span><span id="__span-161-16"><a id="__codelineno-161-16" name="__codelineno-161-16"></a><a href="#__codelineno-161-16"><span class="linenos" data-linenos="16 "></span></a><span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="n">out</span><span class="p">)</span>
</span><span id="__span-161-17"><a id="__codelineno-161-17" name="__codelineno-161-17"></a><a href="#__codelineno-161-17"><span class="linenos" data-linenos="17 "></span></a><span class="w">            </span><span class="n">result_is_zero</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">1</span><span class="p">;</span>
</span><span id="__span-161-18"><a id="__codelineno-161-18" name="__codelineno-161-18"></a><a href="#__codelineno-161-18"><span class="linenos" data-linenos="18 "></span></a><span class="w">        </span><span class="k">else</span><span class="w"> </span><span class="n">result_is_zero</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">0</span><span class="p">;</span>
</span><span id="__span-161-19"><a id="__codelineno-161-19" name="__codelineno-161-19"></a><a href="#__codelineno-161-19"><span class="linenos" data-linenos="19 "></span></a><span class="w">    </span><span class="k">end</span>
</span><span id="__span-161-20"><a id="__codelineno-161-20" name="__codelineno-161-20"></a><a href="#__codelineno-161-20"><span class="linenos" data-linenos="20 "></span></a>
</span><span id="__span-161-21"><a id="__codelineno-161-21" name="__codelineno-161-21"></a><a href="#__codelineno-161-21"><span class="linenos" data-linenos="21 "></span></a><span class="k">endmodule</span>
</span></code></pre></div></p>
<hr />
<h4 id="case-statement_1">Case statement<a class="headerlink" href="#case-statement_1" title="Anchor link to this section for reference">⚓︎</a></h4>
<p>Website: <a href="https://hdlbits.01xz.net/wiki/Bugs_case" target="_blank">https://hdlbits.01xz.net/wiki/Bugs_case</a></p>
<p>這題問題出在他進位亂寫，bit亂寫，改一下就結束了。
<div class="language-verilog highlight"><span class="filename">Verilog</span><pre><span></span><code><span id="__span-162-1"><a id="__codelineno-162-1" name="__codelineno-162-1"></a><a href="#__codelineno-162-1"><span class="linenos" data-linenos=" 1 "></span></a><span class="k">module</span><span class="w"> </span><span class="n">top_module</span><span class="w"> </span><span class="p">(</span>
</span><span id="__span-162-2"><a id="__codelineno-162-2" name="__codelineno-162-2"></a><a href="#__codelineno-162-2"><span class="linenos" data-linenos=" 2 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="p">[</span><span class="mh">7</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">code</span><span class="p">,</span>
</span><span id="__span-162-3"><a id="__codelineno-162-3" name="__codelineno-162-3"></a><a href="#__codelineno-162-3"><span class="linenos" data-linenos=" 3 "></span></a><span class="w">    </span><span class="k">output</span><span class="w"> </span><span class="kt">reg</span><span class="w"> </span><span class="p">[</span><span class="mh">3</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">out</span><span class="p">,</span>
</span><span id="__span-162-4"><a id="__codelineno-162-4" name="__codelineno-162-4"></a><a href="#__codelineno-162-4"><span class="linenos" data-linenos=" 4 "></span></a><span class="w">    </span><span class="k">output</span><span class="w"> </span><span class="kt">reg</span><span class="w"> </span><span class="n">valid</span><span class="o">=</span><span class="mh">1</span><span class="mb">&#39;b1</span><span class="w"> </span><span class="p">);</span><span class="c1">//</span>
</span><span id="__span-162-5"><a id="__codelineno-162-5" name="__codelineno-162-5"></a><a href="#__codelineno-162-5"><span class="linenos" data-linenos=" 5 "></span></a>
</span><span id="__span-162-6"><a id="__codelineno-162-6" name="__codelineno-162-6"></a><a href="#__codelineno-162-6"><span class="linenos" data-linenos=" 6 "></span></a><span class="w">     </span><span class="k">always</span><span class="w"> </span><span class="p">@(</span><span class="o">*</span><span class="p">)</span>
</span><span id="__span-162-7"><a id="__codelineno-162-7" name="__codelineno-162-7"></a><a href="#__codelineno-162-7"><span class="linenos" data-linenos=" 7 "></span></a><span class="w">        </span><span class="k">case</span><span class="w"> </span><span class="p">(</span><span class="n">code</span><span class="p">)</span>
</span><span id="__span-162-8"><a id="__codelineno-162-8" name="__codelineno-162-8"></a><a href="#__codelineno-162-8"><span class="linenos" data-linenos=" 8 "></span></a><span class="w">            </span><span class="mh">8&#39;h45</span><span class="o">:</span><span class="w"> </span><span class="n">out</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">4</span><span class="mi">&#39;d0</span><span class="p">;</span>
</span><span id="__span-162-9"><a id="__codelineno-162-9" name="__codelineno-162-9"></a><a href="#__codelineno-162-9"><span class="linenos" data-linenos=" 9 "></span></a><span class="w">            </span><span class="mh">8&#39;h16</span><span class="o">:</span><span class="w"> </span><span class="n">out</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">4</span><span class="mi">&#39;d1</span><span class="p">;</span>
</span><span id="__span-162-10"><a id="__codelineno-162-10" name="__codelineno-162-10"></a><a href="#__codelineno-162-10"><span class="linenos" data-linenos="10 "></span></a><span class="w">            </span><span class="mh">8&#39;h1e</span><span class="o">:</span><span class="w"> </span><span class="n">out</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">4</span><span class="mi">&#39;d2</span><span class="p">;</span>
</span><span id="__span-162-11"><a id="__codelineno-162-11" name="__codelineno-162-11"></a><a href="#__codelineno-162-11"><span class="linenos" data-linenos="11 "></span></a><span class="w">            </span><span class="mh">8&#39;h26</span><span class="o">:</span><span class="w"> </span><span class="n">out</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">4</span><span class="mi">&#39;d3</span><span class="p">;</span>
</span><span id="__span-162-12"><a id="__codelineno-162-12" name="__codelineno-162-12"></a><a href="#__codelineno-162-12"><span class="linenos" data-linenos="12 "></span></a><span class="w">            </span><span class="mh">8&#39;h25</span><span class="o">:</span><span class="w"> </span><span class="n">out</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">4</span><span class="mi">&#39;d4</span><span class="p">;</span>
</span><span id="__span-162-13"><a id="__codelineno-162-13" name="__codelineno-162-13"></a><a href="#__codelineno-162-13"><span class="linenos" data-linenos="13 "></span></a><span class="w">            </span><span class="mh">8&#39;h2e</span><span class="o">:</span><span class="w"> </span><span class="n">out</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">4</span><span class="mi">&#39;d5</span><span class="p">;</span>
</span><span id="__span-162-14"><a id="__codelineno-162-14" name="__codelineno-162-14"></a><a href="#__codelineno-162-14"><span class="linenos" data-linenos="14 "></span></a><span class="w">            </span><span class="mh">8&#39;h36</span><span class="o">:</span><span class="w"> </span><span class="n">out</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">4</span><span class="mi">&#39;d6</span><span class="p">;</span>
</span><span id="__span-162-15"><a id="__codelineno-162-15" name="__codelineno-162-15"></a><a href="#__codelineno-162-15"><span class="linenos" data-linenos="15 "></span></a><span class="w">            </span><span class="mh">8&#39;h3d</span><span class="o">:</span><span class="w"> </span><span class="n">out</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">4</span><span class="mi">&#39;d7</span><span class="p">;</span>
</span><span id="__span-162-16"><a id="__codelineno-162-16" name="__codelineno-162-16"></a><a href="#__codelineno-162-16"><span class="linenos" data-linenos="16 "></span></a><span class="w">            </span><span class="mh">8&#39;h3e</span><span class="o">:</span><span class="w"> </span><span class="n">out</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">4</span><span class="mi">&#39;d8</span><span class="p">;</span>
</span><span id="__span-162-17"><a id="__codelineno-162-17" name="__codelineno-162-17"></a><a href="#__codelineno-162-17"><span class="linenos" data-linenos="17 "></span></a><span class="w">            </span><span class="mh">8&#39;h46</span><span class="o">:</span><span class="w"> </span><span class="n">out</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">4</span><span class="mi">&#39;d9</span><span class="p">;</span>
</span><span id="__span-162-18"><a id="__codelineno-162-18" name="__codelineno-162-18"></a><a href="#__codelineno-162-18"><span class="linenos" data-linenos="18 "></span></a><span class="w">            </span><span class="k">default</span><span class="o">:</span><span class="w"> </span><span class="n">out</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">4</span><span class="mi">&#39;d0</span><span class="p">;</span>
</span><span id="__span-162-19"><a id="__codelineno-162-19" name="__codelineno-162-19"></a><a href="#__codelineno-162-19"><span class="linenos" data-linenos="19 "></span></a><span class="w">        </span><span class="k">endcase</span>
</span><span id="__span-162-20"><a id="__codelineno-162-20" name="__codelineno-162-20"></a><a href="#__codelineno-162-20"><span class="linenos" data-linenos="20 "></span></a><span class="w">    </span><span class="k">always</span><span class="p">@(</span><span class="o">*</span><span class="p">)</span><span class="k">begin</span>
</span><span id="__span-162-21"><a id="__codelineno-162-21" name="__codelineno-162-21"></a><a href="#__codelineno-162-21"><span class="linenos" data-linenos="21 "></span></a><span class="w">        </span><span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="p">(</span><span class="n">code</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mh">8&#39;h45</span><span class="p">)</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="o">!</span><span class="p">(</span><span class="n">out</span><span class="p">))</span>
</span><span id="__span-162-22"><a id="__codelineno-162-22" name="__codelineno-162-22"></a><a href="#__codelineno-162-22"><span class="linenos" data-linenos="22 "></span></a><span class="w">            </span><span class="n">valid</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">1</span><span class="mb">&#39;b0</span><span class="p">;</span>
</span><span id="__span-162-23"><a id="__codelineno-162-23" name="__codelineno-162-23"></a><a href="#__codelineno-162-23"><span class="linenos" data-linenos="23 "></span></a><span class="w">        </span><span class="k">else</span>
</span><span id="__span-162-24"><a id="__codelineno-162-24" name="__codelineno-162-24"></a><a href="#__codelineno-162-24"><span class="linenos" data-linenos="24 "></span></a><span class="w">            </span><span class="n">valid</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">1</span><span class="mb">&#39;b1</span><span class="p">;</span>
</span><span id="__span-162-25"><a id="__codelineno-162-25" name="__codelineno-162-25"></a><a href="#__codelineno-162-25"><span class="linenos" data-linenos="25 "></span></a><span class="w">    </span><span class="k">end</span>
</span><span id="__span-162-26"><a id="__codelineno-162-26" name="__codelineno-162-26"></a><a href="#__codelineno-162-26"><span class="linenos" data-linenos="26 "></span></a><span class="k">endmodule</span>
</span></code></pre></div></p>
<hr />
<h3 id="build-a-circuit-from-a-simulation-waveform">Build a circuit from a simulation waveform<a class="headerlink" href="#build-a-circuit-from-a-simulation-waveform" title="Anchor link to this section for reference">⚓︎</a></h3>
<h4 id="combinational-circuit-1">Combinational circuit 1<a class="headerlink" href="#combinational-circuit-1" title="Anchor link to this section for reference">⚓︎</a></h4>
<p>Website: <a href="https://hdlbits.01xz.net/wiki/Sim/circuit1" target="_blank">https://hdlbits.01xz.net/wiki/Sim/circuit1</a></p>
<p>這系列是看波形寫code，也滿快樂的。
<div class="language-verilog highlight"><span class="filename">Verilog</span><pre><span></span><code><span id="__span-163-1"><a id="__codelineno-163-1" name="__codelineno-163-1"></a><a href="#__codelineno-163-1"><span class="linenos" data-linenos="1 "></span></a><span class="k">module</span><span class="w"> </span><span class="n">top_module</span><span class="w"> </span><span class="p">(</span>
</span><span id="__span-163-2"><a id="__codelineno-163-2" name="__codelineno-163-2"></a><a href="#__codelineno-163-2"><span class="linenos" data-linenos="2 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">a</span><span class="p">,</span>
</span><span id="__span-163-3"><a id="__codelineno-163-3" name="__codelineno-163-3"></a><a href="#__codelineno-163-3"><span class="linenos" data-linenos="3 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">b</span><span class="p">,</span>
</span><span id="__span-163-4"><a id="__codelineno-163-4" name="__codelineno-163-4"></a><a href="#__codelineno-163-4"><span class="linenos" data-linenos="4 "></span></a><span class="w">    </span><span class="k">output</span><span class="w"> </span><span class="n">q</span><span class="w"> </span><span class="p">);</span><span class="c1">//</span>
</span><span id="__span-163-5"><a id="__codelineno-163-5" name="__codelineno-163-5"></a><a href="#__codelineno-163-5"><span class="linenos" data-linenos="5 "></span></a>
</span><span id="__span-163-6"><a id="__codelineno-163-6" name="__codelineno-163-6"></a><a href="#__codelineno-163-6"><span class="linenos" data-linenos="6 "></span></a><span class="w">    </span><span class="k">assign</span><span class="w"> </span><span class="n">q</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="n">b</span><span class="p">;</span>
</span><span id="__span-163-7"><a id="__codelineno-163-7" name="__codelineno-163-7"></a><a href="#__codelineno-163-7"><span class="linenos" data-linenos="7 "></span></a><span class="k">endmodule</span>
</span></code></pre></div></p>
<hr />
<h4 id="combinational-circuit-2">Combinational circuit 2<a class="headerlink" href="#combinational-circuit-2" title="Anchor link to this section for reference">⚓︎</a></h4>
<p>Website: <a href="https://hdlbits.01xz.net/wiki/Sim/circuit2" target="_blank">https://hdlbits.01xz.net/wiki/Sim/circuit2</a></p>
<p>這題單純就是觀察有偶數個input時，output是1，所以就是xnor gate。
<div class="language-verilog highlight"><span class="filename">Verilog</span><pre><span></span><code><span id="__span-164-1"><a id="__codelineno-164-1" name="__codelineno-164-1"></a><a href="#__codelineno-164-1"><span class="linenos" data-linenos=" 1 "></span></a><span class="k">module</span><span class="w"> </span><span class="n">top_module</span><span class="w"> </span><span class="p">(</span>
</span><span id="__span-164-2"><a id="__codelineno-164-2" name="__codelineno-164-2"></a><a href="#__codelineno-164-2"><span class="linenos" data-linenos=" 2 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">a</span><span class="p">,</span>
</span><span id="__span-164-3"><a id="__codelineno-164-3" name="__codelineno-164-3"></a><a href="#__codelineno-164-3"><span class="linenos" data-linenos=" 3 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">b</span><span class="p">,</span>
</span><span id="__span-164-4"><a id="__codelineno-164-4" name="__codelineno-164-4"></a><a href="#__codelineno-164-4"><span class="linenos" data-linenos=" 4 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">c</span><span class="p">,</span>
</span><span id="__span-164-5"><a id="__codelineno-164-5" name="__codelineno-164-5"></a><a href="#__codelineno-164-5"><span class="linenos" data-linenos=" 5 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">d</span><span class="p">,</span>
</span><span id="__span-164-6"><a id="__codelineno-164-6" name="__codelineno-164-6"></a><a href="#__codelineno-164-6"><span class="linenos" data-linenos=" 6 "></span></a><span class="w">    </span><span class="k">output</span><span class="w"> </span><span class="n">q</span><span class="w"> </span><span class="p">);</span><span class="c1">//</span>
</span><span id="__span-164-7"><a id="__codelineno-164-7" name="__codelineno-164-7"></a><a href="#__codelineno-164-7"><span class="linenos" data-linenos=" 7 "></span></a>
</span><span id="__span-164-8"><a id="__codelineno-164-8" name="__codelineno-164-8"></a><a href="#__codelineno-164-8"><span class="linenos" data-linenos=" 8 "></span></a><span class="w">    </span><span class="k">assign</span><span class="w"> </span><span class="n">q</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">~</span><span class="p">(</span><span class="n">a</span><span class="w"> </span><span class="o">^</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="o">^</span><span class="w"> </span><span class="n">c</span><span class="w"> </span><span class="o">^</span><span class="w"> </span><span class="n">d</span><span class="p">);</span>
</span><span id="__span-164-9"><a id="__codelineno-164-9" name="__codelineno-164-9"></a><a href="#__codelineno-164-9"><span class="linenos" data-linenos=" 9 "></span></a>
</span><span id="__span-164-10"><a id="__codelineno-164-10" name="__codelineno-164-10"></a><a href="#__codelineno-164-10"><span class="linenos" data-linenos="10 "></span></a><span class="k">endmodule</span>
</span></code></pre></div></p>
<hr />
<h4 id="combinational-circuit-3">Combinational circuit 3<a class="headerlink" href="#combinational-circuit-3" title="Anchor link to this section for reference">⚓︎</a></h4>
<p>Website: <a href="https://hdlbits.01xz.net/wiki/Sim/circuit3" target="_blank">https://hdlbits.01xz.net/wiki/Sim/circuit3</a></p>
<p>這題單純就是觀察，當非c且非d，或非a且非b時，輸出為0。反過來說，當c或d，且a或b時，輸出為1。
<div class="language-verilog highlight"><span class="filename">Verilog</span><pre><span></span><code><span id="__span-165-1"><a id="__codelineno-165-1" name="__codelineno-165-1"></a><a href="#__codelineno-165-1"><span class="linenos" data-linenos=" 1 "></span></a><span class="k">module</span><span class="w"> </span><span class="n">top_module</span><span class="w"> </span><span class="p">(</span>
</span><span id="__span-165-2"><a id="__codelineno-165-2" name="__codelineno-165-2"></a><a href="#__codelineno-165-2"><span class="linenos" data-linenos=" 2 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">a</span><span class="p">,</span>
</span><span id="__span-165-3"><a id="__codelineno-165-3" name="__codelineno-165-3"></a><a href="#__codelineno-165-3"><span class="linenos" data-linenos=" 3 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">b</span><span class="p">,</span>
</span><span id="__span-165-4"><a id="__codelineno-165-4" name="__codelineno-165-4"></a><a href="#__codelineno-165-4"><span class="linenos" data-linenos=" 4 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">c</span><span class="p">,</span>
</span><span id="__span-165-5"><a id="__codelineno-165-5" name="__codelineno-165-5"></a><a href="#__codelineno-165-5"><span class="linenos" data-linenos=" 5 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">d</span><span class="p">,</span>
</span><span id="__span-165-6"><a id="__codelineno-165-6" name="__codelineno-165-6"></a><a href="#__codelineno-165-6"><span class="linenos" data-linenos=" 6 "></span></a><span class="w">    </span><span class="k">output</span><span class="w"> </span><span class="n">q</span><span class="w"> </span><span class="p">);</span><span class="c1">//</span>
</span><span id="__span-165-7"><a id="__codelineno-165-7" name="__codelineno-165-7"></a><a href="#__codelineno-165-7"><span class="linenos" data-linenos=" 7 "></span></a>
</span><span id="__span-165-8"><a id="__codelineno-165-8" name="__codelineno-165-8"></a><a href="#__codelineno-165-8"><span class="linenos" data-linenos=" 8 "></span></a><span class="w">    </span><span class="k">assign</span><span class="w"> </span><span class="n">q</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">a</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">b</span><span class="p">)</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="p">(</span><span class="n">c</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">d</span><span class="p">);</span>
</span><span id="__span-165-9"><a id="__codelineno-165-9" name="__codelineno-165-9"></a><a href="#__codelineno-165-9"><span class="linenos" data-linenos=" 9 "></span></a>
</span><span id="__span-165-10"><a id="__codelineno-165-10" name="__codelineno-165-10"></a><a href="#__codelineno-165-10"><span class="linenos" data-linenos="10 "></span></a><span class="k">endmodule</span>
</span></code></pre></div></p>
<hr />
<h4 id="combinational-circuit-4">Combinational circuit 4<a class="headerlink" href="#combinational-circuit-4" title="Anchor link to this section for reference">⚓︎</a></h4>
<p>Website: <a href="https://hdlbits.01xz.net/wiki/Sim/circuit4" target="_blank">https://hdlbits.01xz.net/wiki/Sim/circuit4</a></p>
<p>這題單純就是觀察，當b或c時，輸出為1。
<div class="language-verilog highlight"><span class="filename">Verilog</span><pre><span></span><code><span id="__span-166-1"><a id="__codelineno-166-1" name="__codelineno-166-1"></a><a href="#__codelineno-166-1"><span class="linenos" data-linenos=" 1 "></span></a><span class="k">module</span><span class="w"> </span><span class="n">top_module</span><span class="w"> </span><span class="p">(</span>
</span><span id="__span-166-2"><a id="__codelineno-166-2" name="__codelineno-166-2"></a><a href="#__codelineno-166-2"><span class="linenos" data-linenos=" 2 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">a</span><span class="p">,</span>
</span><span id="__span-166-3"><a id="__codelineno-166-3" name="__codelineno-166-3"></a><a href="#__codelineno-166-3"><span class="linenos" data-linenos=" 3 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">b</span><span class="p">,</span>
</span><span id="__span-166-4"><a id="__codelineno-166-4" name="__codelineno-166-4"></a><a href="#__codelineno-166-4"><span class="linenos" data-linenos=" 4 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">c</span><span class="p">,</span>
</span><span id="__span-166-5"><a id="__codelineno-166-5" name="__codelineno-166-5"></a><a href="#__codelineno-166-5"><span class="linenos" data-linenos=" 5 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">d</span><span class="p">,</span>
</span><span id="__span-166-6"><a id="__codelineno-166-6" name="__codelineno-166-6"></a><a href="#__codelineno-166-6"><span class="linenos" data-linenos=" 6 "></span></a><span class="w">    </span><span class="k">output</span><span class="w"> </span><span class="n">q</span><span class="w"> </span><span class="p">);</span><span class="c1">//</span>
</span><span id="__span-166-7"><a id="__codelineno-166-7" name="__codelineno-166-7"></a><a href="#__codelineno-166-7"><span class="linenos" data-linenos=" 7 "></span></a>
</span><span id="__span-166-8"><a id="__codelineno-166-8" name="__codelineno-166-8"></a><a href="#__codelineno-166-8"><span class="linenos" data-linenos=" 8 "></span></a><span class="w">    </span><span class="k">assign</span><span class="w"> </span><span class="n">q</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">c</span><span class="p">;</span><span class="w"> </span><span class="c1">// Fix me</span>
</span><span id="__span-166-9"><a id="__codelineno-166-9" name="__codelineno-166-9"></a><a href="#__codelineno-166-9"><span class="linenos" data-linenos=" 9 "></span></a>
</span><span id="__span-166-10"><a id="__codelineno-166-10" name="__codelineno-166-10"></a><a href="#__codelineno-166-10"><span class="linenos" data-linenos="10 "></span></a><span class="k">endmodule</span>
</span></code></pre></div></p>
<hr />
<h4 id="combinational-circuit-5">Combinational circuit 5<a class="headerlink" href="#combinational-circuit-5" title="Anchor link to this section for reference">⚓︎</a></h4>
<p>Website: <a href="https://hdlbits.01xz.net/wiki/Sim/circuit5" target="_blank">https://hdlbits.01xz.net/wiki/Sim/circuit5</a></p>
<p>透過觀察可以知道，當c是0,1,2,3時，對應的輸入為b,e,a,d四個input，否則output 4'hf，或是說是4'b1111。
<div class="language-verilog highlight"><span class="filename">Verilog</span><pre><span></span><code><span id="__span-167-1"><a id="__codelineno-167-1" name="__codelineno-167-1"></a><a href="#__codelineno-167-1"><span class="linenos" data-linenos=" 1 "></span></a><span class="k">module</span><span class="w"> </span><span class="n">top_module</span><span class="w"> </span><span class="p">(</span>
</span><span id="__span-167-2"><a id="__codelineno-167-2" name="__codelineno-167-2"></a><a href="#__codelineno-167-2"><span class="linenos" data-linenos=" 2 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="p">[</span><span class="mh">3</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">a</span><span class="p">,</span>
</span><span id="__span-167-3"><a id="__codelineno-167-3" name="__codelineno-167-3"></a><a href="#__codelineno-167-3"><span class="linenos" data-linenos=" 3 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="p">[</span><span class="mh">3</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">b</span><span class="p">,</span>
</span><span id="__span-167-4"><a id="__codelineno-167-4" name="__codelineno-167-4"></a><a href="#__codelineno-167-4"><span class="linenos" data-linenos=" 4 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="p">[</span><span class="mh">3</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">c</span><span class="p">,</span>
</span><span id="__span-167-5"><a id="__codelineno-167-5" name="__codelineno-167-5"></a><a href="#__codelineno-167-5"><span class="linenos" data-linenos=" 5 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="p">[</span><span class="mh">3</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">d</span><span class="p">,</span>
</span><span id="__span-167-6"><a id="__codelineno-167-6" name="__codelineno-167-6"></a><a href="#__codelineno-167-6"><span class="linenos" data-linenos=" 6 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="p">[</span><span class="mh">3</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">e</span><span class="p">,</span>
</span><span id="__span-167-7"><a id="__codelineno-167-7" name="__codelineno-167-7"></a><a href="#__codelineno-167-7"><span class="linenos" data-linenos=" 7 "></span></a><span class="w">    </span><span class="k">output</span><span class="w"> </span><span class="kt">reg</span><span class="w"> </span><span class="p">[</span><span class="mh">3</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">q</span><span class="w"> </span><span class="p">);</span>
</span><span id="__span-167-8"><a id="__codelineno-167-8" name="__codelineno-167-8"></a><a href="#__codelineno-167-8"><span class="linenos" data-linenos=" 8 "></span></a><span class="w">    </span><span class="k">always</span><span class="p">@(</span><span class="o">*</span><span class="p">)</span><span class="k">begin</span>
</span><span id="__span-167-9"><a id="__codelineno-167-9" name="__codelineno-167-9"></a><a href="#__codelineno-167-9"><span class="linenos" data-linenos=" 9 "></span></a><span class="w">        </span><span class="k">case</span><span class="p">(</span><span class="n">c</span><span class="p">)</span>
</span><span id="__span-167-10"><a id="__codelineno-167-10" name="__codelineno-167-10"></a><a href="#__codelineno-167-10"><span class="linenos" data-linenos="10 "></span></a><span class="w">            </span><span class="mh">4</span><span class="mi">&#39;d0</span><span class="o">:</span><span class="w"> </span><span class="n">q</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">b</span><span class="p">;</span>
</span><span id="__span-167-11"><a id="__codelineno-167-11" name="__codelineno-167-11"></a><a href="#__codelineno-167-11"><span class="linenos" data-linenos="11 "></span></a><span class="w">            </span><span class="mh">4</span><span class="mi">&#39;d1</span><span class="o">:</span><span class="w"> </span><span class="n">q</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">e</span><span class="p">;</span>
</span><span id="__span-167-12"><a id="__codelineno-167-12" name="__codelineno-167-12"></a><a href="#__codelineno-167-12"><span class="linenos" data-linenos="12 "></span></a><span class="w">            </span><span class="mh">4</span><span class="mi">&#39;d2</span><span class="o">:</span><span class="w"> </span><span class="n">q</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">a</span><span class="p">;</span>
</span><span id="__span-167-13"><a id="__codelineno-167-13" name="__codelineno-167-13"></a><a href="#__codelineno-167-13"><span class="linenos" data-linenos="13 "></span></a><span class="w">            </span><span class="mh">4</span><span class="mi">&#39;d3</span><span class="o">:</span><span class="w"> </span><span class="n">q</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">d</span><span class="p">;</span>
</span><span id="__span-167-14"><a id="__codelineno-167-14" name="__codelineno-167-14"></a><a href="#__codelineno-167-14"><span class="linenos" data-linenos="14 "></span></a><span class="w">            </span><span class="k">default</span><span class="o">:</span><span class="w"> </span><span class="n">q</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">4&#39;hf</span><span class="p">;</span>
</span><span id="__span-167-15"><a id="__codelineno-167-15" name="__codelineno-167-15"></a><a href="#__codelineno-167-15"><span class="linenos" data-linenos="15 "></span></a><span class="w">        </span><span class="k">endcase</span>
</span><span id="__span-167-16"><a id="__codelineno-167-16" name="__codelineno-167-16"></a><a href="#__codelineno-167-16"><span class="linenos" data-linenos="16 "></span></a><span class="w">    </span><span class="k">end</span>
</span><span id="__span-167-17"><a id="__codelineno-167-17" name="__codelineno-167-17"></a><a href="#__codelineno-167-17"><span class="linenos" data-linenos="17 "></span></a><span class="k">endmodule</span>
</span></code></pre></div></p>
<hr />
<h4 id="combinational-circuit-6">Combinational circuit 6<a class="headerlink" href="#combinational-circuit-6" title="Anchor link to this section for reference">⚓︎</a></h4>
<p>Website: <a href="https://hdlbits.01xz.net/wiki/Sim/circuit6" target="_blank">https://hdlbits.01xz.net/wiki/Sim/circuit6</a></p>
<p>透過觀察可以知道，這題有點像是decoder，不過有指定的輸出。
<div class="language-verilog highlight"><span class="filename">Verilog</span><pre><span></span><code><span id="__span-168-1"><a id="__codelineno-168-1" name="__codelineno-168-1"></a><a href="#__codelineno-168-1"><span class="linenos" data-linenos=" 1 "></span></a><span class="k">module</span><span class="w"> </span><span class="n">top_module</span><span class="w"> </span><span class="p">(</span>
</span><span id="__span-168-2"><a id="__codelineno-168-2" name="__codelineno-168-2"></a><a href="#__codelineno-168-2"><span class="linenos" data-linenos=" 2 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="p">[</span><span class="mh">2</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">a</span><span class="p">,</span>
</span><span id="__span-168-3"><a id="__codelineno-168-3" name="__codelineno-168-3"></a><a href="#__codelineno-168-3"><span class="linenos" data-linenos=" 3 "></span></a><span class="w">    </span><span class="k">output</span><span class="w"> </span><span class="p">[</span><span class="mh">15</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">q</span><span class="w"> </span><span class="p">);</span><span class="w"> </span>
</span><span id="__span-168-4"><a id="__codelineno-168-4" name="__codelineno-168-4"></a><a href="#__codelineno-168-4"><span class="linenos" data-linenos=" 4 "></span></a><span class="w">    </span><span class="k">always</span><span class="p">@(</span><span class="o">*</span><span class="p">)</span><span class="k">begin</span>
</span><span id="__span-168-5"><a id="__codelineno-168-5" name="__codelineno-168-5"></a><a href="#__codelineno-168-5"><span class="linenos" data-linenos=" 5 "></span></a><span class="w">        </span><span class="k">case</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
</span><span id="__span-168-6"><a id="__codelineno-168-6" name="__codelineno-168-6"></a><a href="#__codelineno-168-6"><span class="linenos" data-linenos=" 6 "></span></a><span class="w">            </span><span class="mh">3</span><span class="mi">&#39;d0</span><span class="o">:</span><span class="w"> </span><span class="n">q</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">16&#39;h1232</span><span class="p">;</span>
</span><span id="__span-168-7"><a id="__codelineno-168-7" name="__codelineno-168-7"></a><a href="#__codelineno-168-7"><span class="linenos" data-linenos=" 7 "></span></a><span class="w">            </span><span class="mh">3</span><span class="mi">&#39;d1</span><span class="o">:</span><span class="w"> </span><span class="n">q</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">16&#39;haee0</span><span class="p">;</span>
</span><span id="__span-168-8"><a id="__codelineno-168-8" name="__codelineno-168-8"></a><a href="#__codelineno-168-8"><span class="linenos" data-linenos=" 8 "></span></a><span class="w">            </span><span class="mh">3</span><span class="mi">&#39;d2</span><span class="o">:</span><span class="w"> </span><span class="n">q</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">16&#39;h27d4</span><span class="p">;</span>
</span><span id="__span-168-9"><a id="__codelineno-168-9" name="__codelineno-168-9"></a><a href="#__codelineno-168-9"><span class="linenos" data-linenos=" 9 "></span></a><span class="w">            </span><span class="mh">3</span><span class="mi">&#39;d3</span><span class="o">:</span><span class="w"> </span><span class="n">q</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">16&#39;h5a0e</span><span class="p">;</span>
</span><span id="__span-168-10"><a id="__codelineno-168-10" name="__codelineno-168-10"></a><a href="#__codelineno-168-10"><span class="linenos" data-linenos="10 "></span></a><span class="w">            </span><span class="mh">3</span><span class="mi">&#39;d4</span><span class="o">:</span><span class="w"> </span><span class="n">q</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">16&#39;h2066</span><span class="p">;</span>
</span><span id="__span-168-11"><a id="__codelineno-168-11" name="__codelineno-168-11"></a><a href="#__codelineno-168-11"><span class="linenos" data-linenos="11 "></span></a><span class="w">            </span><span class="mh">3</span><span class="mi">&#39;d5</span><span class="o">:</span><span class="w"> </span><span class="n">q</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">16&#39;h64ce</span><span class="p">;</span>
</span><span id="__span-168-12"><a id="__codelineno-168-12" name="__codelineno-168-12"></a><a href="#__codelineno-168-12"><span class="linenos" data-linenos="12 "></span></a><span class="w">            </span><span class="mh">3</span><span class="mi">&#39;d6</span><span class="o">:</span><span class="w"> </span><span class="n">q</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">16&#39;hc526</span><span class="p">;</span>
</span><span id="__span-168-13"><a id="__codelineno-168-13" name="__codelineno-168-13"></a><a href="#__codelineno-168-13"><span class="linenos" data-linenos="13 "></span></a><span class="w">            </span><span class="mh">3</span><span class="mi">&#39;d7</span><span class="o">:</span><span class="w"> </span><span class="n">q</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">16&#39;h2f19</span><span class="p">;</span>
</span><span id="__span-168-14"><a id="__codelineno-168-14" name="__codelineno-168-14"></a><a href="#__codelineno-168-14"><span class="linenos" data-linenos="14 "></span></a><span class="w">        </span><span class="k">endcase</span>
</span><span id="__span-168-15"><a id="__codelineno-168-15" name="__codelineno-168-15"></a><a href="#__codelineno-168-15"><span class="linenos" data-linenos="15 "></span></a><span class="w">    </span><span class="k">end</span>
</span><span id="__span-168-16"><a id="__codelineno-168-16" name="__codelineno-168-16"></a><a href="#__codelineno-168-16"><span class="linenos" data-linenos="16 "></span></a><span class="k">endmodule</span>
</span></code></pre></div></p>
<hr />
<h4 id="sequential-circuit-7">Sequential circuit 7<a class="headerlink" href="#sequential-circuit-7" title="Anchor link to this section for reference">⚓︎</a></h4>
<p>Website: <a href="https://hdlbits.01xz.net/wiki/Sim/circuit7" target="_blank">https://hdlbits.01xz.net/wiki/Sim/circuit7</a></p>
<p>透過觀察可以知道，這題就是q就是a接了inverter，只不過晚一回合輸出。
<div class="language-verilog highlight"><span class="filename">Verilog</span><pre><span></span><code><span id="__span-169-1"><a id="__codelineno-169-1" name="__codelineno-169-1"></a><a href="#__codelineno-169-1"><span class="linenos" data-linenos=" 1 "></span></a><span class="k">module</span><span class="w"> </span><span class="n">top_module</span><span class="w"> </span><span class="p">(</span>
</span><span id="__span-169-2"><a id="__codelineno-169-2" name="__codelineno-169-2"></a><a href="#__codelineno-169-2"><span class="linenos" data-linenos=" 2 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">clk</span><span class="p">,</span>
</span><span id="__span-169-3"><a id="__codelineno-169-3" name="__codelineno-169-3"></a><a href="#__codelineno-169-3"><span class="linenos" data-linenos=" 3 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">a</span><span class="p">,</span>
</span><span id="__span-169-4"><a id="__codelineno-169-4" name="__codelineno-169-4"></a><a href="#__codelineno-169-4"><span class="linenos" data-linenos=" 4 "></span></a><span class="w">    </span><span class="k">output</span><span class="w"> </span><span class="n">q</span><span class="w"> </span><span class="p">);</span>
</span><span id="__span-169-5"><a id="__codelineno-169-5" name="__codelineno-169-5"></a><a href="#__codelineno-169-5"><span class="linenos" data-linenos=" 5 "></span></a><span class="w">    </span><span class="kt">reg</span><span class="w"> </span><span class="n">state</span><span class="p">,</span><span class="w"> </span><span class="n">next_state</span><span class="p">;</span>
</span><span id="__span-169-6"><a id="__codelineno-169-6" name="__codelineno-169-6"></a><a href="#__codelineno-169-6"><span class="linenos" data-linenos=" 6 "></span></a><span class="w">    </span><span class="k">parameter</span><span class="w"> </span><span class="n">zero_1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">1</span><span class="mi">&#39;d0</span><span class="p">;</span>
</span><span id="__span-169-7"><a id="__codelineno-169-7" name="__codelineno-169-7"></a><a href="#__codelineno-169-7"><span class="linenos" data-linenos=" 7 "></span></a><span class="w">    </span><span class="k">parameter</span><span class="w"> </span><span class="n">one_1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">1</span><span class="mi">&#39;d1</span><span class="p">;</span>
</span><span id="__span-169-8"><a id="__codelineno-169-8" name="__codelineno-169-8"></a><a href="#__codelineno-169-8"><span class="linenos" data-linenos=" 8 "></span></a>
</span><span id="__span-169-9"><a id="__codelineno-169-9" name="__codelineno-169-9"></a><a href="#__codelineno-169-9"><span class="linenos" data-linenos=" 9 "></span></a><span class="w">    </span><span class="k">always</span><span class="p">@(</span><span class="o">*</span><span class="p">)</span><span class="k">begin</span>
</span><span id="__span-169-10"><a id="__codelineno-169-10" name="__codelineno-169-10"></a><a href="#__codelineno-169-10"><span class="linenos" data-linenos="10 "></span></a><span class="w">        </span><span class="n">next_state</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">a</span><span class="o">?</span><span class="w"> </span><span class="nl">one_1:</span><span class="w"> </span><span class="n">zero_1</span><span class="p">;</span>
</span><span id="__span-169-11"><a id="__codelineno-169-11" name="__codelineno-169-11"></a><a href="#__codelineno-169-11"><span class="linenos" data-linenos="11 "></span></a><span class="w">    </span><span class="k">end</span>
</span><span id="__span-169-12"><a id="__codelineno-169-12" name="__codelineno-169-12"></a><a href="#__codelineno-169-12"><span class="linenos" data-linenos="12 "></span></a>
</span><span id="__span-169-13"><a id="__codelineno-169-13" name="__codelineno-169-13"></a><a href="#__codelineno-169-13"><span class="linenos" data-linenos="13 "></span></a><span class="w">    </span><span class="k">always</span><span class="p">@(</span><span class="k">posedge</span><span class="w"> </span><span class="n">clk</span><span class="p">)</span><span class="k">begin</span>
</span><span id="__span-169-14"><a id="__codelineno-169-14" name="__codelineno-169-14"></a><a href="#__codelineno-169-14"><span class="linenos" data-linenos="14 "></span></a><span class="w">        </span><span class="n">state</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">next_state</span><span class="p">;</span>
</span><span id="__span-169-15"><a id="__codelineno-169-15" name="__codelineno-169-15"></a><a href="#__codelineno-169-15"><span class="linenos" data-linenos="15 "></span></a><span class="w">    </span><span class="k">end</span>
</span><span id="__span-169-16"><a id="__codelineno-169-16" name="__codelineno-169-16"></a><a href="#__codelineno-169-16"><span class="linenos" data-linenos="16 "></span></a>
</span><span id="__span-169-17"><a id="__codelineno-169-17" name="__codelineno-169-17"></a><a href="#__codelineno-169-17"><span class="linenos" data-linenos="17 "></span></a><span class="w">    </span><span class="k">assign</span><span class="w"> </span><span class="n">q</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">~</span><span class="n">state</span><span class="p">;</span>
</span><span id="__span-169-18"><a id="__codelineno-169-18" name="__codelineno-169-18"></a><a href="#__codelineno-169-18"><span class="linenos" data-linenos="18 "></span></a><span class="k">endmodule</span>
</span></code></pre></div></p>
<hr />
<h4 id="sequential-circuit-8">Sequential circuit 8<a class="headerlink" href="#sequential-circuit-8" title="Anchor link to this section for reference">⚓︎</a></h4>
<p>Website: <a href="https://hdlbits.01xz.net/wiki/Sim/circuit8" target="_blank">https://hdlbits.01xz.net/wiki/Sim/circuit8</a></p>
<p>q的話很容易看出來是negetive edge的d flip-flop，p的話就是要觀察到是latch結構。
<div class="language-verilog highlight"><span class="filename">Verilog</span><pre><span></span><code><span id="__span-170-1"><a id="__codelineno-170-1" name="__codelineno-170-1"></a><a href="#__codelineno-170-1"><span class="linenos" data-linenos=" 1 "></span></a><span class="k">module</span><span class="w"> </span><span class="n">top_module</span><span class="w"> </span><span class="p">(</span>
</span><span id="__span-170-2"><a id="__codelineno-170-2" name="__codelineno-170-2"></a><a href="#__codelineno-170-2"><span class="linenos" data-linenos=" 2 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">clock</span><span class="p">,</span>
</span><span id="__span-170-3"><a id="__codelineno-170-3" name="__codelineno-170-3"></a><a href="#__codelineno-170-3"><span class="linenos" data-linenos=" 3 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">a</span><span class="p">,</span>
</span><span id="__span-170-4"><a id="__codelineno-170-4" name="__codelineno-170-4"></a><a href="#__codelineno-170-4"><span class="linenos" data-linenos=" 4 "></span></a><span class="w">    </span><span class="k">output</span><span class="w"> </span><span class="n">p</span><span class="p">,</span>
</span><span id="__span-170-5"><a id="__codelineno-170-5" name="__codelineno-170-5"></a><a href="#__codelineno-170-5"><span class="linenos" data-linenos=" 5 "></span></a><span class="w">    </span><span class="k">output</span><span class="w"> </span><span class="kt">reg</span><span class="w"> </span><span class="n">q</span><span class="w"> </span><span class="p">);</span>
</span><span id="__span-170-6"><a id="__codelineno-170-6" name="__codelineno-170-6"></a><a href="#__codelineno-170-6"><span class="linenos" data-linenos=" 6 "></span></a><span class="w">    </span><span class="k">assign</span><span class="w"> </span><span class="n">p</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">clock</span><span class="o">?</span><span class="w"> </span><span class="nl">a:</span><span class="w"> </span><span class="n">p</span><span class="p">;</span>
</span><span id="__span-170-7"><a id="__codelineno-170-7" name="__codelineno-170-7"></a><a href="#__codelineno-170-7"><span class="linenos" data-linenos=" 7 "></span></a><span class="w">    </span><span class="k">always</span><span class="p">@(</span><span class="k">negedge</span><span class="w"> </span><span class="n">clock</span><span class="p">)</span><span class="k">begin</span>
</span><span id="__span-170-8"><a id="__codelineno-170-8" name="__codelineno-170-8"></a><a href="#__codelineno-170-8"><span class="linenos" data-linenos=" 8 "></span></a><span class="w">        </span><span class="n">q</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">a</span><span class="p">;</span>
</span><span id="__span-170-9"><a id="__codelineno-170-9" name="__codelineno-170-9"></a><a href="#__codelineno-170-9"><span class="linenos" data-linenos=" 9 "></span></a><span class="w">    </span><span class="k">end</span>
</span><span id="__span-170-10"><a id="__codelineno-170-10" name="__codelineno-170-10"></a><a href="#__codelineno-170-10"><span class="linenos" data-linenos="10 "></span></a><span class="k">endmodule</span>
</span></code></pre></div></p>
<hr />
<h4 id="sequential-circuit-9">Sequential circuit 9<a class="headerlink" href="#sequential-circuit-9" title="Anchor link to this section for reference">⚓︎</a></h4>
<p>Website: <a href="https://hdlbits.01xz.net/wiki/Sim/circuit9" target="_blank">https://hdlbits.01xz.net/wiki/Sim/circuit9</a></p>
<p>這題能觀察出是個計時器結構。
<div class="language-verilog highlight"><span class="filename">Verilog</span><pre><span></span><code><span id="__span-171-1"><a id="__codelineno-171-1" name="__codelineno-171-1"></a><a href="#__codelineno-171-1"><span class="linenos" data-linenos=" 1 "></span></a><span class="k">module</span><span class="w"> </span><span class="n">top_module</span><span class="w"> </span><span class="p">(</span>
</span><span id="__span-171-2"><a id="__codelineno-171-2" name="__codelineno-171-2"></a><a href="#__codelineno-171-2"><span class="linenos" data-linenos=" 2 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">clk</span><span class="p">,</span>
</span><span id="__span-171-3"><a id="__codelineno-171-3" name="__codelineno-171-3"></a><a href="#__codelineno-171-3"><span class="linenos" data-linenos=" 3 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">a</span><span class="p">,</span>
</span><span id="__span-171-4"><a id="__codelineno-171-4" name="__codelineno-171-4"></a><a href="#__codelineno-171-4"><span class="linenos" data-linenos=" 4 "></span></a><span class="w">    </span><span class="k">output</span><span class="w"> </span><span class="kt">reg</span><span class="p">[</span><span class="mh">3</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">q</span><span class="w"> </span><span class="p">);</span>
</span><span id="__span-171-5"><a id="__codelineno-171-5" name="__codelineno-171-5"></a><a href="#__codelineno-171-5"><span class="linenos" data-linenos=" 5 "></span></a><span class="w">    </span><span class="k">always</span><span class="p">@(</span><span class="k">posedge</span><span class="w"> </span><span class="n">clk</span><span class="p">)</span><span class="k">begin</span>
</span><span id="__span-171-6"><a id="__codelineno-171-6" name="__codelineno-171-6"></a><a href="#__codelineno-171-6"><span class="linenos" data-linenos=" 6 "></span></a><span class="w">        </span><span class="k">if</span><span class="p">(</span><span class="n">a</span><span class="p">)</span><span class="w"> </span><span class="n">q</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="mh">4</span><span class="mi">&#39;d4</span><span class="p">;</span>
</span><span id="__span-171-7"><a id="__codelineno-171-7" name="__codelineno-171-7"></a><a href="#__codelineno-171-7"><span class="linenos" data-linenos=" 7 "></span></a><span class="w">        </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="p">(</span><span class="n">q</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mh">4</span><span class="mi">&#39;d6</span><span class="p">)</span><span class="w"> </span><span class="n">q</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="mh">4</span><span class="mi">&#39;d0</span><span class="p">;</span>
</span><span id="__span-171-8"><a id="__codelineno-171-8" name="__codelineno-171-8"></a><a href="#__codelineno-171-8"><span class="linenos" data-linenos=" 8 "></span></a><span class="w">        </span><span class="k">else</span><span class="w"> </span><span class="n">q</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">q</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mh">1</span><span class="mi">&#39;d1</span><span class="p">;</span>
</span><span id="__span-171-9"><a id="__codelineno-171-9" name="__codelineno-171-9"></a><a href="#__codelineno-171-9"><span class="linenos" data-linenos=" 9 "></span></a><span class="w">    </span><span class="k">end</span>
</span><span id="__span-171-10"><a id="__codelineno-171-10" name="__codelineno-171-10"></a><a href="#__codelineno-171-10"><span class="linenos" data-linenos="10 "></span></a><span class="k">endmodule</span>
</span></code></pre></div></p>
<hr />
<h4 id="sequential-circuit-10">Sequential circuit 10<a class="headerlink" href="#sequential-circuit-10" title="Anchor link to this section for reference">⚓︎</a></h4>
<p>Website: <a href="https://hdlbits.01xz.net/wiki/Sim/circuit10" target="_blank">https://hdlbits.01xz.net/wiki/Sim/circuit10</a></p>
<p>這題要想成是一台FSM，然後好好觀察在不同state和input下時，state的輸出。
<div class="language-verilog highlight"><span class="filename">Verilog</span><pre><span></span><code><span id="__span-172-1"><a id="__codelineno-172-1" name="__codelineno-172-1"></a><a href="#__codelineno-172-1"><span class="linenos" data-linenos=" 1 "></span></a><span class="k">module</span><span class="w"> </span><span class="n">top_module</span><span class="w"> </span><span class="p">(</span>
</span><span id="__span-172-2"><a id="__codelineno-172-2" name="__codelineno-172-2"></a><a href="#__codelineno-172-2"><span class="linenos" data-linenos=" 2 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">clk</span><span class="p">,</span>
</span><span id="__span-172-3"><a id="__codelineno-172-3" name="__codelineno-172-3"></a><a href="#__codelineno-172-3"><span class="linenos" data-linenos=" 3 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">a</span><span class="p">,</span>
</span><span id="__span-172-4"><a id="__codelineno-172-4" name="__codelineno-172-4"></a><a href="#__codelineno-172-4"><span class="linenos" data-linenos=" 4 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">b</span><span class="p">,</span>
</span><span id="__span-172-5"><a id="__codelineno-172-5" name="__codelineno-172-5"></a><a href="#__codelineno-172-5"><span class="linenos" data-linenos=" 5 "></span></a><span class="w">    </span><span class="k">output</span><span class="w"> </span><span class="kt">reg</span><span class="w"> </span><span class="n">q</span><span class="p">,</span>
</span><span id="__span-172-6"><a id="__codelineno-172-6" name="__codelineno-172-6"></a><a href="#__codelineno-172-6"><span class="linenos" data-linenos=" 6 "></span></a><span class="w">    </span><span class="k">output</span><span class="w"> </span><span class="kt">reg</span><span class="w"> </span><span class="n">state</span><span class="w">  </span><span class="p">);</span>
</span><span id="__span-172-7"><a id="__codelineno-172-7" name="__codelineno-172-7"></a><a href="#__codelineno-172-7"><span class="linenos" data-linenos=" 7 "></span></a><span class="w">    </span><span class="kt">reg</span><span class="w"> </span><span class="n">next_state</span><span class="p">;</span>
</span><span id="__span-172-8"><a id="__codelineno-172-8" name="__codelineno-172-8"></a><a href="#__codelineno-172-8"><span class="linenos" data-linenos=" 8 "></span></a><span class="w">    </span><span class="k">always</span><span class="p">@(</span><span class="o">*</span><span class="p">)</span><span class="k">begin</span>
</span><span id="__span-172-9"><a id="__codelineno-172-9" name="__codelineno-172-9"></a><a href="#__codelineno-172-9"><span class="linenos" data-linenos=" 9 "></span></a><span class="w">        </span><span class="k">case</span><span class="p">(</span><span class="n">state</span><span class="p">)</span>
</span><span id="__span-172-10"><a id="__codelineno-172-10" name="__codelineno-172-10"></a><a href="#__codelineno-172-10"><span class="linenos" data-linenos="10 "></span></a><span class="w">            </span><span class="mh">1</span><span class="mb">&#39;b0</span><span class="o">:</span><span class="w"> </span><span class="n">next_state</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="n">b</span><span class="p">;</span>
</span><span id="__span-172-11"><a id="__codelineno-172-11" name="__codelineno-172-11"></a><a href="#__codelineno-172-11"><span class="linenos" data-linenos="11 "></span></a><span class="w">            </span><span class="mh">1</span><span class="mb">&#39;b1</span><span class="o">:</span><span class="w"> </span><span class="n">next_state</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">b</span><span class="p">;</span>
</span><span id="__span-172-12"><a id="__codelineno-172-12" name="__codelineno-172-12"></a><a href="#__codelineno-172-12"><span class="linenos" data-linenos="12 "></span></a><span class="w">        </span><span class="k">endcase</span>
</span><span id="__span-172-13"><a id="__codelineno-172-13" name="__codelineno-172-13"></a><a href="#__codelineno-172-13"><span class="linenos" data-linenos="13 "></span></a><span class="w">    </span><span class="k">end</span>
</span><span id="__span-172-14"><a id="__codelineno-172-14" name="__codelineno-172-14"></a><a href="#__codelineno-172-14"><span class="linenos" data-linenos="14 "></span></a><span class="w">    </span><span class="k">always</span><span class="p">@(</span><span class="k">posedge</span><span class="w"> </span><span class="n">clk</span><span class="p">)</span><span class="k">begin</span>
</span><span id="__span-172-15"><a id="__codelineno-172-15" name="__codelineno-172-15"></a><a href="#__codelineno-172-15"><span class="linenos" data-linenos="15 "></span></a><span class="w">        </span><span class="n">state</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">next_state</span><span class="p">;</span>
</span><span id="__span-172-16"><a id="__codelineno-172-16" name="__codelineno-172-16"></a><a href="#__codelineno-172-16"><span class="linenos" data-linenos="16 "></span></a><span class="w">    </span><span class="k">end</span>
</span><span id="__span-172-17"><a id="__codelineno-172-17" name="__codelineno-172-17"></a><a href="#__codelineno-172-17"><span class="linenos" data-linenos="17 "></span></a>
</span><span id="__span-172-18"><a id="__codelineno-172-18" name="__codelineno-172-18"></a><a href="#__codelineno-172-18"><span class="linenos" data-linenos="18 "></span></a><span class="w">    </span><span class="k">assign</span><span class="w"> </span><span class="n">q</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">state</span><span class="w"> </span><span class="o">^</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="o">^</span><span class="w"> </span><span class="n">b</span><span class="p">;</span>
</span><span id="__span-172-19"><a id="__codelineno-172-19" name="__codelineno-172-19"></a><a href="#__codelineno-172-19"><span class="linenos" data-linenos="19 "></span></a><span class="k">endmodule</span>
</span></code></pre></div></p>
<hr />
<h2 id="verification-writing-testbenches">Verification: Writing Testbenches<a class="headerlink" href="#verification-writing-testbenches" title="Anchor link to this section for reference">⚓︎</a></h2>
<h3 id="clock">Clock<a class="headerlink" href="#clock" title="Anchor link to this section for reference">⚓︎</a></h3>
<p>Website: <a href="https://hdlbits.01xz.net/wiki/Tb/clock" target="_blank">https://hdlbits.01xz.net/wiki/Tb/clock</a></p>
<p>這題是hdlbits第一次讓人練習testbench，所以就講詳細點。<br />
第一行的格式是<code>`timescale 時間單位/時間精度</code>。<br />
像說下列的程式有講到<code>#5</code>，代表delay5個時間單位，然後這裡的時間單位就是5ps。<br />
然後時間精度的話，代表說模擬的最小尺度，可以粗略的理解成像是c++的floating point，最小最小只能觀察到的尺度，像程式碼這裡最小尺度就是1ps。<br />
有關timescale的說明，可以多看這個網站: <a href="https://www.chipverify.com/verilog/verilog-timescale" target="_blank">https://www.chipverify.com/verilog/verilog-timescale</a></p>
<p>然後在testbench中，給submodule的input用reg，接收submodule的output用wire。原因在於，對於submodule來說的input，對testbench來說是output，對於submodule來說的output，對於testbench是input。</p>
<p>然後initial裡面放初始化數值，然後這個題目要無限重複clk，所以不用寫<code>$finish</code>。
<div class="language-verilog highlight"><span class="filename">Verilog</span><pre><span></span><code><span id="__span-173-1"><a id="__codelineno-173-1" name="__codelineno-173-1"></a><a href="#__codelineno-173-1"><span class="linenos" data-linenos=" 1 "></span></a><span class="no">`timescale</span><span class="w"> </span><span class="mh">1</span><span class="n">ps</span><span class="o">/</span><span class="mh">1</span><span class="n">ps</span>
</span><span id="__span-173-2"><a id="__codelineno-173-2" name="__codelineno-173-2"></a><a href="#__codelineno-173-2"><span class="linenos" data-linenos=" 2 "></span></a><span class="k">module</span><span class="w"> </span><span class="n">top_module</span><span class="w"> </span><span class="p">(</span><span class="w"> </span><span class="p">);</span>
</span><span id="__span-173-3"><a id="__codelineno-173-3" name="__codelineno-173-3"></a><a href="#__codelineno-173-3"><span class="linenos" data-linenos=" 3 "></span></a><span class="w">    </span><span class="kt">reg</span><span class="w"> </span><span class="n">clk</span><span class="p">;</span>
</span><span id="__span-173-4"><a id="__codelineno-173-4" name="__codelineno-173-4"></a><a href="#__codelineno-173-4"><span class="linenos" data-linenos=" 4 "></span></a><span class="w">    </span><span class="k">initial</span><span class="w"> </span><span class="k">begin</span>
</span><span id="__span-173-5"><a id="__codelineno-173-5" name="__codelineno-173-5"></a><a href="#__codelineno-173-5"><span class="linenos" data-linenos=" 5 "></span></a><span class="w">        </span><span class="n">clk</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">1</span><span class="mb">&#39;b0</span><span class="p">;</span>
</span><span id="__span-173-6"><a id="__codelineno-173-6" name="__codelineno-173-6"></a><a href="#__codelineno-173-6"><span class="linenos" data-linenos=" 6 "></span></a><span class="w">    </span><span class="k">end</span>
</span><span id="__span-173-7"><a id="__codelineno-173-7" name="__codelineno-173-7"></a><a href="#__codelineno-173-7"><span class="linenos" data-linenos=" 7 "></span></a><span class="w">    </span><span class="k">always</span><span class="w"> </span><span class="p">#</span><span class="mh">5</span><span class="w"> </span><span class="n">clk</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">~</span><span class="n">clk</span><span class="p">;</span>
</span><span id="__span-173-8"><a id="__codelineno-173-8" name="__codelineno-173-8"></a><a href="#__codelineno-173-8"><span class="linenos" data-linenos=" 8 "></span></a>
</span><span id="__span-173-9"><a id="__codelineno-173-9" name="__codelineno-173-9"></a><a href="#__codelineno-173-9"><span class="linenos" data-linenos=" 9 "></span></a><span class="w">    </span><span class="n">dut</span><span class="w"> </span><span class="n">inst</span><span class="p">(</span><span class="w"> </span><span class="p">.</span><span class="n">clk</span><span class="p">(</span><span class="n">clk</span><span class="p">))</span><span class="w"> </span><span class="p">;</span>
</span><span id="__span-173-10"><a id="__codelineno-173-10" name="__codelineno-173-10"></a><a href="#__codelineno-173-10"><span class="linenos" data-linenos="10 "></span></a><span class="k">endmodule</span>
</span></code></pre></div></p>
<hr />
<h3 id="testbench1">Testbench1<a class="headerlink" href="#testbench1" title="Anchor link to this section for reference">⚓︎</a></h3>
<p>Website: <a href="https://hdlbits.01xz.net/wiki/Tb/tb1" target="_blank">https://hdlbits.01xz.net/wiki/Tb/tb1</a></p>
<p>這題不像上題要一直無限clk，可以透過<code>$finish</code>來限制模擬時間。
<div class="language-verilog highlight"><span class="filename">Verilog</span><pre><span></span><code><span id="__span-174-1"><a id="__codelineno-174-1" name="__codelineno-174-1"></a><a href="#__codelineno-174-1"><span class="linenos" data-linenos=" 1 "></span></a><span class="k">module</span><span class="w"> </span><span class="n">top_module</span><span class="w"> </span><span class="p">(</span><span class="w"> </span><span class="k">output</span><span class="w"> </span><span class="kt">reg</span><span class="w"> </span><span class="n">A</span><span class="p">,</span><span class="w"> </span><span class="k">output</span><span class="w"> </span><span class="kt">reg</span><span class="w"> </span><span class="n">B</span><span class="w"> </span><span class="p">);</span><span class="c1">//</span>
</span><span id="__span-174-2"><a id="__codelineno-174-2" name="__codelineno-174-2"></a><a href="#__codelineno-174-2"><span class="linenos" data-linenos=" 2 "></span></a>
</span><span id="__span-174-3"><a id="__codelineno-174-3" name="__codelineno-174-3"></a><a href="#__codelineno-174-3"><span class="linenos" data-linenos=" 3 "></span></a><span class="w">    </span><span class="c1">// generate input patterns here</span>
</span><span id="__span-174-4"><a id="__codelineno-174-4" name="__codelineno-174-4"></a><a href="#__codelineno-174-4"><span class="linenos" data-linenos=" 4 "></span></a><span class="w">    </span><span class="k">initial</span><span class="w"> </span><span class="k">begin</span>
</span><span id="__span-174-5"><a id="__codelineno-174-5" name="__codelineno-174-5"></a><a href="#__codelineno-174-5"><span class="linenos" data-linenos=" 5 "></span></a><span class="w">        </span><span class="n">A</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">1</span><span class="mb">&#39;b0</span><span class="p">;</span>
</span><span id="__span-174-6"><a id="__codelineno-174-6" name="__codelineno-174-6"></a><a href="#__codelineno-174-6"><span class="linenos" data-linenos=" 6 "></span></a><span class="w">        </span><span class="n">B</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">1</span><span class="mb">&#39;b0</span><span class="p">;</span>
</span><span id="__span-174-7"><a id="__codelineno-174-7" name="__codelineno-174-7"></a><a href="#__codelineno-174-7"><span class="linenos" data-linenos=" 7 "></span></a><span class="w">        </span><span class="p">#</span><span class="mh">10</span><span class="w"> </span><span class="n">A</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">1</span><span class="mb">&#39;b1</span><span class="p">;</span>
</span><span id="__span-174-8"><a id="__codelineno-174-8" name="__codelineno-174-8"></a><a href="#__codelineno-174-8"><span class="linenos" data-linenos=" 8 "></span></a><span class="w">        </span><span class="p">#</span><span class="mh">5</span><span class="w"> </span><span class="n">B</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">1</span><span class="mb">&#39;b1</span><span class="p">;</span>
</span><span id="__span-174-9"><a id="__codelineno-174-9" name="__codelineno-174-9"></a><a href="#__codelineno-174-9"><span class="linenos" data-linenos=" 9 "></span></a><span class="w">        </span><span class="p">#</span><span class="mh">5</span><span class="w"> </span><span class="n">A</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">1</span><span class="mb">&#39;b0</span><span class="p">;</span>
</span><span id="__span-174-10"><a id="__codelineno-174-10" name="__codelineno-174-10"></a><a href="#__codelineno-174-10"><span class="linenos" data-linenos="10 "></span></a><span class="w">        </span><span class="p">#</span><span class="mh">20</span><span class="w"> </span><span class="n">B</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">1</span><span class="mb">&#39;b0</span><span class="p">;</span>
</span><span id="__span-174-11"><a id="__codelineno-174-11" name="__codelineno-174-11"></a><a href="#__codelineno-174-11"><span class="linenos" data-linenos="11 "></span></a><span class="w">        </span><span class="p">#</span><span class="mh">300</span><span class="w"> </span><span class="nb">$finish</span><span class="p">;</span>
</span><span id="__span-174-12"><a id="__codelineno-174-12" name="__codelineno-174-12"></a><a href="#__codelineno-174-12"><span class="linenos" data-linenos="12 "></span></a><span class="w">    </span><span class="k">end</span>
</span><span id="__span-174-13"><a id="__codelineno-174-13" name="__codelineno-174-13"></a><a href="#__codelineno-174-13"><span class="linenos" data-linenos="13 "></span></a>
</span><span id="__span-174-14"><a id="__codelineno-174-14" name="__codelineno-174-14"></a><a href="#__codelineno-174-14"><span class="linenos" data-linenos="14 "></span></a><span class="k">endmodule</span>
</span></code></pre></div></p>
<hr />
<h3 id="and-gate_1">AND gate<a class="headerlink" href="#and-gate_1" title="Anchor link to this section for reference">⚓︎</a></h3>
<p>Website: <a href="https://hdlbits.01xz.net/wiki/Tb/and" target="_blank">https://hdlbits.01xz.net/wiki/Tb/and</a></p>
<p>這題不像上題要一直無限clk，可以透過<code>$finish</code>來限制模擬時間。
<div class="language-verilog highlight"><span class="filename">Verilog</span><pre><span></span><code><span id="__span-175-1"><a id="__codelineno-175-1" name="__codelineno-175-1"></a><a href="#__codelineno-175-1"><span class="linenos" data-linenos=" 1 "></span></a><span class="k">module</span><span class="w"> </span><span class="n">top_module</span><span class="p">();</span>
</span><span id="__span-175-2"><a id="__codelineno-175-2" name="__codelineno-175-2"></a><a href="#__codelineno-175-2"><span class="linenos" data-linenos=" 2 "></span></a><span class="w">    </span><span class="kt">reg</span><span class="w"> </span><span class="p">[</span><span class="mh">1</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="n">in</span><span class="p">;</span>
</span><span id="__span-175-3"><a id="__codelineno-175-3" name="__codelineno-175-3"></a><a href="#__codelineno-175-3"><span class="linenos" data-linenos=" 3 "></span></a><span class="w">    </span><span class="kt">wire</span><span class="w"> </span><span class="n">out</span><span class="p">;</span>
</span><span id="__span-175-4"><a id="__codelineno-175-4" name="__codelineno-175-4"></a><a href="#__codelineno-175-4"><span class="linenos" data-linenos=" 4 "></span></a><span class="w">    </span><span class="k">initial</span><span class="w"> </span><span class="k">begin</span>
</span><span id="__span-175-5"><a id="__codelineno-175-5" name="__codelineno-175-5"></a><a href="#__codelineno-175-5"><span class="linenos" data-linenos=" 5 "></span></a><span class="w">        </span><span class="n">in</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">2</span><span class="mb">&#39;b00</span><span class="p">;</span>
</span><span id="__span-175-6"><a id="__codelineno-175-6" name="__codelineno-175-6"></a><a href="#__codelineno-175-6"><span class="linenos" data-linenos=" 6 "></span></a><span class="w">        </span><span class="p">#</span><span class="mh">10</span><span class="w"> </span><span class="n">in</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">2</span><span class="mb">&#39;b01</span><span class="p">;</span>
</span><span id="__span-175-7"><a id="__codelineno-175-7" name="__codelineno-175-7"></a><a href="#__codelineno-175-7"><span class="linenos" data-linenos=" 7 "></span></a><span class="w">        </span><span class="p">#</span><span class="mh">10</span><span class="w"> </span><span class="n">in</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">2</span><span class="mb">&#39;b10</span><span class="p">;</span>
</span><span id="__span-175-8"><a id="__codelineno-175-8" name="__codelineno-175-8"></a><a href="#__codelineno-175-8"><span class="linenos" data-linenos=" 8 "></span></a><span class="w">        </span><span class="p">#</span><span class="mh">10</span><span class="w"> </span><span class="n">in</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">2</span><span class="mb">&#39;b11</span><span class="p">;</span>
</span><span id="__span-175-9"><a id="__codelineno-175-9" name="__codelineno-175-9"></a><a href="#__codelineno-175-9"><span class="linenos" data-linenos=" 9 "></span></a><span class="w">        </span><span class="p">#</span><span class="mh">20</span><span class="w"> </span><span class="nb">$finish</span><span class="p">;</span>
</span><span id="__span-175-10"><a id="__codelineno-175-10" name="__codelineno-175-10"></a><a href="#__codelineno-175-10"><span class="linenos" data-linenos="10 "></span></a><span class="w">    </span><span class="k">end</span>
</span><span id="__span-175-11"><a id="__codelineno-175-11" name="__codelineno-175-11"></a><a href="#__codelineno-175-11"><span class="linenos" data-linenos="11 "></span></a>
</span><span id="__span-175-12"><a id="__codelineno-175-12" name="__codelineno-175-12"></a><a href="#__codelineno-175-12"><span class="linenos" data-linenos="12 "></span></a><span class="w">    </span><span class="n">andgate</span><span class="w"> </span><span class="n">and_gate</span><span class="p">(.</span><span class="n">in</span><span class="p">(</span><span class="n">in</span><span class="p">),</span><span class="w"> </span><span class="p">.</span><span class="n">out</span><span class="p">(</span><span class="n">out</span><span class="p">));</span>
</span><span id="__span-175-13"><a id="__codelineno-175-13" name="__codelineno-175-13"></a><a href="#__codelineno-175-13"><span class="linenos" data-linenos="13 "></span></a><span class="k">endmodule</span>
</span></code></pre></div></p>
<hr />
<h3 id="testbench2">Testbench2<a class="headerlink" href="#testbench2" title="Anchor link to this section for reference">⚓︎</a></h3>
<p>Website: <a href="https://hdlbits.01xz.net/wiki/Tb/tb2" target="_blank">https://hdlbits.01xz.net/wiki/Tb/tb2</a></p>
<p>這題reg和wire變多了，可以考慮把initial block分開寫，可讀性較佳。
<div class="language-verilog highlight"><span class="filename">Verilog</span><pre><span></span><code><span id="__span-176-1"><a id="__codelineno-176-1" name="__codelineno-176-1"></a><a href="#__codelineno-176-1"><span class="linenos" data-linenos=" 1 "></span></a><span class="k">module</span><span class="w"> </span><span class="n">top_module</span><span class="p">();</span>
</span><span id="__span-176-2"><a id="__codelineno-176-2" name="__codelineno-176-2"></a><a href="#__codelineno-176-2"><span class="linenos" data-linenos=" 2 "></span></a><span class="w">    </span><span class="kt">reg</span><span class="w"> </span><span class="n">clk</span><span class="p">,</span><span class="w"> </span><span class="n">in</span><span class="p">;</span>
</span><span id="__span-176-3"><a id="__codelineno-176-3" name="__codelineno-176-3"></a><a href="#__codelineno-176-3"><span class="linenos" data-linenos=" 3 "></span></a><span class="w">    </span><span class="kt">reg</span><span class="w"> </span><span class="p">[</span><span class="mh">2</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">s</span><span class="p">;</span>
</span><span id="__span-176-4"><a id="__codelineno-176-4" name="__codelineno-176-4"></a><a href="#__codelineno-176-4"><span class="linenos" data-linenos=" 4 "></span></a><span class="w">    </span><span class="kt">wire</span><span class="w"> </span><span class="n">out</span><span class="p">;</span>
</span><span id="__span-176-5"><a id="__codelineno-176-5" name="__codelineno-176-5"></a><a href="#__codelineno-176-5"><span class="linenos" data-linenos=" 5 "></span></a>
</span><span id="__span-176-6"><a id="__codelineno-176-6" name="__codelineno-176-6"></a><a href="#__codelineno-176-6"><span class="linenos" data-linenos=" 6 "></span></a><span class="w">    </span><span class="k">initial</span><span class="w"> </span><span class="k">begin</span>
</span><span id="__span-176-7"><a id="__codelineno-176-7" name="__codelineno-176-7"></a><a href="#__codelineno-176-7"><span class="linenos" data-linenos=" 7 "></span></a><span class="w">        </span><span class="n">clk</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">1</span><span class="mb">&#39;b0</span><span class="p">;</span>
</span><span id="__span-176-8"><a id="__codelineno-176-8" name="__codelineno-176-8"></a><a href="#__codelineno-176-8"><span class="linenos" data-linenos=" 8 "></span></a><span class="w">    </span><span class="k">end</span><span class="w">    </span>
</span><span id="__span-176-9"><a id="__codelineno-176-9" name="__codelineno-176-9"></a><a href="#__codelineno-176-9"><span class="linenos" data-linenos=" 9 "></span></a><span class="w">    </span><span class="k">always</span><span class="w"> </span><span class="p">#</span><span class="mh">5</span><span class="w"> </span><span class="n">clk</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">~</span><span class="n">clk</span><span class="p">;</span>
</span><span id="__span-176-10"><a id="__codelineno-176-10" name="__codelineno-176-10"></a><a href="#__codelineno-176-10"><span class="linenos" data-linenos="10 "></span></a>
</span><span id="__span-176-11"><a id="__codelineno-176-11" name="__codelineno-176-11"></a><a href="#__codelineno-176-11"><span class="linenos" data-linenos="11 "></span></a><span class="w">    </span><span class="k">initial</span><span class="w"> </span><span class="k">begin</span>
</span><span id="__span-176-12"><a id="__codelineno-176-12" name="__codelineno-176-12"></a><a href="#__codelineno-176-12"><span class="linenos" data-linenos="12 "></span></a><span class="w">        </span><span class="n">in</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">1</span><span class="mb">&#39;b0</span><span class="p">;</span>
</span><span id="__span-176-13"><a id="__codelineno-176-13" name="__codelineno-176-13"></a><a href="#__codelineno-176-13"><span class="linenos" data-linenos="13 "></span></a><span class="w">        </span><span class="p">#</span><span class="mh">20</span><span class="w"> </span><span class="n">in</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">1</span><span class="mb">&#39;b1</span><span class="p">;</span>
</span><span id="__span-176-14"><a id="__codelineno-176-14" name="__codelineno-176-14"></a><a href="#__codelineno-176-14"><span class="linenos" data-linenos="14 "></span></a><span class="w">        </span><span class="p">#</span><span class="mh">10</span><span class="w"> </span><span class="n">in</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">1</span><span class="mb">&#39;b0</span><span class="p">;</span>
</span><span id="__span-176-15"><a id="__codelineno-176-15" name="__codelineno-176-15"></a><a href="#__codelineno-176-15"><span class="linenos" data-linenos="15 "></span></a><span class="w">        </span><span class="p">#</span><span class="mh">10</span><span class="w"> </span><span class="n">in</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">1</span><span class="mb">&#39;b1</span><span class="p">;</span>
</span><span id="__span-176-16"><a id="__codelineno-176-16" name="__codelineno-176-16"></a><a href="#__codelineno-176-16"><span class="linenos" data-linenos="16 "></span></a><span class="w">        </span><span class="p">#</span><span class="mh">30</span><span class="w"> </span><span class="n">in</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">1</span><span class="mb">&#39;b0</span><span class="p">;</span>
</span><span id="__span-176-17"><a id="__codelineno-176-17" name="__codelineno-176-17"></a><a href="#__codelineno-176-17"><span class="linenos" data-linenos="17 "></span></a><span class="w">    </span><span class="k">end</span>
</span><span id="__span-176-18"><a id="__codelineno-176-18" name="__codelineno-176-18"></a><a href="#__codelineno-176-18"><span class="linenos" data-linenos="18 "></span></a>
</span><span id="__span-176-19"><a id="__codelineno-176-19" name="__codelineno-176-19"></a><a href="#__codelineno-176-19"><span class="linenos" data-linenos="19 "></span></a><span class="w">    </span><span class="k">initial</span><span class="w"> </span><span class="k">begin</span>
</span><span id="__span-176-20"><a id="__codelineno-176-20" name="__codelineno-176-20"></a><a href="#__codelineno-176-20"><span class="linenos" data-linenos="20 "></span></a><span class="w">        </span><span class="n">s</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">3</span><span class="mi">&#39;d2</span><span class="p">;</span>
</span><span id="__span-176-21"><a id="__codelineno-176-21" name="__codelineno-176-21"></a><a href="#__codelineno-176-21"><span class="linenos" data-linenos="21 "></span></a><span class="w">        </span><span class="p">#</span><span class="mh">10</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">3</span><span class="mi">&#39;d6</span><span class="p">;</span>
</span><span id="__span-176-22"><a id="__codelineno-176-22" name="__codelineno-176-22"></a><a href="#__codelineno-176-22"><span class="linenos" data-linenos="22 "></span></a><span class="w">        </span><span class="p">#</span><span class="mh">10</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">3</span><span class="mi">&#39;d2</span><span class="p">;</span>
</span><span id="__span-176-23"><a id="__codelineno-176-23" name="__codelineno-176-23"></a><a href="#__codelineno-176-23"><span class="linenos" data-linenos="23 "></span></a><span class="w">        </span><span class="p">#</span><span class="mh">10</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">3</span><span class="mi">&#39;d7</span><span class="p">;</span>
</span><span id="__span-176-24"><a id="__codelineno-176-24" name="__codelineno-176-24"></a><a href="#__codelineno-176-24"><span class="linenos" data-linenos="24 "></span></a><span class="w">        </span><span class="p">#</span><span class="mh">10</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">3</span><span class="mi">&#39;d0</span><span class="p">;</span>
</span><span id="__span-176-25"><a id="__codelineno-176-25" name="__codelineno-176-25"></a><a href="#__codelineno-176-25"><span class="linenos" data-linenos="25 "></span></a><span class="w">    </span><span class="k">end</span>
</span><span id="__span-176-26"><a id="__codelineno-176-26" name="__codelineno-176-26"></a><a href="#__codelineno-176-26"><span class="linenos" data-linenos="26 "></span></a>
</span><span id="__span-176-27"><a id="__codelineno-176-27" name="__codelineno-176-27"></a><a href="#__codelineno-176-27"><span class="linenos" data-linenos="27 "></span></a><span class="w">    </span><span class="k">initial</span><span class="w"> </span><span class="k">begin</span>
</span><span id="__span-176-28"><a id="__codelineno-176-28" name="__codelineno-176-28"></a><a href="#__codelineno-176-28"><span class="linenos" data-linenos="28 "></span></a><span class="w">        </span><span class="p">#</span><span class="mh">100</span><span class="w"> </span><span class="nb">$finish</span><span class="p">;</span>
</span><span id="__span-176-29"><a id="__codelineno-176-29" name="__codelineno-176-29"></a><a href="#__codelineno-176-29"><span class="linenos" data-linenos="29 "></span></a><span class="w">    </span><span class="k">end</span>
</span><span id="__span-176-30"><a id="__codelineno-176-30" name="__codelineno-176-30"></a><a href="#__codelineno-176-30"><span class="linenos" data-linenos="30 "></span></a>
</span><span id="__span-176-31"><a id="__codelineno-176-31" name="__codelineno-176-31"></a><a href="#__codelineno-176-31"><span class="linenos" data-linenos="31 "></span></a><span class="w">    </span><span class="n">q7</span><span class="w"> </span><span class="n">inst</span><span class="p">(.</span><span class="n">clk</span><span class="p">(</span><span class="n">clk</span><span class="p">),</span><span class="w"> </span><span class="p">.</span><span class="n">in</span><span class="p">(</span><span class="n">in</span><span class="p">),</span><span class="w"> </span><span class="p">.</span><span class="n">s</span><span class="p">(</span><span class="n">s</span><span class="p">),</span><span class="w"> </span><span class="p">.</span><span class="n">out</span><span class="p">(</span><span class="n">out</span><span class="p">));</span>
</span><span id="__span-176-32"><a id="__codelineno-176-32" name="__codelineno-176-32"></a><a href="#__codelineno-176-32"><span class="linenos" data-linenos="32 "></span></a><span class="k">endmodule</span>
</span></code></pre></div></p>
<hr />
<h3 id="t-flip-flop">T flip-flop<a class="headerlink" href="#t-flip-flop" title="Anchor link to this section for reference">⚓︎</a></h3>
<p>Website: <a href="https://hdlbits.01xz.net/wiki/Tb/tff" target="_blank">https://hdlbits.01xz.net/wiki/Tb/tff</a></p>
<p>這題照著題目要求寫，就結束了。完全不用考慮時間間隔弄多少。
<div class="language-verilog highlight"><span class="filename">Verilog</span><pre><span></span><code><span id="__span-177-1"><a id="__codelineno-177-1" name="__codelineno-177-1"></a><a href="#__codelineno-177-1"><span class="linenos" data-linenos=" 1 "></span></a><span class="k">module</span><span class="w"> </span><span class="n">top_module</span><span class="w"> </span><span class="p">();</span>
</span><span id="__span-177-2"><a id="__codelineno-177-2" name="__codelineno-177-2"></a><a href="#__codelineno-177-2"><span class="linenos" data-linenos=" 2 "></span></a><span class="w">    </span><span class="kt">reg</span><span class="w"> </span><span class="n">clk</span><span class="p">;</span>
</span><span id="__span-177-3"><a id="__codelineno-177-3" name="__codelineno-177-3"></a><a href="#__codelineno-177-3"><span class="linenos" data-linenos=" 3 "></span></a><span class="w">    </span><span class="kt">reg</span><span class="w"> </span><span class="n">reset</span><span class="p">;</span>
</span><span id="__span-177-4"><a id="__codelineno-177-4" name="__codelineno-177-4"></a><a href="#__codelineno-177-4"><span class="linenos" data-linenos=" 4 "></span></a><span class="w">    </span><span class="kt">reg</span><span class="w"> </span><span class="n">t</span><span class="p">;</span>
</span><span id="__span-177-5"><a id="__codelineno-177-5" name="__codelineno-177-5"></a><a href="#__codelineno-177-5"><span class="linenos" data-linenos=" 5 "></span></a><span class="w">    </span><span class="kt">wire</span><span class="w"> </span><span class="n">q</span><span class="p">;</span>
</span><span id="__span-177-6"><a id="__codelineno-177-6" name="__codelineno-177-6"></a><a href="#__codelineno-177-6"><span class="linenos" data-linenos=" 6 "></span></a>
</span><span id="__span-177-7"><a id="__codelineno-177-7" name="__codelineno-177-7"></a><a href="#__codelineno-177-7"><span class="linenos" data-linenos=" 7 "></span></a><span class="w">    </span><span class="k">initial</span><span class="w"> </span><span class="k">begin</span>
</span><span id="__span-177-8"><a id="__codelineno-177-8" name="__codelineno-177-8"></a><a href="#__codelineno-177-8"><span class="linenos" data-linenos=" 8 "></span></a><span class="w">        </span><span class="n">clk</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">1</span><span class="mb">&#39;b0</span><span class="p">;</span>
</span><span id="__span-177-9"><a id="__codelineno-177-9" name="__codelineno-177-9"></a><a href="#__codelineno-177-9"><span class="linenos" data-linenos=" 9 "></span></a><span class="w">    </span><span class="k">end</span>
</span><span id="__span-177-10"><a id="__codelineno-177-10" name="__codelineno-177-10"></a><a href="#__codelineno-177-10"><span class="linenos" data-linenos="10 "></span></a><span class="w">    </span><span class="k">always</span><span class="w"> </span><span class="p">#</span><span class="mh">5</span><span class="w"> </span><span class="n">clk</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">~</span><span class="n">clk</span><span class="p">;</span>
</span><span id="__span-177-11"><a id="__codelineno-177-11" name="__codelineno-177-11"></a><a href="#__codelineno-177-11"><span class="linenos" data-linenos="11 "></span></a>
</span><span id="__span-177-12"><a id="__codelineno-177-12" name="__codelineno-177-12"></a><a href="#__codelineno-177-12"><span class="linenos" data-linenos="12 "></span></a><span class="w">    </span><span class="k">initial</span><span class="w"> </span><span class="k">begin</span>
</span><span id="__span-177-13"><a id="__codelineno-177-13" name="__codelineno-177-13"></a><a href="#__codelineno-177-13"><span class="linenos" data-linenos="13 "></span></a><span class="w">        </span><span class="n">reset</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">1</span><span class="mb">&#39;b1</span><span class="p">;</span>
</span><span id="__span-177-14"><a id="__codelineno-177-14" name="__codelineno-177-14"></a><a href="#__codelineno-177-14"><span class="linenos" data-linenos="14 "></span></a><span class="w">        </span><span class="p">#</span><span class="mh">10</span><span class="w"> </span><span class="n">reset</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">1</span><span class="mb">&#39;b0</span><span class="p">;</span>
</span><span id="__span-177-15"><a id="__codelineno-177-15" name="__codelineno-177-15"></a><a href="#__codelineno-177-15"><span class="linenos" data-linenos="15 "></span></a><span class="w">    </span><span class="k">end</span>
</span><span id="__span-177-16"><a id="__codelineno-177-16" name="__codelineno-177-16"></a><a href="#__codelineno-177-16"><span class="linenos" data-linenos="16 "></span></a>
</span><span id="__span-177-17"><a id="__codelineno-177-17" name="__codelineno-177-17"></a><a href="#__codelineno-177-17"><span class="linenos" data-linenos="17 "></span></a><span class="w">    </span><span class="k">initial</span><span class="w"> </span><span class="k">begin</span>
</span><span id="__span-177-18"><a id="__codelineno-177-18" name="__codelineno-177-18"></a><a href="#__codelineno-177-18"><span class="linenos" data-linenos="18 "></span></a><span class="w">        </span><span class="n">t</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">1</span><span class="mb">&#39;b0</span><span class="p">;</span>
</span><span id="__span-177-19"><a id="__codelineno-177-19" name="__codelineno-177-19"></a><a href="#__codelineno-177-19"><span class="linenos" data-linenos="19 "></span></a><span class="w">        </span><span class="p">#</span><span class="mh">10</span><span class="w"> </span><span class="n">t</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">1</span><span class="mb">&#39;b1</span><span class="p">;</span>
</span><span id="__span-177-20"><a id="__codelineno-177-20" name="__codelineno-177-20"></a><a href="#__codelineno-177-20"><span class="linenos" data-linenos="20 "></span></a><span class="w">    </span><span class="k">end</span>
</span><span id="__span-177-21"><a id="__codelineno-177-21" name="__codelineno-177-21"></a><a href="#__codelineno-177-21"><span class="linenos" data-linenos="21 "></span></a>
</span><span id="__span-177-22"><a id="__codelineno-177-22" name="__codelineno-177-22"></a><a href="#__codelineno-177-22"><span class="linenos" data-linenos="22 "></span></a><span class="w">    </span><span class="k">initial</span><span class="w"> </span><span class="k">begin</span>
</span><span id="__span-177-23"><a id="__codelineno-177-23" name="__codelineno-177-23"></a><a href="#__codelineno-177-23"><span class="linenos" data-linenos="23 "></span></a><span class="w">        </span><span class="p">#</span><span class="mh">100</span><span class="w"> </span><span class="nb">$finish</span><span class="p">;</span>
</span><span id="__span-177-24"><a id="__codelineno-177-24" name="__codelineno-177-24"></a><a href="#__codelineno-177-24"><span class="linenos" data-linenos="24 "></span></a><span class="w">    </span><span class="k">end</span>
</span><span id="__span-177-25"><a id="__codelineno-177-25" name="__codelineno-177-25"></a><a href="#__codelineno-177-25"><span class="linenos" data-linenos="25 "></span></a>
</span><span id="__span-177-26"><a id="__codelineno-177-26" name="__codelineno-177-26"></a><a href="#__codelineno-177-26"><span class="linenos" data-linenos="26 "></span></a><span class="w">    </span><span class="n">tff</span><span class="w"> </span><span class="n">inst</span><span class="p">(.</span><span class="n">clk</span><span class="p">(</span><span class="n">clk</span><span class="p">),</span><span class="w"> </span><span class="p">.</span><span class="n">reset</span><span class="p">(</span><span class="n">reset</span><span class="p">),</span><span class="w"> </span><span class="p">.</span><span class="n">t</span><span class="p">(</span><span class="n">t</span><span class="p">),</span><span class="w"> </span><span class="p">.</span><span class="n">q</span><span class="p">(</span><span class="n">q</span><span class="p">));</span>
</span><span id="__span-177-27"><a id="__codelineno-177-27" name="__codelineno-177-27"></a><a href="#__codelineno-177-27"><span class="linenos" data-linenos="27 "></span></a><span class="k">endmodule</span>
</span></code></pre></div></p>
<hr />
<h2 id="cs450">CS450<a class="headerlink" href="#cs450" title="Anchor link to this section for reference">⚓︎</a></h2>
<h3 id="cs450timer">Cs450/timer<a class="headerlink" href="#cs450timer" title="Anchor link to this section for reference">⚓︎</a></h3>
<p>Website: <a href="https://hdlbits.01xz.net/wiki/Cs450/timer" target="_blank">https://hdlbits.01xz.net/wiki/Cs450/timer</a></p>
<p>這題單純寫個counter，就結束了。
<div class="language-verilog highlight"><span class="filename">Verilog</span><pre><span></span><code><span id="__span-178-1"><a id="__codelineno-178-1" name="__codelineno-178-1"></a><a href="#__codelineno-178-1"><span class="linenos" data-linenos=" 1 "></span></a><span class="k">module</span><span class="w"> </span><span class="n">top_module</span><span class="p">(</span>
</span><span id="__span-178-2"><a id="__codelineno-178-2" name="__codelineno-178-2"></a><a href="#__codelineno-178-2"><span class="linenos" data-linenos=" 2 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">clk</span><span class="p">,</span><span class="w"> </span>
</span><span id="__span-178-3"><a id="__codelineno-178-3" name="__codelineno-178-3"></a><a href="#__codelineno-178-3"><span class="linenos" data-linenos=" 3 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">load</span><span class="p">,</span><span class="w"> </span>
</span><span id="__span-178-4"><a id="__codelineno-178-4" name="__codelineno-178-4"></a><a href="#__codelineno-178-4"><span class="linenos" data-linenos=" 4 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="p">[</span><span class="mh">9</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">data</span><span class="p">,</span><span class="w"> </span>
</span><span id="__span-178-5"><a id="__codelineno-178-5" name="__codelineno-178-5"></a><a href="#__codelineno-178-5"><span class="linenos" data-linenos=" 5 "></span></a><span class="w">    </span><span class="k">output</span><span class="w"> </span><span class="n">tc</span>
</span><span id="__span-178-6"><a id="__codelineno-178-6" name="__codelineno-178-6"></a><a href="#__codelineno-178-6"><span class="linenos" data-linenos=" 6 "></span></a><span class="p">);</span><span class="w">  </span>
</span><span id="__span-178-7"><a id="__codelineno-178-7" name="__codelineno-178-7"></a><a href="#__codelineno-178-7"><span class="linenos" data-linenos=" 7 "></span></a><span class="w">    </span><span class="kt">reg</span><span class="w"> </span><span class="p">[</span><span class="mh">9</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">counter</span><span class="p">;</span>
</span><span id="__span-178-8"><a id="__codelineno-178-8" name="__codelineno-178-8"></a><a href="#__codelineno-178-8"><span class="linenos" data-linenos=" 8 "></span></a><span class="w">    </span><span class="k">always</span><span class="p">@(</span><span class="k">posedge</span><span class="w"> </span><span class="n">clk</span><span class="p">)</span><span class="k">begin</span>
</span><span id="__span-178-9"><a id="__codelineno-178-9" name="__codelineno-178-9"></a><a href="#__codelineno-178-9"><span class="linenos" data-linenos=" 9 "></span></a><span class="w">        </span><span class="k">if</span><span class="p">(</span><span class="n">load</span><span class="p">)</span><span class="w"> </span><span class="n">counter</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">data</span><span class="p">;</span>
</span><span id="__span-178-10"><a id="__codelineno-178-10" name="__codelineno-178-10"></a><a href="#__codelineno-178-10"><span class="linenos" data-linenos="10 "></span></a><span class="w">        </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="p">(</span><span class="n">counter</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mh">10</span><span class="mi">&#39;d0</span><span class="p">)</span><span class="w"> </span><span class="n">counter</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="mh">10</span><span class="mi">&#39;d0</span><span class="p">;</span>
</span><span id="__span-178-11"><a id="__codelineno-178-11" name="__codelineno-178-11"></a><a href="#__codelineno-178-11"><span class="linenos" data-linenos="11 "></span></a><span class="w">        </span><span class="k">else</span><span class="w"> </span><span class="n">counter</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">counter</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mh">1</span><span class="mb">&#39;b1</span><span class="p">;</span>
</span><span id="__span-178-12"><a id="__codelineno-178-12" name="__codelineno-178-12"></a><a href="#__codelineno-178-12"><span class="linenos" data-linenos="12 "></span></a><span class="w">    </span><span class="k">end</span>
</span><span id="__span-178-13"><a id="__codelineno-178-13" name="__codelineno-178-13"></a><a href="#__codelineno-178-13"><span class="linenos" data-linenos="13 "></span></a><span class="w">    </span><span class="k">assign</span><span class="w"> </span><span class="n">tc</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">counter</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mh">10</span><span class="mi">&#39;d0</span><span class="p">);</span>
</span><span id="__span-178-14"><a id="__codelineno-178-14" name="__codelineno-178-14"></a><a href="#__codelineno-178-14"><span class="linenos" data-linenos="14 "></span></a><span class="k">endmodule</span>
</span></code></pre></div></p>
<hr />
<h3 id="cs450counter-2bc">Cs450/counter 2bc<a class="headerlink" href="#cs450counter-2bc" title="Anchor link to this section for reference">⚓︎</a></h3>
<p>Website: <a href="https://hdlbits.01xz.net/wiki/Cs450/counter_2bc" target="_blank">https://hdlbits.01xz.net/wiki/Cs450/counter_2bc</a></p>
<p>這題就是照題目寫FSM，沒什麼難度。
<div class="language-verilog highlight"><span class="filename">Verilog</span><pre><span></span><code><span id="__span-179-1"><a id="__codelineno-179-1" name="__codelineno-179-1"></a><a href="#__codelineno-179-1"><span class="linenos" data-linenos=" 1 "></span></a><span class="k">module</span><span class="w"> </span><span class="n">top_module</span><span class="p">(</span>
</span><span id="__span-179-2"><a id="__codelineno-179-2" name="__codelineno-179-2"></a><a href="#__codelineno-179-2"><span class="linenos" data-linenos=" 2 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">clk</span><span class="p">,</span>
</span><span id="__span-179-3"><a id="__codelineno-179-3" name="__codelineno-179-3"></a><a href="#__codelineno-179-3"><span class="linenos" data-linenos=" 3 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">areset</span><span class="p">,</span>
</span><span id="__span-179-4"><a id="__codelineno-179-4" name="__codelineno-179-4"></a><a href="#__codelineno-179-4"><span class="linenos" data-linenos=" 4 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">train_valid</span><span class="p">,</span>
</span><span id="__span-179-5"><a id="__codelineno-179-5" name="__codelineno-179-5"></a><a href="#__codelineno-179-5"><span class="linenos" data-linenos=" 5 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">train_taken</span><span class="p">,</span>
</span><span id="__span-179-6"><a id="__codelineno-179-6" name="__codelineno-179-6"></a><a href="#__codelineno-179-6"><span class="linenos" data-linenos=" 6 "></span></a><span class="w">    </span><span class="k">output</span><span class="w"> </span><span class="kt">reg</span><span class="w"> </span><span class="p">[</span><span class="mh">1</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">state</span>
</span><span id="__span-179-7"><a id="__codelineno-179-7" name="__codelineno-179-7"></a><a href="#__codelineno-179-7"><span class="linenos" data-linenos=" 7 "></span></a><span class="p">);</span>
</span><span id="__span-179-8"><a id="__codelineno-179-8" name="__codelineno-179-8"></a><a href="#__codelineno-179-8"><span class="linenos" data-linenos=" 8 "></span></a><span class="w">    </span><span class="kt">reg</span><span class="w"> </span><span class="p">[</span><span class="mh">1</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">next_state</span><span class="p">;</span>
</span><span id="__span-179-9"><a id="__codelineno-179-9" name="__codelineno-179-9"></a><a href="#__codelineno-179-9"><span class="linenos" data-linenos=" 9 "></span></a><span class="w">    </span><span class="k">parameter</span><span class="w"> </span><span class="n">SNT</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">2</span><span class="mb">&#39;b00</span><span class="p">;</span>
</span><span id="__span-179-10"><a id="__codelineno-179-10" name="__codelineno-179-10"></a><a href="#__codelineno-179-10"><span class="linenos" data-linenos="10 "></span></a><span class="w">    </span><span class="k">parameter</span><span class="w"> </span><span class="n">WNT</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">2</span><span class="mb">&#39;b01</span><span class="p">;</span>
</span><span id="__span-179-11"><a id="__codelineno-179-11" name="__codelineno-179-11"></a><a href="#__codelineno-179-11"><span class="linenos" data-linenos="11 "></span></a><span class="w">    </span><span class="k">parameter</span><span class="w"> </span><span class="n">WT</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">2</span><span class="mb">&#39;b10</span><span class="p">;</span>
</span><span id="__span-179-12"><a id="__codelineno-179-12" name="__codelineno-179-12"></a><a href="#__codelineno-179-12"><span class="linenos" data-linenos="12 "></span></a><span class="w">    </span><span class="k">parameter</span><span class="w"> </span><span class="n">ST</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">2</span><span class="mb">&#39;b11</span><span class="p">;</span>
</span><span id="__span-179-13"><a id="__codelineno-179-13" name="__codelineno-179-13"></a><a href="#__codelineno-179-13"><span class="linenos" data-linenos="13 "></span></a>
</span><span id="__span-179-14"><a id="__codelineno-179-14" name="__codelineno-179-14"></a><a href="#__codelineno-179-14"><span class="linenos" data-linenos="14 "></span></a><span class="w">    </span><span class="k">always</span><span class="p">@(</span><span class="o">*</span><span class="p">)</span><span class="k">begin</span>
</span><span id="__span-179-15"><a id="__codelineno-179-15" name="__codelineno-179-15"></a><a href="#__codelineno-179-15"><span class="linenos" data-linenos="15 "></span></a><span class="w">        </span><span class="k">if</span><span class="p">(</span><span class="n">train_valid</span><span class="p">)</span><span class="k">begin</span>
</span><span id="__span-179-16"><a id="__codelineno-179-16" name="__codelineno-179-16"></a><a href="#__codelineno-179-16"><span class="linenos" data-linenos="16 "></span></a><span class="w">            </span><span class="k">case</span><span class="p">(</span><span class="n">state</span><span class="p">)</span>
</span><span id="__span-179-17"><a id="__codelineno-179-17" name="__codelineno-179-17"></a><a href="#__codelineno-179-17"><span class="linenos" data-linenos="17 "></span></a><span class="w">                </span><span class="nl">SNT:</span><span class="w"> </span><span class="n">next_state</span><span class="o">=</span><span class="w"> </span><span class="n">train_taken</span><span class="o">?</span><span class="w"> </span><span class="nl">WNT:</span><span class="w"> </span><span class="n">SNT</span><span class="p">;</span>
</span><span id="__span-179-18"><a id="__codelineno-179-18" name="__codelineno-179-18"></a><a href="#__codelineno-179-18"><span class="linenos" data-linenos="18 "></span></a><span class="w">                </span><span class="nl">WNT:</span><span class="w"> </span><span class="n">next_state</span><span class="o">=</span><span class="w"> </span><span class="n">train_taken</span><span class="o">?</span><span class="w"> </span><span class="nl">WT:</span><span class="w"> </span><span class="n">SNT</span><span class="p">;</span>
</span><span id="__span-179-19"><a id="__codelineno-179-19" name="__codelineno-179-19"></a><a href="#__codelineno-179-19"><span class="linenos" data-linenos="19 "></span></a><span class="w">                </span><span class="nl">WT:</span><span class="w"> </span><span class="n">next_state</span><span class="o">=</span><span class="w"> </span><span class="n">train_taken</span><span class="o">?</span><span class="w"> </span><span class="nl">ST:</span><span class="w"> </span><span class="n">WNT</span><span class="p">;</span>
</span><span id="__span-179-20"><a id="__codelineno-179-20" name="__codelineno-179-20"></a><a href="#__codelineno-179-20"><span class="linenos" data-linenos="20 "></span></a><span class="w">                </span><span class="nl">ST:</span><span class="w"> </span><span class="n">next_state</span><span class="o">=</span><span class="w"> </span><span class="n">train_taken</span><span class="o">?</span><span class="w"> </span><span class="nl">ST:</span><span class="w"> </span><span class="n">WT</span><span class="p">;</span>
</span><span id="__span-179-21"><a id="__codelineno-179-21" name="__codelineno-179-21"></a><a href="#__codelineno-179-21"><span class="linenos" data-linenos="21 "></span></a><span class="w">            </span><span class="k">endcase</span>
</span><span id="__span-179-22"><a id="__codelineno-179-22" name="__codelineno-179-22"></a><a href="#__codelineno-179-22"><span class="linenos" data-linenos="22 "></span></a><span class="w">        </span><span class="k">end</span>
</span><span id="__span-179-23"><a id="__codelineno-179-23" name="__codelineno-179-23"></a><a href="#__codelineno-179-23"><span class="linenos" data-linenos="23 "></span></a><span class="w">        </span><span class="k">else</span><span class="w"> </span><span class="n">next_state</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">state</span><span class="p">;</span>
</span><span id="__span-179-24"><a id="__codelineno-179-24" name="__codelineno-179-24"></a><a href="#__codelineno-179-24"><span class="linenos" data-linenos="24 "></span></a><span class="w">    </span><span class="k">end</span>
</span><span id="__span-179-25"><a id="__codelineno-179-25" name="__codelineno-179-25"></a><a href="#__codelineno-179-25"><span class="linenos" data-linenos="25 "></span></a>
</span><span id="__span-179-26"><a id="__codelineno-179-26" name="__codelineno-179-26"></a><a href="#__codelineno-179-26"><span class="linenos" data-linenos="26 "></span></a><span class="w">    </span><span class="k">always</span><span class="p">@(</span><span class="k">posedge</span><span class="w"> </span><span class="n">clk</span><span class="p">,</span><span class="w"> </span><span class="k">posedge</span><span class="w"> </span><span class="n">areset</span><span class="p">)</span><span class="k">begin</span>
</span><span id="__span-179-27"><a id="__codelineno-179-27" name="__codelineno-179-27"></a><a href="#__codelineno-179-27"><span class="linenos" data-linenos="27 "></span></a><span class="w">        </span><span class="k">if</span><span class="p">(</span><span class="n">areset</span><span class="p">)</span><span class="w"> </span><span class="n">state</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">WNT</span><span class="p">;</span>
</span><span id="__span-179-28"><a id="__codelineno-179-28" name="__codelineno-179-28"></a><a href="#__codelineno-179-28"><span class="linenos" data-linenos="28 "></span></a><span class="w">        </span><span class="k">else</span><span class="w"> </span><span class="n">state</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">next_state</span><span class="p">;</span>
</span><span id="__span-179-29"><a id="__codelineno-179-29" name="__codelineno-179-29"></a><a href="#__codelineno-179-29"><span class="linenos" data-linenos="29 "></span></a><span class="w">    </span><span class="k">end</span>
</span><span id="__span-179-30"><a id="__codelineno-179-30" name="__codelineno-179-30"></a><a href="#__codelineno-179-30"><span class="linenos" data-linenos="30 "></span></a><span class="k">endmodule</span>
</span></code></pre></div></p>
<hr />
<h3 id="cs450history-shift">Cs450/history shift<a class="headerlink" href="#cs450history-shift" title="Anchor link to this section for reference">⚓︎</a></h3>
<p>Website: <a href="https://hdlbits.01xz.net/wiki/Cs450/history_shift" target="_blank">https://hdlbits.01xz.net/wiki/Cs450/history_shift</a></p>
<p>這題就是簡單版的預測分支，題目很長，實際上滿簡單的，考驗英文能力。
<div class="language-verilog highlight"><span class="filename">Verilog</span><pre><span></span><code><span id="__span-180-1"><a id="__codelineno-180-1" name="__codelineno-180-1"></a><a href="#__codelineno-180-1"><span class="linenos" data-linenos=" 1 "></span></a><span class="k">module</span><span class="w"> </span><span class="n">top_module</span><span class="p">(</span>
</span><span id="__span-180-2"><a id="__codelineno-180-2" name="__codelineno-180-2"></a><a href="#__codelineno-180-2"><span class="linenos" data-linenos=" 2 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">clk</span><span class="p">,</span>
</span><span id="__span-180-3"><a id="__codelineno-180-3" name="__codelineno-180-3"></a><a href="#__codelineno-180-3"><span class="linenos" data-linenos=" 3 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">areset</span><span class="p">,</span>
</span><span id="__span-180-4"><a id="__codelineno-180-4" name="__codelineno-180-4"></a><a href="#__codelineno-180-4"><span class="linenos" data-linenos=" 4 "></span></a>
</span><span id="__span-180-5"><a id="__codelineno-180-5" name="__codelineno-180-5"></a><a href="#__codelineno-180-5"><span class="linenos" data-linenos=" 5 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">predict_valid</span><span class="p">,</span>
</span><span id="__span-180-6"><a id="__codelineno-180-6" name="__codelineno-180-6"></a><a href="#__codelineno-180-6"><span class="linenos" data-linenos=" 6 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">predict_taken</span><span class="p">,</span>
</span><span id="__span-180-7"><a id="__codelineno-180-7" name="__codelineno-180-7"></a><a href="#__codelineno-180-7"><span class="linenos" data-linenos=" 7 "></span></a><span class="w">    </span><span class="k">output</span><span class="w"> </span><span class="kt">reg</span><span class="w"> </span><span class="p">[</span><span class="mh">31</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">predict_history</span><span class="p">,</span>
</span><span id="__span-180-8"><a id="__codelineno-180-8" name="__codelineno-180-8"></a><a href="#__codelineno-180-8"><span class="linenos" data-linenos=" 8 "></span></a>
</span><span id="__span-180-9"><a id="__codelineno-180-9" name="__codelineno-180-9"></a><a href="#__codelineno-180-9"><span class="linenos" data-linenos=" 9 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">train_mispredicted</span><span class="p">,</span>
</span><span id="__span-180-10"><a id="__codelineno-180-10" name="__codelineno-180-10"></a><a href="#__codelineno-180-10"><span class="linenos" data-linenos="10 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">train_taken</span><span class="p">,</span>
</span><span id="__span-180-11"><a id="__codelineno-180-11" name="__codelineno-180-11"></a><a href="#__codelineno-180-11"><span class="linenos" data-linenos="11 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="p">[</span><span class="mh">31</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">train_history</span>
</span><span id="__span-180-12"><a id="__codelineno-180-12" name="__codelineno-180-12"></a><a href="#__codelineno-180-12"><span class="linenos" data-linenos="12 "></span></a><span class="p">);</span>
</span><span id="__span-180-13"><a id="__codelineno-180-13" name="__codelineno-180-13"></a><a href="#__codelineno-180-13"><span class="linenos" data-linenos="13 "></span></a><span class="w">    </span><span class="k">always</span><span class="p">@(</span><span class="k">posedge</span><span class="w"> </span><span class="n">clk</span><span class="p">,</span><span class="w"> </span><span class="k">posedge</span><span class="w"> </span><span class="n">areset</span><span class="p">)</span><span class="k">begin</span>
</span><span id="__span-180-14"><a id="__codelineno-180-14" name="__codelineno-180-14"></a><a href="#__codelineno-180-14"><span class="linenos" data-linenos="14 "></span></a><span class="w">        </span><span class="k">if</span><span class="p">(</span><span class="n">areset</span><span class="p">)</span><span class="w"> </span><span class="n">predict_history</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="mh">32</span><span class="mi">&#39;d0</span><span class="p">;</span>
</span><span id="__span-180-15"><a id="__codelineno-180-15" name="__codelineno-180-15"></a><a href="#__codelineno-180-15"><span class="linenos" data-linenos="15 "></span></a><span class="w">        </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="p">(</span><span class="n">train_mispredicted</span><span class="p">)</span><span class="w"> </span><span class="n">predict_history</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="p">{</span><span class="n">train_history</span><span class="p">[</span><span class="mh">30</span><span class="o">:</span><span class="mh">0</span><span class="p">],</span><span class="w"> </span><span class="n">train_taken</span><span class="p">};</span>
</span><span id="__span-180-16"><a id="__codelineno-180-16" name="__codelineno-180-16"></a><a href="#__codelineno-180-16"><span class="linenos" data-linenos="16 "></span></a><span class="w">        </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="p">(</span><span class="n">predict_valid</span><span class="p">)</span><span class="w"> </span><span class="n">predict_history</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="p">{</span><span class="n">predict_history</span><span class="p">[</span><span class="mh">30</span><span class="o">:</span><span class="mh">0</span><span class="p">],</span><span class="w"> </span><span class="n">predict_taken</span><span class="p">};</span>
</span><span id="__span-180-17"><a id="__codelineno-180-17" name="__codelineno-180-17"></a><a href="#__codelineno-180-17"><span class="linenos" data-linenos="17 "></span></a><span class="w">    </span><span class="k">end</span>
</span><span id="__span-180-18"><a id="__codelineno-180-18" name="__codelineno-180-18"></a><a href="#__codelineno-180-18"><span class="linenos" data-linenos="18 "></span></a><span class="k">endmodule</span>
</span></code></pre></div></p>
<hr />
<h3 id="cs450gshare">Cs450/gshare<a class="headerlink" href="#cs450gshare" title="Anchor link to this section for reference">⚓︎</a></h3>
<p>Website: <a href="https://hdlbits.01xz.net/wiki/Cs450/gshare" target="_blank">https://hdlbits.01xz.net/wiki/Cs450/gshare</a></p>
<p>這題就前兩題的綜合題，考驗的是英文閱讀能力，
<div class="language-verilog highlight"><span class="filename">Verilog</span><pre><span></span><code><span id="__span-181-1"><a id="__codelineno-181-1" name="__codelineno-181-1"></a><a href="#__codelineno-181-1"><span class="linenos" data-linenos=" 1 "></span></a><span class="k">module</span><span class="w"> </span><span class="n">top_module</span><span class="p">(</span>
</span><span id="__span-181-2"><a id="__codelineno-181-2" name="__codelineno-181-2"></a><a href="#__codelineno-181-2"><span class="linenos" data-linenos=" 2 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">clk</span><span class="p">,</span>
</span><span id="__span-181-3"><a id="__codelineno-181-3" name="__codelineno-181-3"></a><a href="#__codelineno-181-3"><span class="linenos" data-linenos=" 3 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">areset</span><span class="p">,</span>
</span><span id="__span-181-4"><a id="__codelineno-181-4" name="__codelineno-181-4"></a><a href="#__codelineno-181-4"><span class="linenos" data-linenos=" 4 "></span></a>
</span><span id="__span-181-5"><a id="__codelineno-181-5" name="__codelineno-181-5"></a><a href="#__codelineno-181-5"><span class="linenos" data-linenos=" 5 "></span></a><span class="w">    </span><span class="k">input</span><span class="w">  </span><span class="n">predict_valid</span><span class="p">,</span>
</span><span id="__span-181-6"><a id="__codelineno-181-6" name="__codelineno-181-6"></a><a href="#__codelineno-181-6"><span class="linenos" data-linenos=" 6 "></span></a><span class="w">    </span><span class="k">input</span><span class="w">  </span><span class="p">[</span><span class="mh">6</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">predict_pc</span><span class="p">,</span>
</span><span id="__span-181-7"><a id="__codelineno-181-7" name="__codelineno-181-7"></a><a href="#__codelineno-181-7"><span class="linenos" data-linenos=" 7 "></span></a><span class="w">    </span><span class="k">output</span><span class="w"> </span><span class="n">predict_taken</span><span class="p">,</span>
</span><span id="__span-181-8"><a id="__codelineno-181-8" name="__codelineno-181-8"></a><a href="#__codelineno-181-8"><span class="linenos" data-linenos=" 8 "></span></a><span class="w">    </span><span class="k">output</span><span class="w"> </span><span class="p">[</span><span class="mh">6</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">predict_history</span><span class="p">,</span>
</span><span id="__span-181-9"><a id="__codelineno-181-9" name="__codelineno-181-9"></a><a href="#__codelineno-181-9"><span class="linenos" data-linenos=" 9 "></span></a>
</span><span id="__span-181-10"><a id="__codelineno-181-10" name="__codelineno-181-10"></a><a href="#__codelineno-181-10"><span class="linenos" data-linenos="10 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">train_valid</span><span class="p">,</span>
</span><span id="__span-181-11"><a id="__codelineno-181-11" name="__codelineno-181-11"></a><a href="#__codelineno-181-11"><span class="linenos" data-linenos="11 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">train_taken</span><span class="p">,</span>
</span><span id="__span-181-12"><a id="__codelineno-181-12" name="__codelineno-181-12"></a><a href="#__codelineno-181-12"><span class="linenos" data-linenos="12 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="n">train_mispredicted</span><span class="p">,</span>
</span><span id="__span-181-13"><a id="__codelineno-181-13" name="__codelineno-181-13"></a><a href="#__codelineno-181-13"><span class="linenos" data-linenos="13 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="p">[</span><span class="mh">6</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">train_history</span><span class="p">,</span>
</span><span id="__span-181-14"><a id="__codelineno-181-14" name="__codelineno-181-14"></a><a href="#__codelineno-181-14"><span class="linenos" data-linenos="14 "></span></a><span class="w">    </span><span class="k">input</span><span class="w"> </span><span class="p">[</span><span class="mh">6</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">train_pc</span>
</span><span id="__span-181-15"><a id="__codelineno-181-15" name="__codelineno-181-15"></a><a href="#__codelineno-181-15"><span class="linenos" data-linenos="15 "></span></a><span class="p">);</span>
</span><span id="__span-181-16"><a id="__codelineno-181-16" name="__codelineno-181-16"></a><a href="#__codelineno-181-16"><span class="linenos" data-linenos="16 "></span></a><span class="w">    </span><span class="c1">//update PHT</span>
</span><span id="__span-181-17"><a id="__codelineno-181-17" name="__codelineno-181-17"></a><a href="#__codelineno-181-17"><span class="linenos" data-linenos="17 "></span></a><span class="w">    </span><span class="kt">reg</span><span class="w"> </span><span class="p">[</span><span class="mh">1</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">PHT</span><span class="w"> </span><span class="p">[</span><span class="mh">127</span><span class="o">:</span><span class="mh">0</span><span class="p">];</span>
</span><span id="__span-181-18"><a id="__codelineno-181-18" name="__codelineno-181-18"></a><a href="#__codelineno-181-18"><span class="linenos" data-linenos="18 "></span></a><span class="w">    </span><span class="kt">wire</span><span class="w"> </span><span class="p">[</span><span class="mh">6</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="n">hash</span><span class="p">;</span>
</span><span id="__span-181-19"><a id="__codelineno-181-19" name="__codelineno-181-19"></a><a href="#__codelineno-181-19"><span class="linenos" data-linenos="19 "></span></a><span class="w">    </span><span class="k">assign</span><span class="w"> </span><span class="n">hash</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">train_pc</span><span class="w"> </span><span class="o">^</span><span class="w"> </span><span class="n">train_history</span><span class="p">;</span>
</span><span id="__span-181-20"><a id="__codelineno-181-20" name="__codelineno-181-20"></a><a href="#__codelineno-181-20"><span class="linenos" data-linenos="20 "></span></a><span class="w">    </span><span class="k">integer</span><span class="w"> </span><span class="n">i</span><span class="p">;</span><span class="w">    </span>
</span><span id="__span-181-21"><a id="__codelineno-181-21" name="__codelineno-181-21"></a><a href="#__codelineno-181-21"><span class="linenos" data-linenos="21 "></span></a><span class="w">    </span><span class="k">always</span><span class="p">@(</span><span class="k">posedge</span><span class="w"> </span><span class="n">clk</span><span class="p">,</span><span class="w"> </span><span class="k">posedge</span><span class="w"> </span><span class="n">areset</span><span class="p">)</span><span class="k">begin</span>
</span><span id="__span-181-22"><a id="__codelineno-181-22" name="__codelineno-181-22"></a><a href="#__codelineno-181-22"><span class="linenos" data-linenos="22 "></span></a><span class="w">        </span><span class="k">if</span><span class="p">(</span><span class="n">areset</span><span class="p">)</span><span class="k">begin</span>
</span><span id="__span-181-23"><a id="__codelineno-181-23" name="__codelineno-181-23"></a><a href="#__codelineno-181-23"><span class="linenos" data-linenos="23 "></span></a><span class="w">            </span><span class="k">for</span><span class="p">(</span><span class="n">i</span><span class="o">=</span><span class="mh">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">&lt;</span><span class="mh">128</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span><span class="k">begin</span>
</span><span id="__span-181-24"><a id="__codelineno-181-24" name="__codelineno-181-24"></a><a href="#__codelineno-181-24"><span class="linenos" data-linenos="24 "></span></a><span class="w">                </span><span class="n">PHT</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="mh">2</span><span class="mb">&#39;b01</span><span class="p">;</span>
</span><span id="__span-181-25"><a id="__codelineno-181-25" name="__codelineno-181-25"></a><a href="#__codelineno-181-25"><span class="linenos" data-linenos="25 "></span></a><span class="w">            </span><span class="k">end</span>
</span><span id="__span-181-26"><a id="__codelineno-181-26" name="__codelineno-181-26"></a><a href="#__codelineno-181-26"><span class="linenos" data-linenos="26 "></span></a><span class="w">        </span><span class="k">end</span><span class="w"> </span>
</span><span id="__span-181-27"><a id="__codelineno-181-27" name="__codelineno-181-27"></a><a href="#__codelineno-181-27"><span class="linenos" data-linenos="27 "></span></a><span class="w">        </span><span class="k">else</span><span class="w"> </span><span class="k">begin</span>
</span><span id="__span-181-28"><a id="__codelineno-181-28" name="__codelineno-181-28"></a><a href="#__codelineno-181-28"><span class="linenos" data-linenos="28 "></span></a><span class="w">            </span><span class="k">if</span><span class="p">(</span><span class="n">train_taken</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="n">train_valid</span><span class="p">)</span><span class="w"> </span><span class="n">PHT</span><span class="p">[</span><span class="n">hash</span><span class="p">]</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="p">(</span><span class="n">PHT</span><span class="p">[</span><span class="n">hash</span><span class="p">]</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mh">2</span><span class="mb">&#39;b11</span><span class="p">)</span><span class="o">?</span><span class="w"> </span><span class="mh">2</span><span class="mb">&#39;b11</span><span class="o">:</span><span class="w"> </span><span class="n">PHT</span><span class="p">[</span><span class="n">hash</span><span class="p">]</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mh">2</span><span class="mb">&#39;b01</span><span class="p">;</span>
</span><span id="__span-181-29"><a id="__codelineno-181-29" name="__codelineno-181-29"></a><a href="#__codelineno-181-29"><span class="linenos" data-linenos="29 "></span></a><span class="w">            </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="p">(</span><span class="o">~</span><span class="n">train_taken</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="n">train_valid</span><span class="p">)</span><span class="w"> </span><span class="n">PHT</span><span class="p">[</span><span class="n">hash</span><span class="p">]</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="p">(</span><span class="n">PHT</span><span class="p">[</span><span class="n">hash</span><span class="p">]</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mh">2</span><span class="mb">&#39;b00</span><span class="p">)</span><span class="o">?</span><span class="w"> </span><span class="mh">2</span><span class="mb">&#39;b00</span><span class="o">:</span><span class="w"> </span><span class="n">PHT</span><span class="p">[</span><span class="n">hash</span><span class="p">]</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mh">2</span><span class="mb">&#39;b01</span><span class="p">;</span>
</span><span id="__span-181-30"><a id="__codelineno-181-30" name="__codelineno-181-30"></a><a href="#__codelineno-181-30"><span class="linenos" data-linenos="30 "></span></a><span class="w">        </span><span class="k">end</span>
</span><span id="__span-181-31"><a id="__codelineno-181-31" name="__codelineno-181-31"></a><a href="#__codelineno-181-31"><span class="linenos" data-linenos="31 "></span></a><span class="w">    </span><span class="k">end</span><span class="w">    </span>
</span><span id="__span-181-32"><a id="__codelineno-181-32" name="__codelineno-181-32"></a><a href="#__codelineno-181-32"><span class="linenos" data-linenos="32 "></span></a>
</span><span id="__span-181-33"><a id="__codelineno-181-33" name="__codelineno-181-33"></a><a href="#__codelineno-181-33"><span class="linenos" data-linenos="33 "></span></a><span class="w">    </span><span class="k">assign</span><span class="w"> </span><span class="n">predict_taken</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">PHT</span><span class="p">[</span><span class="n">predict_pc</span><span class="w"> </span><span class="o">^</span><span class="w"> </span><span class="n">predict_history</span><span class="p">][</span><span class="mh">1</span><span class="p">];</span>
</span><span id="__span-181-34"><a id="__codelineno-181-34" name="__codelineno-181-34"></a><a href="#__codelineno-181-34"><span class="linenos" data-linenos="34 "></span></a><span class="w">    </span><span class="c1">//update predict history</span>
</span><span id="__span-181-35"><a id="__codelineno-181-35" name="__codelineno-181-35"></a><a href="#__codelineno-181-35"><span class="linenos" data-linenos="35 "></span></a><span class="w">    </span><span class="k">always</span><span class="p">@(</span><span class="k">posedge</span><span class="w"> </span><span class="n">clk</span><span class="p">,</span><span class="w"> </span><span class="k">posedge</span><span class="w"> </span><span class="n">areset</span><span class="p">)</span><span class="k">begin</span>
</span><span id="__span-181-36"><a id="__codelineno-181-36" name="__codelineno-181-36"></a><a href="#__codelineno-181-36"><span class="linenos" data-linenos="36 "></span></a><span class="w">        </span><span class="k">if</span><span class="p">(</span><span class="n">areset</span><span class="p">)</span><span class="w"> </span><span class="n">predict_history</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="mh">7</span><span class="mi">&#39;d0</span><span class="p">;</span>
</span><span id="__span-181-37"><a id="__codelineno-181-37" name="__codelineno-181-37"></a><a href="#__codelineno-181-37"><span class="linenos" data-linenos="37 "></span></a><span class="w">        </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="p">(</span><span class="n">train_valid</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="n">train_mispredicted</span><span class="p">)</span><span class="w"> </span><span class="n">predict_history</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="p">{</span><span class="n">train_history</span><span class="p">[</span><span class="mh">5</span><span class="o">:</span><span class="mh">0</span><span class="p">],</span><span class="w"> </span><span class="n">train_taken</span><span class="p">};</span>
</span><span id="__span-181-38"><a id="__codelineno-181-38" name="__codelineno-181-38"></a><a href="#__codelineno-181-38"><span class="linenos" data-linenos="38 "></span></a><span class="w">        </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="p">(</span><span class="n">predict_valid</span><span class="p">)</span><span class="w"> </span><span class="n">predict_history</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="p">{</span><span class="n">predict_history</span><span class="p">[</span><span class="mh">5</span><span class="o">:</span><span class="mh">0</span><span class="p">],</span><span class="w"> </span><span class="n">predict_taken</span><span class="p">};</span>
</span><span id="__span-181-39"><a id="__codelineno-181-39" name="__codelineno-181-39"></a><a href="#__codelineno-181-39"><span class="linenos" data-linenos="39 "></span></a><span class="w">    </span><span class="k">end</span>
</span><span id="__span-181-40"><a id="__codelineno-181-40" name="__codelineno-181-40"></a><a href="#__codelineno-181-40"><span class="linenos" data-linenos="40 "></span></a>
</span><span id="__span-181-41"><a id="__codelineno-181-41" name="__codelineno-181-41"></a><a href="#__codelineno-181-41"><span class="linenos" data-linenos="41 "></span></a><span class="k">endmodule</span>
</span></code></pre></div></p>





                
              </article>
            </div>
          
          
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.instant", "navigation.tracking", "navigation.prune", "navigation.indexes", "content.code.copy", "content.code.select", "content.code.annotate", "search.suggest", "search.highlight", "search.share"], "search": "../../assets/javascripts/workers/search.74e28a9f.min.js", "translations": {"clipboard.copied": "\u5df2\u8907\u88fd", "clipboard.copy": "\u8907\u88fd", "search.result.more.one": "\u6b64\u9801\u5c1a\u6709 1 \u500b\u7b26\u5408\u7684\u9805\u76ee", "search.result.more.other": "\u6b64\u9801\u5c1a\u6709 # \u500b\u7b26\u5408\u7684\u9805\u76ee", "search.result.none": "\u6c92\u6709\u7b26\u5408\u7684\u9805\u76ee", "search.result.one": "\u627e\u5230 1 \u500b\u7b26\u5408\u7684\u9805\u76ee", "search.result.other": "\u627e\u5230 # \u500b\u7b26\u5408\u7684\u9805\u76ee", "search.result.placeholder": "\u6253\u5b57\u9032\u884c\u641c\u5c0b", "search.result.term.missing": "\u7f3a\u5c11\u5b57\u8a5e", "select.version": "\u9078\u64c7\u7248\u672c"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.220ee61c.min.js"></script>
      
        
          <script src="../../javascripts/mathjax.js"></script>
        
      
        
          <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
        
      
        
          <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
        
      
    
  </body>
</html>